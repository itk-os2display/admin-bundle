/**
 * @name Os2DisplayAdminBundle
 * @version v1.0.0
 * @link https://github.com/os2display
 */
if(angular.module("busModule").service("busService",["$rootScope","$window",function(e,t){"use strict";t.rootScopes=t.rootScopes||[],t.rootScopes.push(e),this.$emit=function(e,i){angular.forEach(t.rootScopes,function(t){t.$emit(e,i)})},this.$on=function(t,i){return e.$on(t,function(t,o){i.apply(e,[t,o])})},this.$once=function(t,i){var o=e.$on(t,function(t,n){o(),i.apply(e,[t,n])})}}]),!window.config||!window.config.itkLog)throw"itkLog Exception: window.config.itkLog does not exist";angular.module("logModule").service("logService",["busService","$http","$timeout","$log",function(e,t,i,o){"use strict";var n=window.config.itkLog;function s(e,t,i,o){return{type:e,date:new Date,timeout:t,message:o,cause:i,stacktrace:printStackTrace()}}e.$on("log.error",function(i,r){if("none"!==n.logLevel){var a=s("error",r.timeout,r.cause,r.msg);e.$emit("messages.add",a),n.logToConsole&&o.error(a),n.errorCallback&&t.post(n.errorCallback,a)}}),e.$on("log.log",function(t,i){if("all"===n.logLevel){var r=s("log",i.timeout,i.cause,i.msg);e.$emit("messages.add",r),n.logToConsole&&o.log(r)}}),e.$on("log.info",function(t,i){if("all"===n.logLevel){var r=s("info",i.timeout,i.cause,i.msg);e.$emit("messages.add",r),n.logToConsole&&o.info(r)}}),e.$on("log.warn",function(t,i){if("all"===n.logLevel){var r=s("warn",i.timeout,i.cause,i.msg);e.$emit("messages.add",r),n.logToConsole&&o.warn(r)}})}]),angular.module("mainModule").controller("BaseController",["$scope","userService","$location",function(e,t,i){"use strict";function o(e,t){return e&&e.api_data&&e.api_data.permissions&&e.api_data.permissions[t]}e.baseCurrentUser=t.getCurrentUser(),e.requireRole=function(e){return t.hasRole(e)},e.hasRole=function(e,i){return t.hasRole(e,i)},e.baseCanRead=function(e){return o(e,"can_read")},e.baseCanUpdate=function(e){return o(e,"can_update")},e.baseCanDelete=function(e){return o(e,"can_delete")},e.baseCanCreate=function(t){return o(e.baseCurrentUser,"can_create_"+t)},e.baseCanAdd=function(t){return o(e.baseCurrentUser,"can_add_"+t)},e.baseRemoveElementFromList=function(e,t,i){var o=e.findIndex(function(e){return t[i]===e[i]});return void 0!==o?e.splice(o,1):null}}]),angular.module("mainModule").controller("BaseApiController",["busService","$scope","$controller","$timeout","$q",function(e,t,i,o,n){"use strict";i("BaseController",{$scope:t});var s=[];function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}t.getEntity=function(t,i){var o=n.defer(),a=r();return s.push(e.$on("BaseApiController.returnEntity."+a,function(e,t){t&&t.error?o.reject(t.error):o.resolve(t)})),e.$emit("apiService.getEntity",{type:t,returnEvent:"BaseApiController.returnEntity."+a,data:i}),o.promise},t.getEntities=function(t){var i=n.defer(),o=r();return s.push(e.$on("BaseApiController.returnEntities."+o,function(e,t){t&&t.error?i.reject(t.error):i.resolve(t)})),e.$emit("apiService.getEntities",{type:t,returnEvent:"BaseApiController.returnEntities."+o}),i.promise},t.updateEntity=function(t,i){var o=n.defer(),a=r();return s.push(e.$on("BaseApiController.updateEntity."+a,function(e,t){t&&t.error?o.reject(t.error):o.resolve(t)})),e.$emit("apiService.updateEntity",{type:t,returnEvent:"BaseApiController.updateEntity."+a,data:i}),o.promise},t.createEntity=function(t,i){var o=n.defer(),a=r();return s.push(e.$on("BaseApiController.createEntity."+a,function(e,t){t&&t.error?o.reject(t.error):o.resolve(t)})),e.$emit("apiService.createEntity",{type:t,returnEvent:"BaseApiController.createEntity."+a,data:i}),o.promise},t.deleteEntity=function(t,i){var o=n.defer(),a=r();return s.push(e.$on("BaseApiController.deleteEntity."+a,function(e,t){t&&t.error?o.reject(t.error):o.resolve(t)})),e.$emit("apiService.deleteEntity",{type:t,returnEvent:"BaseApiController.deleteEntity."+a,data:i}),o.promise},t.baseApiRequest=function(t,i,o){var a=n.defer(),h=r();return s.push(e.$on("BaseApiController.baseApiRequest."+h,function(e,t){t&&t.error?a.reject(t.error):a.resolve(t)})),e.$emit("apiService.request",{method:t,url:i,returnEvent:"BaseApiController.baseApiRequest."+h,data:o}),a.promise},t.$on("$destroy",function(){for(var e in s)s[e]()})}]),angular.module("mainModule").service("apiService",["busService","$http",function(e,t){"use strict";function i(i,o,n,s){o+=(o.indexOf("?")<0?"?":"&")+"locale=da",t({method:i,url:o,data:s}).then(function(t){e.$emit(n,t.data)},function(t){401!==t.status&&e.$emit(n,t.data)})}e.$on("apiService.request",function(e,t){i(t.method,t.url,t.returnEvent,t.data)}),e.$on("apiService.getEntities",function(e,t){i("get","/api/"+t.type,t.returnEvent)}),e.$on("apiService.getEntity",function(e,t){i("get","/api/"+t.type+"/"+t.data.id,t.returnEvent)}),e.$on("apiService.createEntity",function(e,t){i("post","/api/"+t.type,t.returnEvent,t.data)}),e.$on("apiService.updateEntity",function(e,t){i("put","/api/"+t.type+"/"+t.data.id,t.returnEvent,t.data)}),e.$on("apiService.deleteEntity",function(e,t){i("delete","/api/"+t.type+"/"+t.data.id,t.returnEvent,t.data)})}]),angular.module("mainModule").service("bodyService",["busService","$location",function(e,t){"use strict";var i=[];e.$on("$locationChangeSuccess",function(){for(var e in i)angular.element("body").removeClass(i[e]);i=[]}),e.$on("bodyService.addClass",function(e,t){angular.element("body").addClass(t),i.push(t)}),e.$on("bodyService.toggleClass",function(e,t){angular.element("body").toggleClass(t),i.push(t)}),e.$on("bodyService.removeClass",function(e,t){angular.element("body").removeClass(t)})}]),angular.module("mainModule").service("menuItemService",["busService",function(e){"use strict";e.$on("menuApp.requestSubMenuItems",function(t,i){e.$emit("menuApp.returnSubMenuItems",[{mainMenuItem:"screen",items:[{title:"Opret skærm",path:"/#/screen",classes:"create-channel",activeFilter:"/screen",group:"left",weight:2},{title:"Oversigt sub",path:"/#/screen-overview",classes:"overview-right",activeFilter:"/screen-overview",group:"right",icon:"apps",weight:3}]},{mainMenuItem:"channel",items:[{title:"Oversigt",path:"/#/channel-overview",classes:"overview-right",activeFilter:"/channel-overview",group:"right",icon:"apps"},{title:"Opret kanal",path:"/#/channel",classSuffix:"create-channel",activeFilter:"/channel",group:"left"},{title:"Delte kanaler",path:"/#/shared-channel-overview",classSuffix:"overview",activeFilter:"/shared-channel-overview",group:"left"}]},{mainMenuItem:"slide",items:[{title:"Oversigt",path:"/#/slide-overview",classes:"overview-right",activeFilter:"/slide-overview",group:"right",icon:"apps"},{title:"Opret slide",path:"/#/slide",classSuffix:"create-channel",activeFilter:"/slide",group:"left"}]},{mainMenuItem:"media",items:[{title:"Oversigt",path:"/#/media-overview",classes:"overview-right",activeFilter:"/media-overview",group:"right",icon:"apps"},{title:"Upload medie",path:"/#/media/upload",classSuffix:"create-media",activeFilter:"/media/upload",group:"left"}]}])}),e.$on("menuApp.requestMainMenuItems",function(t,i){e.$emit("menuApp.returnMainMenuItems",[{title:"Kanaler",route:"/#/channel-overview",activeFilter:"/channel",icon:"add_to_queue",weight:1},{title:"Skærme",route:"/#/screen-overview",activeFilter:"/screen",icon:"tv",weight:3},{title:"Slides",route:"/#/slide-overview",activeFilter:"/slide",icon:"dvr",weight:2},{title:"Medier",route:"/#/media-overview",activeFilter:"/media",icon:"picture_in_picture",weight:4}])}),e.$on("menuApp.requestHamburgerMenuItems",function(t,i){e.$emit("menuApp.returnHamburgerMenuItems",[{title:"Kanaler",weight:1,items:[{title:"Oversigt",route:"/#/channel-overview",activeFilter:"/channel-overview",weight:1},{title:"Opret kanal",route:"/#/channel",activeFilter:"/channel",weight:2}]},{title:"Slides",weight:2,items:[{title:"Oversigt",route:"/#/slide-overview",activeFilter:"/slide-overview",weight:1},{title:"Opret slide",route:"/#/slide",activeFilter:"/slide",weight:2}]},{title:"Skærme",weight:3,items:[{title:"Oversigt",route:"/#/screen-overview",activeFilter:"/screen-overview",weight:1},{title:"Opret skærm",route:"/#/screen",activeFilter:"/screen",weight:2}]},{title:"Administration",weight:3,permission:"super-admin",items:[{title:"Deling",route:"/#/admin-sharing",activeFilter:"/admin-sharing",permission:"super-admin",weight:1},{title:"Skabeloner",route:"/#/admin-templates",activeFilter:"/admin-sharing",permission:"super-admin",weight:2}]}])})}]),angular.module("mainModule").service("searchService",["$q","$http","busService",function(e,t,i){"use strict";var o,n=null;function s(e){(o=io.connect(window.config.search.address,{query:"token="+n,"force new connection":!0,"max reconnection attempts":1/0})).on("error",function(o){"Not authorized"===o?t.get("api/auth/search/reauth").success(function(t){n=t.token,s(e)}).error(function(t,o){i.$emit("log.error",{cause:o,msg:"Search socket error. Could not reauthorize."}),e.reject(o)}):(i.$emit("log.error",{cause:o,msg:"Search socket error."}),e.reject(o))}),o.on("connect",function(){e.resolve("Connected to the server.")}),o.on("disconnect",function(e){})}i.$on("searchService.request",function(r,a){var h,d={index:window.config.search.index,type:a.type,query:{match_all:{}}};void 0!==a.text&&""!==a.text&&(d.query={multi_match:{query:a.text,type:"best_fields",operator:"or",fields:a.fields,analyzer:"string_search"}}),d.sort=a.sort,void 0!==a.filter&&(d.query={filtered:{query:d.query,filter:a.filter}}),a.hasOwnProperty("pager")&&(d.size=a.pager.size,d.from=a.pager.page*a.pager.size),d.uuid=CryptoJS.MD5(JSON.stringify(d)).toString(),d.callbacks={hits:"hits-"+d.uuid,error:"error-"+d.uuid},(h=e.defer(),void 0===o?null!==n?s(h):t.get("api/auth/search").success(function(e){n=e.token,s(h)}).error(function(e,t){i.$emit("log.error",{cause:t,msg:"Authentication (search) to search node failed ("+t+")"}),h.reject(t)}):h.resolve("Connected to the server."),h.promise).then(function(){o.once(d.callbacks.hits,function(e){i.$emit(a.callbacks.hits,e)}),o.once(d.callbacks.error,function(e){i.$emit("log.error",{cause:e.message,msg:"Search error."}),i.$emit(a.callbacks.error,e.message)}),o.emit("search",d)})})}]),angular.module("mainModule").service("userService",["busService",function(e){"use strict";var t=angular.copy(OS2DISPLAY_CURRENT_USER);e.$on("userService.getCurrentUser",function(i,o){e.$emit("userService.returnCurrentUser",t)}),e.$on("userService.apiServiceReturnCurrentUser",function(e,i){t=i}),this.updateCurrentUser=function(){e.$emit("apiService.request",{method:"get",url:"api/user/current",returnEvent:"userService.apiServiceReturnCurrentUser"})},this.getCurrentUser=function(){return t},this.hasRole=function(e,i){i||(i=t);var o=Object.keys(i.api_data.roles).map(function(e){return i.api_data.roles[e]});return i&&i.api_data&&i.api_data.roles&&-1!==o.indexOf(e)},this.getCurrentUserGroups=function(i){e.$emit(i,t.groups)}}]),angular.module("mainModule").service("authHttpResponseInterceptor",["$q","$window",function(e,t){"use strict";this.responseError=function(i){if(401!==i.status)return e.reject(i);t.location.href="/logout"}}]),angular.module("datetimePicker",[]),angular.module("datetimePicker").directive("datetimePicker",["$timeout",function(e){return{scope:{config:"="},restrict:"A",require:"^ngModel",link:function(t,i,o,n){var s="DD/MM/YYYY HH:mm",r=null;r=t.config?t.config:{lang:"da",format:"d/m/Y H:i",scrollMonth:!1,scrollTime:!1},e(function(){n.$modelValue&&(r.value=moment(1e3*n.$modelValue).format(s)),i.datetimepicker(r),n.$formatters.unshift(function(e){return e?moment(1e3*e).format(s):""}),n.$parsers.unshift(function(e){if(""==e)return null;var t=moment(e,s);return t&&t.isValid()&&t.year()>=1970?t.unix():null}),t.$watch(function(){return n.$modelValue},function(e){e&&(r.value=moment(1e3*e).format(s),i.datetimepicker("destroy"),i.datetimepicker(r))})})}}}]),angular.module("datetimePicker").directive("hourPicker",function(){return{restrict:"A",require:"^ngModel",link:function(e,t){t.datetimepicker({datepicker:!1,format:"G"})}}}),angular.module("datetimePicker").directive("datetimePickerText",["$timeout",function(e){return{restrict:"A",require:"^ngModel",link:function(t,i,o,n){var s="DD/MM/YYYY HH:mm";e(function(){n.$formatters.unshift(function(e){return e?moment(1e3*e).format(s):""}),n.$parsers.unshift(function(e){if(""==e)return null;var t=moment(e,s);return t&&t.isValid()&&t.year()>=1970?t.unix():null}),n.$modelValue&&(n.$setViewValue(moment(1e3*n.$modelValue).format(s)),n.$render()),i.bind("blur",function(){var e=moment(n.$viewValue,s);e&&e.isValid()&&e.year()>=1970?n.$modelValue=e.unix():n.$modelValue=moment().unix(),n.$setViewValue(moment(1e3*n.$modelValue).format(s)),n.$render()})})}}}]),angular.module("styleguideComponentsModule",[]),angular.module("styleguideComponentsModule").directive("box",function(){return{restrict:"E",transclude:!0,replace:!0,scope:{heading:"@"},template:'<article class="box"><h2 class="heading-has-spacing-after" ng-if="heading">{{ heading }}</h2><div class="box--inner" ng-transclude></div></article>'}}),angular.module("styleguideComponentsModule").directive("buttonIconLink",function(){return{restrict:"E",replace:!0,scope:{buttonLink:"@",icon:"@",click:"&"},template:'<div class="button-icon-link has-spacing-after" ng-click="click()"><i class="icon-rounded material-icons">{{ icon }}</i><span class="button-text has-spacing-before">{{ buttonLink }}</span></div>'}}),angular.module("styleguideComponentsModule").directive("contentList",function(){return{restrict:"E",replace:!0,scope:{items:"=",max:"=",filter:"=",order:"="},template:'<div class="content-list"><content-list-item ng-repeat="item in items | filter: filter | orderBy: order | limitTo: max" item="item"></content-list-item></div>'}}),angular.module("styleguideComponentsModule").directive("contentListItem",function(){return{restrict:"E",replace:!0,scope:{item:"="},template:'<div class="content-list-item"><span class="content-list-item--link"><a href="{{ item.url }}" title="{{ item.title }}" ng-if="item.url">{{ item.title }}</a><span class="button-text {{ data.class }}" ng-if="!item.url" ng-click="item.click(item.entity)">{{ item.title }}</span></span><span class="content-list-item--text" ng-if="item.text">{{ item.text }}</span><panel-menu items="item.actions" ng-if="item.actions"></panel-menu></div>'}}),angular.module("styleguideComponentsModule").directive("panelMenu",["$document",function(e){return{restrict:"E",replace:!0,scope:{items:"="},link:function(e){function t(i){e.$apply(function(){e.menuOpen=!1,document.removeEventListener("click",t)})}e.menuOpen=!1,e.toggleMenu=function(){e.menuOpen=!e.menuOpen,setTimeout(function(){e.menuOpen&&document.addEventListener("click",t)})}},template:'<div><span class="content-list-item--icon" ng-click="toggleMenu()"><i class="icon-default material-icons">more_vert</i></span><div class="panel-menu is-positioned" ng-class="{\'is-hidden\': !menuOpen}"><div class="panel-menu--inner"><box><content-list items="items" ng-click="menuOpen = false"></content-list></box></div></div></div>'}}]),angular.module("styleguideComponentsModule").directive("popup",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="popup is-visible is-positioned"><div class="popup--dialog is-visible is-positioned"><div class="popup--content" ng-transclude></div></div></div>'}}),angular.module("ikShared").factory("mediaFactory",["$http","$q","busService",function(e,t,i){"use strict";var o={};return o.getAllMedia=function(){var i=t.defer();return e.get("/api/media").success(function(e){i.resolve(e)}).error(function(){i.reject()}),i.promise},o.searchMedia=function(e){var o=t.defer();e.type="Os2Display\\MediaBundle\\Entity\\Media";var n=CryptoJS.MD5(JSON.stringify(e)).toString();return e.callbacks={hits:"searchService.hits-"+n,error:"searchService.error-"+n},i.$once(e.callbacks.hits,function(e,t){o.resolve(t)}),i.$once(e.callbacks.error,function(e,t){i.$emit("log.error",{cause:t,msg:"Kunne ikke hente søgeresultater."}),o.reject(t)}),i.$emit("searchService.request",e),o.promise},o.loadMediaBulk=function(i){var o=t.defer(),n="?ids[]="+i.join("&ids[]=");return e.get("/api/bulk/media/api"+n).success(function(e,t){o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise},o.getMedia=function(i){var o=t.defer();return e.get("/api/media/"+i).success(function(e){o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise},o.updateMedia=function(i){var o=t.defer();return e.put("/api/media/"+i.id,i).success(function(e){o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise},o.deleteMedia=function(i){var o=t.defer();return e.delete("/api/media/"+i).success(function(e){o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise},o}]),angular.module("ikShared").factory("templateFactory",["$q","$http",function(e,t){"use strict";var i={},o=null,n=null;return i.getSlideTemplates=function(){var i=e.defer();return null!==o?i.resolve(o):t.get("/api/templates/slides/all").success(function(e){o=e,i.resolve(o)}).error(function(e,t){i.reject(t)}),i.promise},i.getSlideTemplate=function(t){var o=e.defer();return i.getSlideTemplates().then(function(e){for(var i=0;i<e.length;i++)if(e[i].id===t)return void o.resolve(e[i]);o.reject(404)},function(e){o.reject(e)}),o.promise},i.getScreenTemplates=function(){var i=e.defer();return null!==n?i.resolve(n):t.get("/api/templates/screens/all").success(function(e){n=e,i.resolve(n)}).error(function(e,t){i.reject(t)}),i.promise},i.getScreenTemplate=function(t){var o=e.defer();return i.getScreenTemplates().then(function(e){for(var i=0;i<e.length;i++)if(e[i].id===t)return void o.resolve(e[i]);o.reject(404)},function(e){o.reject(e)}),o.promise},i.saveEnabledTemplates=function(i,s){var r=e.defer();return t.post("/api/templates/save/enabled",{screens:i,slides:s}).success(function(e,i){t.get("/api/templates/slides/enabled").success(function(e){o=e}).error(function(e,t){}),t.get("/api/templates/screens/enabled").success(function(e){n=e}).error(function(e,t){}),r.resolve(i)}).error(function(e,t){r.reject(t)}),r.promise},i.getEnabledSlideTemplates=function(){var i=e.defer();return t.get("/api/templates/slides/enabled").success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},i.getEnabledScreenTemplates=function(){var i=e.defer();return t.get("/api/templates/screens/enabled").success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},i}]),angular.module("ikShared").factory("slideFactory",["$http","$q","busService",function(e,t,i){"use strict";var o={},n=null;return o.searchSlides=function(e){var o=t.defer();e.type="Os2Display\\CoreBundle\\Entity\\Slide";var n=CryptoJS.MD5(JSON.stringify(e)).toString();return e.callbacks={hits:"searchService.hits-"+n,error:"searchService.error-"+n},i.$once(e.callbacks.hits,function(e,t){o.resolve(t)}),i.$once(e.callbacks.error,function(e,t){i.$emit("log.error",{cause:t,msg:"Kunne ikke hente søgeresultater."}),o.reject(t)}),i.$emit("searchService.request",e),o.promise},o.getSlides=function(){var i=t.defer();return e.get("/api/slide").success(function(e,t){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},o.loadSlidesBulk=function(i){var o=t.defer(),n="?ids[]="+i.join("&ids[]=");return e.get("/api/bulk/slide/api-bulk"+n).success(function(e,t){o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise},o.clearCurrentSlide=function(){n=null},o.getEditSlide=function(i){var o=t.defer();return null===i||void 0===i||""===i?o.resolve(n):null!==n&&n.id==i?o.resolve(n):e.get("/api/slide/"+i).success(function(e,t){n=e,o.resolve(n)}).error(function(e,t){o.reject(t)}),o.promise},o.getSlide=function(i){var o=t.defer();return e.get("/api/slide/"+i).success(function(e,t){o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise},o.saveSlide=function(){var i=t.defer();return e.post("/api/slide",n).success(function(e){i.resolve(e),n=null}).error(function(e,t){i.reject(t)}),i.promise},o.emptySlide=function(){return n={id:null,groups:[],published:!0,schedule_from:null,schedule_to:null,media:[],media_type:null,title:"",user:"",duration:"",orientation:"",template:"",options:null}},o}]),angular.module("ikShared").factory("screenFactory",["$http","$q","busService",function(e,t,i){"use strict";var o={},n=null;return o.searchScreens=function(e){var o=t.defer();e.type="Os2Display\\CoreBundle\\Entity\\Screen";var n=CryptoJS.MD5(JSON.stringify(e)).toString();return e.callbacks={hits:"searchService.hits-"+n,error:"searchService.error-"+n},i.$once(e.callbacks.hits,function(e,t){o.resolve(t)}),i.$once(e.callbacks.error,function(e,t){i.$emit("log.error",{cause:t,msg:"Kunne ikke hente søgeresultater."}),o.reject(t)}),i.$emit("searchService.request",e),o.promise},o.getScreens=function(){var i=t.defer();return e.get("/api/screen").success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},o.loadScreensBulk=function(i){var o=t.defer(),n="?ids[]="+i.join("&ids[]=");return e.get("/api/bulk/screen/api-bulk"+n).success(function(e,t){o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise},o.getEditScreen=function(i){var o=t.defer();return null===i||void 0===i||""===i?o.resolve(n):e.get("/api/screen/"+i).success(function(e){n=e,o.resolve(n)}).error(function(e,t){o.reject(t)}),o.promise},o.getScreen=function(i){var o=t.defer();return e.get("/api/screen/"+i).success(function(e){o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise},o.saveScreen=function(){var i=t.defer();return null===n?i.reject(404):e.post("/api/screen",n).success(function(e){n.id=e,i.resolve(n)}).error(function(e,t){i.reject(t)}),i.promise},o.emptyScreen=function(){return n={id:null,template:null,groups:[],description:"",title:"",orientation:"landscape",width:1920,height:1080,channel_screen_regions:[],options:{}}},o}]),angular.module("ikShared").factory("channelFactory",["$http","$q","busService",function(e,t,i){"use strict";var o={},n={};return o.searchChannels=function(e){var o=t.defer();e.type="Os2Display\\CoreBundle\\Entity\\Channel";var n=CryptoJS.MD5(JSON.stringify(e)).toString();return e.callbacks={hits:"searchService.hits-"+n,error:"searchService.error-"+n},i.$once(e.callbacks.hits,function(e,t){o.resolve(t)}),i.$once(e.callbacks.error,function(e,t){i.$emit("log.error",{cause:t,msg:"Kunne ikke hente søgeresultater."}),o.reject(t)}),i.$emit("searchService.request",e),o.promise},o.getChannels=function(){var i=t.defer();return e.get("/api/channel").success(function(e){i.resolve(e)}).error(function(){i.reject()}),i.promise},o.loadChannelsBulk=function(i){var o=t.defer(),n="?ids[]="+i.join("&ids[]=");return e.get("/api/bulk/channel/api-bulk"+n).success(function(e,t){o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise},o.getEditChannel=function(i){var o=t.defer();return null===i||void 0===i||""===i?o.resolve(n):e.get("/api/channel/"+i).success(function(e){n=e,o.resolve(n)}).error(function(){o.reject()}),o.promise},o.getChannel=function(i){var o=t.defer();return e.get("/api/channel/"+i).success(function(e){o.resolve(e)}).error(function(){o.reject()}),o.promise},o.emptyChannel=function(){return n={id:null,title:"",orientation:"",groups:[],created_at:parseInt((new Date).getTime()/1e3),slides:[],screens:[],sharing_indexes:[],schedule_repeat_days:[]}},o.saveChannel=function(){var i=t.defer();return e.post("/api/channel",n).success(function(){i.resolve("success"),n=null}).error(function(){i.reject("error")}),i.promise},o.channelShare=function(i){var o=t.defer();return e.post("/api/channel/share",i).success(function(e){o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise},o}]),angular.module("ikShared").service("sharedSearchFactory",["$q","$rootScope","$http","busService",function(e,t,i,o){"use strict";var n,s=null;function r(e){(n=io.connect(window.config.sharingService.address,{query:"token="+s,"force new connection":!0,"max reconnection attempts":1/0})).on("error",function(t){"Not authorized"===t?i.get("api/auth/sharing/reauth").success(function(t){s=t.token,r(e)}).error(function(t,i){o.$emit("log.error",{cause:i,msg:"Search socket error. Could not reauthorize."}),e.reject(i)}):(o.$emit("log.error",{cause:t,msg:"Search socket error."}),e.reject(t))}),n.on("connect",function(){e.resolve("Connected to the server.")}),n.on("disconnect",function(e){})}this.search=function(t,a){var h,d=e.defer(),l={index:a,type:t.type,query:{match_all:{}}};return void 0!==t.text&&""!==t.text&&(l.query={multi_match:{query:t.text,type:"best_fields",operator:"or",fields:t.fields,analyzer:"string_search"}}),l.sort=t.sort,void 0!==t.filter&&(l.query={filtered:{query:l.query,filter:t.filter}}),t.hasOwnProperty("pager")&&(l.size=t.pager.size,l.from=t.pager.page*t.pager.size),l.uuid=CryptoJS.MD5(JSON.stringify(l)).toString(),l.callbacks={hits:"hits-"+l.uuid,error:"error-"+l.uuid},(h=e.defer(),void 0===n?null!==s?r(h):i.get("api/auth/sharing").success(function(e){s=e.token,r(h)}).error(function(e,t){o.$emit("log.error",{cause:t,msg:"Authentication (sharing) to search node failed ("+t+")"}),h.reject(t)}):h.resolve("Connected to the server."),h.promise).then(function(){n.emit("search",l),n.once(l.callbacks.hits,function(e){d.resolve(e)}),n.once(l.callbacks.error,function(e){o.$emit("log.error",{cause:e.message,msg:"Search error"}),d.reject(e.message)})}),d.promise}}]),angular.module("ikShared").factory("sharedChannelFactory",["$http","$q","sharedSearchFactory",function(e,t,i){"use strict";var o={},n=null;return o.searchChannels=function(e,t){return e.type="Os2Display\\CoreBundle\\Entity\\Channel",i.search(e,t)},o.getSharedChannel=function(i,o){var n=t.defer();return e.get("/api/sharing/channel/"+i+"/"+o).success(function(e){n.resolve(e)}).error(function(e,t){n.reject(t)}),n.promise},o.saveSharedChannel=function(i){var o=t.defer();return e.post("/api/sharing/channel",i).success(function(e){o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise},o.getAvailableIndexes=function(){var i=t.defer();return null!==n?i.resolve(n):e.get("/api/sharing/available_indexes").success(function(e){n=e,i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},o.saveSharingIndexes=function(i){var o=t.defer();return e.post("/api/sharing/indexes",i).success(function(e){o.resolve(e)}).error(function(e,t){o.reject(t)}),o.promise},o.getSharingIndexes=function(){var i=t.defer();return e.get("/api/sharing/indexes").success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},o}]),angular.module("ikShared").factory("kobaFactory",["$http","$q",function(e,t){"use strict";var i={};return i.getResources=function(){var i=t.defer();return e.get("/api/koba/resources").success(function(e){i.resolve(e)}).error(function(e,t){i.reject(t)}),i.promise},i.getBookingsForResource=function(i,o,n){var s=t.defer();return e.get("/api/koba/resources/"+i+"/bookings/from/"+o+"/to/"+n).success(function(e){s.resolve(e)}).error(function(e,t){s.reject(t)}),s.promise},i}]),angular.module("ikShared").controller("BaseSearchController",["$scope","userService","busService",function(e,t,i){"use strict";e.currentUser=t.getCurrentUser(),e.loading=!1,e.sort={created_at:"desc"},e.search_text="",e.pager={size:6,page:0},e.hits=0,e.baseQuery={fields:["name","title"],text:"",sort:{created_at:{order:"desc"}},pager:e.pager,filter:{}},e.userGroups=angular.copy(e.currentUser.api_data.viewable_groups),e.baseBuildSearchFilter=function(t){var i={query:{bool:{must:[],should:[]}}};if("all"!==e.showFromUser&&e.currentUser){var o={};o.term={user:e.currentUser.id},i.query.bool.must.push(o)}if("all"===e.showFromUser&&0===t.length&&(t=e.userGroups.map(function(e){return e.id}),i.query.bool.should.push({bool:{must:[{term:{user:e.currentUser.id}}]}})),t.length){var n="all"===e.showFromUser?"should":"must";i.query.bool[n].push({bool:{must:[{terms:{groups:t}}]}})}return i},e.onChangeText=function(){e.pager.page=0,e.updateSearch()},e.setSort=function(t,i){void 0!==e.sort[t]&&e.sort[t]===i||(e.sort={},e.sort[t]=i,e.baseQuery.sort={},e.baseQuery.sort[t]={order:i},e.updateSearch())},e.setUser=function(t,i){localStorage.setItem("overview."+i+".search_filter_default",t),e.showFromUser!==t&&(e.showFromUser=t,e.setSearchFilters())}}]),angular.module("ikShared").controller("BaseEntityController",["$scope","userService","busService","entityType","$timeout",function(e,t,i,o,n){"use strict";e.baseUnavailableGroups=[],e.userGroups=t.getCurrentUser().groups,e.$watch(o,function(t){null!==t&&void 0!==t&&t.hasOwnProperty("groups")&&n(function(){e.baseUnavailableGroups=t.groups.reduce(function(t,i){return-1===e.userGroups.findIndex(function(e){return e.id===i.id})&&t.push(i),t},[])})})}]),angular.module("ikShared").directive("ikActionsMenu",[function(){"use strict";return{restrict:"E",replace:!1,transclude:!0,scope:{},link:function(e){e.menuOpen=!1,e.toggleMenu=function(){e.menuOpen=!e.menuOpen}},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/actionsMenu/actions-menu.html?"+window.config.version}}]),angular.module("ikShared").directive("ikActionReloadScreen",["$http","busService",function(e,t){"use strict";return{restrict:"E",replace:!1,scope:{id:"@"},link:function(i){i.reloadScreen=function(){!0===window.confirm("Er du sikker på at du vil genindlæse skærmen?")&&e.post("/api/screen/"+i.id+"/reload").success(function(){t.$emit("log.info",{msg:"Genindlæsning lykkedes.",timeout:3e3})}).error(function(e){t.$emit("log.error",{cause:e,msg:"Genindlæsning lykkedes ikke! Dette kan skyldes at skærmen ikke er forbundet."})})}},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/actionReloadScreen/action-reload-screen.html?"+window.config.version}}]),angular.module("ikShared").directive("ikSharedChannel",["$interval","$location",function(e,t){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikChannel:"=",ikSingleSlide:"@",ikSharingIndex:"=",ikClickable:"="},link:function(i){i.slideIndex=0,i.playText="",i.$watch("ikChannel",function(e){e&&(i.ikChannel.slides.length<=0?i.templateURL="bundles/os2displayadmin/apps/ikShared/elements/sharedChannel/empty-channel.html?"+window.config.version:(i.templateURL="bundles/os2displayadmin/apps/ikShared/elements/sharedChannel/non-empty-channel.html?"+window.config.version,i.buttonState="play"),i.ikChannel.slides.forEach(function(e){$("head > link[href='"+e.css_path+"']")||$("head").append('<link rel="stylesheet" href="'+e.css_path+'" type="text/css" />')}))}),i.play=function(){angular.isDefined(i.interval)?(e.cancel(i.interval),i.interval=void 0,i.buttonState="play"):(i.slideIndex=(i.slideIndex+1)%i.ikChannel.slides.length,i.interval=e(function(){i.slideIndex=(i.slideIndex+1)%i.ikChannel.slides.length},2e3),i.buttonState="pause")},i.redirectToChannel=function(){i.ikClickable&&t.path("/shared-channel/"+i.ikChannel.unique_id+"/"+i.ikSharingIndex)},i.$on("$destroy",function(){angular.isDefined(i.interval)&&(e.cancel(i.interval),i.interval=void 0)})},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/sharedChannel/shared-channel-template.html?"+window.config.version}}]),angular.module("ikShared").directive("sharedChannelOverview",["sharedChannelFactory","userService","$timeout","busService",function(e,t,i,o){"use strict";return{restrict:"E",scope:{ikSelectedChannels:"=",ikOverlay:"@",ikSingleSlide:"="},link:function(i){i.index={},i.loading=!1,i.pickIndexDialog=!1,i.displaySharingOption=window.config.sharingService.enabled,i.sharingIndexes=[],e.getSharingIndexes().then(function(e){i.sharingIndexes=e}),i.sort={created_at:"desc"},i.currentUser=t.getCurrentUser(),i.showFromUser=localStorage.getItem("overview.shared_channel.search_filter_default")?localStorage.getItem("overview.shared_channel.search_filter_default"):"all",i.pager={size:6,page:0},i.hits=0,i.channels=[];var n={fields:"title",text:"",filter:{bool:{must:{}}},sort:{created_at:{order:"desc"}},pager:i.pager};i.updateSearch=function(){n.text=i.search_text,angular.isUndefined(i.index.index)?o.$emit("log.info",{msg:"Du skal vælge et indeks først.",timeout:3e3}):(i.loading=!0,e.searchChannels(n,i.index.index).then(function(e){i.loading=!1,i.hits=e.hits,i.channels=e.results},function(e){o.$emit("log.error",{cause:e,msg:"Hentning af søgeresultater fejlede."}),i.loading=!1}))},i.$on("channel-deleted",function(){i.updateSearch()}),i.channelSelected=function(e){if(!i.ikSelectedChannels)return!1;var t=!1;return i.ikSelectedChannels.forEach(function(i){i.unique_id==e.unique_id&&(t=!0)}),t},i.clickSharedChannel=function(e,t){i.$emit("channelSharingOverview.clickSharedChannel",e,t)},i.setIndex=function(e){i.index=e,i.pickIndexDialog=!1,i.updateSearch()},i.setUser=function(e){localStorage.setItem("overview.shared_channel.search_filter_default",e),i.showFromUser!==e&&(i.showFromUser=e,i.updateSearch())},i.setSearchFilters=function(){if(delete n.filter,"all"!==i.showFromUser&&(n.filter={bool:{must:[]}}),"all"!==i.showFromUser){var e={};e.term={user:i.currentUser.id},n.filter.bool.must.push(e)}i.updateSearch()},i.setSort=function(e,t){void 0!==i.sort[e]&&i.sort[e]===t||(i.sort={},i.sort[e]=t,n.sort={},n.sort[e]={order:t},i.updateSearch())}},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/sharedChannelOverview/shared-channel-overview.html?"+window.config.version}}]),angular.module("ikShared").directive("ikChannel",["$interval","$location",function(e,t){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikChannel:"=",ikSingleSlide:"=",ikClickable:"="},link:function(i,o,n){i.slideIndex=0,i.playText="",n.$observe("ikChannel",function(e){e&&(i.ikChannel.slides.length<=0?i.templateURL="bundles/os2displayadmin/apps/ikShared/elements/channel/empty.html?"+window.config.version:(i.templateURL="bundles/os2displayadmin/apps/ikShared/elements/channel/non-empty.html?"+window.config.version,i.buttonState="play"))}),i.play=function(){angular.isDefined(i.interval)?(e.cancel(i.interval),i.interval=void 0,i.buttonState="play"):(i.slideIndex=(i.slideIndex+1)%i.ikChannel.slides.length,i.interval=e(function(){i.slideIndex=(i.slideIndex+1)%i.ikChannel.slides.length},2e3),i.buttonState="pause")},i.redirectToChannel=function(){i.ikClickable&&t.path("/channel/"+i.ikChannel.id)},i.$on("$destroy",function(){angular.isDefined(i.interval)&&(e.cancel(i.interval),i.interval=void 0)})},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/channel/channel-template.html?"+window.config.version}}]),angular.module("ikShared").directive("ikChannelOverview",["busService",function(e){"use strict";return{restrict:"E",scope:{ikSelectedChannels:"=",ikOverlay:"@"},controller:["$scope","$filter","$controller","channelFactory",function(t,i,o,n){o("BaseSearchController",{$scope:t}),t.showFromUser=localStorage.getItem("overview.channel.search_filter_default")?localStorage.getItem("overview.channel.search_filter_default"):"all",t.displaySharingOption=window.config.sharingService.enabled,t.channels=[];var s=null;t.updateSearch=function(){t.baseQuery.text=t.search_text,t.loading=!0,n.searchChannels(t.baseQuery).then(function(i){t.hits=i.hits;for(var o=[],r=0;r<i.results.length;r++)o.push(i.results[r].id);s&&o.length===s.length&&o.every(function(e,t){return e===s[t]})?t.loading=!1:(s=o,n.loadChannelsBulk(o).then(function(e){t.channels=e,t.loading=!1},function(i){e.$emit("log.error",{cause:i,msg:"Kunne ikke loade søgeresultatet."}),t.loading=!1}))})},t.$on("channel-deleted",function(){t.updateSearch()}),t.channelSelected=function(e){if(!t.ikSelectedChannels)return!1;var i=!1;return t.ikSelectedChannels.forEach(function(t){t.id===e.id&&(i=!0)}),i},t.channelOverviewClickChannel=function(e){t.$emit("channelOverview.clickChannel",e)},t.setSearchFilters=function(){delete t.baseQuery.filter;var e=i("filter")(t.userGroups,{selected:!0},!0).map(function(e){return e.id});t.baseQuery.filter=t.baseBuildSearchFilter(e),t.pager.page=0,t.updateSearch()},t.channelScheduledNow=function(e){var t=new Date,i=t.getDay(),o=t.getHours();if(t=parseInt(t.getTime()/1e3),e.hasOwnProperty("publish_from")&&t<e.publish_from)return!1;if(e.hasOwnProperty("publish_to")&&t>e.publish_to)return!1;if(e.hasOwnProperty("schedule_repeat")&&e.schedule_repeat){if(!(e.hasOwnProperty("schedule_repeat_days")&&e.schedule_repeat_days.length>0))return!1;for(var n=0;n<e.schedule_repeat_days.length;n++)if(i===e.schedule_repeat_days[n].id){if(e.hasOwnProperty("schedule_repeat_from")&&o<e.schedule_repeat_from)return!1;if(e.hasOwnProperty("schedule_repeat_to")&&o>e.schedule_repeat_to)return!1}}return!0},t.getScheduledText=function(e){var t="";if(e.hasOwnProperty("publish_from")&&(t=t+"Udgivet fra: "+i("date")(1e3*e.publish_from,"dd/MM/yyyy HH:mm")+".<br/>"),e.hasOwnProperty("publish_to")&&(t=t+"Udgivet til: "+i("date")(1e3*e.publish_to,"dd/MM/yyyy HH:mm")+".<br/>"),e.hasOwnProperty("schedule_repeat")&&e.schedule_repeat){t+="Vises disse dage:<br/>";for(var o=0;o<e.schedule_repeat_days.length;o++)t=t+e.schedule_repeat_days[o].name+" ";t+="<br/>",e.hasOwnProperty("schedule_repeat_from")&&(t=t+"Fra: "+e.schedule_repeat_from+":00<br/>"),e.hasOwnProperty("schedule_repeat_to")&&(t=t+"Til: "+e.schedule_repeat_to+":00<br/>")}return t},t.setSearchFilters()}],templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/channelOverview/channel-overview-directive.html?"+window.config.version}}]),angular.module("ikShared").directive("ikPager",[function(){"use strict";return{restrict:"E",replace:!0,scope:!0,controller:["$scope",function(e){e.pagesFrom=0,e.pagesPerLine=10,e.changePage=function(t){e.pager.page=t,e.updateSearch(),e.pagesFrom=Math.floor(e.pager.page/e.pagesPerLine)*e.pagesPerLine},e.prevPage=function(){e.pager.page>0&&(e.pager.page--,e.updateSearch()),e.pager.page<e.pagesFrom&&(e.pagesFrom=e.pagesFrom-e.pagesPerLine)},e.nextPage=function(){e.pager.page<e.pager.max-1&&(e.pager.page++,e.updateSearch()),e.pager.page===e.pagesFrom+e.pagesPerLine&&(e.pagesFrom=e.pagesFrom+e.pagesPerLine)},e.prevLine=function(){e.pager.page>0&&(e.pager.page=e.pager.page-e.pagesPerLine,e.pager.page<0&&(e.pager.page=0),e.updateSearch()),e.pagesFrom=Math.floor(e.pager.page/e.pagesPerLine)*e.pagesPerLine},e.nextLine=function(){e.pager.page<e.pager.max-1&&(e.pager.page=e.pager.page+e.pagesPerLine,e.pager.page>=e.pager.max&&(e.pager.page=e.pager.max-1),e.updateSearch()),e.pagesFrom=Math.floor(e.pager.page/e.pagesPerLine)*e.pagesPerLine},e.$watch("hits",function(t){var i=[];if(e.pager.max=0,t>e.pager.size){e.pager.max=Math.ceil(t/e.pager.size);for(var o=0;o<e.pager.max;o++)i.push(o)}e.pager.pages=i})}],templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/pager/pager-directive.html?"+window.config.version}}]),angular.module("ikShared").directive("ikDelete",["$http","$rootScope","busService",function(e,t,i){"use strict";return{restrict:"E",replace:!1,scope:{id:"@",type:"@"},link:function(o){o.remove=function(){!0===window.confirm("Er du sikker på du vil slette dette? Handlingen kan ikke fortrydes.")&&e.delete("/api/"+o.type+"/"+o.id).success(function(){i.$emit("log.info",{msg:"Sletning lykkes.",timeout:3e3}),t.$broadcast(o.type+"-deleted",{})}).error(function(e){i.$emit("log.error",{cause:e,msg:"Sletning lykkes ikke!"})})}},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/delete/delete.html?"+window.config.version}}]),angular.module("ikShared").directive("ikChannelShare",[function(){"use strict";return{restrict:"E",scope:{ikChannel:"="},link:function(e){e.clickShare=function(){e.$emit("ikChannelShare.clickShare",e.ikChannel)}},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/channelShare/channel-share.html?"+window.config.version}}]),angular.module("ikShared").directive("ikChecklist",[function(){"use strict";return{restrict:"E",replace:!1,scope:{elements:"=",selected:"=",identity:"="},link:function(e){e.toggleElement=function(t){if(e.selected){var i=-1;e.selected.forEach(function(o,n){o[e.identity]===t[e.identity]&&(i=n)}),i>-1?e.selected.splice(i,1):e.selected.push(t)}},e.elementSelected=function(t){if(!e.selected)return!1;for(var i=0;i<e.selected.length;i++)if(e.selected[i][e.identity]===t[e.identity])return!0;return!1}},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/checklist/checklist.html?"+window.config.version}}]),angular.module("ikShared").directive("itkHeader",["busService","$timeout","$compile",function(e,t,i){"use strict";return{restrict:"E",replace:!1,scope:{entity:"=",type:"@",event:"@"},link:function(o,n){if(o.entity&&o.type&&o.event){var s="itkHeader."+o.event,r="",a=new Date,h=s+".returnItems-"+o.entity.id+"-"+a.getTime();e.$on(h,function(e,s){t(function(){if(s.hasOwnProperty("html")){r+=s.html;var e=i(r)(o);n.replaceWith(e)}})}),e.$emit(s+".requestItems",{entity:o.entity,type:o.type,returnEvent:h})}else console.error("itkHeader: entity, type, event attributes are all required!")},template:""}}]),angular.module("ikShared").directive("ikScreen",[function(){"use strict";return{restrict:"E",scope:{ikScreen:"="},link:function(e,t,i){i.$observe("ikScreen",function(t){t&&("landscape"===e.ikScreen.template.orientation?e.style={width:"300px",height:"168.5px"}:e.style={height:"300px",width:"168.5px"})})},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/screen/screen-template.html?"+window.config.version}}]),angular.module("ikShared").directive("ikSlideOverview",["busService","$filter",function(e,t){"use strict";return{restrict:"E",scope:{ikSelectedSlides:"=",ikOverlay:"@"},controller:["$scope","$filter","$controller","slideFactory","userService",function(t,i,o,n,s){o("BaseSearchController",{$scope:t}),t.showFromUser=localStorage.getItem("overview.slide.search_filter_default")?localStorage.getItem("overview.slide.search_filter_default"):"all",t.slides=[];var r=null;t.updateSearch=function(){t.baseQuery.text=t.search_text,t.loading=!0,n.searchSlides(t.baseQuery).then(function(i){t.hits=i.hits;for(var o=[],s=0;s<i.results.length;s++)o.push(i.results[s].id);r&&o.length===r.length&&o.every(function(e,t){return e===r[t]})?t.loading=!1:(r=o,n.loadSlidesBulk(o).then(function(e){t.slides=e,t.loading=!1},function(i){e.$emit("log.error",{cause:i,msg:"Hentning af søgeresultater fejlede."}),t.loading=!1}))})},t.$on("slide-deleted",function(e){t.updateSearch()}),t.setSearchFilters=function(){delete t.baseQuery.filter;var e=i("filter")(t.userGroups,{selected:!0},!0).map(function(e){return e.id});t.baseQuery.filter=t.baseBuildSearchFilter(e),t.pager.page=0,t.updateSearch()},t.slideSelected=function(e){if(!t.ikSelectedSlides)return!1;var i=!1;return t.ikSelectedSlides.forEach(function(t,o){t.id==e.id&&(i=!0)}),i},t.outOfSchedule=function(e){return!(!e.schedule_from||!e.schedule_to)&&!(1e3*e.schedule_from<Date.now()&&1e3*e.schedule_to>Date.now())},t.slideOverviewClickSlide=function(e){t.$emit("slideOverview.clickSlide",e)},t.slideScheduledNow=function(e){if(!e.published)return!1;var t=new Date;return t=parseInt(t.getTime()/1e3),!(e.hasOwnProperty("schedule_from")&&t<e.schedule_from)&&!(e.hasOwnProperty("schedule_to")&&t>e.schedule_to)},t.getScheduledText=function(e){var t="";return e.published||(t+="Ikke udgivet!<br/>"),e.hasOwnProperty("schedule_from")&&(t=t+"Udgivet fra: "+i("date")(1e3*e.schedule_from,"dd/MM/yyyy HH:mm")+".<br/>"),e.hasOwnProperty("schedule_to")&&(t=t+"Udgivet til: "+i("date")(1e3*e.schedule_to,"dd/MM/yyyy HH:mm")+"."),t},t.setSearchFilters()}],templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/slideOverview/slide-overview-directive.html?"+window.config.version}}]),angular.module("ikShared").directive("ikSlide",["slideFactory","templateFactory",function(e,t){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikSlide:"="},link:function(e,i,o){e.templateURL="bundles/os2displayadmin/apps/ikShared/elements/slide/slide-loading.html?"+window.config.version,o.$observe("ikSlide",function(i){i&&("image"===e.ikSlide.media_type?e.ikSlide.media.length>0?e.ikSlide.currentImage=e.ikSlide.media[0].urls.default_landscape_small:e.ikSlide.currentImage="":e.ikSlide.media.length>0&&e.ikSlide.media[0].provider_metadata.length>0&&e.ikSlide.media[0].provider_metadata[0].thumbnails&&e.ikSlide.media[0].provider_metadata[0].thumbnails.length>0?e.ikSlide.currentImage=e.ikSlide.media[0].provider_metadata[0].thumbnails[1].reference:e.ikSlide.currentImage="",void 0!==e.ikSlide.logo&&null!==e.ikSlide.logo?e.ikSlide.currentLogo=e.ikSlide.logo.urls.default_landscape:e.ikSlide.currentLogo="",t.getSlideTemplate(e.ikSlide.template).then(function(t){t.enabled?(e.template=t,e.templateURL=e.template.paths.preview,e.theStyle={width:e.ikWidth+"px",height:parseFloat(e.template.ideal_dimensions.height*parseFloat(e.ikWidth/e.template.ideal_dimensions.width))+"px"},e.ikSlide.options.fontsize&&(e.theStyle.fontsize=parseFloat(e.ikSlide.options.fontsize*parseFloat(e.ikWidth/e.template.ideal_dimensions.width))+"px")):e.slideError='"'+t.name+'" skabelonen er ikke aktiveret.'},function(){e.slideError='"'+e.ikSlide.template+'" skabelonen blev ikke fundet.'}))})},template:'<div data-ng-if="slideError" style="color: black;">{{ slideError }}</div><div class="preview--slide" data-ng-style="{\'width\': theStyle.width}" data-ng-include="" src="templateURL" data-ng-if="!slideError && template"></div>'}}]),angular.module("ikShared").directive("ikSlideEditable",["templateFactory","$timeout",function(e,t){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikSlide:"="},link:function(i,o,n){i.templateURL="bundles/os2displayadmin/apps/ikShared/elements/slide/slide-loading.html?"+window.config.version,i.$watch("ikSlide",function(e,n){e&&("image"===i.ikSlide.media_type?(i.ikSlide.currentImage="",i.ikSlide.media.length>0&&(i.ikSlide.currentImage=i.ikSlide.media[0].urls.default_landscape)):"video"===i.ikSlide.media_type&&(i.ikSlide.currentVideo={mp4:"",ogg:"",webm:""},i.ikSlide.media.length>0&&void 0!==i.ikSlide.media[0]&&(i.ikSlide.media.length>0&&i.ikSlide.media[0].provider_metadata.length>0&&(i.ikSlide.currentVideo={},i.ikSlide.media[0].provider_metadata[0]&&(i.ikSlide.currentVideo.mp4=i.ikSlide.media[0].provider_metadata[0].reference),i.ikSlide.media[0].provider_metadata[1]&&(i.ikSlide.currentVideo.ogg=i.ikSlide.media[0].provider_metadata[1].reference),i.ikSlide.media[0].provider_metadata[2]&&(i.ikSlide.currentVideo.webm=i.ikSlide.media[0].provider_metadata[2].reference)),t(function(){o.find("#videoPlayer").load()},1e3))),i.ikSlide.currentLogo="",void 0!==i.ikSlide.logo&&null!==i.ikSlide.logo&&(i.ikSlide.currentLogo=i.ikSlide.logo.urls.default_landscape),i.theStyle&&(i.theStyle.fontsize=parseFloat(i.ikSlide.options.fontsize*parseFloat(i.ikWidth/i.template.ideal_dimensions.width))+"px"))},!0),i.$watch("ikSlide.template",function(){i.slideError=null,e.getSlideTemplate(i.ikSlide.template).then(function(e){t(function(){e.enabled?(i.template=e,i.slideTemplateURL=i.template.paths.edit,i.templateURL="bundles/os2displayadmin/apps/ikShared/elements/slide/slide-edit.html?"+window.config.version,i.theStyle={width:i.ikWidth+"px",height:parseFloat(i.template.ideal_dimensions.height*parseFloat(i.ikWidth/i.template.ideal_dimensions.width))+"px",fontsize:parseFloat(i.ikSlide.options.fontsize*parseFloat(i.ikWidth/i.template.ideal_dimensions.width))+"px"}):i.slideError='"'+e.name+'" skabelonen er ikke aktiveret.'})},function(){i.slideError='"'+i.ikSlide.template+'" skabelonen blev ikke fundet.'})})},template:'<div data-ng-if="slideError" class="preview--error">{{ slideError }}</div><div class="preview--slide" data-ng-style="{\'width\': theStyle.width}" data-ng-include="templateURL" data-ng-if="!slideError"></div>'}}]),angular.module("ikShared").directive("ikSharedSlide",[function(){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikSlide:"="},link:function(e,t,i){e.templateURL="bundles/os2displayadmin/apps/ikShared/elements/slide/slide-loading.html?"+window.config.version,i.$observe("ikSlide",function(t){t&&(e.ikSlide.media_thumbs&&e.ikSlide.media_thumbs.length>0&&(e.ikSlide.currentImage=e.ikSlide.media_thumbs[0]),e.ikSlide.currentLogo=e.ikSlide.logo,e.templateURL=e.ikSlide.preview_path,e.theStyle={width:e.ikWidth+"px",height:parseFloat(1080*parseFloat(e.ikWidth/1920))+"px"},e.ikSlide.options.fontsize&&(e.theStyle.fontsize=parseFloat(e.ikSlide.options.fontsize*parseFloat(e.ikWidth/1920))+"px"))})},template:'<div class="preview--slide" data-ng-include="" src="templateURL"></div>'}}]),angular.module("ikShared").directive("ikScreenOverview",["busService",function(e){"use strict";return{restrict:"E",scope:{ikSelectedScreens:"=",ikOverlay:"@"},controller:["$scope","$filter","$controller","screenFactory","userService","busService",function(e,t,i,o,n,s){i("BaseSearchController",{$scope:e}),e.showFromUser=localStorage.getItem("overview.media.search_filter_default")?localStorage.getItem("overview.media.search_filter_default"):"all",e.screens=[];var r=null;e.updateSearch=function(){e.baseQuery.text=e.search_text,e.loading=!0,o.searchScreens(e.baseQuery).then(function(t){e.hits=t.hits;for(var i=[],n=0;n<t.results.length;n++)i.push(t.results[n].id);r&&i.length===r.length&&i.every(function(e,t){return e===r[t]})?e.loading=!1:(r=i,o.loadScreensBulk(i).then(function(t){e.screens=t,e.loading=!1},function(t){s.$emit("log.error",{cause:t,msg:"Kunne ikke hente søgeresultater."}),e.loading=!1}))})},e.$on("screen-deleted",function(){e.updateSearch()}),e.setSearchFilters=function(){delete e.baseQuery.filter;var i=t("filter")(e.userGroups,{selected:!0},!0).map(function(e){return e.id});e.baseQuery.filter=e.baseBuildSearchFilter(i),e.pager.page=0,e.updateSearch()},e.setSearchFilters()}],templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/screenOverview/screen-overview-directive.html?"+window.config.version}}]),angular.module("ikShared").directive("ikMediaOverview",["busService",function(e){"use strict";return{restrict:"E",scope:{ikMediaType:"=",ikAutoSearch:"@",ikHideFilters:"=",ikSelectedMedia:"="},controller:["$scope","$filter","$controller","mediaFactory",function(t,i,o,n){o("BaseSearchController",{$scope:t}),t.showFromUser=localStorage.getItem("overview.media.search_filter_default")?localStorage.getItem("overview.media.search_filter_default"):"all",t.media_type="all",t.media=[];var s=null;t.updateSearch=function(){t.baseQuery.text=t.search_text,t.loading=!0,n.searchMedia(t.baseQuery).then(function(i){t.hits=i.hits;for(var o=[],r=0;r<i.results.length;r++)o.push(i.results[r].id);s&&o.length===s.length&&o.every(function(e,t){return e===s[t]})?t.loading=!1:(s=o,n.loadMediaBulk(o).then(function(e){t.media=e,t.loading=!1},function(i){e.$emit("log.error",{cause:i,msg:"Hentning af søgeresultater fejlede."}),t.loading=!1}))})},t.mediaSelected=function(e){if(!t.ikSelectedMedia)return!1;var i=!1;return t.ikSelectedMedia.forEach(function(t){t.id===e.id&&(i=!0)}),i},t.filterMediaType=function(e){t.media_type!==e&&(t.media_type=e,t.setSearchFilters())},t.setSearchFilters=function(){delete t.baseQuery.filter;var e=i("filter")(t.userGroups,{selected:!0},!0).map(function(e){return e.id}),o=t.baseBuildSearchFilter(e);if("all"!==t.media_type){var n={};if(n.term={media_type:t.media_type},"all"===t.showFromUser)for(var s in o.query.bool.should)(s=o.query.bool.should[s]).bool.must.push(n);else o.query.bool.must.push(n)}t.baseQuery.filter=o,t.pager.page=0,t.updateSearch()},t.mediaOverviewClickMedia=function(e){t.$emit("mediaOverview.selectMedia",e)},t.$on("mediaOverview.updateSearch",function(e){t.updateSearch(),e.preventDefault()}),t.$watch("ikMediaType",function(e){void 0===e?t.updateSearch():t.filterMediaType(e)})}],templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/mediaOverview/media-overview-directive.html?"+window.config.version}}]),angular.module("ikShared").directive("ikMediaUpload",["busService","userService",function(e,t){"use strict";return{restrict:"E",scope:{ikUploadType:"@",queueLimit:"="},controller:["$scope","FileUploader",function(i,o){i.currentStep=1,i.uploadComplete=!1,i.uploadErrors=!1,i.uploadInProgress=!1,i.uploadErrorText="",i.selectedGroups=[];var n=e.$on("mediaUpdateDirective.getCurrentUserGroups",function(e,t){i.userGroups=t});t.getCurrentUserGroups("mediaUpdateDirective.getCurrentUserGroups");var s=["mp4","x-msvideo","x-ms-wmv","quicktime","mpeg","mpg","x-matroska","ogg","webm"],r=["jpg","png","jpeg","bmp","gif"],a="",h=(a="image"===i.ikUploadType||"logo"===i.ikUploadType?r:"video"===i.ikUploadType?s:s.concat(r)).reduce(function(e,t){return e?e+", "+t:t});i.uploader=new o({url:"/api/media",queueLimit:i.queueLimit?i.queueLimit:1,filters:[{name:"mediaFilter",fn:function(e){var t=e.type.slice(e.type.lastIndexOf("/")+1),o=-1!==a.indexOf(t);return o||(i.uploadErrorText=e.type+" er ikke en accepteret medietype. Tilladte typer er: "+h),o}}]}),i.selectFiles=function(){angular.element(document.querySelector("#select-files")).click()},i.clearQueue=function(){i.uploader.clearQueue(),i.uploadComplete=!1,i.uploadErrors=!1,i.currentStep=1,i.uploadErrorText=""},i.removeItem=function(e){e.remove(),i.uploader.queue.length<=0&&(i.currentStep=1,i.uploadComplete=!1,i.uploadErrors=!1)},i.upload=function(){i.uploadInProgress=!0;var e=[];for(var t in i.selectedGroups)t=i.selectedGroups[t],e.push(t.id);for(var o in i.uploader.queue)(o=i.uploader.queue[o]).formData[0].groups=JSON.stringify(e);i.uploader.uploadAll()},i.isImage=function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1);return-1!==r.indexOf(t)},i.getProgress=function(){if(i.uploader.progress)return i.uploadInProgress&&i.uploader.progress>5?i.uploader.progress-5:i.uploader.progress},i.uploader.onAfterAddingFile=function(e){e.formData=[{title:"",logo:!1}],"logo"===i.ikUploadType&&(e.formData[0].logo=!0)},i.uploader.onAfterAddingAll=function(){i.currentStep++},i.uploader.onErrorItem=function(e,t,o){i.uploadErrors=!0,i.uploadInProgress=!1,i.clearQueue(),i.uploadErrorText="Der skete en fejl under upload af filer (fejlkode: "+o+")."},i.uploader.onCompleteAll=function(){i.uploadComplete=!0,i.uploadInProgress=!1},i.uploader.onSuccessItem=function(e,t){i.$emit("mediaUpload.uploadSuccess",{image:e,id:t[0],queue:i.uploader.queue})},i.hideError=function(){i.uploadErrorText=!1},i.$on("$destory",function(){n()})}],templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/mediaUpload/media-upload-directive.html?"+window.config.version}}]),angular.module("ikShared").directive("ikThumb",["$window",function(e){"use strict";var t=!(!e.FileReader||!e.CanvasRenderingContext2D),i=function(t){return angular.isObject(t)&&t instanceof e.File},o=function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1);return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(t)};return{restrict:"A",template:"<canvas/>",link:function(e,n,s){if(t){var r=e.$eval(s.ikThumb);if(i(r.file)&&o(r.file)){var a=n.find("canvas"),h=new FileReader;h.onload=function(e){var t=new Image;t.onload=d,t.src=e.target.result},h.readAsDataURL(r.file)}}function d(){var e=r.width?r.width:this.width/this.height*r.height,t=r.height?r.height:this.height/this.width*r.width;a.attr({width:e,height:t}),a[0].getContext("2d").drawImage(this,0,0,e,t)}}}}]),angular.module("ikShared").directive("autoGrow",function(){"use strict";return{restrict:"A",scope:{fontSize:"@"},link:function(e,t){var i=$(t),o=function(e){e.css("height","0px");var t=e.prop("scrollHeight"),i=e.css("min-height").replace("px","");e.css("height",Math.max(t,i)+"px")};t.bind("keyup",function(){o(i)}),e.$watch("fontSize",function(e){e&&o(i)}),setTimeout(function(){o(i)},100)}}}),angular.module("ikShared").directive("includeReplace",function(){"use strict";return{require:"ngInclude",restrict:"A",link:function(e,t){t.replaceWith(t.children())}}}),function(){"use strict";angular.module("itkControlPanel",[]).directive("controlPanel",["busService",function(e){return{restrict:"E",scope:{template:"=",data:"=",screen:"=",display:"=",saveAction:"&",region:"=",options:"="},replace:!0,link:function(t){t.selectedTab=null,e.$emit("bodyService.addClass","is-screen"),t.getContent=function(){return t.template},t.clickTab=function(e){t.selectedTab=e},t.toggleChannelType=function(e){t.channelType=e},t.$on("$destroy",function(){document.getElementsByTagName("body")[0].style.overflow=""})},template:'<div data-ng-include="getContent()"></div>'}}])}.call(this),function(){"use strict";angular.module("ngModal",[]).directive("modalDialog",[function(){return{restrict:"E",scope:{show:"=",onClose:"&?"},replace:!0,transclude:!0,link:function(e){e.hideModal=function(){e.show=!1},e.$watch("show",function(t,i){if(document.getElementsByTagName("body")[0].style.overflow=t&&!i?"hidden":"",!t&&i&&null!==e.onClose)return e.onClose()})},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/ngModal/ng-modal.html?"+window.config.version}}])}.call(this),angular.module("ikShared").directive("ikDisabledList",[function(){"use strict";return{restrict:"E",replace:!1,scope:{elements:"="},templateUrl:"bundles/os2displayadmin/apps/ikShared/elements/disabledList/disabled-list.html?"+window.config.version}}]),function(){"use strict";angular.module("itkScreenTemplatePickerWidget",[]).directive("screenTemplatePickerWidget",["templateFactory","busService",function(e,t){return{restrict:"E",scope:{screen:"="},replace:!0,link:function(i){i.templates=[],e.getEnabledScreenTemplates().then(function(e){i.templates=e},function(e){t.$emit("log.error",{cause:e,msg:"Kunne ikke loade templates."})}),i.pickTemplate=function(e){i.screen.template=angular.copy(e)}},templateUrl:"bundles/os2displayadmin/apps/ikShared/widgets/screenTemplatePickerWidget/screenTemplatePickerWidget.html?"+window.config.version}}])}.call(this),function(){"use strict";angular.module("itkTextWidget",[]).directive("textWidget",function(){return{restrict:"E",scope:{field:"=",placeholderText:"@"},replace:!0,template:'<input type="text" class="cpw--text-input" placeholder="{{placeholderText}}" data-ng-model="field">'}})}.call(this),function(){"use strict";angular.module("itkTextAreaWidget",[]).directive("textAreaWidget",function(){return{restrict:"E",scope:{field:"=",placeholderText:"@"},replace:!0,template:'<textarea class="cpw--textarea-input" data-ng-model="field" placeholder="{{placeholderText}}"></textarea>'}})}.call(this),function(){"use strict";angular.module("itkNumberWidget",[]).directive("numberWidget",function(){return{restrict:"E",scope:{field:"=",placeholderText:"@"},replace:!0,template:'<input type="number" class="cpw--text-input" placeholder="{{placeholderText}}" data-ng-model="field">'}})}.call(this),function(){"use strict";angular.module("itkChannelPickerWidget",[]).directive("channelPickerWidget",["userService","channelFactory","busService",function(e,t,i){return{restrict:"E",replace:!0,templateUrl:"bundles/os2displayadmin/apps/ikShared/widgets/channelPickerWidget/channel-picker-widget.html?"+window.config.version,scope:{screen:"=",region:"="},link:function(o){o.sharingEnabled=window.config.sharingService.enabled,o.loading=!1,o.showFromUser="all",o.sort={created_at:"desc"},o.selectedGroup=null,o.currentUser=e.getCurrentUser();var n=i.$on("itkChannelPickerWidget.currentUserGroups",function(e,t){o.userGroups=t});e.getCurrentUserGroups("itkChannelPickerWidget.currentUserGroups"),o.pager={size:5,page:0},o.hits=0,o.channels=[],o.search={fields:"title",text:"",filter:{bool:{must:[]}},sort:{created_at:{order:"desc"}},pager:o.pager},o.updateSearch=function(){var e=angular.copy(o.search);e.text=o.search_text,null!==o.selectedGroup&&e.filter.bool.must.push({terms:{groups:[o.selectedGroup.id]}}),o.loading=!0,t.searchChannels(e).then(function(e){o.hits=e.hits;for(var n=[],s=0;s<e.results.length;s++)n.push(e.results[s].id);t.loadChannelsBulk(n).then(function(e){o.channels=e,o.loading=!1},function(e){i.$emit("log.error",{cause:e,msg:"Kunne ikke hente søgeresultater."}),o.loading=!1})})},o.channelSelected=function(e){for(var t,i=0;i<o.screen.channel_screen_regions.length;i++)if((t=o.screen.channel_screen_regions[i]).channel&&t.channel.id===e.id&&t.region===o.region)return!0;return!1},o.addChannel=function(e){o.screen.channel_screen_regions.push({id:null,screen_id:o.screen.id,channel:e,region:o.region})},o.removeChannel=function(e){for(var t,i=0;i<o.screen.channel_screen_regions.length;i++)(t=o.screen.channel_screen_regions[i]).channel&&t.channel.id===e.id&&t.region===o.region&&o.screen.channel_screen_regions.splice(i,1)},o.selectGroup=function(e){o.pickGroupDialog=!1,o.selectedGroup=e,o.updateSearch()},o.$watch("screen",function(e){e&&o.updateSearch()}),o.$on("$destroy",function(){n()})}}}])}.call(this),function(){"use strict";angular.module("itkSharedChannelPickerWidget",[]).directive("sharedChannelPickerWidget",["sharedChannelFactory","busService",function(e,t){return{restrict:"E",replace:!0,templateUrl:"bundles/os2displayadmin/apps/ikShared/widgets/sharedChannelPickerWidget/shared-channel-picker-widget.html?"+window.config.version,scope:{screen:"=",region:"="},link:function(i,o,n){i.index=null,i.loading=!1,i.pickIndexDialog=!1,i.sharingIndexes=[],e.getSharingIndexes().then(function(e){i.sharingIndexes=e},function(e){t.$emit("log.error",{cause:e,msg:"Kunne ikke hente delingsindeks."})}),i.showFromUser="all",i.sort={created_at:"desc"},i.pager={size:9,page:0},i.hits=0,i.channels=[];var s={fields:"title",text:"",filter:{bool:{must:[]}},sort:{created_at:{order:"desc"}},pager:i.pager};i.updateSearch=function(){null!==i.index&&(s.text=i.search_text,i.loading=!0,e.searchChannels(s,i.index.index).then(function(e){i.loading=!1,i.hits=e.hits,i.channels=e.results},function(e){t.$emit("log.error",{cause:e,msg:"Kunne ikke hente søgeresultater."}),i.loading=!1}))},i.setIndex=function(e){i.index=e,i.pickIndexDialog=!1,i.updateSearch()},i.channelSelected=function(e){for(var t,o=0;o<i.screen.channel_screen_regions.length;o++)if((t=i.screen.channel_screen_regions[o]).shared_channel&&t.shared_channel.unique_id===e.unique_id&&t.region===i.region)return!0;return!1},i.addChannel=function(e){void 0!==e.index&&null!==e.index||(e.index=i.index.index),i.screen.channel_screen_regions.push({id:null,screen_id:i.screen.id,shared_channel:e,region:i.region})},i.removeChannel=function(e){for(var t,o=0;o<i.screen.channel_screen_regions.length;o++)(t=i.screen.channel_screen_regions[o]).shared_channel&&t.shared_channel.unique_id===e.unique_id&&t.region===i.region&&i.screen.channel_screen_regions.splice(o,1)},n.$observe("screen",function(e){e&&i.updateSearch()})}}}])}.call(this),function(){"use strict";angular.module("itkChannelRemoverWidget",[]).directive("channelRemoverWidget",[function(){return{restrict:"E",replace:!0,templateUrl:"bundles/os2displayadmin/apps/ikShared/widgets/channelRemoverWidget/channel-remover-widget.html?"+window.config.version,scope:{screen:"=",region:"="},link:function(e){e.search_text="",e.getSearch=function(){return{title:e.search_text}},e.removeChannel=function(t){for(var i,o=0;o<e.screen.channel_screen_regions.length;o++)void 0===(i=e.screen.channel_screen_regions[o]).shared_channel&&i.channel.id===t.id&&i.region===e.region?e.screen.channel_screen_regions.splice(o,1):i.shared_channel&&i.shared_channel.unique_id===t.unique_id&&i.region===e.region&&e.screen.channel_screen_regions.splice(o,1)}}}}])}.call(this),function(){"use strict";angular.module("itkRegionPreviewWidget",[]).directive("regionPreviewWidget",[function(){return{restrict:"E",scope:{region:"=",screen:"=",width:"="},replace:!1,templateUrl:"bundles/os2displayadmin/apps/ikShared/widgets/regionPreviewWidget/region-preview-widget.html?"+window.config.version,link:function(e){e.getNumberOfChannels=function(){for(var t=0,i=0;i<e.screen.channel_screen_regions.length;i++)e.screen.channel_screen_regions[i].region===e.region&&t++;return t}}}}])}.call(this),angular.module("menuApp").directive("mainMenu",["$location","busService",function(e,t){"use strict";return{restrict:"E",templateUrl:"bundles/os2displayadmin/apps/menuApp/directive/main-menu.html?"+config.version,scope:{},link:function(i){i.mainMenuItems=[],i.siteTitle=window.config.siteTitle,i.url=e.url(),t.$on("menuApp.returnMainMenuItems",function(e,t){t.forEach(function(e){i.mainMenuItems.push(e)}),i.mainMenuItems.sort(function(e,t){return parseInt(e.weight)-parseInt(t.weight)})}),t.$on("$locationChangeSuccess",function(){i.url=e.url()}),t.$emit("menuApp.requestMainMenuItems",{})}}}]),angular.module("menuApp").directive("hamburgerMenu",["$http","$location","busService",function(e,t,i){"use strict";return{restrict:"E",templateUrl:"bundles/os2displayadmin/apps/menuApp/directive/hamburger-menu.html?"+config.version,scope:{},link:function(o){o.hamburgerMenuItems=[],o.menuOpen=!1,o.currentUser=null,o.url=t.url(),i.$on("userService.returnCurrentUser",function(e,t){o.currentUser=t}),i.$emit("userService.getCurrentUser",{}),i.$on("menuApp.returnHamburgerMenuItems",function(e,t){t.forEach(function(e){o.hamburgerMenuItems.push(e)}),o.hamburgerMenuItems.sort(function(e,t){return parseInt(e.weight)-parseInt(t.weight)})}),i.$emit("menuApp.requestHamburgerMenuItems",{}),i.$on("$locationChangeSuccess",function(){o.url=t.url()}),i.$emit("userService.getCurrentUser",{}),o.toggleMenu=function(){o.menuOpen=!o.menuOpen,o.menuOpen?i.$emit("bodyService.addClass","is-locked"):i.$emit("bodyService.removeClass","is-locked"),$(".hamburger-menu").click(function(e){e.stopPropagation()})},o.userHasPermission=function(e){return!e||(!("super-admin"!==e||!o.currentUser||!o.currentUser.is_super_admin)||!("admin"!==e||!o.currentUser||!o.currentUser.is_admin))},o.updateTemplates=function(){o.menuOpen=!1,e.get("/api/command/update_templates").success(function(e,t,o,n){i.$emit("log.info",{msg:"Templates opdateret.",timeout:3e3})}).error(function(e,t,o,n){i.$emit("log.error",{cause:t,msg:"Update af templates fejlede."})})},o.reindex=function(){o.menuOpen=!1,e.get("/api/command/reindex").success(function(e,t,o,n){i.$emit("log.info",{msg:"Reindex gennemført.",timeout:3e3})}).error(function(e,t,o,n){i.$emit("log.error",{cause:t,msg:"Reindex fejlede."})})},o.forcePush=function(){o.menuOpen=!1,e.get("/api/command/forcepush").success(function(e,t,o,n){i.$emit("log.info",{msg:"Force push gennemført.",timeout:3e3})}).error(function(e,t,o,n){i.$emit("log.error",{cause:t,msg:"Force push fejlede."})})}}}}]),angular.module("menuApp").directive("subMenu",["$location","busService",function(e,t){"use strict";return{restrict:"E",templateUrl:"bundles/os2displayadmin/apps/menuApp/directive/sub-menu.html?"+config.version,scope:{},link:function(i){i.url=e.url();var o=[];i.subMenuItems=[],t.$on("menuApp.returnSubMenuItems",function(e,t){for(var i=0;i<t.length;i++){var s=t[i].mainMenuItem,r=t[i].items;o.hasOwnProperty(s)||(o[s]=[]);for(var a=0;a<r.length;a++){for(var h=r[a],d=!0,l=0;l<o[s].length;l++)if(o[s][l].title===h.title){d=!1;break}d&&o[s].push(h)}}for(var c in o)o[c].sort(function(e,t){return parseInt(e.weight)-parseInt(t.weight)});n()});var n=function(){if(0===i.url.indexOf("/channel")||0===i.url.indexOf("/shared-channel"))i.subMenuItems=o.channel;else if(0===i.url.indexOf("/slide"))i.subMenuItems=o.slide;else if(0===i.url.indexOf("/screen"))i.subMenuItems=o.screen;else if(0===i.url.indexOf("/media"))i.subMenuItems=o.media;else{var e=i.url.split("/");e.length>1?i.subMenuItems=o[e[1]]:i.subMenuItems=[]}};t.$on("$locationChangeSuccess",function(){i.url=e.url(),n()}),t.$emit("menuApp.requestSubMenuItems")}}}]),angular.module("messageApp").directive("messages",["busService","$timeout",function(e,t){"use strict";return{restrict:"E",templateUrl:"bundles/os2displayadmin/apps/messageApp/directive/messages.html?"+window.config.itkLog.version,link:function(i){i.expanded=!1,i.messages={},e.$on("messages.add",function(e,o){i.$apply(function(){var e=CryptoJS.MD5(JSON.stringify(o)).toString();o.hash=e,i.messages[e]=o,void 0!==o.timeout&&t(function(){i.close(o)},o.timeout)})}),e.$on("messages.clear",function(e,t){i.clear()}),i.toggleExpanded=function(){i.expanded=!i.expanded},i.close=function(e){delete i.messages[e.hash]},i.clear=function(){i.messages=[]}}}}]),angular.module("ikApp").config(["$sceDelegateProvider","$translateProvider",function(e,t){"use strict";t.useSanitizeValueStrategy("escape").useStaticFilesLoader({prefix:"bundles/os2displayadmin/apps/ikApp/translations/locale-",suffix:".json"}).preferredLanguage("da").fallbackLanguage("da").forceAsyncReload(!0),e.resourceUrlWhitelist(["self","**"])}]),angular.module("ikApp").config(["$routeProvider",function(e){"use strict";e.when("/",{redirectTo:"/channel-overview"}).when("/admin-sharing",{controller:"AdminSharingController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/adminSharing/admin-sharing.html?"+window.config.version}).when("/admin-templates",{controller:"AdminTemplatesController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/adminTemplates/admin-templates.html?"+window.config.version}).when("/channel-overview",{controller:"ChannelOverviewController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/channelOverview/channel-overview.html?"+window.config.version}).when("/slide-overview",{controller:"SlideOverviewController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/slideOverview/slide-overview.html?"+window.config.version}).when("/screen-overview",{templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/screenOverview/screen-overview.html?"+window.config.version}).when("/media-overview",{controller:"MediaOverviewController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/mediaOverview/media-overview.html?"+window.config.version}).when("/shared-channel-overview",{templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/sharedChannelOverview/shared-channel-overview.html?"+window.config.version}).when("/screen",{controller:"ScreenController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/screen/screen.html?"+window.config.version}).when("/screen/:id",{controller:"ScreenController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/screen/screen.html?"+window.config.version}).when("/slide",{controller:"SlideController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/slide/slide.html?"+window.config.version}).when("/slide/:id",{controller:"SlideController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/slide/slide.html?"+window.config.version}).when("/shared-channel/:id/:index",{controller:"SharedChannelController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/sharedChannel/shared-channel.html?"+window.config.version}).when("/channel",{controller:"ChannelController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/channel/channel.html?"+window.config.version}).when("/channel/:id",{controller:"ChannelController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/channel/channel.html?"+window.config.version}).when("/media/upload",{templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/mediaUpload/media-upload.html?"+window.config.version}).when("/media/:id",{controller:"MediaEditController",templateUrl:"bundles/os2displayadmin/apps/ikApp/pages/mediaEdit/media-edit.html?"+window.config.version})}]),angular.module("ikApp").filter("activeEvents",function(){"use strict";return function(e){if(!angular.isArray(e))return!1;for(var t=parseInt(Date.now()/1e3),i=[],o=0;o<e.length;o++){var n=e[o];n.from&&n.to&&n.to>=t?i.push(n):n.from&&n.from>=t&&i.push(n)}return i}}),angular.module("ikApp").controller("ScreenController",["$scope","$controller","$location","$routeParams","$timeout","screenFactory","channelFactory","sharedChannelFactory","templateFactory","busService","userService",function(e,t,i,o,n,s,r,a,h,d,l){"use strict";t("BaseEntityController",{$scope:e,entityType:"screen"}),e.loading=!0,e.sharingEnabled=window.config.sharingService.enabled,e.screen={},e.toolbarTemplate=null,e.display=!1,e.region=null,e.controlPanelData={userGroups:e.userGroups,baseUnavailableGroups:e.baseUnavailableGroups},e.$watch("userGroups",function(){e.controlPanelData.userGroups=e.userGroups}),e.$watch("baseUnavailableGroups",function(){e.controlPanelData.baseUnavailableGroups=e.baseUnavailableGroups}),o.id?null===o.id||void 0===o.id||""===o.id?i.path("/screen-overview"):s.getEditScreen(o.id).then(function(t){e.loading=!1,e.screen=t,e.screen.channel_screen_regions.forEach(function(e){e.shared_channel&&(e.shared_channel.content=JSON.parse(e.shared_channel.content),e.shared_channel.title=e.shared_channel.content.title,e.shared_channel.slides=e.shared_channel.content.slides)}),e.screen==={}&&i.path("/screen")},function(e){d.$emit("log.error",{cause:e,msg:"Skærmen med id: "+o.id+" blev ikke fundet"})}):(e.screen=s.emptyScreen(),h.getScreenTemplate("full-screen").then(function(t){e.screen.template=t,e.loading=!1},function(t){404===t&&h.getEnabledScreenTemplates().then(function(t){e.screen.template=angular.copy(t[0]),e.screen.orientation=t[0].orientation,e.loading=!1},function(e){d.$emit("log.error",{cause:e,msg:"Skabelonerne blev ikke loaded"})})})),e.saveScreenAndClose=function(){e.displayToolbar=!1,e.region=null,s.saveScreen().then(function(e){d.$emit("log.info",{msg:"Skærmen ("+e.title+") er gemt",timeout:5e3}),n(function(){i.path("/screen-overview")},1e3)},function(e){d.$emit("log.error",{cause:e,msg:"Skærmen blev ikke gemt"})})},e.saveScreen=function(){e.displayToolbar=!1,e.region=null,s.saveScreen().then(function(e){d.$emit("log.info",{msg:"Skærmen ("+e.title+") er gemt",timeout:5e3})},function(e){d.$emit("log.error",{cause:e,msg:"Skærmen blev ikke gemt"})})},e.triggerTool=function(t){e.screen.template.tools.hasOwnProperty(t.name)?e.toolbarTemplate=e.screen.template.tools[t.name]:e.toolbarTemplate="bundles/os2displayadmin/apps/ikShared/toolbars/"+t.name+".html?"+window.config.version,e.region=t.region,e.displayToolbar=!0}}]),angular.module("ikApp").controller("SharedChannelController",["$scope","$location","$routeParams","$timeout","screenFactory","sharedChannelFactory","busService",function(e,t,i,o,n,s,r){"use strict";function a(t){e.step=t,e.templatePath="bundles/os2displayadmin/apps/ikApp/pages/sharedChannel/shared-channel-step"+e.step+".html?"+window.config.version}e.steps=1,e.step=1,e.channel={},e.channel.slides=[],e.status="edit",n.getScreens().then(function(t){e.screens=t},function(e){r.$emit("log.error",{cause:e,msg:"Kunne ikke hente skærme."})}),i.id&&i.index?s.getSharedChannel(i.id,i.index).then(function(i){e.channel=JSON.parse(i.content),e.channel==={}&&t.path("/channel-sharing-overview"),a(1)},function(e){r.$emit("log.error",{cause:e,msg:"Delt kanal kunne ikke hentes."})}):t.path("/channel-sharing-overview"),e.submitStep=function(){t.path("/channel-sharing-overview")},e.goToStep=function(e){a(e)}}]),angular.module("ikApp").controller("AdminSharingController",["busService","sharedChannelFactory","$scope",function(e,t,i){"use strict";i.saving=!1,i.availableIndexes=[],t.getAvailableIndexes().then(function(e){e.forEach(function(e){"shared"===e.tag&&i.availableIndexes.push(e)})},function(t){e.$emit("log.error",{cause:t,msg:"Hentning af tilgængelige delingsindeks fejlede."})}),i.chosenIndexes=[],t.getSharingIndexes().then(function(e){i.chosenIndexes=e},function(t){e.$emit("log.error",{cause:t,msg:"Hentning af valgte delingsindeks fejlede."})}),i.save=function(){i.saving=!0,t.saveSharingIndexes(i.chosenIndexes).then(function(){e.$emit("log.info",{msg:"Delingsindeks gemt",timeout:3e3}),i.saving=!1},function(t){e.$emit("log.error",{cause:t,msg:"Delingsindeks blev ikke gemt."}),i.saving=!1})}}]),angular.module("ikApp").controller("AdminTemplatesController",["busService","templateFactory","$scope",function(e,t,i){"use strict";i.saving=!1,i.screenTemplates=[],i.slideTemplates=[],i.enabledScreenTemplates=[],i.enabledSlideTemplates=[],t.getScreenTemplates().then(function(e){i.screenTemplates=e;for(var t=[],o=0;o<e.length;o++)e[o].enabled&&t.push(e[o]);i.enabledScreenTemplates=t},function(t){e.$emit("log.error",{cause:t,msg:"Hentning af tilgængelige templates fejlede."})}),t.getSlideTemplates().then(function(e){i.slideTemplates=e;for(var t=[],o=0;o<e.length;o++)e[o].enabled&&t.push(e[o]);i.enabledSlideTemplates=t},function(t){e.$emit("log.error",{cause:t,msg:"Hentning af tilgængelige templates fejlede."})}),i.save=function(){i.saving=!0,t.saveEnabledTemplates(i.enabledScreenTemplates,i.enabledSlideTemplates).then(function(){e.$emit("log.info",{msg:"Template valg blev gemt",timeout:3e3}),i.saving=!1},function(t){e.$emit("log.error",{cause:t,msg:"Template valg blev ikke gemt"}),i.saving=!1})}}]),angular.module("ikApp").controller("ChannelController",["$scope","$controller","$location","$routeParams","$timeout","$filter","channelFactory","slideFactory","busService","userService",function(e,t,i,o,n,s,r,a,h,d){"use strict";function l(t){e.step=t,e.templatePath="bundles/os2displayadmin/apps/ikApp/pages/channel/channel-step"+e.step+".html?"+window.config.version}function c(e,t,i){var o=e[t];e[t]=e[i],e[i]=o}t("BaseEntityController",{$scope:e,entityType:"channel"}),e.steps=4,e.channel={},e.days=[{id:1,name:"Mandag"},{id:2,name:"Tirsdag"},{id:3,name:"Onsdag"},{id:4,name:"Torsdag"},{id:5,name:"Fredag"},{id:6,name:"Lørdag"},{id:0,name:"Søndag"}],e.editor={slideOverviewEditor:!1,toggleSlideOverviewEditor:function(){h.$emit("bodyService.toggleClass","is-locked"),e.editor.slideOverviewEditor=!e.editor.slideOverviewEditor}},e.$on("slideOverview.clickSlide",function(t,i){e.toggleSlide(i)}),o.id?null===o.id||void 0===o.id||""===o.id?i.path("/channel"):r.getEditChannel(o.id).then(function(t){e.channel=t,e.channel.status="edit-channel",e.channel==={}&&i.path("/channel"),l(2)},function(e){i.path("/channel-overview"),h.$emit("log.error",{cause:e,msg:"Hentning af valgt kanal med id:"+o.id+" fejlede"})}):(e.channel=r.emptyChannel(),l(1)),e.submitStep=function(){e.step===e.steps?(e.disableSubmitButton=!0,r.saveChannel().then(function(){h.$emit("log.info",{msg:"Kanal gemt.",timeout:3e3}),n(function(){i.path("/channel-overview")},1e3)},function(t){h.$emit("log.error",{cause:t,msg:"Gem af kanal fejlede."}),e.disableSubmitButton=!1})):l(e.step+1)},e.setOrientation=function(t){e.channel.orientation=t},e.slideSelected=function(t){var i=!1;return e.channel.slides.forEach(function(e){t===e.id&&(i=!0)}),i},e.validation={titleSet:function(){return t="title",!!e.channel&&""!==e.channel[t];var t}},e.toggleSlide=function(t){var i=null;e.channel.slides.forEach(function(e,o){t.id===e.id&&(i=o)}),null!==i?e.channel.slides.splice(i,1):e.channel.slides.push(t)},e.slideScheduledNow=function(e){if(!e.published)return!1;var t=new Date;return t=parseInt(t.getTime()/1e3),!(e.hasOwnProperty("schedule_from")&&t<e.schedule_from)&&!(e.hasOwnProperty("schedule_to")&&t>e.schedule_to)},e.getScheduledText=function(e){var t="";return e.published||(t+="Ikke udgivet!<br/>"),e.hasOwnProperty("schedule_from")&&(t=t+"Udgivet fra: "+s("date")(1e3*e.schedule_from,"dd/MM/yyyy HH:mm")+".<br/>"),e.hasOwnProperty("schedule_to")&&(t=t+"Udgivet til: "+s("date")(1e3*e.schedule_to,"dd/MM/yyyy HH:mm")+"."),t},e.goToStep=function(t){var i=1;e.validation.titleSet()&&(i+=3),t<=i&&l(t)},e.pushRight=function(t){t===e.channel.slides.length-1?c(e.channel.slides,t,0):c(e.channel.slides,t,t+1)},e.pushLeft=function(t){c(e.channel.slides,t,0===t?e.channel.slides.length-1:t-1)},e.handleDrop=function(t,i){t=parseInt(t.split("index-")[1]),i=parseInt(i.split("index-")[1]);var o=e.channel.slides.splice(t,1);e.channel.slides.splice(i,0,o[0])},e.sortSlides=function(t){var i=e.lastSortUsed===t;e.lastSortUsed=t,e.channel.slides="random"!==t?s("orderBy")(e.channel.slides,i?"-":""+t):function(e){for(var t,i,o=e.length;0!==o;)i=Math.floor(Math.random()*o),t=e[o-=1],e[o]=e[i],e[i]=t;return e}(e.channel.slides)}}]),angular.module("ikApp").controller("ChannelOverviewController",["$scope","sharedChannelFactory","channelFactory","busService",function(e,t,i,o){"use strict";e.shareDialogShow=!1,e.shareDialogChannel=null,window.config.sharingService.enabled&&(e.$on("ikChannelShare.clickShare",function(t,n){e.shareDialogShow=!0,e.shareDialogChannel=n,i.getChannel(n.id).then(function(t){e.shareDialogChannel=t,e.shareDialogChannel.sharing_indexes||(e.shareDialogChannel.sharing_indexes=[])},function(e){o.$emit("log.error",{cause:e,msg:"Hentning af kanal fejlede"})})}),e.sharingIndexes=[],t.getSharingIndexes().then(function(t){e.sharingIndexes=t},function(e){o.$emit("log.error",{cause:e,msg:"Hentning af delingsindeks fejlede."})}),e.saveSharingChannel=function(){i.channelShare(e.shareDialogChannel).then(function(){o.$emit("log.info",{msg:"Delingskonfiguration af kanal lykkedes.",timeout:3e3})},function(e){o.$emit("log.error",{cause:e,msg:"Deling af kanal fejlede."})})})}]),angular.module("ikApp").controller("MediaOverviewController",["$scope","$location",function(e,t){"use strict";e.$on("mediaOverview.selectMedia",function(e,i){t.path("/media/"+i.id)})}]),angular.module("ikApp").controller("MediaEditController",["$scope","$controller","$location","$routeParams","$timeout","mediaFactory","busService","userService",function(e,t,i,o,n,s,r,a){"use strict";t("BaseEntityController",{$scope:e,entityType:"media"}),e.loading=!0,s.getMedia(o.id).then(function(t){n(function(){e.media=t,e.media==={}&&i.path("/media-overview")})},function(e){r.$emit("log.error",{cause:e,msg:"Kunne ikke hente media med id: "+o.id}),i.path("/media-overview")}).then(function(){e.loading=!1}),e.updateMedia=function(){e.loading=!0,s.updateMedia(e.media).then(function(){n(function(){r.$emit("log.info",{msg:"Media opdateret.",timeout:3e3})})},function(e){r.$emit("log.error",{cause:e,msg:"Opdatering af media fejlede."})}).then(function(){e.loading=!1})},e.delete=function(){e.loading=!0,s.deleteMedia(e.media.id).then(function(){r.$emit("log.info",{msg:"Media slettet.",timeout:3e3}),n(function(){i.path("/media-overview")},500)},function(e){r.$emit("log.error",{cause:e,msg:"Sletning af media fejlede."})}).then(function(){e.loading=!1})},e.getContentType=function(e){return e?e.content_type.split("/")[0]:""},e.videoPath=function(e,t){var i="";return e.provider_metadata.forEach(function(e){e.format===t&&(i=e.reference),"thumbnail_landscape"===t&&e.thumbnails.forEach(function(e){"mp4_landscape"===e.label&&(i=e.reference)})}),i}}]),angular.module("ikApp").controller("SlideOverviewController",["$scope","$location",function(e,t){"use strict";e.$on("slideOverview.clickSlide",function(e,i){t.path("/slide/"+i.id)})}]),angular.module("ikApp").controller("SlideController",["$scope","$controller","$location","$routeParams","$timeout","slideFactory","templateFactory","channelFactory","busService","userService",function(e,t,i,o,n,s,r,a,h,d){"use strict";function l(t){e.step=t,e.templatePath="bundles/os2displayadmin/apps/ikApp/pages/slide/slide-step"+e.step+".html?"+window.config.version}function c(t){return!!e.slide&&""!==e.slide[t]}t("BaseEntityController",{$scope:e,entityType:"slide"}),e.steps=6,e.slide={},e.templates=[],r.getEnabledSlideTemplates().then(function(t){for(var i in t)t.hasOwnProperty(i)&&e.templates.push(t[i])},function(e){h.$emit("log.error",{cause:e,msg:"Kunne ikke hente slide templates."})}),e.editor={channelOverviewEditor:!1,toggleChannelOverviewEditor:function(){h.$emit("bodyService.toggleClass","is-locked"),e.editor.channelOverviewEditor=!e.editor.channelOverviewEditor}},e.$on("channelOverview.clickChannel",function(t,i){e.toggleChannel(i)}),o.id?null===o.id||void 0===o.id||""===o.id?i.path("/slide"):(s.clearCurrentSlide(),s.getEditSlide(o.id).then(function(t){e.slide=t,e.slide.status="edit-slide",e.slide==={}&&i.path("/slide"),l(3)},function(e){h.$emit("log.error",{cause:e,msg:"Kunne ikke hente slide med id: "+o.id}),i.path("/slide-overview")})):(e.slide=s.emptySlide(),e.slide.channels=[],l(1)),e.submitStep=function(){e.step===e.steps?(e.disableSubmitButton=!0,""===e.slide.duration&&(e.slide.duration=15),s.saveSlide().then(function(){h.$emit("log.info",{msg:"Slide er gemt",timeout:3e3}),n(function(){i.path("/slide-overview")},1e3)},function(t){h.$emit("log.error",{cause:t,msg:"Kunne ikke gemme slide"}),e.disableSubmitButton=!1})):l(e.step+1)},e.validation={titleSet:function(){return c("title")},templateSet:function(){return c("template")}},e.goToStep=function(t){var i=1;e.validation.titleSet()&&(i++,e.validation.templateSet()&&(i+=4)),t<=i&&l(t)},e.selectTemplate=function(t){e.slide.template=t;var i=null;e.templates.forEach(function(e){e.id===t&&(i=e)}),null!==i&&(e.slide.slide_type=i.slide_type,e.slide.options||(e.slide.options={}),e.slide.orientation=i.orientation,angular.forEach(i.empty_options,function(t,i){void 0===e.slide.options[i]&&(e.slide.options[i]=angular.copy(t))}),""===e.slide.options.headline&&(e.slide.options.headline=e.slide.title),e.slide.media_type=i.media_type)},e.channelSelected=function(t){var i=!1;return e.slide.channels.forEach(function(e){t.id===e.id&&(i=!0)}),i},e.hasChannel=function(t){var i=!1;return e.slide.channels.forEach(function(e){t.id===e.id&&(i=!0)}),i},e.toggleChannel=function(t){var i=null;e.slide.channels.forEach(function(e,o){t.id===e.id&&(i=o)}),null!==i?e.slide.channels.splice(i,1):e.slide.channels.push(t)}}]),angular.module("ikApp").controller("SlideEditController",["$scope","slideFactory","busService","templateFactory","$compile","$templateRequest",function(e,t,i,o,n,s){"use strict";t.getEditSlide(null).then(function(t){e.slide=t,o.getSlideTemplate(t.template).then(function(t){e.template=t},function(e){i.$emit("log.error",{cause:e,msg:"Kunne ikke loade værktøjer til slidet."})})},function(e){i.$emit("log.error",{cause:e,msg:"Kunne ikke hente slide."})}),i.$emit("bodyService.removeClass","is-locked"),e.editor={editorOpen:!1,hideEditors:function(){i.$emit("bodyService.removeClass","is-locked"),e.editor.editorOpen=!1,e.selectedTool=null;var t=document.getElementById("slide-edit-tool");angular.element(t).html(n("")(e))}},e.openTool=function(t){i.$emit("bodyService.toggleClass","is-locked"),e.editor.editorOpen=!0,t.id||(t.id="base-editor"),e.selectedTool=t;var o=document.getElementById("slide-edit-tool"),s="<div><"+t.id+' slide="slide" close="editor.hideEditors()" '+(t.template?'template="'+t.template+'"':"")+' tool="selectedTool"></'+t.id+"></div>";angular.element(o).html(n(s)(e))}}]),function(){"use strict";angular.module("itkDateComponent",[]).directive("dateComponent",["$interval",function(e){return{restrict:"E",replace:!0,templateUrl:"bundles/os2displayadmin/apps/ikApp/shared/components/date/date.html?"+window.config.version,scope:{theme:"@"},link:function(t){t.thisDate=new Date;var i=e(function(){t.thisDate=new Date},6e4);t.$on("$destroy",function(){angular.isDefined(i)&&(e.cancel(i),i=void 0)})}}}])}.call(this),function(){"use strict";angular.module("itkDigitalClockComponent",[]).directive("digitalClockComponent",["$interval",function(e){return{restrict:"E",replace:!0,templateUrl:"bundles/os2displayadmin/apps/ikApp/shared/components/digital-clock/digital-clock.html?"+window.config.version,scope:{},link:function(t){t.thisDate=new Date;var i=e(function(){t.thisDate=Date.now()},1e3);t.$on("$destroy",function(){angular.isDefined(i)&&(e.cancel(i),i=void 0)})}}}])}.call(this),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.vis=t():e.vis=t()}(this,function(){return function(e){function t(o){if(i[o])return i[o].exports;var n=i[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){var o=i(1);o.extend(t,i(7)),o.extend(t,i(24)),o.extend(t,i(60))},function(e,t,i){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},n=i(2),s=i(6);t.isNumber=function(e){return e instanceof Number||"number"==typeof e},t.recursiveDOMDelete=function(e){if(e)for(;!0===e.hasChildNodes();)t.recursiveDOMDelete(e.firstChild),e.removeChild(e.firstChild)},t.giveRange=function(e,t,i,o){if(t==e)return.5;var n=1/(t-e);return Math.max(0,(o-e)*n)},t.isString=function(e){return e instanceof String||"string"==typeof e},t.isDate=function(e){if(e instanceof Date)return!0;if(t.isString(e)){if(r.exec(e))return!0;if(!isNaN(Date.parse(e)))return!0}return!1},t.randomUUID=function(){return s.v4()},t.assignAllKeys=function(e,t){for(var i in e)e.hasOwnProperty(i)&&"object"!==o(e[i])&&(e[i]=t)},t.fillIfDefined=function(e,i){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];for(var s in e)void 0!==i[s]&&("object"!==o(i[s])?void 0!==i[s]&&null!==i[s]||void 0===e[s]||!0!==n?e[s]=i[s]:delete e[s]:"object"===o(e[s])&&t.fillIfDefined(e[s],i[s],n))},t.protoExtend=function(e,t){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var n in o)e[n]=o[n]}return e},t.extend=function(e,t){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n])}return e},t.selectiveExtend=function(e,t,i){if(!Array.isArray(e))throw new Error("Array with property names expected as first argument");for(var o=2;o<arguments.length;o++)for(var n=arguments[o],s=0;s<e.length;s++){var r=e[s];n.hasOwnProperty(r)&&(t[r]=n[r])}return t},t.selectiveDeepExtend=function(e,i,o){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];if(Array.isArray(o))throw new TypeError("Arrays are not supported by deepExtend");for(var s=2;s<arguments.length;s++)for(var r=arguments[s],a=0;a<e.length;a++){var h=e[a];if(r.hasOwnProperty(h))if(o[h]&&o[h].constructor===Object)void 0===i[h]&&(i[h]={}),i[h].constructor===Object?t.deepExtend(i[h],o[h],!1,n):null===o[h]&&void 0!==i[h]&&!0===n?delete i[h]:i[h]=o[h];else{if(Array.isArray(o[h]))throw new TypeError("Arrays are not supported by deepExtend");null===o[h]&&void 0!==i[h]&&!0===n?delete i[h]:i[h]=o[h]}}return i},t.selectiveNotDeepExtend=function(e,i,o){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];if(Array.isArray(o))throw new TypeError("Arrays are not supported by deepExtend");for(var s in o)if(o.hasOwnProperty(s)&&-1==e.indexOf(s))if(o[s]&&o[s].constructor===Object)void 0===i[s]&&(i[s]={}),i[s].constructor===Object?t.deepExtend(i[s],o[s]):null===o[s]&&void 0!==i[s]&&!0===n?delete i[s]:i[s]=o[s];else if(Array.isArray(o[s])){i[s]=[];for(var r=0;r<o[s].length;r++)i[s].push(o[s][r])}else null===o[s]&&void 0!==i[s]&&!0===n?delete i[s]:i[s]=o[s];return i},t.deepExtend=function(e,i,o,n){for(var s in i)if(i.hasOwnProperty(s)||!0===o)if(i[s]&&i[s].constructor===Object)void 0===e[s]&&(e[s]={}),e[s].constructor===Object?t.deepExtend(e[s],i[s],o):null===i[s]&&void 0!==e[s]&&!0===n?delete e[s]:e[s]=i[s];else if(Array.isArray(i[s])){e[s]=[];for(var r=0;r<i[s].length;r++)e[s].push(i[s][r])}else null===i[s]&&void 0!==e[s]&&!0===n?delete e[s]:e[s]=i[s];return e},t.equalArray=function(e,t){if(e.length!=t.length)return!1;for(var i=0,o=e.length;o>i;i++)if(e[i]!=t[i])return!1;return!0},t.convert=function(e,i){var o;if(void 0!==e){if(null===e)return null;if(!i)return e;if("string"!=typeof i&&!(i instanceof String))throw new Error("Type must be a string");switch(i){case"boolean":case"Boolean":return Boolean(e);case"number":case"Number":return Number(e.valueOf());case"string":case"String":return String(e);case"Date":if(t.isNumber(e))return new Date(e);if(e instanceof Date)return new Date(e.valueOf());if(n.isMoment(e))return new Date(e.valueOf());if(t.isString(e))return o=r.exec(e),o?new Date(Number(o[1])):n(e).toDate();throw new Error("Cannot convert object of type "+t.getType(e)+" to type Date");case"Moment":if(t.isNumber(e))return n(e);if(e instanceof Date)return n(e.valueOf());if(n.isMoment(e))return n(e);if(t.isString(e))return o=r.exec(e),n(o?Number(o[1]):e);throw new Error("Cannot convert object of type "+t.getType(e)+" to type Date");case"ISODate":if(t.isNumber(e))return new Date(e);if(e instanceof Date)return e.toISOString();if(n.isMoment(e))return e.toDate().toISOString();if(t.isString(e))return o=r.exec(e),o?new Date(Number(o[1])).toISOString():new Date(e).toISOString();throw new Error("Cannot convert object of type "+t.getType(e)+" to type ISODate");case"ASPDate":if(t.isNumber(e))return"/Date("+e+")/";if(e instanceof Date)return"/Date("+e.valueOf()+")/";if(t.isString(e))return"/Date("+((o=r.exec(e))?new Date(Number(o[1])).valueOf():new Date(e).valueOf())+")/";throw new Error("Cannot convert object of type "+t.getType(e)+" to type ASPDate");default:throw new Error('Unknown type "'+i+'"')}}};var r=/^\/?Date\((\-?\d+)/i;t.getType=function(e){var t=void 0===e?"undefined":o(e);return"object"==t?null===e?"null":e instanceof Boolean?"Boolean":e instanceof Number?"Number":e instanceof String?"String":Array.isArray(e)?"Array":e instanceof Date?"Date":"Object":"number"==t?"Number":"boolean"==t?"Boolean":"string"==t?"String":void 0===t?"undefined":t},t.copyAndExtendArray=function(e,t){for(var i=[],o=0;o<e.length;o++)i.push(e[o]);return i.push(t),i},t.copyArray=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},t.getAbsoluteLeft=function(e){return e.getBoundingClientRect().left},t.getAbsoluteRight=function(e){return e.getBoundingClientRect().right},t.getAbsoluteTop=function(e){return e.getBoundingClientRect().top},t.addClassName=function(e,t){var i=e.className.split(" ");-1==i.indexOf(t)&&(i.push(t),e.className=i.join(" "))},t.removeClassName=function(e,t){var i=e.className.split(" "),o=i.indexOf(t);-1!=o&&(i.splice(o,1),e.className=i.join(" "))},t.forEach=function(e,t){var i,o;if(Array.isArray(e))for(i=0,o=e.length;o>i;i++)t(e[i],i,e);else for(i in e)e.hasOwnProperty(i)&&t(e[i],i,e)},t.toArray=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},t.updateProperty=function(e,t,i){return e[t]!==i&&(e[t]=i,!0)},t.throttle=function(e,t){var i=null,o=!1;return function n(){i?o=!0:(o=!1,e(),i=setTimeout(function(){i=null,o&&n()},t))}},t.addEventListener=function(e,t,i,o){e.addEventListener?(void 0===o&&(o=!1),"mousewheel"===t&&navigator.userAgent.indexOf("Firefox")>=0&&(t="DOMMouseScroll"),e.addEventListener(t,i,o)):e.attachEvent("on"+t,i)},t.removeEventListener=function(e,t,i,o){e.removeEventListener?(void 0===o&&(o=!1),"mousewheel"===t&&navigator.userAgent.indexOf("Firefox")>=0&&(t="DOMMouseScroll"),e.removeEventListener(t,i,o)):e.detachEvent("on"+t,i)},t.preventDefault=function(e){e||(e=window.event),e.preventDefault?e.preventDefault():e.returnValue=!1},t.getTarget=function(e){var t;return e||(e=window.event),e.target?t=e.target:e.srcElement&&(t=e.srcElement),void 0!=t.nodeType&&3==t.nodeType&&(t=t.parentNode),t},t.hasParent=function(e,t){for(var i=e;i;){if(i===t)return!0;i=i.parentNode}return!1},t.option={},t.option.asBoolean=function(e,t){return"function"==typeof e&&(e=e()),null!=e?0!=e:t||null},t.option.asNumber=function(e,t){return"function"==typeof e&&(e=e()),null!=e?Number(e)||t||null:t||null},t.option.asString=function(e,t){return"function"==typeof e&&(e=e()),null!=e?String(e):t||null},t.option.asSize=function(e,i){return"function"==typeof e&&(e=e()),t.isString(e)?e:t.isNumber(e)?e+"px":i||null},t.option.asElement=function(e,t){return"function"==typeof e&&(e=e()),e||t||null},t.hexToRGB=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,o){return t+t+i+i+o+o});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},t.overrideOpacity=function(e,i){return-1!=e.indexOf("rgba")?e:-1!=e.indexOf("rgb")?"rgba("+(o=e.substr(e.indexOf("(")+1).replace(")","").split(","))[0]+","+o[1]+","+o[2]+","+i+")":null==(o=t.hexToRGB(e))?e:"rgba("+o.r+","+o.g+","+o.b+","+i+")";var o},t.RGBToHex=function(e,t,i){return"#"+((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)},t.parseColor=function(e){var i;if(!0===t.isString(e)){if(!0===t.isValidRGB(e)){var o=e.substr(4).substr(0,e.length-5).split(",").map(function(e){return parseInt(e)});e=t.RGBToHex(o[0],o[1],o[2])}if(!0===t.isValidHex(e)){var n=t.hexToHSV(e),s={h:n.h,s:.8*n.s,v:Math.min(1,1.02*n.v)},r={h:n.h,s:Math.min(1,1.25*n.s),v:.8*n.v},a=t.HSVToHex(r.h,r.s,r.v),h=t.HSVToHex(s.h,s.s,s.v);i={background:e,border:a,highlight:{background:h,border:a},hover:{background:h,border:a}}}else i={background:e,border:e,highlight:{background:e,border:e},hover:{background:e,border:e}}}else i={},i.background=e.background||void 0,i.border=e.border||void 0,t.isString(e.highlight)?i.highlight={border:e.highlight,background:e.highlight}:(i.highlight={},i.highlight.background=e.highlight&&e.highlight.background||void 0,i.highlight.border=e.highlight&&e.highlight.border||void 0),t.isString(e.hover)?i.hover={border:e.hover,background:e.hover}:(i.hover={},i.hover.background=e.hover&&e.hover.background||void 0,i.hover.border=e.hover&&e.hover.border||void 0);return i},t.RGBToHSV=function(e,t,i){e/=255,t/=255,i/=255;var o=Math.min(e,Math.min(t,i)),n=Math.max(e,Math.max(t,i));return o==n?{h:0,s:0,v:o}:{h:60*((e==o?3:i==o?1:5)-(e==o?t-i:i==o?e-t:i-e)/(n-o))/360,s:(n-o)/n,v:n}};var a=function(e){var t={};return e.split(";").forEach(function(e){if(""!=e.trim()){var i=e.split(":"),o=i[0].trim(),n=i[1].trim();t[o]=n}}),t},h=function(e){return Object.keys(e).map(function(t){return t+": "+e[t]}).join("; ")};t.addCssText=function(e,i){var o=a(e.style.cssText),n=a(i),s=t.extend(o,n);e.style.cssText=h(s)},t.removeCssText=function(e,t){var i=a(e.style.cssText),o=a(t);for(var n in o)o.hasOwnProperty(n)&&delete i[n];e.style.cssText=h(i)},t.HSVToRGB=function(e,t,i){var o,n,s,r=Math.floor(6*e),a=6*e-r,h=i*(1-t),d=i*(1-a*t),l=i*(1-(1-a)*t);switch(r%6){case 0:o=i,n=l,s=h;break;case 1:o=d,n=i,s=h;break;case 2:o=h,n=i,s=l;break;case 3:o=h,n=d,s=i;break;case 4:o=l,n=h,s=i;break;case 5:o=i,n=h,s=d}return{r:Math.floor(255*o),g:Math.floor(255*n),b:Math.floor(255*s)}},t.HSVToHex=function(e,i,o){var n=t.HSVToRGB(e,i,o);return t.RGBToHex(n.r,n.g,n.b)},t.hexToHSV=function(e){var i=t.hexToRGB(e);return t.RGBToHSV(i.r,i.g,i.b)},t.isValidHex=function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},t.isValidRGB=function(e){return e=e.replace(" ",""),/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(e)},t.isValidRGBA=function(e){return e=e.replace(" ",""),/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(.{1,3})\)/i.test(e)},t.selectiveBridgeObject=function(e,i){if("object"==(void 0===i?"undefined":o(i))){for(var n=Object.create(i),s=0;s<e.length;s++)i.hasOwnProperty(e[s])&&"object"==o(i[e[s]])&&(n[e[s]]=t.bridgeObject(i[e[s]]));return n}return null},t.bridgeObject=function(e){if("object"==(void 0===e?"undefined":o(e))){var i=Object.create(e);for(var n in e)e.hasOwnProperty(n)&&"object"==o(e[n])&&(i[n]=t.bridgeObject(e[n]));return i}return null},t.insertSort=function(e,t){for(var i=0;i<e.length;i++){for(var o=e[i],n=i;n>0&&t(o,e[n-1])<0;n--)e[n]=e[n-1];e[n]=o}return e},t.mergeOptions=function(e,t,i){var o=(!(arguments.length<=3||void 0===arguments[3])&&arguments[3],arguments.length<=4||void 0===arguments[4]?{}:arguments[4]);if(null===t[i])e[i]=Object.create(o[i]);else if(void 0!==t[i])if("boolean"==typeof t[i])e[i].enabled=t[i];else{void 0===t[i].enabled&&(e[i].enabled=!0);for(var n in t[i])t[i].hasOwnProperty(n)&&(e[i][n]=t[i][n])}},t.binarySearchCustom=function(e,t,i,o){for(var n=0,s=0,r=e.length-1;r>=s&&1e4>n;){var a=Math.floor((s+r)/2),h=e[a],d=t(void 0===o?h[i]:h[i][o]);if(0==d)return a;-1==d?s=a+1:r=a-1,n++}return-1},t.binarySearchValue=function(e,t,i,o,n){var s,r,a,h,d=0,l=0,c=e.length-1;for(n=void 0!=n?n:function(e,t){return e==t?0:t>e?-1:1};c>=l&&1e4>d;){if(h=Math.floor(.5*(c+l)),s=e[Math.max(0,h-1)][i],r=e[h][i],a=e[Math.min(e.length-1,h+1)][i],0==n(r,t))return h;if(n(s,t)<0&&n(r,t)>0)return"before"==o?Math.max(0,h-1):h;if(n(r,t)<0&&n(a,t)>0)return"before"==o?h:Math.min(e.length-1,h+1);n(r,t)<0?l=h+1:c=h-1,d++}return-1},t.easingFunctions={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return.5>e?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return.5>e?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return.5>e?16*e*e*e*e*e:1+16*--e*e*e*e*e}}},function(e,t,i){e.exports="undefined"!=typeof window&&window.moment||i(3)},function(e,t,i){(function(e){e.exports=function(){function t(){return Ge.apply(null,arguments)}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function n(e,t){var i,o=[];for(i=0;i<e.length;++i)o.push(t(e[i],i));return o}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e,t){for(var i in t)s(t,i)&&(e[i]=t[i]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function a(e,t,i,o){return le(e,t,i,o,!0).utc()}function h(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}),e._pf}function d(e){if(null==e._isValid){var t=h(e),i=Ve.call(t.parsedDateParts,function(e){return null!=e});e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function l(e){var t=a(NaN);return null!=e?r(h(t),e):h(t).userInvalidated=!0,t}function c(e){return void 0===e}function u(e,t){var i,o,n;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=h(t)),c(t._locale)||(e._locale=t._locale),Xe.length>0)for(i in Xe)o=Xe[i],n=t[o],c(n)||(e[o]=n);return e}function p(e){u(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),!1===Ke&&(Ke=!0,t.updateOffset(this),Ke=!1)}function f(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function m(e){return 0>e?Math.ceil(e):Math.floor(e)}function g(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=m(t)),i}function v(e,t,i){var o,n=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0;for(o=0;n>o;o++)(i&&e[o]!==t[o]||!i&&g(e[o])!==g(t[o]))&&r++;return r+s}function y(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function b(e,i){var o=!0;return r(function(){return null!=t.deprecationHandler&&t.deprecationHandler(null,e),o&&(y(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),o=!1),i.apply(this,arguments)},i)}function w(e,i){null!=t.deprecationHandler&&t.deprecationHandler(e,i),Ze[e]||(y(i),Ze[e]=!0)}function _(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function x(e){return"[object Object]"===Object.prototype.toString.call(e)}function k(e,t){var i,o=r({},e);for(i in t)s(t,i)&&(x(e[i])&&x(t[i])?(o[i]={},r(o[i],e[i]),r(o[i],t[i])):null!=t[i]?o[i]=t[i]:delete o[i]);return o}function S(e){null!=e&&this.set(e)}function O(e){return e?e.toLowerCase().replace("_","-"):e}function C(t){var i=null;if(!et[t]&&void 0!==e&&e&&e.exports)try{i=Je._abbr,function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),M(i)}catch(e){}return et[t]}function M(e,t){var i;return e&&(i=c(t)?E(e):D(e,t))&&(Je=i),Je._abbr}function D(e,t){return null!==t?(t.abbr=e,null!=et[e]?(w("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),t=k(et[e]._config,t)):null!=t.parentLocale&&(null!=et[t.parentLocale]?t=k(et[t.parentLocale]._config,t):w("parentLocaleUndefined","specified parentLocale is not defined yet")),et[e]=new S(t),M(e),et[e]):(delete et[e],null)}function E(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Je;if(!i(e)){if(t=C(e))return t;e=[e]}return function(e){for(var t,i,o,n,s=0;s<e.length;){for(n=O(e[s]).split("-"),t=n.length,i=(i=O(e[s+1]))?i.split("-"):null;t>0;){if(o=C(n.slice(0,t).join("-")))return o;if(i&&i.length>=t&&v(n,i,!0)>=t-1)break;t--}s++}return null}(e)}function T(e,t){var i=e.toLowerCase();tt[i]=tt[i+"s"]=tt[t]=e}function P(e){return"string"==typeof e?tt[e]||tt[e.toLowerCase()]:void 0}function I(e){var t,i,o={};for(i in e)s(e,i)&&(t=P(i),t&&(o[t]=e[i]));return o}function A(e,i){return function(o){return null!=o?(L(this,e,o),t.updateOffset(this,i),this):R(this,e)}}function R(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function L(e,t,i){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](i)}function N(e,t){var i;if("object"==typeof e)for(i in e)this.set(i,e[i]);else if(e=P(e),_(this[e]))return this[e](t);return this}function z(e,t,i){var o=""+Math.abs(e),n=t-o.length,s=e>=0;return(s?i?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+o}function F(e,t,i,o){var n=o;"string"==typeof o&&(n=function(){return this[o]()}),e&&(st[e]=n),t&&(st[t[0]]=function(){return z(n.apply(this,arguments),t[1],t[2])}),i&&(st[i]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function B(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function j(e,t){return e.isValid()?(t=H(t,e.localeData()),nt[t]=nt[t]||function(e){var t,i,o=e.match(it);for(t=0,i=o.length;i>t;t++)st[o[t]]?o[t]=st[o[t]]:o[t]=B(o[t]);return function(t){var n,s="";for(n=0;i>n;n++)s+=o[n]instanceof Function?o[n].call(t,e):o[n];return s}}(t),nt[t](e)):e.localeData().invalidDate()}function H(e,t){function i(e){return t.longDateFormat(e)||e}var o=5;for(ot.lastIndex=0;o>=0&&ot.test(e);)e=e.replace(ot,i),ot.lastIndex=0,o-=1;return e}function W(e,t,i){xt[e]=_(t)?t:function(e,o){return e&&i?i:t}}function U(e,t){return s(xt,e)?xt[e](t._strict,t._locale):new RegExp($(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,o,n){return t||i||o||n})))}function $(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Y(e,t){var i,o=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(o=function(e,i){i[t]=g(e)}),i=0;i<e.length;i++)kt[e[i]]=o}function G(e,t){Y(e,function(e,i,o,n){o._w=o._w||{},t(e,o._w,o,n)})}function V(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function q(e,t){var i;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=g(t);else if(t=e.localeData().monthsParse(t),"number"!=typeof t)return e;return i=Math.min(e.date(),V(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function X(e){return null!=e?(q(this,e),t.updateOffset(this,!0),this):R(this,"Month")}function K(){function e(e,t){return t.length-e.length}var t,i,o=[],n=[],s=[];for(t=0;12>t;t++)i=a([2e3,t]),o.push(this.monthsShort(i,"")),n.push(this.months(i,"")),s.push(this.months(i,"")),s.push(this.monthsShort(i,""));for(o.sort(e),n.sort(e),s.sort(e),t=0;12>t;t++)o[t]=$(o[t]),n[t]=$(n[t]),s[t]=$(s[t]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Z(e){var t,i=e._a;return i&&-2===h(e).overflow&&(t=i[Ot]<0||i[Ot]>11?Ot:i[Ct]<1||i[Ct]>V(i[St],i[Ot])?Ct:i[Mt]<0||i[Mt]>24||24===i[Mt]&&(0!==i[Dt]||0!==i[Et]||0!==i[Tt])?Mt:i[Dt]<0||i[Dt]>59?Dt:i[Et]<0||i[Et]>59?Et:i[Tt]<0||i[Tt]>999?Tt:-1,h(e)._overflowDayOfYear&&(St>t||t>Ct)&&(t=Ct),h(e)._overflowWeeks&&-1===t&&(t=Pt),h(e)._overflowWeekday&&-1===t&&(t=It),h(e).overflow=t),e}function J(e){var t,i,o,n,s,r,a=e._i,d=Ft.exec(a)||Bt.exec(a);if(d){for(h(e).iso=!0,t=0,i=Ht.length;i>t;t++)if(Ht[t][1].exec(d[1])){n=Ht[t][0],o=!1!==Ht[t][2];break}if(null==n)return void(e._isValid=!1);if(d[3]){for(t=0,i=Wt.length;i>t;t++)if(Wt[t][1].exec(d[3])){s=(d[2]||" ")+Wt[t][0];break}if(null==s)return void(e._isValid=!1)}if(!o&&null!=s)return void(e._isValid=!1);if(d[4]){if(!jt.exec(d[4]))return void(e._isValid=!1);r="Z"}e._f=n+(s||"")+(r||""),he(e)}else e._isValid=!1}function Q(e){var t=new Date(Date.UTC.apply(null,arguments));return 100>e&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function ee(e){return te(e)?366:365}function te(e){return e%4==0&&e%100!=0||e%400==0}function ie(e,t,i){var o=7+t-i,n=(7+Q(e,0,o).getUTCDay()-t)%7;return-n+o-1}function oe(e,t,i,o,n){var s,r,a=(7+i-o)%7,h=ie(e,o,n),d=1+7*(t-1)+a+h;return 0>=d?r=ee(s=e-1)+d:d>ee(e)?(s=e+1,r=d-ee(e)):(s=e,r=d),{year:s,dayOfYear:r}}function ne(e,t,i){var o,n,s=ie(e.year(),t,i),r=Math.floor((e.dayOfYear()-s-1)/7)+1;return 1>r?(n=e.year()-1,o=r+se(n,t,i)):r>se(e.year(),t,i)?(o=r-se(e.year(),t,i),n=e.year()+1):(n=e.year(),o=r),{week:o,year:n}}function se(e,t,i){var o=ie(e,t,i),n=ie(e+1,t,i);return(ee(e)-o+n)/7}function re(e,t,i){return null!=e?e:null!=t?t:i}function ae(e){var i,o,n,s,r,a,d,l,c,u,p,f,m,g,v,y=[];if(!e._d){for(g=e,v=void 0,v=new Date(t.now()),n=g._useUTC?[v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()]:[v.getFullYear(),v.getMonth(),v.getDate()],e._w&&null==e._a[Ct]&&null==e._a[Ot]&&(a=void 0,d=void 0,l=void 0,c=void 0,u=void 0,p=void 0,f=void 0,m=void 0,null!=(a=(r=e)._w).GG||null!=a.W||null!=a.E?(u=1,p=4,d=re(a.GG,r._a[St],ne(ce(),1,4).year),l=re(a.W,1),(1>(c=re(a.E,1))||c>7)&&(m=!0)):(u=r._locale._week.dow,p=r._locale._week.doy,d=re(a.gg,r._a[St],ne(ce(),u,p).year),l=re(a.w,1),null!=a.d?(0>(c=a.d)||c>6)&&(m=!0):null!=a.e?(c=a.e+u,(a.e<0||a.e>6)&&(m=!0)):c=u),1>l||l>se(d,u,p)?h(r)._overflowWeeks=!0:null!=m?h(r)._overflowWeekday=!0:(f=oe(d,l,c,u,p),r._a[St]=f.year,r._dayOfYear=f.dayOfYear)),e._dayOfYear&&(s=re(e._a[St],n[St]),e._dayOfYear>ee(s)&&(h(e)._overflowDayOfYear=!0),o=Q(s,0,e._dayOfYear),e._a[Ot]=o.getUTCMonth(),e._a[Ct]=o.getUTCDate()),i=0;3>i&&null==e._a[i];++i)e._a[i]=y[i]=n[i];for(;7>i;i++)e._a[i]=y[i]=null==e._a[i]?2===i?1:0:e._a[i];24===e._a[Mt]&&0===e._a[Dt]&&0===e._a[Et]&&0===e._a[Tt]&&(e._nextDay=!0,e._a[Mt]=0),e._d=(e._useUTC?Q:function(e,t,i,o,n,s,r){var a=new Date(e,t,i,o,n,s,r);return 100>e&&e>=0&&isFinite(a.getFullYear())&&a.setFullYear(e),a}).apply(null,y),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Mt]=24)}}function he(e){if(e._f!==t.ISO_8601){e._a=[],h(e).empty=!0;var i,o,n,r,a,d,l,c,u,p,f,m,g=""+e._i,v=g.length,y=0;for(n=H(e._f,e._locale).match(it)||[],i=0;i<n.length;i++)r=n[i],o=(g.match(U(r,e))||[])[0],o&&(a=g.substr(0,g.indexOf(o)),a.length>0&&h(e).unusedInput.push(a),g=g.slice(g.indexOf(o)+o.length),y+=o.length),st[r]?(o?h(e).empty=!1:h(e).unusedTokens.push(r),d=r,l=o,c=e,null!=l&&s(kt,d)&&kt[d](l,c._a,c,d)):e._strict&&!o&&h(e).unusedTokens.push(r);h(e).charsLeftOver=v-y,g.length>0&&h(e).unusedInput.push(g),!0===h(e).bigHour&&e._a[Mt]<=12&&e._a[Mt]>0&&(h(e).bigHour=void 0),h(e).parsedDateParts=e._a.slice(0),h(e).meridiem=e._meridiem,e._a[Mt]=(u=e._locale,p=e._a[Mt],null==(f=e._meridiem)?p:null!=u.meridiemHour?u.meridiemHour(p,f):null!=u.isPM?((m=u.isPM(f))&&12>p&&(p+=12),m||12!==p||(p=0),p):p),ae(e),Z(e)}else J(e)}function de(e){var s,a,c,m,g=e._i,v=e._f;return e._locale=e._locale||E(e._l),null===g||void 0===v&&""===g?l({nullInput:!0}):("string"==typeof g&&(e._i=g=e._locale.preparse(g)),f(g)?new p(Z(g)):(i(v)?function(e){var t,i,o,n,s;if(0===e._f.length)return h(e).invalidFormat=!0,void(e._d=new Date(NaN));for(n=0;n<e._f.length;n++)s=0,t=u({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[n],he(t),d(t)&&(s+=h(t).charsLeftOver,s+=10*h(t).unusedTokens.length,h(t).score=s,(null==o||o>s)&&(o=s,i=t));r(e,i||t)}(e):v?he(e):o(g)?e._d=g:void 0===(a=(s=e)._i)?s._d=new Date(t.now()):o(a)?s._d=new Date(a.valueOf()):"string"==typeof a?(c=s,null!==(m=Ut.exec(c._i))?c._d=new Date(+m[1]):(J(c),!1===c._isValid&&(delete c._isValid,t.createFromInputFallback(c)))):i(a)?(s._a=n(a.slice(0),function(e){return parseInt(e,10)}),ae(s)):"object"==typeof a?function(e){if(!e._d){var t=I(e._i);e._a=n([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ae(e)}}(s):"number"==typeof a?s._d=new Date(a):t.createFromInputFallback(s),d(e)||(e._d=null),e))}function le(e,t,i,o,n){var s,r={};return"boolean"==typeof i&&(o=i,i=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=n,r._l=i,r._i=e,r._f=t,r._strict=o,(s=new p(Z(de(r))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function ce(e,t,i,o){return le(e,t,i,o,!1)}function ue(e,t){var o,n;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return ce();for(o=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](o)||(o=t[n]);return o}function pe(e){var t=I(e),i=t.year||0,o=t.quarter||0,n=t.month||0,s=t.week||0,r=t.day||0,a=t.hour||0,h=t.minute||0,d=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*d+6e4*h+1e3*a*60*60,this._days=+r+7*s,this._months=+n+3*o+12*i,this._data={},this._locale=E(),this._bubble()}function fe(e){return e instanceof pe}function me(e,t){F(e,0,0,function(){var e=this.utcOffset(),i="+";return 0>e&&(e=-e,i="-"),i+z(~~(e/60),2)+t+z(~~e%60,2)})}function ge(e,t){var i=(t||"").match(e)||[],o=i[i.length-1]||[],n=(o+"").match(Vt)||["-",0,0],s=60*n[1]+g(n[2]);return"+"===n[0]?s:-s}function ve(e,i){var n,s;return i._isUTC?(n=i.clone(),s=(f(e)||o(e)?e.valueOf():ce(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),t.updateOffset(n,!1),n):ce(e).local()}function ye(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function be(){return!!this.isValid()&&this._isUTC&&0===this._offset}function we(e,t){var i,o,n,r,a,h,d=e,l=null;return fe(e)?d={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(d={},t?d[t]=e:d.milliseconds=e):(l=qt.exec(e))?(i="-"===l[1]?-1:1,d={y:0,d:g(l[Ct])*i,h:g(l[Mt])*i,m:g(l[Dt])*i,s:g(l[Et])*i,ms:g(l[Tt])*i}):(l=Xt.exec(e))?(i="-"===l[1]?-1:1,d={y:_e(l[2],i),M:_e(l[3],i),w:_e(l[4],i),d:_e(l[5],i),h:_e(l[6],i),m:_e(l[7],i),s:_e(l[8],i)}):null==d?d={}:"object"==typeof d&&("from"in d||"to"in d)&&(r=ce(d.from),a=ce(d.to),n=r.isValid()&&a.isValid()?(a=ve(a,r),r.isBefore(a)?h=xe(r,a):((h=xe(a,r)).milliseconds=-h.milliseconds,h.months=-h.months),h):{milliseconds:0,months:0},(d={}).ms=n.milliseconds,d.M=n.months),o=new pe(d),fe(e)&&s(e,"_locale")&&(o._locale=e._locale),o}function _e(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function xe(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function ke(e){return 0>e?-1*Math.round(-1*e):Math.round(e)}function Se(e,t){return function(i,o){var n;return null===o||isNaN(+o)||(w(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),n=i,i=o,o=n),Oe(this,we(i="string"==typeof i?+i:i,o),e),this}}function Oe(e,i,o,n){var s=i._milliseconds,r=ke(i._days),a=ke(i._months);e.isValid()&&(n=null==n||n,s&&e._d.setTime(e._d.valueOf()+s*o),r&&L(e,"Date",R(e,"Date")+r*o),a&&q(e,R(e,"Month")+a*o),n&&t.updateOffset(e,r||a))}function Ce(e){var t;return void 0===e?this._locale._abbr:(null!=(t=E(e))&&(this._locale=t),this)}function Me(){return this._locale}function De(e,t){F(0,[e,e.length],0,t)}function Ee(e,t,i,o,n){var s;return null==e?ne(this,o,n).year:(s=se(e,o,n),t>s&&(t=s),function(e,t,i,o,n){var s=oe(e,t,i,o,n),r=Q(s.year,0,s.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}.call(this,e,t,i,o,n))}function Te(){function e(e,t){return t.length-e.length}var t,i,o,n,s,r=[],h=[],d=[],l=[];for(t=0;7>t;t++)i=a([2e3,1]).day(t),o=this.weekdaysMin(i,""),n=this.weekdaysShort(i,""),s=this.weekdays(i,""),r.push(o),h.push(n),d.push(s),l.push(o),l.push(n),l.push(s);for(r.sort(e),h.sort(e),d.sort(e),l.sort(e),t=0;7>t;t++)h[t]=$(h[t]),d[t]=$(d[t]),l[t]=$(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Pe(){return this.hours()%12||12}function Ie(e,t){F(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Ae(e,t){return t._meridiemParse}function Re(e,t){t[Tt]=g(1e3*("0."+e))}function Le(e){return e}function Ne(e,t,i,o){var n=E(),s=a().set(o,t);return n[i](s,e)}function ze(e,t,i){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return Ne(e,t,i,"month");var o,n=[];for(o=0;12>o;o++)n[o]=Ne(e,o,i,"month");return n}function Fe(e,t,i,o){"boolean"==typeof e?("number"==typeof t&&(i=t,t=void 0),t=t||""):(i=t=e,e=!1,"number"==typeof t&&(i=t,t=void 0),t=t||"");var n=E(),s=e?n._week.dow:0;if(null!=i)return Ne(t,(i+s)%7,o,"day");var r,a=[];for(r=0;7>r;r++)a[r]=Ne(t,(r+s)%7,o,"day");return a}function Be(e,t,i,o){var n=we(t,i);return e._milliseconds+=o*n._milliseconds,e._days+=o*n._days,e._months+=o*n._months,e._bubble()}function je(e){return 0>e?Math.floor(e):Math.ceil(e)}function He(e){return 4800*e/146097}function We(e){return 146097*e/4800}function Ue(e){return function(){return this.as(e)}}function $e(e){return function(){return this._data[e]}}function Ye(){var e,t,i=Ii(this._milliseconds)/1e3,o=Ii(this._days),n=Ii(this._months);e=m(i/60),t=m(e/60),i%=60,e%=60;var s=m(n/12),r=n%=12,a=o,h=t,d=e,l=i,c=this.asSeconds();return c?(0>c?"-":"")+"P"+(s?s+"Y":"")+(r?r+"M":"")+(a?a+"D":"")+(h||d||l?"T":"")+(h?h+"H":"")+(d?d+"M":"")+(l?l+"S":""):"P0D"}var Ge,Ve;Ve=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),i=t.length>>>0,o=0;i>o;o++)if(o in t&&e.call(this,t[o],o,t))return!0;return!1};var qe,Xe=t.momentProperties=[],Ke=!1,Ze={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null,qe=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)s(e,t)&&i.push(t);return i};var Je,Qe,et={},tt={},it=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ot=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,nt={},st={},rt=/\d/,at=/\d\d/,ht=/\d{3}/,dt=/\d{4}/,lt=/[+-]?\d{6}/,ct=/\d\d?/,ut=/\d\d\d\d?/,pt=/\d\d\d\d\d\d?/,ft=/\d{1,3}/,mt=/\d{1,4}/,gt=/[+-]?\d{1,6}/,vt=/\d+/,yt=/[+-]?\d+/,bt=/Z|[+-]\d\d:?\d\d/gi,wt=/Z|[+-]\d\d(?::?\d\d)?/gi,_t=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,xt={},kt={},St=0,Ot=1,Ct=2,Mt=3,Dt=4,Et=5,Tt=6,Pt=7,It=8;Qe=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},F("M",["MM",2],"Mo",function(){return this.month()+1}),F("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),F("MMMM",0,0,function(e){return this.localeData().months(this,e)}),T("month","M"),W("M",ct),W("MM",ct,at),W("MMM",function(e,t){return t.monthsShortRegex(e)}),W("MMMM",function(e,t){return t.monthsRegex(e)}),Y(["M","MM"],function(e,t){t[Ot]=g(e)-1}),Y(["MMM","MMMM"],function(e,t,i,o){var n=i._locale.monthsParse(e,o,i._strict);null!=n?t[Ot]=n:h(i).invalidMonth=e});var At=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Rt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Lt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Nt=_t,zt=_t,Ft=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Bt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,jt=/Z|[+-]\d\d(?::?\d\d)?/,Ht=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Wt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ut=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=b("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),F("Y",0,0,function(){var e=this.year();return 9999>=e?""+e:"+"+e}),F(0,["YY",2],0,function(){return this.year()%100}),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),T("year","y"),W("Y",yt),W("YY",ct,at),W("YYYY",mt,dt),W("YYYYY",gt,lt),W("YYYYYY",gt,lt),Y(["YYYYY","YYYYYY"],St),Y("YYYY",function(e,i){i[St]=2===e.length?t.parseTwoDigitYear(e):g(e)}),Y("YY",function(e,i){i[St]=t.parseTwoDigitYear(e)}),Y("Y",function(e,t){t[St]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return g(e)+(g(e)>68?1900:2e3)};var $t=A("FullYear",!0);t.ISO_8601=function(){};var Yt=b("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=ce.apply(null,arguments);return this.isValid()&&e.isValid()?this>e?this:e:l()}),Gt=b("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=ce.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:l()});me("Z",":"),me("ZZ",""),W("Z",wt),W("ZZ",wt),Y(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=ge(wt,e)});var Vt=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var qt=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,Xt=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;we.fn=pe.prototype;var Kt=Se(1,"add"),Zt=Se(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Jt=b("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});F(0,["gg",2],0,function(){return this.weekYear()%100}),F(0,["GG",2],0,function(){return this.isoWeekYear()%100}),De("gggg","weekYear"),De("ggggg","weekYear"),De("GGGG","isoWeekYear"),De("GGGGG","isoWeekYear"),T("weekYear","gg"),T("isoWeekYear","GG"),W("G",yt),W("g",yt),W("GG",ct,at),W("gg",ct,at),W("GGGG",mt,dt),W("gggg",mt,dt),W("GGGGG",gt,lt),W("ggggg",gt,lt),G(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,o){t[o.substr(0,2)]=g(e)}),G(["gg","GG"],function(e,i,o,n){i[n]=t.parseTwoDigitYear(e)}),F("Q",0,"Qo","quarter"),T("quarter","Q"),W("Q",rt),Y("Q",function(e,t){t[Ot]=3*(g(e)-1)}),F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),T("week","w"),T("isoWeek","W"),W("w",ct),W("ww",ct,at),W("W",ct),W("WW",ct,at),G(["w","ww","W","WW"],function(e,t,i,o){t[o.substr(0,1)]=g(e)}),F("D",["DD",2],"Do","date"),T("date","D"),W("D",ct),W("DD",ct,at),W("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),Y(["D","DD"],Ct),Y("Do",function(e,t){t[Ct]=g(e.match(ct)[0])});var Qt=A("Date",!0);F("d",0,"do","day"),F("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),F("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),F("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),T("day","d"),T("weekday","e"),T("isoWeekday","E"),W("d",ct),W("e",ct),W("E",ct),W("dd",function(e,t){return t.weekdaysMinRegex(e)}),W("ddd",function(e,t){return t.weekdaysShortRegex(e)}),W("dddd",function(e,t){return t.weekdaysRegex(e)}),G(["dd","ddd","dddd"],function(e,t,i,o){var n=i._locale.weekdaysParse(e,o,i._strict);null!=n?t.d=n:h(i).invalidWeekday=e}),G(["d","e","E"],function(e,t,i,o){t[o]=g(e)});var ei="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ti="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ii="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),oi=_t,ni=_t,si=_t;F("DDD",["DDDD",3],"DDDo","dayOfYear"),T("dayOfYear","DDD"),W("DDD",ft),W("DDDD",ht),Y(["DDD","DDDD"],function(e,t,i){i._dayOfYear=g(e)}),F("H",["HH",2],0,"hour"),F("h",["hh",2],0,Pe),F("k",["kk",2],0,function(){return this.hours()||24}),F("hmm",0,0,function(){return""+Pe.apply(this)+z(this.minutes(),2)}),F("hmmss",0,0,function(){return""+Pe.apply(this)+z(this.minutes(),2)+z(this.seconds(),2)}),F("Hmm",0,0,function(){return""+this.hours()+z(this.minutes(),2)}),F("Hmmss",0,0,function(){return""+this.hours()+z(this.minutes(),2)+z(this.seconds(),2)}),Ie("a",!0),Ie("A",!1),T("hour","h"),W("a",Ae),W("A",Ae),W("H",ct),W("h",ct),W("HH",ct,at),W("hh",ct,at),W("hmm",ut),W("hmmss",pt),W("Hmm",ut),W("Hmmss",pt),Y(["H","HH"],Mt),Y(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),Y(["h","hh"],function(e,t,i){t[Mt]=g(e),h(i).bigHour=!0}),Y("hmm",function(e,t,i){var o=e.length-2;t[Mt]=g(e.substr(0,o)),t[Dt]=g(e.substr(o)),h(i).bigHour=!0}),Y("hmmss",function(e,t,i){var o=e.length-4,n=e.length-2;t[Mt]=g(e.substr(0,o)),t[Dt]=g(e.substr(o,2)),t[Et]=g(e.substr(n)),h(i).bigHour=!0}),Y("Hmm",function(e,t,i){var o=e.length-2;t[Mt]=g(e.substr(0,o)),t[Dt]=g(e.substr(o))}),Y("Hmmss",function(e,t,i){var o=e.length-4,n=e.length-2;t[Mt]=g(e.substr(0,o)),t[Dt]=g(e.substr(o,2)),t[Et]=g(e.substr(n))});var ri=A("Hours",!0);F("m",["mm",2],0,"minute"),T("minute","m"),W("m",ct),W("mm",ct,at),Y(["m","mm"],Dt);var ai=A("Minutes",!1);F("s",["ss",2],0,"second"),T("second","s"),W("s",ct),W("ss",ct,at),Y(["s","ss"],Et);var hi,di=A("Seconds",!1);for(F("S",0,0,function(){return~~(this.millisecond()/100)}),F(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,function(){return 10*this.millisecond()}),F(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),F(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),F(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),F(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),F(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),T("millisecond","ms"),W("S",ft,rt),W("SS",ft,at),W("SSS",ft,ht),hi="SSSS";hi.length<=9;hi+="S")W(hi,vt);for(hi="S";hi.length<=9;hi+="S")Y(hi,Re);var li=A("Milliseconds",!1);F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var ci=p.prototype;ci.add=Kt,ci.calendar=function(e,t){var i=e||ce(),o=ve(i,this).startOf("day"),n=this.diff(o,"days",!0),s=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse",r=t&&(_(t[s])?t[s]():t[s]);return this.format(r||this.localeData().calendar(s,this,ce(i)))},ci.clone=function(){return new p(this)},ci.diff=function(e,t,i){var o,n,s,r;return this.isValid()&&(o=ve(e,this)).isValid()?(n=6e4*(o.utcOffset()-this.utcOffset()),"year"===(t=P(t))||"month"===t||"quarter"===t?(r=function(e,t){var i,o,n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months");return 0>t-s?(i=e.clone().add(n-1,"months"),o=(t-s)/(s-i)):(i=e.clone().add(n+1,"months"),o=(t-s)/(i-s)),-(n+o)||0}(this,o),"quarter"===t?r/=3:"year"===t&&(r/=12)):(s=this-o,r="second"===t?s/1e3:"minute"===t?s/6e4:"hour"===t?s/36e5:"day"===t?(s-n)/864e5:"week"===t?(s-n)/6048e5:s),i?r:m(r)):NaN},ci.endOf=function(e){return void 0===(e=P(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},ci.format=function(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=j(this,e);return this.localeData().postformat(i)},ci.from=function(e,t){return this.isValid()&&(f(e)&&e.isValid()||ce(e).isValid())?we({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ci.fromNow=function(e){return this.from(ce(),e)},ci.to=function(e,t){return this.isValid()&&(f(e)&&e.isValid()||ce(e).isValid())?we({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ci.toNow=function(e){return this.to(ce(),e)},ci.get=N,ci.invalidAt=function(){return h(this).overflow},ci.isAfter=function(e,t){var i=f(e)?e:ce(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=P(c(t)?"millisecond":t))?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf())},ci.isBefore=function(e,t){var i=f(e)?e:ce(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=P(c(t)?"millisecond":t))?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf())},ci.isBetween=function(e,t,i,o){return("("===(o=o||"()")[0]?this.isAfter(e,i):!this.isBefore(e,i))&&(")"===o[1]?this.isBefore(t,i):!this.isAfter(t,i))},ci.isSame=function(e,t){var i,o=f(e)?e:ce(e);return!(!this.isValid()||!o.isValid())&&("millisecond"===(t=P(t||"millisecond"))?this.valueOf()===o.valueOf():(i=o.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()))},ci.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},ci.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},ci.isValid=function(){return d(this)},ci.lang=Jt,ci.locale=Ce,ci.localeData=Me,ci.max=Gt,ci.min=Yt,ci.parsingFlags=function(){return r({},h(this))},ci.set=N,ci.startOf=function(e){switch(e=P(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},ci.subtract=Zt,ci.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},ci.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},ci.toDate=function(){return this._offset?new Date(this.valueOf()):this._d},ci.toISOString=function(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?_(Date.prototype.toISOString)?this.toDate().toISOString():j(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):j(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},ci.toJSON=function(){return this.isValid()?this.toISOString():null},ci.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ci.unix=function(){return Math.floor(this.valueOf()/1e3)},ci.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ci.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ci.year=$t,ci.isLeapYear=function(){return te(this.year())},ci.weekYear=function(e){return Ee.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ci.isoWeekYear=function(e){return Ee.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},ci.quarter=ci.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},ci.month=X,ci.daysInMonth=function(){return V(this.year(),this.month())},ci.week=ci.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},ci.isoWeek=ci.isoWeeks=function(e){var t=ne(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},ci.weeksInYear=function(){var e=this.localeData()._week;return se(this.year(),e.dow,e.doy)},ci.isoWeeksInYear=function(){return se(this.year(),1,4)},ci.date=Qt,ci.day=ci.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},ci.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},ci.isoWeekday=function(e){return this.isValid()?null==e?this.day()||7:this.day(this.day()%7?e:e-7):null!=e?this:NaN},ci.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},ci.hour=ci.hours=ri,ci.minute=ci.minutes=ai,ci.second=ci.seconds=di,ci.millisecond=ci.milliseconds=li,ci.utcOffset=function(e,i){var o,n=this._offset||0;return this.isValid()?null!=e?("string"==typeof e?e=ge(wt,e):Math.abs(e)<16&&(e*=60),!this._isUTC&&i&&(o=ye(this)),this._offset=e,this._isUTC=!0,null!=o&&this.add(o,"m"),n!==e&&(!i||this._changeInProgress?Oe(this,we(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:ye(this):null!=e?this:NaN},ci.utc=function(e){return this.utcOffset(0,e)},ci.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(ye(this),"m")),this},ci.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(ge(bt,this._i)),this},ci.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?ce(e).utcOffset():0,(this.utcOffset()-e)%60==0)},ci.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ci.isDSTShifted=function(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e={};if(u(e,this),(e=de(e))._a){var t=e._isUTC?a(e._a):ce(e._a);this._isDSTShifted=this.isValid()&&v(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted},ci.isLocal=function(){return!!this.isValid()&&!this._isUTC},ci.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ci.isUtc=be,ci.isUTC=be,ci.zoneAbbr=function(){return this._isUTC?"UTC":""},ci.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ci.dates=b("dates accessor is deprecated. Use date instead.",Qt),ci.months=b("months accessor is deprecated. Use month instead",X),ci.years=b("years accessor is deprecated. Use year instead",$t),ci.zone=b("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()});var ui=ci,pi=S.prototype;pi._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},pi.calendar=function(e,t,i){var o=this._calendar[e];return _(o)?o.call(t,i):o},pi._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},pi.longDateFormat=function(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},pi._invalidDate="Invalid date",pi.invalidDate=function(){return this._invalidDate},pi._ordinal="%d",pi.ordinal=function(e){return this._ordinal.replace("%d",e)},pi._ordinalParse=/\d{1,2}/,pi.preparse=Le,pi.postformat=Le,pi._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},pi.relativeTime=function(e,t,i,o){var n=this._relativeTime[i];return _(n)?n(e,t,i,o):n.replace(/%d/i,e)},pi.pastFuture=function(e,t){var i=this._relativeTime[e>0?"future":"past"];return _(i)?i(t):i.replace(/%s/i,t)},pi.set=function(e){var t,i;for(i in e)t=e[i],_(t)?this[i]=t:this["_"+i]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},pi.months=function(e,t){return i(this._months)?this._months[e.month()]:this._months[At.test(t)?"format":"standalone"][e.month()]},pi._months=Rt,pi.monthsShort=function(e,t){return i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[At.test(t)?"format":"standalone"][e.month()]},pi._monthsShort=Lt,pi.monthsParse=function(e,t,i){var o,n,s;if(this._monthsParseExact)return function(e,t,i){var o,n,s,r=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],o=0;12>o;++o)s=a([2e3,o]),this._shortMonthsParse[o]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[o]=this.months(s,"").toLocaleLowerCase();return i?"MMM"===t?-1!==(n=Qe.call(this._shortMonthsParse,r))?n:null:-1!==(n=Qe.call(this._longMonthsParse,r))?n:null:"MMM"===t?-1!==(n=Qe.call(this._shortMonthsParse,r))?n:-1!==(n=Qe.call(this._longMonthsParse,r))?n:null:-1!==(n=Qe.call(this._longMonthsParse,r))?n:-1!==(n=Qe.call(this._shortMonthsParse,r))?n:null}.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),o=0;12>o;o++){if(n=a([2e3,o]),i&&!this._longMonthsParse[o]&&(this._longMonthsParse[o]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[o]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),i||this._monthsParse[o]||(s="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[o]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[o].test(e))return o;if(i&&"MMM"===t&&this._shortMonthsParse[o].test(e))return o;if(!i&&this._monthsParse[o].test(e))return o}},pi._monthsRegex=zt,pi.monthsRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||K.call(this),e?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex},pi._monthsShortRegex=Nt,pi.monthsShortRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||K.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex},pi.week=function(e){return ne(e,this._week.dow,this._week.doy).week},pi._week={dow:0,doy:6},pi.firstDayOfYear=function(){return this._week.doy},pi.firstDayOfWeek=function(){return this._week.dow},pi.weekdays=function(e,t){return i(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]},pi._weekdays=ei,pi.weekdaysMin=function(e){return this._weekdaysMin[e.day()]},pi._weekdaysMin=ii,pi.weekdaysShort=function(e){return this._weekdaysShort[e.day()]},pi._weekdaysShort=ti,pi.weekdaysParse=function(e,t,i){var o,n,s;if(this._weekdaysParseExact)return function(e,t,i){var o,n,s,r=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],o=0;7>o;++o)s=a([2e3,1]).day(o),this._minWeekdaysParse[o]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[o]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[o]=this.weekdays(s,"").toLocaleLowerCase();return i?"dddd"===t?-1!==(n=Qe.call(this._weekdaysParse,r))?n:null:"ddd"===t?-1!==(n=Qe.call(this._shortWeekdaysParse,r))?n:null:-1!==(n=Qe.call(this._minWeekdaysParse,r))?n:null:"dddd"===t?-1!==(n=Qe.call(this._weekdaysParse,r))?n:-1!==(n=Qe.call(this._shortWeekdaysParse,r))?n:-1!==(n=Qe.call(this._minWeekdaysParse,r))?n:null:"ddd"===t?-1!==(n=Qe.call(this._shortWeekdaysParse,r))?n:-1!==(n=Qe.call(this._weekdaysParse,r))?n:-1!==(n=Qe.call(this._minWeekdaysParse,r))?n:null:-1!==(n=Qe.call(this._minWeekdaysParse,r))?n:-1!==(n=Qe.call(this._weekdaysParse,r))?n:-1!==(n=Qe.call(this._shortWeekdaysParse,r))?n:null}.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),o=0;7>o;o++){if(n=a([2e3,1]).day(o),i&&!this._fullWeekdaysParse[o]&&(this._fullWeekdaysParse[o]=new RegExp("^"+this.weekdays(n,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[o]=new RegExp("^"+this.weekdaysShort(n,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[o]=new RegExp("^"+this.weekdaysMin(n,"").replace(".",".?")+"$","i")),this._weekdaysParse[o]||(s="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[o]=new RegExp(s.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[o].test(e))return o;if(i&&"ddd"===t&&this._shortWeekdaysParse[o].test(e))return o;if(i&&"dd"===t&&this._minWeekdaysParse[o].test(e))return o;if(!i&&this._weekdaysParse[o].test(e))return o}},pi._weekdaysRegex=oi,pi.weekdaysRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Te.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex},pi._weekdaysShortRegex=ni,pi.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Te.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex},pi._weekdaysMinRegex=si,pi.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Te.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex},pi.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},pi._meridiemParse=/[ap]\.?m?\.?/i,pi.meridiem=function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},M("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===g(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),t.lang=b("moment.lang is deprecated. Use moment.locale instead.",M),t.langData=b("moment.langData is deprecated. Use moment.localeData instead.",E);var fi=Math.abs,mi=Ue("ms"),gi=Ue("s"),vi=Ue("m"),yi=Ue("h"),bi=Ue("d"),wi=Ue("w"),_i=Ue("M"),xi=Ue("y"),ki=$e("milliseconds"),Si=$e("seconds"),Oi=$e("minutes"),Ci=$e("hours"),Mi=$e("days"),Di=$e("months"),Ei=$e("years"),Ti=Math.round,Pi={s:45,m:45,h:22,d:26,M:11},Ii=Math.abs,Ai=pe.prototype;return Ai.abs=function(){var e=this._data;return this._milliseconds=fi(this._milliseconds),this._days=fi(this._days),this._months=fi(this._months),e.milliseconds=fi(e.milliseconds),e.seconds=fi(e.seconds),e.minutes=fi(e.minutes),e.hours=fi(e.hours),e.months=fi(e.months),e.years=fi(e.years),this},Ai.add=function(e,t){return Be(this,e,t,1)},Ai.subtract=function(e,t){return Be(this,e,t,-1)},Ai.as=function(e){var t,i,o=this._milliseconds;if("month"===(e=P(e))||"year"===e)return t=this._days+o/864e5,i=this._months+He(t),"month"===e?i:i/12;switch(t=this._days+Math.round(We(this._months)),e){case"week":return t/7+o/6048e5;case"day":return t+o/864e5;case"hour":return 24*t+o/36e5;case"minute":return 1440*t+o/6e4;case"second":return 86400*t+o/1e3;case"millisecond":return Math.floor(864e5*t)+o;default:throw new Error("Unknown unit "+e)}},Ai.asMilliseconds=mi,Ai.asSeconds=gi,Ai.asMinutes=vi,Ai.asHours=yi,Ai.asDays=bi,Ai.asWeeks=wi,Ai.asMonths=_i,Ai.asYears=xi,Ai.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)},Ai._bubble=function(){var e,t,i,o,n,s=this._milliseconds,r=this._days,a=this._months,h=this._data;return s>=0&&r>=0&&a>=0||0>=s&&0>=r&&0>=a||(s+=864e5*je(We(a)+r),r=0,a=0),h.milliseconds=s%1e3,e=m(s/1e3),h.seconds=e%60,t=m(e/60),h.minutes=t%60,i=m(t/60),h.hours=i%24,r+=m(i/24),n=m(He(r)),a+=n,r-=je(We(n)),o=m(a/12),a%=12,h.days=r,h.months=a,h.years=o,this},Ai.get=function(e){return this[(e=P(e))+"s"]()},Ai.milliseconds=ki,Ai.seconds=Si,Ai.minutes=Oi,Ai.hours=Ci,Ai.days=Mi,Ai.weeks=function(){return m(this.days()/7)},Ai.months=Di,Ai.years=Ei,Ai.humanize=function(e){var t,i,o,n,s,r,a,h,d,l,c,u=this.localeData(),p=(i=!e,o=u,n=we(t=this).abs(),s=Ti(n.as("s")),r=Ti(n.as("m")),a=Ti(n.as("h")),h=Ti(n.as("d")),d=Ti(n.as("M")),l=Ti(n.as("y")),(c=s<Pi.s&&["s",s]||1>=r&&["m"]||r<Pi.m&&["mm",r]||1>=a&&["h"]||a<Pi.h&&["hh",a]||1>=h&&["d"]||h<Pi.d&&["dd",h]||1>=d&&["M"]||d<Pi.M&&["MM",d]||1>=l&&["y"]||["yy",l])[2]=i,c[3]=+t>0,c[4]=o,function(e,t,i,o,n){return n.relativeTime(t||1,!!i,e,o)}.apply(null,c));return e&&(p=u.pastFuture(+this,p)),u.postformat(p)},Ai.toISOString=Ye,Ai.toString=Ye,Ai.toJSON=Ye,Ai.locale=Ce,Ai.localeData=Me,Ai.toIsoString=b("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ye),Ai.lang=Jt,F("X",0,0,"unix"),F("x",0,0,"valueOf"),W("x",yt),W("X",/[+-]?\d+(\.\d{1,3})?/),Y("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),Y("x",function(e,t,i){i._d=new Date(g(e))}),t.version="2.13.0",Ge=ce,t.fn=ui,t.min=function(){return ue("isBefore",[].slice.call(arguments,0))},t.max=function(){return ue("isAfter",[].slice.call(arguments,0))},t.now=function(){return Date.now?Date.now():+new Date},t.utc=a,t.unix=function(e){return ce(1e3*e)},t.months=function(e,t){return ze(e,t,"months")},t.isDate=o,t.locale=M,t.invalid=l,t.duration=we,t.isMoment=f,t.weekdays=function(e,t,i){return Fe(e,t,i,"weekdays")},t.parseZone=function(){return ce.apply(null,arguments).parseZone()},t.localeData=E,t.isDuration=fe,t.monthsShort=function(e,t){return ze(e,t,"monthsShort")},t.weekdaysMin=function(e,t,i){return Fe(e,t,i,"weekdaysMin")},t.defineLocale=D,t.updateLocale=function(e,t){var i;return null!=t?(null!=et[e]&&(t=k(et[e]._config,t)),(i=new S(t)).parentLocale=et[e],et[e]=i,M(e)):null!=et[e]&&(null!=et[e].parentLocale?et[e]=et[e].parentLocale:null!=et[e]&&delete et[e]),et[e]},t.locales=function(){return qe(et)},t.weekdaysShort=function(e,t,i){return Fe(e,t,i,"weekdaysShort")},t.normalizeUnits=P,t.relativeTimeThreshold=function(e,t){return void 0!==Pi[e]&&(void 0===t?Pi[e]:(Pi[e]=t,!0))},t.prototype=ui,t}()}).call(t,i(4)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function i(e){throw new Error("Cannot find module '"+e+"'.")}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id=5},function(e,t){(function(t){function i(e,t){var i=t||0,o=h;return o[e[i++]]+o[e[i++]]+o[e[i++]]+o[e[i++]]+"-"+o[e[i++]]+o[e[i++]]+"-"+o[e[i++]]+o[e[i++]]+"-"+o[e[i++]]+o[e[i++]]+"-"+o[e[i++]]+o[e[i++]]+o[e[i++]]+o[e[i++]]+o[e[i++]]+o[e[i++]]}function o(e,t,o){var s=t&&o||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||n)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var a=0;16>a;a++)t[s+a]=r[a];return t||i(r)}var n,s="undefined"!=typeof window?window:void 0!==t?t:null;if(s&&s.crypto&&crypto.getRandomValues){var r=new Uint8Array(16);n=function(){return crypto.getRandomValues(r),r}}if(!n){var a=new Array(16);n=function(){for(var e,t=0;16>t;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}for(var h=[],d={},l=0;256>l;l++)h[l]=(l+256).toString(16).substr(1),d[h[l]]=l;var c=n(),u=[1|c[0],c[1],c[2],c[3],c[4],c[5]],p=16383&(c[6]<<8|c[7]),f=0,m=0,g=o;g.v1=function(e,t,o){var n=t&&o||0,s=t||[],r=void 0!==(e=e||{}).clockseq?e.clockseq:p,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:m+1,d=a-f+(h-m)/1e4;if(0>d&&void 0===e.clockseq&&(r=r+1&16383),(0>d||a>f)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=a,m=h,p=r;var l=(1e4*(268435455&(a+=122192928e5))+h)%4294967296;s[n++]=l>>>24&255,s[n++]=l>>>16&255,s[n++]=l>>>8&255,s[n++]=255&l;var c=a/4294967296*1e4&268435455;s[n++]=c>>>8&255,s[n++]=255&c,s[n++]=c>>>24&15|16,s[n++]=c>>>16&255,s[n++]=r>>>8|128,s[n++]=255&r;for(var g=e.node||u,v=0;6>v;v++)s[n+v]=g[v];return t||i(s)},g.v4=o,g.parse=function(e,t,i){var o=t&&i||0,n=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>n&&(t[o+n++]=d[e])});16>n;)t[o+n++]=0;return t},g.unparse=i,e.exports=g}).call(t,function(){return this}())},function(e,t,i){t.util=i(1),t.DOMutil=i(8),t.DataSet=i(9),t.DataView=i(11),t.Queue=i(10),t.Graph3d=i(12),t.graph3d={Camera:i(16),Filter:i(17),Point2d:i(15),Point3d:i(14),Slider:i(18),StepNumber:i(19)},t.moment=i(2),t.Hammer=i(20),t.keycharm=i(23)},function(e,t){t.prepareElements=function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t].redundant=e[t].used,e[t].used=[])},t.cleanupElements=function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t].redundant){for(var i=0;i<e[t].redundant.length;i++)e[t].redundant[i].parentNode.removeChild(e[t].redundant[i]);e[t].redundant=[]}},t.resetElements=function(e){t.prepareElements(e),t.cleanupElements(e),t.prepareElements(e)},t.getSVGElement=function(e,t,i){var o;return t.hasOwnProperty(e)?t[e].redundant.length>0?(o=t[e].redundant[0],t[e].redundant.shift()):(o=document.createElementNS("http://www.w3.org/2000/svg",e),i.appendChild(o)):(o=document.createElementNS("http://www.w3.org/2000/svg",e),t[e]={used:[],redundant:[]},i.appendChild(o)),t[e].used.push(o),o},t.getDOMElement=function(e,t,i,o){var n;return t.hasOwnProperty(e)?t[e].redundant.length>0?(n=t[e].redundant[0],t[e].redundant.shift()):(n=document.createElement(e),void 0!==o?i.insertBefore(n,o):i.appendChild(n)):(n=document.createElement(e),t[e]={used:[],redundant:[]},void 0!==o?i.insertBefore(n,o):i.appendChild(n)),t[e].used.push(n),n},t.drawPoint=function(e,i,o,n,s,r){var a;if("circle"==o.style?((a=t.getSVGElement("circle",n,s)).setAttributeNS(null,"cx",e),a.setAttributeNS(null,"cy",i),a.setAttributeNS(null,"r",.5*o.size)):((a=t.getSVGElement("rect",n,s)).setAttributeNS(null,"x",e-.5*o.size),a.setAttributeNS(null,"y",i-.5*o.size),a.setAttributeNS(null,"width",o.size),a.setAttributeNS(null,"height",o.size)),void 0!==o.styles&&a.setAttributeNS(null,"style",o.styles),a.setAttributeNS(null,"class",o.className+" vis-point"),r){var h=t.getSVGElement("text",n,s);r.xOffset&&(e+=r.xOffset),r.yOffset&&(i+=r.yOffset),r.content&&(h.textContent=r.content),r.className&&h.setAttributeNS(null,"class",r.className+" vis-label"),h.setAttributeNS(null,"x",e),h.setAttributeNS(null,"y",i)}return a},t.drawBar=function(e,i,o,n,s,r,a,h){if(0!=n){0>n&&(i-=n*=-1);var d=t.getSVGElement("rect",r,a);d.setAttributeNS(null,"x",e-.5*o),d.setAttributeNS(null,"y",i),d.setAttributeNS(null,"width",o),d.setAttributeNS(null,"height",n),d.setAttributeNS(null,"class",s),h&&d.setAttributeNS(null,"style",h)}}},function(e,t,i){function o(e,t){if(e&&!Array.isArray(e)&&(t=e,e=null),this._options=t||{},this._data={},this.length=0,this._fieldId=this._options.fieldId||"id",this._type={},this._options.type)for(var i=Object.keys(this._options.type),o=0,n=i.length;n>o;o++){var s=i[o],r=this._options.type[s];this._type[s]="Date"==r||"ISODate"==r||"ASPDate"==r?"Date":r}if(this._options.convert)throw new Error('Option "convert" is deprecated. Use "type" instead.');this._subscribers={},e&&this.add(e),this.setOptions(t)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=i(1),r=i(10);o.prototype.setOptions=function(e){e&&void 0!==e.queue&&(!1===e.queue?this._queue&&(this._queue.destroy(),delete this._queue):(this._queue||(this._queue=r.extend(this,{replace:["add","update","remove"]})),"object"===n(e.queue)&&this._queue.setOptions(e.queue)))},o.prototype.on=function(e,t){var i=this._subscribers[e];i||(i=[],this._subscribers[e]=i),i.push({callback:t})},o.prototype.subscribe=function(){throw new Error("DataSet.subscribe is deprecated. Use DataSet.on instead.")},o.prototype.off=function(e,t){var i=this._subscribers[e];i&&(this._subscribers[e]=i.filter(function(e){return e.callback!=t}))},o.prototype.unsubscribe=function(){throw new Error("DataSet.unsubscribe is deprecated. Use DataSet.off instead.")},o.prototype._trigger=function(e,t,i){if("*"==e)throw new Error("Cannot trigger event *");var o=[];e in this._subscribers&&(o=o.concat(this._subscribers[e])),"*"in this._subscribers&&(o=o.concat(this._subscribers["*"]));for(var n=0,s=o.length;s>n;n++){var r=o[n];r.callback&&r.callback(e,t,i||null)}},o.prototype.add=function(e,t){var i,o=[];if(Array.isArray(e))for(var n=0,s=e.length;s>n;n++)i=this._addItem(e[n]),o.push(i);else{if(!(e instanceof Object))throw new Error("Unknown dataType");i=this._addItem(e),o.push(i)}return o.length&&this._trigger("add",{items:o},t),o},o.prototype.update=function(e,t){var i=[],o=[],n=[],r=[],a=this,h=a._fieldId,d=function(e){var t=e[h];if(a._data[t]){var d=s.extend({},a._data[t]);t=a._updateItem(e),o.push(t),r.push(e),n.push(d)}else t=a._addItem(e),i.push(t)};if(Array.isArray(e))for(var l=0,c=e.length;c>l;l++)e[l]instanceof Object?d(e[l]):console.warn("Ignoring input item, which is not an object at index "+l);else{if(!(e instanceof Object))throw new Error("Unknown dataType");d(e)}if(i.length&&this._trigger("add",{items:i},t),o.length){var u={items:o,oldData:n,data:r};this._trigger("update",u,t)}return i.concat(o)},o.prototype.get=function(e){var t,i,o,n,r=s.getType(arguments[0]);if("String"==r||"Number"==r?(t=arguments[0],o=arguments[1]):"Array"==r?(i=arguments[0],o=arguments[1]):o=arguments[0],o&&o.returnType){n=-1==["Array","Object"].indexOf(o.returnType)?"Array":o.returnType}else n="Array";var a,h,d,l,c,u=o&&o.type||this._options.type,p=o&&o.filter,f=[];if(void 0!=t)a=this._getItem(t,u),a&&p&&!p(a)&&(a=null);else if(void 0!=i)for(l=0,c=i.length;c>l;l++)a=this._getItem(i[l],u),p&&!p(a)||f.push(a);else for(h=Object.keys(this._data),l=0,c=h.length;c>l;l++)d=h[l],a=this._getItem(d,u),p&&!p(a)||f.push(a);if(o&&o.order&&void 0==t&&this._sort(f,o.order),o&&o.fields){var m=o.fields;if(void 0!=t)a=this._filterFields(a,m);else for(l=0,c=f.length;c>l;l++)f[l]=this._filterFields(f[l],m)}if("Object"==n){var g,v={};for(l=0,c=f.length;c>l;l++)g=f[l],v[g.id]=g;return v}return void 0!=t?a:f},o.prototype.getIds=function(e){var t,i,o,n,s,r=this._data,a=e&&e.filter,h=e&&e.order,d=e&&e.type||this._options.type,l=Object.keys(r),c=[];if(a)if(h){for(s=[],t=0,i=l.length;i>t;t++)o=l[t],n=this._getItem(o,d),a(n)&&s.push(n);for(this._sort(s,h),t=0,i=s.length;i>t;t++)c.push(s[t][this._fieldId])}else for(t=0,i=l.length;i>t;t++)o=l[t],n=this._getItem(o,d),a(n)&&c.push(n[this._fieldId]);else if(h){for(s=[],t=0,i=l.length;i>t;t++)o=l[t],s.push(r[o]);for(this._sort(s,h),t=0,i=s.length;i>t;t++)c.push(s[t][this._fieldId])}else for(t=0,i=l.length;i>t;t++)o=l[t],n=r[o],c.push(n[this._fieldId]);return c},o.prototype.getDataSet=function(){return this},o.prototype.forEach=function(e,t){var i,o,n,s,r=t&&t.filter,a=t&&t.type||this._options.type,h=this._data,d=Object.keys(h);if(t&&t.order){var l=this.get(t);for(i=0,o=l.length;o>i;i++)n=l[i],s=n[this._fieldId],e(n,s)}else for(i=0,o=d.length;o>i;i++)s=d[i],n=this._getItem(s,a),r&&!r(n)||e(n,s)},o.prototype.map=function(e,t){var i,o,n,s,r=t&&t.filter,a=t&&t.type||this._options.type,h=[],d=this._data,l=Object.keys(d);for(i=0,o=l.length;o>i;i++)n=l[i],s=this._getItem(n,a),r&&!r(s)||h.push(e(s,n));return t&&t.order&&this._sort(h,t.order),h},o.prototype._filterFields=function(e,t){if(!e)return e;var i,o,n={},s=Object.keys(e),r=s.length;if(Array.isArray(t))for(i=0;r>i;i++)o=s[i],-1!=t.indexOf(o)&&(n[o]=e[o]);else for(i=0;r>i;i++)o=s[i],t.hasOwnProperty(o)&&(n[t[o]]=e[o]);return n},o.prototype._sort=function(e,t){if(s.isString(t)){var i=t;e.sort(function(e,t){var o=e[i],n=t[i];return o>n?1:n>o?-1:0})}else{if("function"!=typeof t)throw new TypeError("Order must be a function or a string");e.sort(t)}},o.prototype.remove=function(e,t){var i,o,n,s=[];if(Array.isArray(e))for(i=0,o=e.length;o>i;i++)n=this._remove(e[i]),null!=n&&s.push(n);else n=this._remove(e),null!=n&&s.push(n);return s.length&&this._trigger("remove",{items:s},t),s},o.prototype._remove=function(e){if(s.isNumber(e)||s.isString(e)){if(this._data[e])return delete this._data[e],this.length--,e}else if(e instanceof Object){var t=e[this._fieldId];if(void 0!==t&&this._data[t])return delete this._data[t],this.length--,t}return null},o.prototype.clear=function(e){var t=Object.keys(this._data);return this._data={},this.length=0,this._trigger("remove",{items:t},e),t},o.prototype.max=function(e){var t,i,o=this._data,n=Object.keys(o),s=null,r=null;for(t=0,i=n.length;i>t;t++){var a=o[n[t]],h=a[e];null!=h&&(!s||h>r)&&(s=a,r=h)}return s},o.prototype.min=function(e){var t,i,o=this._data,n=Object.keys(o),s=null,r=null;for(t=0,i=n.length;i>t;t++){var a=o[n[t]],h=a[e];null!=h&&(!s||r>h)&&(s=a,r=h)}return s},o.prototype.distinct=function(e){var t,i,o,n=this._data,r=Object.keys(n),a=[],h=this._options.type&&this._options.type[e]||null,d=0;for(t=0,o=r.length;o>t;t++){var l=n[r[t]][e],c=!1;for(i=0;d>i;i++)if(a[i]==l){c=!0;break}c||void 0===l||(a[d]=l,d++)}if(h)for(t=0,o=a.length;o>t;t++)a[t]=s.convert(a[t],h);return a},o.prototype._addItem=function(e){var t=e[this._fieldId];if(void 0!=t){if(this._data[t])throw new Error("Cannot add item: item with id "+t+" already exists")}else t=s.randomUUID(),e[this._fieldId]=t;var i,o,n={},r=Object.keys(e);for(i=0,o=r.length;o>i;i++){var a=r[i],h=this._type[a];n[a]=s.convert(e[a],h)}return this._data[t]=n,this.length++,t},o.prototype._getItem=function(e,t){var i,o,n,r,a=this._data[e];if(!a)return null;var h={},d=Object.keys(a);if(t)for(n=0,r=d.length;r>n;n++)i=d[n],o=a[i],h[i]=s.convert(o,t[i]);else for(n=0,r=d.length;r>n;n++)i=d[n],o=a[i],h[i]=o;return h},o.prototype._updateItem=function(e){var t=e[this._fieldId];if(void 0==t)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(e)+")");var i=this._data[t];if(!i)throw new Error("Cannot update item: no item with id "+t+" found");for(var o=Object.keys(e),n=0,r=o.length;r>n;n++){var a=o[n],h=this._type[a];i[a]=s.convert(e[a],h)}return t},e.exports=o},function(e,t){function i(e){this.delay=null,this.max=1/0,this._queue=[],this._timeout=null,this._extended=null,this.setOptions(e)}i.prototype.setOptions=function(e){e&&void 0!==e.delay&&(this.delay=e.delay),e&&void 0!==e.max&&(this.max=e.max),this._flushIfNeeded()},i.extend=function(e,t){var o=new i(t);if(void 0!==e.flush)throw new Error("Target object already has a property flush");e.flush=function(){o.flush()};var n=[{name:"flush",original:void 0}];if(t&&t.replace)for(var s=0;s<t.replace.length;s++){var r=t.replace[s];n.push({name:r,original:e[r]}),o.replace(e,r)}return o._extended={object:e,methods:n},o},i.prototype.destroy=function(){if(this.flush(),this._extended){for(var e=this._extended.object,t=this._extended.methods,i=0;i<t.length;i++){var o=t[i];o.original?e[o.name]=o.original:delete e[o.name]}this._extended=null}},i.prototype.replace=function(e,t){var i=this,o=e[t];if(!o)throw new Error("Method "+t+" undefined");e[t]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.queue({args:e,fn:o,context:this})}},i.prototype.queue=function(e){"function"==typeof e?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()},i.prototype._flushIfNeeded=function(){if(this._queue.length>this.max&&this.flush(),clearTimeout(this._timeout),this.queue.length>0&&"number"==typeof this.delay){var e=this;this._timeout=setTimeout(function(){e.flush()},this.delay)}},i.prototype.flush=function(){for(;this._queue.length>0;){var e=this._queue.shift();e.fn.apply(e.context||e.fn,e.args||[])}},e.exports=i},function(e,t,i){function o(e,t){this._data=null,this._ids={},this.length=0,this._options=t||{},this._fieldId="id",this._subscribers={};var i=this;this.listener=function(){i._onEvent.apply(i,arguments)},this.setData(e)}var n=i(1),s=i(9);o.prototype.setData=function(e){var t,i,o,n;if(this._data&&(this._data.off&&this._data.off("*",this.listener),t=Object.keys(this._ids),this._ids={},this.length=0,this._trigger("remove",{items:t})),this._data=e,this._data){for(this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id",o=0,n=(t=this._data.getIds({filter:this._options&&this._options.filter})).length;n>o;o++)i=t[o],this._ids[i]=!0;this.length=t.length,this._trigger("add",{items:t}),this._data.on&&this._data.on("*",this.listener)}},o.prototype.refresh=function(){var e,t,i,o=this._data.getIds({filter:this._options&&this._options.filter}),n=Object.keys(this._ids),s={},r=[],a=[];for(t=0,i=o.length;i>t;t++)e=o[t],s[e]=!0,this._ids[e]||(r.push(e),this._ids[e]=!0);for(t=0,i=n.length;i>t;t++)e=n[t],s[e]||(a.push(e),delete this._ids[e]);this.length+=r.length-a.length,r.length&&this._trigger("add",{items:r}),a.length&&this._trigger("remove",{items:a})},o.prototype.get=function(e){var t,i,o,s=this,r=n.getType(arguments[0]);"String"==r||"Number"==r||"Array"==r?(t=arguments[0],i=arguments[1],o=arguments[2]):(i=arguments[0],o=arguments[1]);var a=n.extend({},this._options,i);this._options.filter&&i&&i.filter&&(a.filter=function(e){return s._options.filter(e)&&i.filter(e)});var h=[];return void 0!=t&&h.push(t),h.push(a),h.push(o),this._data&&this._data.get.apply(this._data,h)},o.prototype.getIds=function(e){var t;if(this._data){var i,o=this._options.filter;i=e&&e.filter?o?function(t){return o(t)&&e.filter(t)}:e.filter:o,t=this._data.getIds({filter:i,order:e&&e.order})}else t=[];return t},o.prototype.map=function(e,t){var i=[];if(this._data){var o,n=this._options.filter;o=t&&t.filter?n?function(e){return n(e)&&t.filter(e)}:t.filter:n,i=this._data.map(e,{filter:o,order:t&&t.order})}else i=[];return i},o.prototype.getDataSet=function(){for(var e=this;e instanceof o;)e=e._data;return e||null},o.prototype._onEvent=function(e,t,i){var o,n,s,r,a=t&&t.items,h=this._data,d=[],l=[],c=[],u=[];if(a&&h){switch(e){case"add":for(o=0,n=a.length;n>o;o++)s=a[o],r=this.get(s),r&&(this._ids[s]=!0,l.push(s));break;case"update":for(o=0,n=a.length;n>o;o++)s=a[o],r=this.get(s),r?this._ids[s]?(c.push(s),d.push(t.data[o])):(this._ids[s]=!0,l.push(s)):this._ids[s]&&(delete this._ids[s],u.push(s));break;case"remove":for(o=0,n=a.length;n>o;o++)s=a[o],this._ids[s]&&(delete this._ids[s],u.push(s))}this.length+=l.length-u.length,l.length&&this._trigger("add",{items:l},i),c.length&&this._trigger("update",{items:c,data:d},i),u.length&&this._trigger("remove",{items:u},i)}},o.prototype.on=s.prototype.on,o.prototype.off=s.prototype.off,o.prototype._trigger=s.prototype._trigger,o.prototype.subscribe=o.prototype.on,o.prototype.unsubscribe=o.prototype.off,e.exports=o},function(e,t,i){function o(e,t,i){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");this.containerElement=e,this.width="400px",this.height="400px",this.margin=10,this.defaultXCenter="55%",this.defaultYCenter="50%",this.xLabel="x",this.yLabel="y",this.zLabel="z";var n=function(e){return e};this.xValueLabel=n,this.yValueLabel=n,this.zValueLabel=n,this.filterLabel="time",this.legendLabel="value",this.style=o.STYLE.DOT,this.showPerspective=!0,this.showGrid=!0,this.keepAspectRatio=!0,this.showShadow=!1,this.showGrayBottom=!1,this.showTooltip=!1,this.verticalRatio=.5,this.animationInterval=1e3,this.animationPreload=!1,this.camera=new p,this.camera.setArmRotation(1,.5),this.camera.setArmLength(1.7),this.eye=new c(0,0,-1),this.dataTable=null,this.dataPoints=null,this.colX=void 0,this.colY=void 0,this.colZ=void 0,this.colValue=void 0,this.colFilter=void 0,this.xMin=0,this.xStep=void 0,this.xMax=1,this.yMin=0,this.yStep=void 0,this.yMax=1,this.zMin=0,this.zStep=void 0,this.zMax=1,this.valueMin=0,this.valueMax=1,this.xBarWidth=1,this.yBarWidth=1,this.axisColor="#4D4D4D",this.gridColor="#D3D3D3",this.dataColor={fill:"#7DC1FF",stroke:"#3267D2",strokeWidth:1},this.dotSizeRatio=.02,this.create(),this.setOptions(i),t&&this.setData(t)}function n(e){return"clientX"in e?e.clientX:e.targetTouches[0]&&e.targetTouches[0].clientX||0}function s(e){return"clientY"in e?e.clientY:e.targetTouches[0]&&e.targetTouches[0].clientY||0}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=i(13),h=i(9),d=i(11),l=i(1),c=i(14),u=i(15),p=i(16),f=i(17),m=i(18),g=i(19);a(o.prototype),o.prototype._setScale=function(){this.scale=new c(1/(this.xMax-this.xMin),1/(this.yMax-this.yMin),1/(this.zMax-this.zMin)),this.keepAspectRatio&&(this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y),this.scale.z*=this.verticalRatio,this.scale.value=1/(this.valueMax-this.valueMin);var e=(this.xMax+this.xMin)/2*this.scale.x,t=(this.yMax+this.yMin)/2*this.scale.y,i=(this.zMax+this.zMin)/2*this.scale.z;this.camera.setArmLocation(e,t,i)},o.prototype._convert3Dto2D=function(e){var t=this._convertPointToTranslation(e);return this._convertTranslationToScreen(t)},o.prototype._convertPointToTranslation=function(e){var t=e.x*this.scale.x,i=e.y*this.scale.y,o=e.z*this.scale.z,n=this.camera.getCameraLocation().x,s=this.camera.getCameraLocation().y,r=this.camera.getCameraLocation().z,a=Math.sin(this.camera.getCameraRotation().x),h=Math.cos(this.camera.getCameraRotation().x),d=Math.sin(this.camera.getCameraRotation().y),l=Math.cos(this.camera.getCameraRotation().y),u=Math.sin(this.camera.getCameraRotation().z),p=Math.cos(this.camera.getCameraRotation().z);return new c(l*(u*(i-s)+p*(t-n))-d*(o-r),a*(l*(o-r)+d*(u*(i-s)+p*(t-n)))+h*(p*(i-s)-u*(t-n)),h*(l*(o-r)+d*(u*(i-s)+p*(t-n)))-a*(p*(i-s)-u*(t-n)))},o.prototype._convertTranslationToScreen=function(e){var t,i,o=this.eye.x,n=this.eye.y,s=this.eye.z,r=e.x,a=e.y,h=e.z;return this.showPerspective?(t=s/h*(r-o),i=s/h*(a-n)):(t=r*(-s/this.camera.getArmLength()),i=a*(-s/this.camera.getArmLength())),new u(this.xcenter+t*this.frame.canvas.clientWidth,this.ycenter-i*this.frame.canvas.clientWidth)},o.prototype._setBackgroundColor=function(e){var t="white",i="gray",o=1;if("string"==typeof e)t=e,i="none",o=0;else if("object"===(void 0===e?"undefined":r(e)))void 0!==e.fill&&(t=e.fill),void 0!==e.stroke&&(i=e.stroke),void 0!==e.strokeWidth&&(o=e.strokeWidth);else if(void 0!==e)throw"Unsupported type of backgroundColor";this.frame.style.backgroundColor=t,this.frame.style.borderColor=i,this.frame.style.borderWidth=o+"px",this.frame.style.borderStyle="solid"},o.STYLE={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9},o.prototype._getStyleNumber=function(e){switch(e){case"dot":return o.STYLE.DOT;case"dot-line":return o.STYLE.DOTLINE;case"dot-color":return o.STYLE.DOTCOLOR;case"dot-size":return o.STYLE.DOTSIZE;case"line":return o.STYLE.LINE;case"grid":return o.STYLE.GRID;case"surface":return o.STYLE.SURFACE;case"bar":return o.STYLE.BAR;case"bar-color":return o.STYLE.BARCOLOR;case"bar-size":return o.STYLE.BARSIZE}return-1},o.prototype._determineColumnIndexes=function(e,t){if(this.style===o.STYLE.DOT||this.style===o.STYLE.DOTLINE||this.style===o.STYLE.LINE||this.style===o.STYLE.GRID||this.style===o.STYLE.SURFACE||this.style===o.STYLE.BAR)this.colX=0,this.colY=1,this.colZ=2,this.colValue=void 0,e.getNumberOfColumns()>3&&(this.colFilter=3);else{if(this.style!==o.STYLE.DOTCOLOR&&this.style!==o.STYLE.DOTSIZE&&this.style!==o.STYLE.BARCOLOR&&this.style!==o.STYLE.BARSIZE)throw'Unknown style "'+this.style+'"';this.colX=0,this.colY=1,this.colZ=2,this.colValue=3,e.getNumberOfColumns()>4&&(this.colFilter=4)}},o.prototype.getNumberOfRows=function(e){return e.length},o.prototype.getNumberOfColumns=function(e){var t=0;for(var i in e[0])e[0].hasOwnProperty(i)&&t++;return t},o.prototype.getDistinctValues=function(e,t){for(var i=[],o=0;o<e.length;o++)-1==i.indexOf(e[o][t])&&i.push(e[o][t]);return i},o.prototype.getColumnRange=function(e,t){for(var i={min:e[0][t],max:e[0][t]},o=0;o<e.length;o++)i.min>e[o][t]&&(i.min=e[o][t]),i.max<e[o][t]&&(i.max=e[o][t]);return i},o.prototype._dataInitialize=function(e,t){var i=this;if(this.dataSet&&this.dataSet.off("*",this._onChange),void 0!==e){var n;if(Array.isArray(e)&&(e=new h(e)),!(e instanceof h||e instanceof d))throw new Error("Array, DataSet, or DataView expected");if(0!=(n=e.get()).length){this.dataSet=e,this.dataTable=n,this._onChange=function(){i.setData(i.dataSet)},this.dataSet.on("*",this._onChange),this.colX="x",this.colY="y",this.colZ="z",this.colValue="style",this.colFilter="filter",n[0].hasOwnProperty("filter")&&void 0===this.dataFilter&&(this.dataFilter=new f(e,this.colFilter,this),this.dataFilter.setOnLoadCallback(function(){i.redraw()}));var s=this.style==o.STYLE.BAR||this.style==o.STYLE.BARCOLOR||this.style==o.STYLE.BARSIZE;if(s){if(void 0!==this.defaultXBarWidth)this.xBarWidth=this.defaultXBarWidth;else{var r=this.getDistinctValues(n,this.colX);this.xBarWidth=r[1]-r[0]||1}if(void 0!==this.defaultYBarWidth)this.yBarWidth=this.defaultYBarWidth;else{var a=this.getDistinctValues(n,this.colY);this.yBarWidth=a[1]-a[0]||1}}var l=this.getColumnRange(n,this.colX);s&&(l.min-=this.xBarWidth/2,l.max+=this.xBarWidth/2),this.xMin=void 0!==this.defaultXMin?this.defaultXMin:l.min,this.xMax=void 0!==this.defaultXMax?this.defaultXMax:l.max,this.xMax<=this.xMin&&(this.xMax=this.xMin+1),this.xStep=void 0!==this.defaultXStep?this.defaultXStep:(this.xMax-this.xMin)/5;var c=this.getColumnRange(n,this.colY);s&&(c.min-=this.yBarWidth/2,c.max+=this.yBarWidth/2),this.yMin=void 0!==this.defaultYMin?this.defaultYMin:c.min,this.yMax=void 0!==this.defaultYMax?this.defaultYMax:c.max,this.yMax<=this.yMin&&(this.yMax=this.yMin+1),this.yStep=void 0!==this.defaultYStep?this.defaultYStep:(this.yMax-this.yMin)/5;var u=this.getColumnRange(n,this.colZ);if(this.zMin=void 0!==this.defaultZMin?this.defaultZMin:u.min,this.zMax=void 0!==this.defaultZMax?this.defaultZMax:u.max,this.zMax<=this.zMin&&(this.zMax=this.zMin+1),this.zStep=void 0!==this.defaultZStep?this.defaultZStep:(this.zMax-this.zMin)/5,void 0!==this.colValue){var p=this.getColumnRange(n,this.colValue);this.valueMin=void 0!==this.defaultValueMin?this.defaultValueMin:p.min,this.valueMax=void 0!==this.defaultValueMax?this.defaultValueMax:p.max,this.valueMax<=this.valueMin&&(this.valueMax=this.valueMin+1)}this._setScale()}}},o.prototype._getDataPoints=function(e){var t,i,n,s,r,a,h=[];if(this.style===o.STYLE.GRID||this.style===o.STYLE.SURFACE){var d=[],l=[];for(n=0;n<this.getNumberOfRows(e);n++)t=e[n][this.colX]||0,i=e[n][this.colY]||0,-1===d.indexOf(t)&&d.push(t),-1===l.indexOf(i)&&l.push(i);var u=function(e,t){return e-t};d.sort(u),l.sort(u);var p=[];for(n=0;n<e.length;n++){t=e[n][this.colX]||0,i=e[n][this.colY]||0,s=e[n][this.colZ]||0;var f=d.indexOf(t),m=l.indexOf(i);void 0===p[f]&&(p[f]=[]);var g=new c;g.x=t,g.y=i,g.z=s,(r={}).point=g,r.trans=void 0,r.screen=void 0,r.bottom=new c(t,i,this.zMin),p[f][m]=r,h.push(r)}for(t=0;t<p.length;t++)for(i=0;i<p[t].length;i++)p[t][i]&&(p[t][i].pointRight=t<p.length-1?p[t+1][i]:void 0,p[t][i].pointTop=i<p[t].length-1?p[t][i+1]:void 0,p[t][i].pointCross=t<p.length-1&&i<p[t].length-1?p[t+1][i+1]:void 0)}else for(n=0;n<e.length;n++)a=new c,a.x=e[n][this.colX]||0,a.y=e[n][this.colY]||0,a.z=e[n][this.colZ]||0,void 0!==this.colValue&&(a.value=e[n][this.colValue]||0),r={},r.point=a,r.bottom=new c(a.x,a.y,this.zMin),r.trans=void 0,r.screen=void 0,h.push(r);return h},o.prototype.create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div"),this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas);var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e),this.frame.filter=document.createElement("div"),this.frame.filter.style.position="absolute",this.frame.filter.style.bottom="0px",this.frame.filter.style.left="0px",this.frame.filter.style.width="100%",this.frame.appendChild(this.frame.filter);var t=this;l.addEventListener(this.frame.canvas,"keydown",onkeydown),l.addEventListener(this.frame.canvas,"mousedown",function(e){t._onMouseDown(e)}),l.addEventListener(this.frame.canvas,"touchstart",function(e){t._onTouchStart(e)}),l.addEventListener(this.frame.canvas,"mousewheel",function(e){t._onWheel(e)}),l.addEventListener(this.frame.canvas,"mousemove",function(e){t._onTooltip(e)}),this.containerElement.appendChild(this.frame)},o.prototype.setSize=function(e,t){this.frame.style.width=e,this.frame.style.height=t,this._resizeCanvas()},o.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,this.frame.filter.style.width=this.frame.canvas.clientWidth-20+"px"},o.prototype.animationStart=function(){if(!this.frame.filter||!this.frame.filter.slider)throw"No animation available";this.frame.filter.slider.play()},o.prototype.animationStop=function(){this.frame.filter&&this.frame.filter.slider&&this.frame.filter.slider.stop()},o.prototype._resizeCenter=function(){"%"===this.defaultXCenter.charAt(this.defaultXCenter.length-1)?this.xcenter=parseFloat(this.defaultXCenter)/100*this.frame.canvas.clientWidth:this.xcenter=parseFloat(this.defaultXCenter),"%"===this.defaultYCenter.charAt(this.defaultYCenter.length-1)?this.ycenter=parseFloat(this.defaultYCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight):this.ycenter=parseFloat(this.defaultYCenter)},o.prototype.setCameraPosition=function(e){void 0!==e&&(void 0!==e.horizontal&&void 0!==e.vertical&&this.camera.setArmRotation(e.horizontal,e.vertical),void 0!==e.distance&&this.camera.setArmLength(e.distance),this.redraw())},o.prototype.getCameraPosition=function(){var e=this.camera.getArmRotation();return e.distance=this.camera.getArmLength(),e},o.prototype._readData=function(e){this._dataInitialize(e,this.style),this.dataFilter?this.dataPoints=this.dataFilter._getDataPoints():this.dataPoints=this._getDataPoints(this.dataTable),this._redrawFilter()},o.prototype.setData=function(e){this._readData(e),this.redraw(),this.animationAutoStart&&this.dataFilter&&this.animationStart()},o.prototype.setOptions=function(e){var t=void 0;if(this.animationStop(),void 0!==e){if(void 0!==e.width&&(this.width=e.width),void 0!==e.height&&(this.height=e.height),void 0!==e.xCenter&&(this.defaultXCenter=e.xCenter),void 0!==e.yCenter&&(this.defaultYCenter=e.yCenter),void 0!==e.filterLabel&&(this.filterLabel=e.filterLabel),void 0!==e.legendLabel&&(this.legendLabel=e.legendLabel),void 0!==e.xLabel&&(this.xLabel=e.xLabel),void 0!==e.yLabel&&(this.yLabel=e.yLabel),void 0!==e.zLabel&&(this.zLabel=e.zLabel),void 0!==e.xValueLabel&&(this.xValueLabel=e.xValueLabel),void 0!==e.yValueLabel&&(this.yValueLabel=e.yValueLabel),void 0!==e.zValueLabel&&(this.zValueLabel=e.zValueLabel),void 0!==e.dotSizeRatio&&(this.dotSizeRatio=e.dotSizeRatio),void 0!==e.style){var i=this._getStyleNumber(e.style);-1!==i&&(this.style=i)}void 0!==e.showGrid&&(this.showGrid=e.showGrid),void 0!==e.showPerspective&&(this.showPerspective=e.showPerspective),void 0!==e.showShadow&&(this.showShadow=e.showShadow),void 0!==e.tooltip&&(this.showTooltip=e.tooltip),void 0!==e.showAnimationControls&&(this.showAnimationControls=e.showAnimationControls),void 0!==e.keepAspectRatio&&(this.keepAspectRatio=e.keepAspectRatio),void 0!==e.verticalRatio&&(this.verticalRatio=e.verticalRatio),void 0!==e.animationInterval&&(this.animationInterval=e.animationInterval),void 0!==e.animationPreload&&(this.animationPreload=e.animationPreload),void 0!==e.animationAutoStart&&(this.animationAutoStart=e.animationAutoStart),void 0!==e.xBarWidth&&(this.defaultXBarWidth=e.xBarWidth),void 0!==e.yBarWidth&&(this.defaultYBarWidth=e.yBarWidth),void 0!==e.xMin&&(this.defaultXMin=e.xMin),void 0!==e.xStep&&(this.defaultXStep=e.xStep),void 0!==e.xMax&&(this.defaultXMax=e.xMax),void 0!==e.yMin&&(this.defaultYMin=e.yMin),void 0!==e.yStep&&(this.defaultYStep=e.yStep),void 0!==e.yMax&&(this.defaultYMax=e.yMax),void 0!==e.zMin&&(this.defaultZMin=e.zMin),void 0!==e.zStep&&(this.defaultZStep=e.zStep),void 0!==e.zMax&&(this.defaultZMax=e.zMax),void 0!==e.valueMin&&(this.defaultValueMin=e.valueMin),void 0!==e.valueMax&&(this.defaultValueMax=e.valueMax),void 0!==e.backgroundColor&&this._setBackgroundColor(e.backgroundColor),void 0!==e.cameraPosition&&(t=e.cameraPosition),void 0!==t&&(this.camera.setArmRotation(t.horizontal,t.vertical),this.camera.setArmLength(t.distance)),void 0!==e.axisColor&&(this.axisColor=e.axisColor),void 0!==e.gridColor&&(this.gridColor=e.gridColor),e.dataColor&&("string"==typeof e.dataColor?(this.dataColor.fill=e.dataColor,this.dataColor.stroke=e.dataColor):(e.dataColor.fill&&(this.dataColor.fill=e.dataColor.fill),e.dataColor.stroke&&(this.dataColor.stroke=e.dataColor.stroke),void 0!==e.dataColor.strokeWidth&&(this.dataColor.strokeWidth=e.dataColor.strokeWidth)))}this.setSize(this.width,this.height),this.dataTable&&this.setData(this.dataTable),this.animationAutoStart&&this.dataFilter&&this.animationStart()},o.prototype.redraw=function(){if(void 0===this.dataPoints)throw"Error: graph data not initialized";this._resizeCanvas(),this._resizeCenter(),this._redrawSlider(),this._redrawClear(),this._redrawAxis(),this.style===o.STYLE.GRID||this.style===o.STYLE.SURFACE?this._redrawDataGrid():this.style===o.STYLE.LINE?this._redrawDataLine():this.style===o.STYLE.BAR||this.style===o.STYLE.BARCOLOR||this.style===o.STYLE.BARSIZE?this._redrawDataBar():this._redrawDataDot(),this._redrawInfo(),this._redrawLegend()},o.prototype._redrawClear=function(){var e=this.frame.canvas;e.getContext("2d").clearRect(0,0,e.width,e.height)},o.prototype._redrawLegend=function(){var e;if(this.style===o.STYLE.DOTCOLOR||this.style===o.STYLE.DOTSIZE){var t,i,n=this.frame.clientWidth*this.dotSizeRatio;this.style===o.STYLE.DOTSIZE?(t=n/2,i=n/2+2*n):(t=20,i=20);var s=Math.max(.25*this.frame.clientHeight,100),r=this.margin,a=this.frame.clientWidth-this.margin,h=a-i,d=r+s}var l=this.frame.canvas.getContext("2d");if(l.lineWidth=1,l.font="14px arial",this.style===o.STYLE.DOTCOLOR){var c=s;for(e=0;c>e;e++){var u=240*((e-0)/(c-0)),p=this._hsv2rgb(u,1,1);l.strokeStyle=p,l.beginPath(),l.moveTo(h,r+e),l.lineTo(a,r+e),l.stroke()}l.strokeStyle=this.axisColor,l.strokeRect(h,r,i,s)}if(this.style===o.STYLE.DOTSIZE&&(l.strokeStyle=this.axisColor,l.fillStyle=this.dataColor.fill,l.beginPath(),l.moveTo(h,r),l.lineTo(a,r),l.lineTo(a-i+t,d),l.lineTo(h,d),l.closePath(),l.fill(),l.stroke()),this.style===o.STYLE.DOTCOLOR||this.style===o.STYLE.DOTSIZE){var f=new g(this.valueMin,this.valueMax,(this.valueMax-this.valueMin)/5,!0);for(f.start(),f.getCurrent()<this.valueMin&&f.next();!f.end();)e=d-(f.getCurrent()-this.valueMin)/(this.valueMax-this.valueMin)*s,l.beginPath(),l.moveTo(h-5,e),l.lineTo(h,e),l.stroke(),l.textAlign="right",l.textBaseline="middle",l.fillStyle=this.axisColor,l.fillText(f.getCurrent(),h-10,e),f.next();l.textAlign="right",l.textBaseline="top";var m=this.legendLabel;l.fillText(m,a,d+this.margin)}},o.prototype._redrawFilter=function(){if(this.frame.filter.innerHTML="",this.dataFilter){var e={visible:this.showAnimationControls},t=new m(this.frame.filter,e);this.frame.filter.slider=t,this.frame.filter.style.padding="10px",t.setValues(this.dataFilter.values),t.setPlayInterval(this.animationInterval);var i=this;t.setOnChangeCallback(function(){var e=t.getIndex();i.dataFilter.selectValue(e),i.dataPoints=i.dataFilter._getDataPoints(),i.redraw()})}else this.frame.filter.slider=void 0},o.prototype._redrawSlider=function(){void 0!==this.frame.filter.slider&&this.frame.filter.slider.redraw()},o.prototype._redrawInfo=function(){if(this.dataFilter){var e=this.frame.canvas.getContext("2d");e.font="14px arial",e.lineStyle="gray",e.fillStyle="gray",e.textAlign="left",e.textBaseline="top";var t=this.margin,i=this.margin;e.fillText(this.dataFilter.getLabel()+": "+this.dataFilter.getSelectedValue(),t,i)}},o.prototype._redrawAxis=function(){var e,t,i,o,n,s,r,a,h,d,l,u,p,f=this.frame.canvas.getContext("2d");f.font=24/this.camera.getArmLength()+"px arial";var m=.025/this.scale.x,v=.025/this.scale.y,y=5/this.camera.getArmLength(),b=this.camera.getArmRotation().horizontal;for(f.lineWidth=1,o=void 0===this.defaultXStep,(i=new g(this.xMin,this.xMax,this.xStep,o)).start(),i.getCurrent()<this.xMin&&i.next();!i.end();){var w=i.getCurrent();this.showGrid?(e=this._convert3Dto2D(new c(w,this.yMin,this.zMin)),t=this._convert3Dto2D(new c(w,this.yMax,this.zMin)),f.strokeStyle=this.gridColor,f.beginPath(),f.moveTo(e.x,e.y),f.lineTo(t.x,t.y),f.stroke()):(e=this._convert3Dto2D(new c(w,this.yMin,this.zMin)),t=this._convert3Dto2D(new c(w,this.yMin+m,this.zMin)),f.strokeStyle=this.axisColor,f.beginPath(),f.moveTo(e.x,e.y),f.lineTo(t.x,t.y),f.stroke(),e=this._convert3Dto2D(new c(w,this.yMax,this.zMin)),t=this._convert3Dto2D(new c(w,this.yMax-m,this.zMin)),f.strokeStyle=this.axisColor,f.beginPath(),f.moveTo(e.x,e.y),f.lineTo(t.x,t.y),f.stroke()),r=Math.cos(b)>0?this.yMin:this.yMax,n=this._convert3Dto2D(new c(w,r,this.zMin)),Math.cos(2*b)>0?(f.textAlign="center",f.textBaseline="top",n.y+=y):Math.sin(2*b)<0?(f.textAlign="right",f.textBaseline="middle"):(f.textAlign="left",f.textBaseline="middle"),f.fillStyle=this.axisColor,f.fillText("  "+this.xValueLabel(i.getCurrent())+"  ",n.x,n.y),i.next()}for(f.lineWidth=1,o=void 0===this.defaultYStep,(i=new g(this.yMin,this.yMax,this.yStep,o)).start(),i.getCurrent()<this.yMin&&i.next();!i.end();)this.showGrid?(e=this._convert3Dto2D(new c(this.xMin,i.getCurrent(),this.zMin)),t=this._convert3Dto2D(new c(this.xMax,i.getCurrent(),this.zMin)),f.strokeStyle=this.gridColor,f.beginPath(),f.moveTo(e.x,e.y),f.lineTo(t.x,t.y),f.stroke()):(e=this._convert3Dto2D(new c(this.xMin,i.getCurrent(),this.zMin)),t=this._convert3Dto2D(new c(this.xMin+v,i.getCurrent(),this.zMin)),f.strokeStyle=this.axisColor,f.beginPath(),f.moveTo(e.x,e.y),f.lineTo(t.x,t.y),f.stroke(),e=this._convert3Dto2D(new c(this.xMax,i.getCurrent(),this.zMin)),t=this._convert3Dto2D(new c(this.xMax-v,i.getCurrent(),this.zMin)),f.strokeStyle=this.axisColor,f.beginPath(),f.moveTo(e.x,e.y),f.lineTo(t.x,t.y),f.stroke()),s=Math.sin(b)>0?this.xMin:this.xMax,n=this._convert3Dto2D(new c(s,i.getCurrent(),this.zMin)),Math.cos(2*b)<0?(f.textAlign="center",f.textBaseline="top",n.y+=y):Math.sin(2*b)>0?(f.textAlign="right",f.textBaseline="middle"):(f.textAlign="left",f.textBaseline="middle"),f.fillStyle=this.axisColor,f.fillText("  "+this.yValueLabel(i.getCurrent())+"  ",n.x,n.y),i.next();for(f.lineWidth=1,o=void 0===this.defaultZStep,(i=new g(this.zMin,this.zMax,this.zStep,o)).start(),i.getCurrent()<this.zMin&&i.next(),s=Math.cos(b)>0?this.xMin:this.xMax,r=Math.sin(b)<0?this.yMin:this.yMax;!i.end();)e=this._convert3Dto2D(new c(s,r,i.getCurrent())),f.strokeStyle=this.axisColor,f.beginPath(),f.moveTo(e.x,e.y),f.lineTo(e.x-y,e.y),f.stroke(),f.textAlign="right",f.textBaseline="middle",f.fillStyle=this.axisColor,f.fillText(this.zValueLabel(i.getCurrent())+" ",e.x-5,e.y),i.next();f.lineWidth=1,e=this._convert3Dto2D(new c(s,r,this.zMin)),t=this._convert3Dto2D(new c(s,r,this.zMax)),f.strokeStyle=this.axisColor,f.beginPath(),f.moveTo(e.x,e.y),f.lineTo(t.x,t.y),f.stroke(),f.lineWidth=1,u=this._convert3Dto2D(new c(this.xMin,this.yMin,this.zMin)),p=this._convert3Dto2D(new c(this.xMax,this.yMin,this.zMin)),f.strokeStyle=this.axisColor,f.beginPath(),f.moveTo(u.x,u.y),f.lineTo(p.x,p.y),f.stroke(),u=this._convert3Dto2D(new c(this.xMin,this.yMax,this.zMin)),p=this._convert3Dto2D(new c(this.xMax,this.yMax,this.zMin)),f.strokeStyle=this.axisColor,f.beginPath(),f.moveTo(u.x,u.y),f.lineTo(p.x,p.y),f.stroke(),f.lineWidth=1,e=this._convert3Dto2D(new c(this.xMin,this.yMin,this.zMin)),t=this._convert3Dto2D(new c(this.xMin,this.yMax,this.zMin)),f.strokeStyle=this.axisColor,f.beginPath(),f.moveTo(e.x,e.y),f.lineTo(t.x,t.y),f.stroke(),e=this._convert3Dto2D(new c(this.xMax,this.yMin,this.zMin)),t=this._convert3Dto2D(new c(this.xMax,this.yMax,this.zMin)),f.strokeStyle=this.axisColor,f.beginPath(),f.moveTo(e.x,e.y),f.lineTo(t.x,t.y),f.stroke();var _=this.xLabel;_.length>0&&(l=.1/this.scale.y,s=(this.xMin+this.xMax)/2,r=Math.cos(b)>0?this.yMin-l:this.yMax+l,n=this._convert3Dto2D(new c(s,r,this.zMin)),Math.cos(2*b)>0?(f.textAlign="center",f.textBaseline="top"):Math.sin(2*b)<0?(f.textAlign="right",f.textBaseline="middle"):(f.textAlign="left",f.textBaseline="middle"),f.fillStyle=this.axisColor,f.fillText(_,n.x,n.y));var x=this.yLabel;x.length>0&&(d=.1/this.scale.x,s=Math.sin(b)>0?this.xMin-d:this.xMax+d,r=(this.yMin+this.yMax)/2,n=this._convert3Dto2D(new c(s,r,this.zMin)),Math.cos(2*b)<0?(f.textAlign="center",f.textBaseline="top"):Math.sin(2*b)>0?(f.textAlign="right",f.textBaseline="middle"):(f.textAlign="left",f.textBaseline="middle"),f.fillStyle=this.axisColor,f.fillText(x,n.x,n.y));var k=this.zLabel;k.length>0&&(h=30,s=Math.cos(b)>0?this.xMin:this.xMax,r=Math.sin(b)<0?this.yMin:this.yMax,a=(this.zMin+this.zMax)/2,n=this._convert3Dto2D(new c(s,r,a)),f.textAlign="right",f.textBaseline="middle",f.fillStyle=this.axisColor,f.fillText(k,n.x-h,n.y))},o.prototype._hsv2rgb=function(e,t,i){var o,n,s,r,a,h;switch(r=i*t,a=Math.floor(e/60),h=r*(1-Math.abs(e/60%2-1)),a){case 0:o=r,n=h,s=0;break;case 1:o=h,n=r,s=0;break;case 2:o=0,n=r,s=h;break;case 3:o=0,n=h,s=r;break;case 4:o=h,n=0,s=r;break;case 5:o=r,n=0,s=h;break;default:o=0,n=0,s=0}return"RGB("+parseInt(255*o)+","+parseInt(255*n)+","+parseInt(255*s)+")"},o.prototype._redrawDataGrid=function(){var e,t,i,n,s,r,a,h,d,l,u,p,f=this.frame.canvas.getContext("2d");if(f.lineJoin="round",f.lineCap="round",!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(s=0;s<this.dataPoints.length;s++){var m=this._convertPointToTranslation(this.dataPoints[s].point),g=this._convertTranslationToScreen(m);this.dataPoints[s].trans=m,this.dataPoints[s].screen=g;var v=this._convertPointToTranslation(this.dataPoints[s].bottom);this.dataPoints[s].dist=this.showPerspective?v.length():-v.z}if(this.dataPoints.sort(function(e,t){return t.dist-e.dist}),this.style===o.STYLE.SURFACE){for(s=0;s<this.dataPoints.length;s++)if(e=this.dataPoints[s],t=this.dataPoints[s].pointRight,i=this.dataPoints[s].pointTop,n=this.dataPoints[s].pointCross,void 0!==e&&void 0!==t&&void 0!==i&&void 0!==n){if(this.showGrayBottom||this.showShadow){var y=c.subtract(n.trans,e.trans),b=c.subtract(i.trans,t.trans),w=c.crossProduct(y,b),_=w.length();r=w.z>0}else r=!0;r?(d=240*(1-((p=(e.point.z+t.point.z+i.point.z+n.point.z)/4)-this.zMin)*this.scale.z/this.verticalRatio),l=1,this.showShadow?(u=Math.min(1+w.x/_/2,1),h=a=this._hsv2rgb(d,l,u)):(u=1,a=this._hsv2rgb(d,l,u),h=this.axisColor)):(a="gray",h=this.axisColor),f.lineWidth=this._getStrokeWidth(e),f.fillStyle=a,f.strokeStyle=h,f.beginPath(),f.moveTo(e.screen.x,e.screen.y),f.lineTo(t.screen.x,t.screen.y),f.lineTo(n.screen.x,n.screen.y),f.lineTo(i.screen.x,i.screen.y),f.closePath(),f.fill(),f.stroke()}}else for(s=0;s<this.dataPoints.length;s++)e=this.dataPoints[s],t=this.dataPoints[s].pointRight,i=this.dataPoints[s].pointTop,void 0!==e&&void 0!==t&&(p=(e.point.z+t.point.z)/2,d=240*(1-(p-this.zMin)*this.scale.z/this.verticalRatio),f.lineWidth=2*this._getStrokeWidth(e),f.strokeStyle=this._hsv2rgb(d,1,1),f.beginPath(),f.moveTo(e.screen.x,e.screen.y),f.lineTo(t.screen.x,t.screen.y),f.stroke()),void 0!==e&&void 0!==i&&(p=(e.point.z+i.point.z)/2,d=240*(1-(p-this.zMin)*this.scale.z/this.verticalRatio),f.lineWidth=2*this._getStrokeWidth(e),f.strokeStyle=this._hsv2rgb(d,1,1),f.beginPath(),f.moveTo(e.screen.x,e.screen.y),f.lineTo(i.screen.x,i.screen.y),f.stroke())}},o.prototype._getStrokeWidth=function(e){return void 0!==e?this.showPerspective?1/-e.trans.z*this.dataColor.strokeWidth:-this.eye.z/this.camera.getArmLength()*this.dataColor.strokeWidth:this.dataColor.strokeWidth},o.prototype._redrawDataDot=function(){var e,t=this.frame.canvas.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(e=0;e<this.dataPoints.length;e++){var i=this._convertPointToTranslation(this.dataPoints[e].point),n=this._convertTranslationToScreen(i);this.dataPoints[e].trans=i,this.dataPoints[e].screen=n;var s=this._convertPointToTranslation(this.dataPoints[e].bottom);this.dataPoints[e].dist=this.showPerspective?s.length():-s.z}this.dataPoints.sort(function(e,t){return t.dist-e.dist});var r=this.frame.clientWidth*this.dotSizeRatio;for(e=0;e<this.dataPoints.length;e++){var a,h,d,l,c,u=this.dataPoints[e];if(this.style===o.STYLE.DOTLINE){var p=this._convert3Dto2D(u.bottom);t.lineWidth=1,t.strokeStyle=this.gridColor,t.beginPath(),t.moveTo(p.x,p.y),t.lineTo(u.screen.x,u.screen.y),t.stroke()}a=this.style===o.STYLE.DOTSIZE?r/2+2*r*(u.point.value-this.valueMin)/(this.valueMax-this.valueMin):r,0>(h=this.showPerspective?a/-u.trans.z:a*(-this.eye.z/this.camera.getArmLength()))&&(h=0),this.style===o.STYLE.DOTCOLOR?(d=240*(1-(u.point.value-this.valueMin)*this.scale.value),l=this._hsv2rgb(d,1,1),c=this._hsv2rgb(d,1,.8)):this.style===o.STYLE.DOTSIZE?(l=this.dataColor.fill,c=this.dataColor.stroke):(d=240*(1-(u.point.z-this.zMin)*this.scale.z/this.verticalRatio),l=this._hsv2rgb(d,1,1),c=this._hsv2rgb(d,1,.8)),t.lineWidth=this._getStrokeWidth(u),t.strokeStyle=c,t.fillStyle=l,t.beginPath(),t.arc(u.screen.x,u.screen.y,h,0,2*Math.PI,!0),t.fill(),t.stroke()}}},o.prototype._redrawDataBar=function(){var e,t,i,n,s=this.frame.canvas.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(e=0;e<this.dataPoints.length;e++){var r=this._convertPointToTranslation(this.dataPoints[e].point),a=this._convertTranslationToScreen(r);this.dataPoints[e].trans=r,this.dataPoints[e].screen=a;var h=this._convertPointToTranslation(this.dataPoints[e].bottom);this.dataPoints[e].dist=this.showPerspective?h.length():-h.z}this.dataPoints.sort(function(e,t){return t.dist-e.dist}),s.lineJoin="round",s.lineCap="round";var d=this.xBarWidth/2,l=this.yBarWidth/2;for(e=0;e<this.dataPoints.length;e++){var u,p,f,m=this.dataPoints[e];this.style===o.STYLE.BARCOLOR?(u=240*(1-(m.point.value-this.valueMin)*this.scale.value),p=this._hsv2rgb(u,1,1),f=this._hsv2rgb(u,1,.8)):this.style===o.STYLE.BARSIZE?(p=this.dataColor.fill,f=this.dataColor.stroke):(u=240*(1-(m.point.z-this.zMin)*this.scale.z/this.verticalRatio),p=this._hsv2rgb(u,1,1),f=this._hsv2rgb(u,1,.8)),this.style===o.STYLE.BARSIZE&&(d=this.xBarWidth/2*((m.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2),l=this.yBarWidth/2*((m.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2));var g=this,v=m.point,y=[{point:new c(v.x-d,v.y-l,v.z)},{point:new c(v.x+d,v.y-l,v.z)},{point:new c(v.x+d,v.y+l,v.z)},{point:new c(v.x-d,v.y+l,v.z)}],b=[{point:new c(v.x-d,v.y-l,this.zMin)},{point:new c(v.x+d,v.y-l,this.zMin)},{point:new c(v.x+d,v.y+l,this.zMin)},{point:new c(v.x-d,v.y+l,this.zMin)}];y.forEach(function(e){e.screen=g._convert3Dto2D(e.point)}),b.forEach(function(e){e.screen=g._convert3Dto2D(e.point)});var w=[{corners:y,center:c.avg(b[0].point,b[2].point)},{corners:[y[0],y[1],b[1],b[0]],center:c.avg(b[1].point,b[0].point)},{corners:[y[1],y[2],b[2],b[1]],center:c.avg(b[2].point,b[1].point)},{corners:[y[2],y[3],b[3],b[2]],center:c.avg(b[3].point,b[2].point)},{corners:[y[3],y[0],b[0],b[3]],center:c.avg(b[0].point,b[3].point)}];for(m.surfaces=w,t=0;t<w.length;t++){i=w[t];var _=this._convertPointToTranslation(i.center);i.dist=this.showPerspective?_.length():-_.z}for(w.sort(function(e,t){var i=t.dist-e.dist;return i||(e.corners===y?1:t.corners===y?-1:0)}),s.lineWidth=this._getStrokeWidth(m),s.strokeStyle=f,s.fillStyle=p,t=2;t<w.length;t++)i=w[t],n=i.corners,s.beginPath(),s.moveTo(n[3].screen.x,n[3].screen.y),s.lineTo(n[0].screen.x,n[0].screen.y),s.lineTo(n[1].screen.x,n[1].screen.y),s.lineTo(n[2].screen.x,n[2].screen.y),s.lineTo(n[3].screen.x,n[3].screen.y),s.fill(),s.stroke()}}},o.prototype._redrawDataLine=function(){var e,t,i=this.frame.canvas.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(t=0;t<this.dataPoints.length;t++){var o=this._convertPointToTranslation(this.dataPoints[t].point),n=this._convertTranslationToScreen(o);this.dataPoints[t].trans=o,this.dataPoints[t].screen=n}if(this.dataPoints.length>0){for(e=this.dataPoints[0],i.lineWidth=this._getStrokeWidth(e),i.lineJoin="round",i.lineCap="round",i.strokeStyle=this.dataColor.stroke,i.beginPath(),i.moveTo(e.screen.x,e.screen.y),t=1;t<this.dataPoints.length;t++)e=this.dataPoints[t],i.lineTo(e.screen.x,e.screen.y);i.stroke()}}},o.prototype._onMouseDown=function(e){if(e=e||window.event,this.leftButtonDown&&this._onMouseUp(e),this.leftButtonDown=e.which?1===e.which:1===e.button,this.leftButtonDown||this.touchDown){this.startMouseX=n(e),this.startMouseY=s(e),this.startStart=new Date(this.start),this.startEnd=new Date(this.end),this.startArmRotation=this.camera.getArmRotation(),this.frame.style.cursor="move";var t=this;this.onmousemove=function(e){t._onMouseMove(e)},this.onmouseup=function(e){t._onMouseUp(e)},l.addEventListener(document,"mousemove",t.onmousemove),l.addEventListener(document,"mouseup",t.onmouseup),l.preventDefault(e)}},o.prototype._onMouseMove=function(e){e=e||window.event;var t=parseFloat(n(e))-this.startMouseX,i=parseFloat(s(e))-this.startMouseY,o=this.startArmRotation.horizontal+t/200,r=this.startArmRotation.vertical+i/200,a=Math.sin(4/360*2*Math.PI);Math.abs(Math.sin(o))<a&&(o=Math.round(o/Math.PI)*Math.PI-.001),Math.abs(Math.cos(o))<a&&(o=(Math.round(o/Math.PI-.5)+.5)*Math.PI-.001),Math.abs(Math.sin(r))<a&&(r=Math.round(r/Math.PI)*Math.PI),Math.abs(Math.cos(r))<a&&(r=(Math.round(r/Math.PI-.5)+.5)*Math.PI),this.camera.setArmRotation(o,r),this.redraw();var h=this.getCameraPosition();this.emit("cameraPositionChange",h),l.preventDefault(e)},o.prototype._onMouseUp=function(e){this.frame.style.cursor="auto",this.leftButtonDown=!1,l.removeEventListener(document,"mousemove",this.onmousemove),l.removeEventListener(document,"mouseup",this.onmouseup),l.preventDefault(e)},o.prototype._onTooltip=function(e){var t=this.frame.getBoundingClientRect(),i=n(e)-t.left,o=s(e)-t.top;if(this.showTooltip){if(this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.leftButtonDown)return void this._hideTooltip();if(this.tooltip&&this.tooltip.dataPoint){var r=this._dataPointFromXY(i,o);r!==this.tooltip.dataPoint&&(r?this._showTooltip(r):this._hideTooltip())}else{var a=this;this.tooltipTimeout=setTimeout(function(){a.tooltipTimeout=null;var e=a._dataPointFromXY(i,o);e&&a._showTooltip(e)},300)}}},o.prototype._onTouchStart=function(e){this.touchDown=!0;var t=this;this.ontouchmove=function(e){t._onTouchMove(e)},this.ontouchend=function(e){t._onTouchEnd(e)},l.addEventListener(document,"touchmove",t.ontouchmove),l.addEventListener(document,"touchend",t.ontouchend),this._onMouseDown(e)},o.prototype._onTouchMove=function(e){this._onMouseMove(e)},o.prototype._onTouchEnd=function(e){this.touchDown=!1,l.removeEventListener(document,"touchmove",this.ontouchmove),l.removeEventListener(document,"touchend",this.ontouchend),this._onMouseUp(e)},o.prototype._onWheel=function(e){e||(e=window.event);var t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t){var i=this.camera.getArmLength()*(1-t/10);this.camera.setArmLength(i),this.redraw(),this._hideTooltip()}var o=this.getCameraPosition();this.emit("cameraPositionChange",o),l.preventDefault(e)},o.prototype._insideTriangle=function(e,t){function i(e){return e>0?1:0>e?-1:0}var o=t[0],n=t[1],s=t[2],r=i((n.x-o.x)*(e.y-o.y)-(n.y-o.y)*(e.x-o.x)),a=i((s.x-n.x)*(e.y-n.y)-(s.y-n.y)*(e.x-n.x)),h=i((o.x-s.x)*(e.y-s.y)-(o.y-s.y)*(e.x-s.x));return!(0!=r&&0!=a&&r!=a||0!=a&&0!=h&&a!=h||0!=r&&0!=h&&r!=h)},o.prototype._dataPointFromXY=function(e,t){var i,n=null,s=null,r=null,a=new u(e,t);if(this.style===o.STYLE.BAR||this.style===o.STYLE.BARCOLOR||this.style===o.STYLE.BARSIZE)for(i=this.dataPoints.length-1;i>=0;i--){var h=(n=this.dataPoints[i]).surfaces;if(h)for(var d=h.length-1;d>=0;d--){var l=h[d].corners,c=[l[0].screen,l[1].screen,l[2].screen],p=[l[2].screen,l[3].screen,l[0].screen];if(this._insideTriangle(a,c)||this._insideTriangle(a,p))return n}}else for(i=0;i<this.dataPoints.length;i++){var f=(n=this.dataPoints[i]).screen;if(f){var m=Math.abs(e-f.x),g=Math.abs(t-f.y),v=Math.sqrt(m*m+g*g);(null===r||r>v)&&100>v&&(r=v,s=n)}}return s},o.prototype._showTooltip=function(e){var t,i,o;this.tooltip?(t=this.tooltip.dom.content,i=this.tooltip.dom.line,o=this.tooltip.dom.dot):((t=document.createElement("div")).style.position="absolute",t.style.padding="10px",t.style.border="1px solid #4d4d4d",t.style.color="#1a1a1a",t.style.background="rgba(255,255,255,0.7)",t.style.borderRadius="2px",t.style.boxShadow="5px 5px 10px rgba(128,128,128,0.5)",(i=document.createElement("div")).style.position="absolute",i.style.height="40px",i.style.width="0",i.style.borderLeft="1px solid #4d4d4d",(o=document.createElement("div")).style.position="absolute",o.style.height="0",o.style.width="0",o.style.border="5px solid #4d4d4d",o.style.borderRadius="5px",this.tooltip={dataPoint:null,dom:{content:t,line:i,dot:o}}),this._hideTooltip(),this.tooltip.dataPoint=e,"function"==typeof this.showTooltip?t.innerHTML=this.showTooltip(e.point):t.innerHTML="<table><tr><td>"+this.xLabel+":</td><td>"+e.point.x+"</td></tr><tr><td>"+this.yLabel+":</td><td>"+e.point.y+"</td></tr><tr><td>"+this.zLabel+":</td><td>"+e.point.z+"</td></tr></table>",t.style.left="0",t.style.top="0",this.frame.appendChild(t),this.frame.appendChild(i),this.frame.appendChild(o);var n=t.offsetWidth,s=t.offsetHeight,r=i.offsetHeight,a=o.offsetWidth,h=o.offsetHeight,d=e.screen.x-n/2;d=Math.min(Math.max(d,10),this.frame.clientWidth-10-n),i.style.left=e.screen.x+"px",i.style.top=e.screen.y-r+"px",t.style.left=d+"px",t.style.top=e.screen.y-r-s+"px",o.style.left=e.screen.x-a/2+"px",o.style.top=e.screen.y-h/2+"px"},o.prototype._hideTooltip=function(){if(this.tooltip){this.tooltip.dataPoint=null;for(var e in this.tooltip.dom)if(this.tooltip.dom.hasOwnProperty(e)){var t=this.tooltip.dom[e];t&&t.parentNode&&t.parentNode.removeChild(t)}}},e.exports=o},function(e,t){function i(e){return e?function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e):void 0}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function i(){o.off(e,i),t.apply(this,arguments)}var o=this;return this._callbacks=this._callbacks||{},i.fn=t,this.on(e,i),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[e];if(!i)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o,n=0;n<i.length;n++)if(o=i[n],o===t||o.fn===t){i.splice(n,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks[e];if(i)for(var o=0,n=(i=i.slice(0)).length;n>o;++o)i[o].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){function i(e,t,i){this.x=void 0!==e?e:0,this.y=void 0!==t?t:0,this.z=void 0!==i?i:0}i.subtract=function(e,t){var o=new i;return o.x=e.x-t.x,o.y=e.y-t.y,o.z=e.z-t.z,o},i.add=function(e,t){var o=new i;return o.x=e.x+t.x,o.y=e.y+t.y,o.z=e.z+t.z,o},i.avg=function(e,t){return new i((e.x+t.x)/2,(e.y+t.y)/2,(e.z+t.z)/2)},i.crossProduct=function(e,t){var o=new i;return o.x=e.y*t.z-e.z*t.y,o.y=e.z*t.x-e.x*t.z,o.z=e.x*t.y-e.y*t.x,o},i.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},e.exports=i},function(e,t){e.exports=function(e,t){this.x=void 0!==e?e:0,this.y=void 0!==t?t:0}},function(e,t,i){function o(){this.armLocation=new n,this.armRotation={},this.armRotation.horizontal=0,this.armRotation.vertical=0,this.armLength=1.7,this.cameraLocation=new n,this.cameraRotation=new n(.5*Math.PI,0,0),this.calculateCameraOrientation()}var n=i(14);o.prototype.setArmLocation=function(e,t,i){this.armLocation.x=e,this.armLocation.y=t,this.armLocation.z=i,this.calculateCameraOrientation()},o.prototype.setArmRotation=function(e,t){void 0!==e&&(this.armRotation.horizontal=e),void 0!==t&&(this.armRotation.vertical=t,this.armRotation.vertical<0&&(this.armRotation.vertical=0),this.armRotation.vertical>.5*Math.PI&&(this.armRotation.vertical=.5*Math.PI)),void 0===e&&void 0===t||this.calculateCameraOrientation()},o.prototype.getArmRotation=function(){var e={};return e.horizontal=this.armRotation.horizontal,e.vertical=this.armRotation.vertical,e},o.prototype.setArmLength=function(e){void 0!==e&&(this.armLength=e,this.armLength<.71&&(this.armLength=.71),this.armLength>5&&(this.armLength=5),this.calculateCameraOrientation())},o.prototype.getArmLength=function(){return this.armLength},o.prototype.getCameraLocation=function(){return this.cameraLocation},o.prototype.getCameraRotation=function(){return this.cameraRotation},o.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical),this.cameraRotation.x=Math.PI/2-this.armRotation.vertical,this.cameraRotation.y=0,this.cameraRotation.z=-this.armRotation.horizontal},e.exports=o},function(e,t,i){function o(e,t,i){this.data=e,this.column=t,this.graph=i,this.index=void 0,this.value=void 0,this.values=i.getDistinctValues(e.get(),this.column),this.values.sort(function(e,t){return e>t?1:t>e?-1:0}),this.values.length>0&&this.selectValue(0),this.dataPoints=[],this.loaded=!1,this.onLoadCallback=void 0,i.animationPreload?(this.loaded=!1,this.loadInBackground()):this.loaded=!0}var n=i(11);o.prototype.isLoaded=function(){return this.loaded},o.prototype.getLoadedProgress=function(){for(var e=this.values.length,t=0;this.dataPoints[t];)t++;return Math.round(t/e*100)},o.prototype.getLabel=function(){return this.graph.filterLabel},o.prototype.getColumn=function(){return this.column},o.prototype.getSelectedValue=function(){return void 0!==this.index?this.values[this.index]:void 0},o.prototype.getValues=function(){return this.values},o.prototype.getValue=function(e){if(e>=this.values.length)throw"Error: index out of range";return this.values[e]},o.prototype._getDataPoints=function(e){if(void 0===e&&(e=this.index),void 0===e)return[];var t;if(this.dataPoints[e])t=this.dataPoints[e];else{var i={};i.column=this.column,i.value=this.values[e];var o=new n(this.data,{filter:function(e){return e[i.column]==i.value}}).get();t=this.graph._getDataPoints(o),this.dataPoints[e]=t}return t},o.prototype.setOnLoadCallback=function(e){this.onLoadCallback=e},o.prototype.selectValue=function(e){if(e>=this.values.length)throw"Error: index out of range";this.index=e,this.value=this.values[e]},o.prototype.loadInBackground=function(e){void 0===e&&(e=0);var t=this.graph.frame;if(e<this.values.length){this._getDataPoints(e),void 0===t.progress&&(t.progress=document.createElement("DIV"),t.progress.style.position="absolute",t.progress.style.color="gray",t.appendChild(t.progress));var i=this.getLoadedProgress();t.progress.innerHTML="Loading animation... "+i+"%",t.progress.style.bottom="60px",t.progress.style.left="10px";var o=this;setTimeout(function(){o.loadInBackground(e+1)},10),this.loaded=!1}else this.loaded=!0,void 0!==t.progress&&(t.removeChild(t.progress),t.progress=void 0),this.onLoadCallback&&this.onLoadCallback()},e.exports=o},function(e,t,i){function o(e,t){if(void 0===e)throw"Error: No container element defined";if(this.container=e,this.visible=!t||void 0==t.visible||t.visible,this.visible){this.frame=document.createElement("DIV"),this.frame.style.width="100%",this.frame.style.position="relative",this.container.appendChild(this.frame),this.frame.prev=document.createElement("INPUT"),this.frame.prev.type="BUTTON",this.frame.prev.value="Prev",this.frame.appendChild(this.frame.prev),this.frame.play=document.createElement("INPUT"),this.frame.play.type="BUTTON",this.frame.play.value="Play",this.frame.appendChild(this.frame.play),this.frame.next=document.createElement("INPUT"),this.frame.next.type="BUTTON",this.frame.next.value="Next",this.frame.appendChild(this.frame.next),this.frame.bar=document.createElement("INPUT"),this.frame.bar.type="BUTTON",this.frame.bar.style.position="absolute",this.frame.bar.style.border="1px solid red",this.frame.bar.style.width="100px",this.frame.bar.style.height="6px",this.frame.bar.style.borderRadius="2px",this.frame.bar.style.MozBorderRadius="2px",this.frame.bar.style.border="1px solid #7F7F7F",this.frame.bar.style.backgroundColor="#E5E5E5",this.frame.appendChild(this.frame.bar),this.frame.slide=document.createElement("INPUT"),this.frame.slide.type="BUTTON",this.frame.slide.style.margin="0px",this.frame.slide.value=" ",this.frame.slide.style.position="relative",this.frame.slide.style.left="-100px",this.frame.appendChild(this.frame.slide);var i=this;this.frame.slide.onmousedown=function(e){i._onMouseDown(e)},this.frame.prev.onclick=function(e){i.prev(e)},this.frame.play.onclick=function(e){i.togglePlay(e)},this.frame.next.onclick=function(e){i.next(e)}}this.onChangeCallback=void 0,this.values=[],this.index=void 0,this.playTimeout=void 0,this.playInterval=1e3,this.playLoop=!0}var n=i(1);o.prototype.prev=function(){var e=this.getIndex();e>0&&(e--,this.setIndex(e))},o.prototype.next=function(){var e=this.getIndex();e<this.values.length-1&&(e++,this.setIndex(e))},o.prototype.playNext=function(){var e=new Date,t=this.getIndex();t<this.values.length-1?(t++,this.setIndex(t)):this.playLoop&&(t=0,this.setIndex(t));var i=new Date-e,o=Math.max(this.playInterval-i,0),n=this;this.playTimeout=setTimeout(function(){n.playNext()},o)},o.prototype.togglePlay=function(){void 0===this.playTimeout?this.play():this.stop()},o.prototype.play=function(){this.playTimeout||(this.playNext(),this.frame&&(this.frame.play.value="Stop"))},o.prototype.stop=function(){clearInterval(this.playTimeout),this.playTimeout=void 0,this.frame&&(this.frame.play.value="Play")},o.prototype.setOnChangeCallback=function(e){this.onChangeCallback=e},o.prototype.setPlayInterval=function(e){this.playInterval=e},o.prototype.getPlayInterval=function(e){return this.playInterval},o.prototype.setPlayLoop=function(e){this.playLoop=e},o.prototype.onChange=function(){void 0!==this.onChangeCallback&&this.onChangeCallback()},o.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px",this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";var e=this.indexToLeft(this.index);this.frame.slide.style.left=e+"px"}},o.prototype.setValues=function(e){this.values=e,this.values.length>0?this.setIndex(0):this.index=void 0},o.prototype.setIndex=function(e){if(!(e<this.values.length))throw"Error: index out of range";this.index=e,this.redraw(),this.onChange()},o.prototype.getIndex=function(){return this.index},o.prototype.get=function(){return this.values[this.index]},o.prototype._onMouseDown=function(e){if(e.which?1===e.which:1===e.button){this.startClientX=e.clientX,this.startSlideX=parseFloat(this.frame.slide.style.left),this.frame.style.cursor="move";var t=this;this.onmousemove=function(e){t._onMouseMove(e)},this.onmouseup=function(e){t._onMouseUp(e)},n.addEventListener(document,"mousemove",this.onmousemove),n.addEventListener(document,"mouseup",this.onmouseup),n.preventDefault(e)}},o.prototype.leftToIndex=function(e){var t=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,i=e-3,o=Math.round(i/t*(this.values.length-1));return 0>o&&(o=0),o>this.values.length-1&&(o=this.values.length-1),o},o.prototype.indexToLeft=function(e){var t=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10;return e/(this.values.length-1)*t+3},o.prototype._onMouseMove=function(e){var t=e.clientX-this.startClientX,i=this.startSlideX+t,o=this.leftToIndex(i);this.setIndex(o),n.preventDefault()},o.prototype._onMouseUp=function(e){this.frame.style.cursor="auto",n.removeEventListener(document,"mousemove",this.onmousemove),n.removeEventListener(document,"mouseup",this.onmouseup),n.preventDefault()},e.exports=o},function(e,t){function i(e,t,i,o){this._start=0,this._end=0,this._step=1,this.prettyStep=!0,this.precision=5,this._current=0,this.setRange(e,t,i,o)}i.prototype.setRange=function(e,t,i,o){this._start=e||0,this._end=t||0,this.setStep(i,o)},i.prototype.setStep=function(e,t){void 0===e||0>=e||(void 0!==t&&(this.prettyStep=t),!0===this.prettyStep?this._step=i.calculatePrettyStep(e):this._step=e)},i.calculatePrettyStep=function(e){var t=function(e){return Math.log(e)/Math.LN10},i=Math.pow(10,Math.round(t(e))),o=2*Math.pow(10,Math.round(t(e/2))),n=5*Math.pow(10,Math.round(t(e/5))),s=i;return Math.abs(o-e)<=Math.abs(s-e)&&(s=o),Math.abs(n-e)<=Math.abs(s-e)&&(s=n),0>=s&&(s=1),s},i.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision))},i.prototype.getStep=function(){return this._step},i.prototype.start=function(){this._current=this._start-this._start%this._step},i.prototype.next=function(){this._current+=this._step},i.prototype.end=function(){return this._current>this._end},e.exports=i},function(e,t,i){if("undefined"!=typeof window){var o=i(21),n=window.Hammer||i(22);e.exports=o(n,{preventDefault:"mouse"})}else e.exports=function(){throw Error("hammer.js is only available in a browser, not in node.js.")}},function(e,t,i){var o,n,s;n=[],void 0===(s="function"==typeof(o=function(){var e=null;return function t(i,o){function n(e){return e.match(/[^ ]+/g)}function s(t){if("hammer.input"!==t.type){if(t.srcEvent._handled||(t.srcEvent._handled={}),t.srcEvent._handled[t.type])return;t.srcEvent._handled[t.type]=!0}var i=!1;t.stopPropagation=function(){i=!0};var o=t.srcEvent.stopPropagation.bind(t.srcEvent);"function"==typeof o&&(t.srcEvent.stopPropagation=function(){o(),t.stopPropagation()}),t.firstTarget=e;for(var n=e;n&&!i;){var s=n.hammer;if(s)for(var r,a=0;a<s.length;a++)if(r=s[a]._handlers[t.type])for(var h=0;h<r.length&&!i;h++)r[h](t);n=n.parentNode}}var r=o||{preventDefault:!1};if(i.Manager){var a=i,h=function(e,i){var o=Object.create(r);return i&&a.assign(o,i),t(new a(e,o),o)};return a.assign(h,a),h.Manager=function(e,i){var o=Object.create(r);return i&&a.assign(o,i),t(new a.Manager(e,o),o)},h}var d=Object.create(i),l=i.element;return l.hammer||(l.hammer=[]),l.hammer.push(d),i.on("hammer.input",function(t){!0!==r.preventDefault&&r.preventDefault!==t.pointerType||t.preventDefault(),t.isFirst&&(e=t.target)}),d._handlers={},d.on=function(e,t){return n(e).forEach(function(e){var o=d._handlers[e];o||(d._handlers[e]=o=[],i.on(e,s)),o.push(t)}),d},d.off=function(e,t){return n(e).forEach(function(e){var o=d._handlers[e];o&&((o=t?o.filter(function(e){return e!==t}):[]).length>0?d._handlers[e]=o:(i.off(e,s),delete d._handlers[e]))}),d},d.emit=function(t,o){e=o.target,i.emit(t,o)},d.destroy=function(){var e=i.element.hammer,t=e.indexOf(d);-1!==t&&e.splice(t,1),e.length||delete i.element.hammer,d._handlers={},i.destroy()},d}})?o.apply(t,n):o)||(e.exports=s)},function(e,t,i){var o;!function(n,s,r,a){function h(e,t,i){return setTimeout(p(e,i),t)}function d(e,t,i){return!!Array.isArray(e)&&(l(e,i[t],i),!0)}function l(e,t,i){var o;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==a)for(o=0;o<e.length;)t.call(i,e[o],o,e),o++;else for(o in e)e.hasOwnProperty(o)&&t.call(i,e[o],o,e)}function c(e,t,i){var o="DEPRECATED METHOD: "+t+"\n"+i+" AT \n";return function(){var t=new Error("get-stack-trace"),i=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=n.console&&(n.console.warn||n.console.log);return s&&s.call(n.console,o,i),e.apply(this,arguments)}}function u(e,t,i){var o,n=t.prototype;(o=e.prototype=Object.create(n)).constructor=e,o._super=n,i&&ee(o,i)}function p(e,t){return function(){return e.apply(t,arguments)}}function f(e,t){return typeof e==oe?e.apply(t?t[0]||a:a,t):e}function m(e,t){return e===a?t:e}function g(e,t,i){l(w(t),function(t){e.addEventListener(t,i,!1)})}function v(e,t,i){l(w(t),function(t){e.removeEventListener(t,i,!1)})}function y(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function b(e,t){return e.indexOf(t)>-1}function w(e){return e.trim().split(/\s+/g)}function _(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var o=0;o<e.length;){if(i&&e[o][i]==t||!i&&e[o]===t)return o;o++}return-1}function x(e){return Array.prototype.slice.call(e,0)}function k(e,t,i){for(var o=[],n=[],s=0;s<e.length;){var r=t?e[s][t]:e[s];_(n,r)<0&&o.push(e[s]),n[s]=r,s++}return i&&(o=t?o.sort(function(e,i){return e[t]>i[t]}):o.sort()),o}function S(e,t){for(var i,o,n=t[0].toUpperCase()+t.slice(1),s=0;s<te.length;){if((o=(i=te[s])?i+n:t)in e)return o;s++}return a}function O(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||n}function C(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){f(e.options.enable,[e])&&i.handler(t)},this.init()}function M(e,t,i){var o=i.pointers.length,n=i.changedPointers.length,s=t&fe&&o-n==0,r=t&(ge|ve)&&o-n==0;i.isFirst=!!s,i.isFinal=!!r,s&&(e.session={}),i.eventType=t,function(e,t){var i=e.session,o=t.pointers,n=o.length;i.firstInput||(i.firstInput=D(t)),n>1&&!i.firstMultiple?i.firstMultiple=D(t):1===n&&(i.firstMultiple=!1);var s=i.firstInput,r=i.firstMultiple,h=r?r.center:s.center,d=t.center=E(o);t.timeStamp=re(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=A(h,d),t.distance=I(h,d),l=i,c=t,u=c.center,p=l.offsetDelta||{},f=l.prevDelta||{},m=l.prevInput||{},c.eventType!==fe&&m.eventType!==ge||(f=l.prevDelta={x:m.deltaX||0,y:m.deltaY||0},p=l.offsetDelta={x:u.x,y:u.y}),c.deltaX=f.x+(u.x-p.x),c.deltaY=f.y+(u.y-p.y),t.offsetDirection=P(t.deltaX,t.deltaY);var l,c,u,p,f,m;var g=T(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=g.x,t.overallVelocityY=g.y,t.overallVelocity=se(g.x)>se(g.y)?g.x:g.y,t.scale=r?(w=r.pointers,_=o,I(_[0],_[1],Me)/I(w[0],w[1],Me)):1,t.rotation=r?(v=r.pointers,b=o,A(b[1],b[0],Me)+A(v[1],v[0],Me)):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,function(e,t){var i,o,n,s,r=e.lastInterval||t,h=t.timeStamp-r.timeStamp;if(t.eventType!=ve&&(h>pe||r.velocity===a)){var d=t.deltaX-r.deltaX,l=t.deltaY-r.deltaY,c=T(h,d,l);o=c.x,n=c.y,i=se(c.x)>se(c.y)?c.x:c.y,s=P(d,l),e.lastInterval=t}else i=r.velocity,o=r.velocityX,n=r.velocityY,s=r.direction;t.velocity=i,t.velocityX=o,t.velocityY=n,t.direction=s}(i,t);var v,b;var w,_;var x=e.element;y(t.srcEvent.target,x)&&(x=t.srcEvent.target),t.target=x}(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function D(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:ne(e.pointers[i].clientX),clientY:ne(e.pointers[i].clientY)},i++;return{timeStamp:re(),pointers:t,center:E(t),deltaX:e.deltaX,deltaY:e.deltaY}}function E(e){var t=e.length;if(1===t)return{x:ne(e[0].clientX),y:ne(e[0].clientY)};for(var i=0,o=0,n=0;t>n;)i+=e[n].clientX,o+=e[n].clientY,n++;return{x:ne(i/t),y:ne(o/t)}}function T(e,t,i){return{x:t/e||0,y:i/e||0}}function P(e,t){return e===t?ye:se(e)>=se(t)?0>e?be:we:0>t?_e:xe}function I(e,t,i){i||(i=Ce);var o=t[i[0]]-e[i[0]],n=t[i[1]]-e[i[1]];return Math.sqrt(o*o+n*n)}function A(e,t,i){i||(i=Ce);var o=t[i[0]]-e[i[0]],n=t[i[1]]-e[i[1]];return 180*Math.atan2(n,o)/Math.PI}function R(){this.evEl=Ee,this.evWin=Te,this.allow=!0,this.pressed=!1,C.apply(this,arguments)}function L(){this.evEl=Ae,this.evWin=Re,C.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=Ne,this.evWin=ze,this.started=!1,C.apply(this,arguments)}function z(){this.evTarget=Be,this.targetIds={},C.apply(this,arguments)}function F(){C.apply(this,arguments);var e=p(this.handler,this);this.touch=new z(this.manager,e),this.mouse=new R(this.manager,e)}function B(e,t){this.manager=e,this.set(t)}function j(e){this.options=ee({},this.defaults,e||{}),this.id=de++,this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=Ve,this.simultaneous={},this.requireFail=[]}function H(e){return e&Je?"cancel":e&Ke?"end":e&Xe?"move":e&qe?"start":""}function W(e){return e==xe?"down":e==_e?"up":e==be?"left":e==we?"right":""}function U(e,t){var i=t.manager;return i?i.get(e):e}function $(){j.apply(this,arguments)}function Y(){$.apply(this,arguments),this.pX=null,this.pY=null}function G(){$.apply(this,arguments)}function V(){j.apply(this,arguments),this._timer=null,this._input=null}function q(){$.apply(this,arguments)}function X(){$.apply(this,arguments)}function K(){j.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Z(e,t){return(t=t||{}).recognizers=m(t.recognizers,Z.defaults.preset),new J(e,t)}function J(e,t){var i;this.options=ee({},Z.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=new((i=this).options.inputClass||(ce?L:ue?z:le?F:R))(i,M),this.touchAction=new B(this,this.options.touchAction),Q(this,!0),l(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Q(e,t){var i=e.element;i.style&&l(e.options.cssProps,function(e,o){i.style[S(i.style,o)]=t?e:""})}var ee,te=["","webkit","Moz","MS","ms","o"],ie=s.createElement("div"),oe="function",ne=Math.round,se=Math.abs,re=Date.now;ee="function"!=typeof Object.assign?function(e){if(e===a||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!==a&&null!==o)for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])}return t}:Object.assign;var ae=c(function(e,t,i){for(var o=Object.keys(t),n=0;n<o.length;)(!i||i&&e[o[n]]===a)&&(e[o[n]]=t[o[n]]),n++;return e},"extend","Use `assign`."),he=c(function(e,t){return ae(e,t,!0)},"merge","Use `assign`."),de=1,le="ontouchstart"in n,ce=S(n,"PointerEvent")!==a,ue=le&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),pe=25,fe=1,me=2,ge=4,ve=8,ye=1,be=2,we=4,_e=8,xe=16,ke=be|we,Se=_e|xe,Oe=ke|Se,Ce=["x","y"],Me=["clientX","clientY"];C.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(O(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(O(this.element),this.evWin,this.domHandler)}};var De={mousedown:fe,mousemove:me,mouseup:ge},Ee="mousedown",Te="mousemove mouseup";u(R,C,{handler:function(e){var t=De[e.type];t&fe&&0===e.button&&(this.pressed=!0),t&me&&1!==e.which&&(t=ge),this.pressed&&this.allow&&(t&ge&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var Pe={pointerdown:fe,pointermove:me,pointerup:ge,pointercancel:ve,pointerout:ve},Ie={2:"touch",3:"pen",4:"mouse",5:"kinect"},Ae="pointerdown",Re="pointermove pointerup pointercancel";n.MSPointerEvent&&!n.PointerEvent&&(Ae="MSPointerDown",Re="MSPointerMove MSPointerUp MSPointerCancel"),u(L,C,{handler:function(e){var t=this.store,i=!1,o=e.type.toLowerCase().replace("ms",""),n=Pe[o],s=Ie[e.pointerType]||e.pointerType,r="touch"==s,a=_(t,e.pointerId,"pointerId");n&fe&&(0===e.button||r)?0>a&&(t.push(e),a=t.length-1):n&(ge|ve)&&(i=!0),0>a||(t[a]=e,this.callback(this.manager,n,{pointers:t,changedPointers:[e],pointerType:s,srcEvent:e}),i&&t.splice(a,1))}});var Le={touchstart:fe,touchmove:me,touchend:ge,touchcancel:ve},Ne="touchstart",ze="touchstart touchmove touchend touchcancel";u(N,C,{handler:function(e){var t=Le[e.type];if(t===fe&&(this.started=!0),this.started){var i=function(e,t){var i=x(e.touches),o=x(e.changedTouches);return t&(ge|ve)&&(i=k(i.concat(o),"identifier",!0)),[i,o]}.call(this,e,t);t&(ge|ve)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:e})}}});var Fe={touchstart:fe,touchmove:me,touchend:ge,touchcancel:ve},Be="touchstart touchmove touchend touchcancel";u(z,C,{handler:function(e){var t=Fe[e.type],i=function(e,t){var i=x(e.touches),o=this.targetIds;if(t&(fe|me)&&1===i.length)return o[i[0].identifier]=!0,[i,i];var n,s,r=x(e.changedTouches),a=[],h=this.target;if(s=i.filter(function(e){return y(e.target,h)}),t===fe)for(n=0;n<s.length;)o[s[n].identifier]=!0,n++;for(n=0;n<r.length;)o[r[n].identifier]&&a.push(r[n]),t&(ge|ve)&&delete o[r[n].identifier],n++;return a.length?[k(s.concat(a),"identifier",!0),a]:void 0}.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:e})}}),u(F,C,{handler:function(e,t,i){var o="touch"==i.pointerType,n="mouse"==i.pointerType;if(o)this.mouse.allow=!1;else if(n&&!this.mouse.allow)return;t&(ge|ve)&&(this.mouse.allow=!0),this.callback(e,t,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var je=S(ie.style,"touchAction"),He=je!==a,We="auto",Ue="manipulation",$e="none",Ye="pan-x",Ge="pan-y";B.prototype={set:function(e){"compute"==e&&(e=this.compute()),He&&this.manager.element.style&&(this.manager.element.style[je]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return l(this.manager.recognizers,function(t){f(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(b(e,$e))return $e;var t=b(e,Ye),i=b(e,Ge);return t&&i?$e:t||i?t?Ye:Ge:b(e,Ue)?Ue:We}(e.join(" "))},preventDefaults:function(e){if(!He){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var o=this.actions,n=b(o,$e),s=b(o,Ge),r=b(o,Ye);if(n){var a=1===e.pointers.length,h=e.distance<2,d=e.deltaTime<250;if(a&&h&&d)return}if(!r||!s)return n||s&&i&ke||r&&i&Se?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Ve=1,qe=2,Xe=4,Ke=8,Ze=Ke,Je=16;j.prototype={defaults:{},set:function(e){return ee(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(d(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=U(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return d(e,"dropRecognizeWith",this)?this:(e=U(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(d(e,"requireFailure",this))return this;var t=this.requireFail;return-1===_(t,e=U(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(d(e,"dropRequireFailure",this))return this;e=U(e,this);var t=_(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){i.manager.emit(t,e)}var i=this,o=this.state;Ke>o&&t(i.options.event+H(o)),t(i.options.event),e.additionalEvent&&t(e.additionalEvent),o>=Ke&&t(i.options.event+H(o))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=32)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Ve)))return!1;e++}return!0},recognize:function(e){var t=ee({},e);return f(this.options.enable,[this,t])?(this.state&(Ze|Je|32)&&(this.state=Ve),this.state=this.process(t),void(this.state&(qe|Xe|Ke|Je)&&this.tryEmit(t))):(this.reset(),void(this.state=32))},process:function(e){},getTouchAction:function(){},reset:function(){}},u($,j,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,o=t&(qe|Xe),n=this.attrTest(e);return o&&(i&ve||!n)?t|Je:o||n?i&ge?t|Ke:t&qe?t|Xe:qe:32}}),u(Y,$,{defaults:{event:"pan",threshold:10,pointers:1,direction:Oe},getTouchAction:function(){var e=this.options.direction,t=[];return e&ke&&t.push(Ge),e&Se&&t.push(Ye),t},directionTest:function(e){var t=this.options,i=!0,o=e.distance,n=e.direction,s=e.deltaX,r=e.deltaY;return n&t.direction||(t.direction&ke?(n=0===s?ye:0>s?be:we,i=s!=this.pX,o=Math.abs(e.deltaX)):(n=0===r?ye:0>r?_e:xe,i=r!=this.pY,o=Math.abs(e.deltaY))),e.direction=n,i&&o>t.threshold&&n&t.direction},attrTest:function(e){return $.prototype.attrTest.call(this,e)&&(this.state&qe||!(this.state&qe)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=W(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),u(G,$,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[$e]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&qe)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),u(V,j,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[We]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,o=e.distance<t.threshold,n=e.deltaTime>t.time;if(this._input=e,!o||!i||e.eventType&(ge|ve)&&!n)this.reset();else if(e.eventType&fe)this.reset(),this._timer=h(function(){this.state=Ze,this.tryEmit()},t.time,this);else if(e.eventType&ge)return Ze;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Ze&&(e&&e.eventType&ge?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=re(),this.manager.emit(this.options.event,this._input)))}}),u(q,$,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[$e]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&qe)}}),u(X,$,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ke|Se,pointers:1},getTouchAction:function(){return Y.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(ke|Se)?t=e.overallVelocity:i&ke?t=e.overallVelocityX:i&Se&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&se(t)>this.options.velocity&&e.eventType&ge},emit:function(e){var t=W(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),u(K,j,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ue]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,o=e.distance<t.threshold,n=e.deltaTime<t.time;if(this.reset(),e.eventType&fe&&0===this.count)return this.failTimeout();if(o&&n&&i){if(e.eventType!=ge)return this.failTimeout();var s=!this.pTime||e.timeStamp-this.pTime<t.interval,r=!this.pCenter||I(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,r&&s?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=h(function(){this.state=Ze,this.tryEmit()},t.interval,this),qe):Ze}return 32},failTimeout:function(){return this._timer=h(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ze&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Z.VERSION="2.0.6",Z.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[q,{enable:!1}],[G,{enable:!1},["rotate"]],[X,{direction:ke}],[Y,{direction:ke},["swipe"]],[K],[K,{event:"doubletap",taps:2},["tap"]],[V]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};J.prototype={set:function(e){return ee(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var i,o=this.recognizers,n=t.curRecognizer;(!n||n&&n.state&Ze)&&(n=t.curRecognizer=null);for(var s=0;s<o.length;)i=o[s],2===t.stopped||n&&i!=n&&!i.canRecognizeWith(n)?i.reset():i.recognize(e),!n&&i.state&(qe|Xe|Ke)&&(n=t.curRecognizer=i),s++}},get:function(e){if(e instanceof j)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(d(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(d(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,i=_(t,e);-1!==i&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){var i=this.handlers;return l(w(e),function(e){i[e]=i[e]||[],i[e].push(t)}),this},off:function(e,t){var i=this.handlers;return l(w(e),function(e){t?i[e]&&i[e].splice(_(i[e],t),1):delete i[e]}),this},emit:function(e,t){var i,o,n;this.options.domEvents&&(i=e,o=t,(n=s.createEvent("Event")).initEvent(i,!0,!0),n.gesture=o,o.target.dispatchEvent(n));var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var a=0;a<r.length;)r[a](t),a++}},destroy:function(){this.element&&Q(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ee(Z,{INPUT_START:fe,INPUT_MOVE:me,INPUT_END:ge,INPUT_CANCEL:ve,STATE_POSSIBLE:Ve,STATE_BEGAN:qe,STATE_CHANGED:Xe,STATE_ENDED:Ke,STATE_RECOGNIZED:Ze,STATE_CANCELLED:Je,STATE_FAILED:32,DIRECTION_NONE:ye,DIRECTION_LEFT:be,DIRECTION_RIGHT:we,DIRECTION_UP:_e,DIRECTION_DOWN:xe,DIRECTION_HORIZONTAL:ke,DIRECTION_VERTICAL:Se,DIRECTION_ALL:Oe,Manager:J,Input:C,TouchAction:B,TouchInput:z,MouseInput:R,PointerEventInput:L,TouchMouseInput:F,SingleTouchInput:N,Recognizer:j,AttrRecognizer:$,Tap:K,Pan:Y,Swipe:X,Pinch:G,Rotate:q,Press:V,on:g,off:v,each:l,merge:he,extend:ae,assign:ee,inherit:u,bindFn:p,prefixed:S}),(void 0!==n?n:"undefined"!=typeof self?self:{}).Hammer=Z,(o=function(){return Z}.call(t,i,t,e))===a||(e.exports=o)}(window,document)},function(e,t,i){var o,n,s;n=[],void 0===(s="function"==typeof(o=function(){return function(e){var t,i=e&&e.preventDefault||!1,o=e&&e.container||window,n={},s={keydown:{},keyup:{}},r={};for(t=97;122>=t;t++)r[String.fromCharCode(t)]={code:t-97+65,shift:!1};for(t=65;90>=t;t++)r[String.fromCharCode(t)]={code:t,shift:!0};for(t=0;9>=t;t++)r[""+t]={code:48+t,shift:!1};for(t=1;12>=t;t++)r["F"+t]={code:111+t,shift:!1};for(t=0;9>=t;t++)r["num"+t]={code:96+t,shift:!1};r["num*"]={code:106,shift:!1},r["num+"]={code:107,shift:!1},r["num-"]={code:109,shift:!1},r["num/"]={code:111,shift:!1},r["num."]={code:110,shift:!1},r.left={code:37,shift:!1},r.up={code:38,shift:!1},r.right={code:39,shift:!1},r.down={code:40,shift:!1},r.space={code:32,shift:!1},r.enter={code:13,shift:!1},r.shift={code:16,shift:void 0},r.esc={code:27,shift:!1},r.backspace={code:8,shift:!1},r.tab={code:9,shift:!1},r.ctrl={code:17,shift:!1},r.alt={code:18,shift:!1},r.delete={code:46,shift:!1},r.pageup={code:33,shift:!1},r.pagedown={code:34,shift:!1},r["="]={code:187,shift:!1},r["-"]={code:189,shift:!1},r["]"]={code:221,shift:!1},r["["]={code:219,shift:!1};var a=function(e){d(e,"keydown")},h=function(e){d(e,"keyup")},d=function(e,t){if(void 0!==s[t][e.keyCode]){for(var o=s[t][e.keyCode],n=0;n<o.length;n++)void 0===o[n].shift?o[n].fn(e):1==o[n].shift&&1==e.shiftKey?o[n].fn(e):0==o[n].shift&&0==e.shiftKey&&o[n].fn(e);1==i&&e.preventDefault()}};return n.bind=function(e,t,i){if(void 0===i&&(i="keydown"),void 0===r[e])throw new Error("unsupported key: "+e);void 0===s[i][r[e].code]&&(s[i][r[e].code]=[]),s[i][r[e].code].push({fn:t,shift:r[e].shift})},n.bindAll=function(e,t){void 0===t&&(t="keydown");for(var i in r)r.hasOwnProperty(i)&&n.bind(i,e,t)},n.getKey=function(e){for(var t in r)if(r.hasOwnProperty(t)){if(1==e.shiftKey&&1==r[t].shift&&e.keyCode==r[t].code)return t;if(0==e.shiftKey&&0==r[t].shift&&e.keyCode==r[t].code)return t;if(e.keyCode==r[t].code&&"shift"==t)return t}return"unknown key, currently not supported"},n.unbind=function(e,t,i){if(void 0===i&&(i="keydown"),void 0===r[e])throw new Error("unsupported key: "+e);if(void 0!==t){var o=[],n=s[i][r[e].code];if(void 0!==n)for(var a=0;a<n.length;a++)n[a].fn==t&&n[a].shift==r[e].shift||o.push(s[i][r[e].code][a]);s[i][r[e].code]=o}else s[i][r[e].code]=[]},n.reset=function(){s={keydown:{},keyup:{}}},n.destroy=function(){s={keydown:{},keyup:{}},o.removeEventListener("keydown",a,!0),o.removeEventListener("keyup",h,!0)},o.addEventListener("keydown",a,!0),o.addEventListener("keyup",h,!0),n}})?o.apply(t,n):o)||(e.exports=s)},function(e,t,i){t.util=i(1),t.DOMutil=i(8),t.DataSet=i(9),t.DataView=i(11),t.Queue=i(10),t.Timeline=i(25),t.Graph2d=i(50),t.timeline={Core:i(33),DateUtil:i(32),Range:i(30),stack:i(37),TimeStep:i(35),components:{items:{Item:i(39),BackgroundItem:i(43),BoxItem:i(41),PointItem:i(42),RangeItem:i(38)},BackgroundGroup:i(40),Component:i(31),CurrentTime:i(48),CustomTime:i(46),DataAxis:i(52),DataScale:i(53),GraphGroup:i(54),Group:i(36),ItemSet:i(34),Legend:i(58),LineGraph:i(51),TimeAxis:i(44)}},t.moment=i(2),t.Hammer=i(20),t.keycharm=i(23)},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,i,o){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(i)||i instanceof d||i instanceof l)&&i instanceof Object){var s=o;o=i,i=s}var r=this;this.defaultOptions={start:null,end:null,autoResize:!0,throttleRedraw:0,orientation:{axis:"bottom",item:"bottom"},rtl:!1,moment:a,width:null,height:null,maxHeight:null,minHeight:null},this.options=h.deepExtend({},this.defaultOptions),this._create(e),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale:function(){return r.timeAxis.step.scale},getStep:function(){return r.timeAxis.step.step},toScreen:r._toScreen.bind(r),toGlobalScreen:r._toGlobalScreen.bind(r),toTime:r._toTime.bind(r),toGlobalTime:r._toGlobalTime.bind(r)}},this.range=new c(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new p(this.body),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new f(this.body),this.components.push(this.currentTime),this.itemSet=new g(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null,this.on("tap",function(e){r.emit("click",r.getEventProperties(e))}),this.on("doubletap",function(e){r.emit("doubleClick",r.getEventProperties(e))}),this.dom.root.oncontextmenu=function(e){r.emit("contextmenu",r.getEventProperties(e))},this.fitDone=!1,this.on("changed",function(){if(null!=this.itemsData&&!r.fitDone)if(r.fitDone=!0,void 0!=r.options.start||void 0!=r.options.end){if(void 0==r.options.start||void 0==r.options.end)var e=r.getItemRange();var t=void 0!=r.options.start?r.options.start:e.min,i=void 0!=r.options.end?r.options.end:e.max;r.setWindow(t,i,{animation:!1})}else r.fit({animation:!1})}),o&&this.setOptions(o),i&&this.setGroups(i),t&&this.setItems(t),this._redraw()}var s=o(i(26)),r=o(i(29)),a=(i(13),i(20),i(2)),h=i(1),d=i(9),l=i(11),c=i(30),u=i(33),p=i(44),f=i(48),m=i(46),g=i(34),v=i(29).printStyle,y=i(49).allOptions,b=i(49).configureOptions;n.prototype=new u,n.prototype._createConfigurator=function(){return new s.default(this,this.dom.container,b)},n.prototype.redraw=function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()},n.prototype.setOptions=function(e){if(!0===r.default.validate(e,y)&&console.log("%cErrors have been found in the supplied options object.",v),u.prototype.setOptions.call(this,e),"type"in e&&e.type!==this.options.type){this.options.type=e.type;var t=this.itemsData;if(t){var i=this.getSelection();this.setItems(null),this.setItems(t),this.setSelection(i)}}},n.prototype.setItems=function(e){var t;t=e?e instanceof d||e instanceof l?e:new d(e,{type:{start:"Date",end:"Date"}}):null,this.itemsData=t,this.itemSet&&this.itemSet.setItems(t)},n.prototype.setGroups=function(e){var t;t=e?e instanceof d||e instanceof l?e:new d(e):null,this.groupsData=t,this.itemSet.setGroups(t)},n.prototype.setData=function(e){e&&e.groups&&this.setGroups(e.groups),e&&e.items&&this.setItems(e.items)},n.prototype.setSelection=function(e,t){this.itemSet&&this.itemSet.setSelection(e),t&&t.focus&&this.focus(e,t)},n.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]},n.prototype.focus=function(e,t){if(this.itemsData&&void 0!=e){var i=Array.isArray(e)?e:[e],o=null,n=null;if(this.itemsData.getDataSet().get(i,{type:{start:"Date",end:"Date"}}).forEach(function(e){var t=e.start.valueOf(),i="end"in e?e.end.valueOf():e.start.valueOf();(null===o||o>t)&&(o=t),(null===n||i>n)&&(n=i)}),null!==o&&null!==n){var s=(o+n)/2,r=Math.max(this.range.end-this.range.start,1.1*(n-o)),a=!t||void 0===t.animation||t.animation;this.range.setRange(s-r/2,s+r/2,a)}}},n.prototype.fit=function(e){var t,i=!e||void 0===e.animation||e.animation,o=this.itemsData&&this.itemsData.getDataSet();1===o.length&&void 0===o.get()[0].end?(t=this.getDataRange(),this.moveTo(t.min.valueOf(),{animation:i})):(t=this.getItemRange(),this.range.setRange(t.min,t.max,i))},n.prototype.getItemRange=function(){var e,t,i,o,n,s,r,a=this,d=this.getDataRange(),l=null!==d.min?d.min.valueOf():null,c=null!==d.max?d.max.valueOf():null,u=null,p=null;null!=l&&null!=c&&(s=function(e){return h.convert(e.data.start,"Date").valueOf()},r=function(e){var t=void 0!=e.data.end?e.data.end:e.data.start;return h.convert(t,"Date").valueOf()},0>=(e=c-l)&&(e=10),t=e/a.props.center.width,h.forEach(a.itemSet.items,function(e){e.show(),e.repositionX();var i=s(e),o=r(e);if(this.options.rtl)var n=i-(e.getWidthRight()+10)*t,a=o+(e.getWidthLeft()+10)*t;else n=i-(e.getWidthLeft()+10)*t,a=o+(e.getWidthRight()+10)*t;l>n&&(l=n,u=e),a>c&&(c=a,p=e)}.bind(a)),u&&p&&(i=u.getWidthLeft()+10,o=p.getWidthRight()+10,(n=a.props.center.width-i-o)>0&&(a.options.rtl?(l=s(u)-o*e/n,c=r(p)+i*e/n):(l=s(u)-i*e/n,c=r(p)+o*e/n))));return{min:null!=l?new Date(l):null,max:null!=c?new Date(c):null}},n.prototype.getDataRange=function(){var e=null,t=null,i=this.itemsData&&this.itemsData.getDataSet();return i&&i.forEach(function(i){var o=h.convert(i.start,"Date").valueOf(),n=h.convert(void 0!=i.end?i.end:i.start,"Date").valueOf();(null===e||e>o)&&(e=o),(null===t||n>t)&&(t=n)}),{min:null!=e?new Date(e):null,max:null!=t?new Date(t):null}},n.prototype.getEventProperties=function(e){var t=e.center?e.center.x:e.clientX,i=e.center?e.center.y:e.clientY;if(this.options.rtl)var o=h.getAbsoluteRight(this.dom.centerContainer)-t;else o=t-h.getAbsoluteLeft(this.dom.centerContainer);var n=i-h.getAbsoluteTop(this.dom.centerContainer),s=this.itemSet.itemFromTarget(e),r=this.itemSet.groupFromTarget(e),a=m.customTimeFromTarget(e),d=this.itemSet.options.snap||null,l=this.body.util.getScale(),c=this.body.util.getStep(),u=this._toTime(o),p=d?d(u,l,c):u,f=h.getTarget(e),g=null;return null!=s?g="item":null!=a?g="custom-time":h.hasParent(f,this.timeAxis.dom.foreground)?g="axis":this.timeAxis2&&h.hasParent(f,this.timeAxis2.dom.foreground)?g="axis":h.hasParent(f,this.itemSet.dom.labelSet)?g="group-label":h.hasParent(f,this.currentTime.bar)?g="current-time":h.hasParent(f,this.dom.center)&&(g="background"),{event:e,item:s?s.id:null,group:r?r.groupId:null,what:g,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:o,y:n,time:u,snappedTime:p}},e.exports=n},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),r=i(27),a=(o=r)&&o.__esModule?o:{default:o},h=i(1),d=function(){function e(t,i,o){var n=arguments.length<=3||void 0===arguments[3]?1:arguments[3];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.parent=t,this.changedOptions=[],this.container=i,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},h.extend(this.options,this.defaultOptions),this.configureOptions=o,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new a.default(n),this.wrapper=void 0}return s(e,[{key:"setOptions",value:function(e){if(void 0!==e){this.popupHistory={},this._removePopup();var t=!0;"string"==typeof e?this.options.filter=e:e instanceof Array?this.options.filter=e.join():"object"===(void 0===e?"undefined":n(e))?(void 0!==e.container&&(this.options.container=e.container),void 0!==e.filter&&(this.options.filter=e.filter),void 0!==e.showButton&&(this.options.showButton=e.showButton),void 0!==e.enabled&&(t=e.enabled)):"boolean"==typeof e?(this.options.filter=!0,t=e):"function"==typeof e&&(this.options.filter=e,t=!0),!1===this.options.filter&&(t=!1),this.options.enabled=t}this._clean()}},{key:"setModuleOptions",value:function(e){this.moduleOptions=e,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){var e=this;this._clean(),this.changedOptions=[];var t,i=this.options.filter,o=0,n=!1;for(var s in this.configureOptions)this.configureOptions.hasOwnProperty(s)&&(this.allowCreation=!1,n=!1,"function"==typeof i?(n=i(s,[]),n=n||this._handleObject(this.configureOptions[s],[s],!0)):!0!==i&&-1===i.indexOf(s)||(n=!0),!1!==n&&(this.allowCreation=!0,o>0&&this._makeItem([]),this._makeHeader(s),this._handleObject(this.configureOptions[s],[s])),o++);!0===this.options.showButton&&((t=document.createElement("div")).className="vis-configuration vis-config-button",t.innerHTML="generate options",t.onclick=function(){e._printOptions()},t.onmouseover=function(){t.className="vis-configuration vis-config-button hover"},t.onmouseout=function(){t.className="vis-configuration vis-config-button"},e.optionsContainer=document.createElement("div"),e.optionsContainer.className="vis-configuration vis-config-option-container",e.domElements.push(e.optionsContainer),e.domElements.push(t)),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(e){for(var t=this.moduleOptions,i=0;i<e.length;i++){if(void 0===t[e[i]]){t=void 0;break}t=t[e[i]]}return t}},{key:"_makeItem",value:function(e){var t=arguments,i=this;if(!0===this.allowCreation){var o,s,r,a=function(){var n=document.createElement("div");for(n.className="vis-configuration vis-config-item vis-config-s"+e.length,o=t.length,s=Array(o>1?o-1:0),r=1;o>r;r++)s[r-1]=t[r];return s.forEach(function(e){n.appendChild(e)}),i.domElements.push(n),{v:i.domElements.length}}();if("object"===(void 0===a?"undefined":n(a)))return a.v}return 0}},{key:"_makeHeader",value:function(e){var t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerHTML=e,this._makeItem([],t)}},{key:"_makeLabel",value:function(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=document.createElement("div");return o.className="vis-configuration vis-config-label vis-config-s"+t.length,o.innerHTML=!0===i?"<i><b>"+e+":</b></i>":e+":",o}},{key:"_makeDropdown",value:function(e,t,i){var o=document.createElement("select");o.className="vis-configuration vis-config-select";var n=0;void 0!==t&&-1!==e.indexOf(t)&&(n=e.indexOf(t));for(var s=0;s<e.length;s++){var r=document.createElement("option");r.value=e[s],s===n&&(r.selected="selected"),r.innerHTML=e[s],o.appendChild(r)}var a=this;o.onchange=function(){a._update(this.value,i)};var h=this._makeLabel(i[i.length-1],i);this._makeItem(i,h,o)}},{key:"_makeRange",value:function(e,t,i){var o=e[0],n=e[1],s=e[2],r=e[3],a=document.createElement("input");a.className="vis-configuration vis-config-range";try{a.type="range",a.min=n,a.max=s}catch(e){}a.step=r;var h="",d=0;if(void 0!==t){0>t&&n>1.2*t?(a.min=Math.ceil(1.2*t),d=a.min,h="range increased"):n>t/1.2&&(a.min=Math.ceil(t/1.2),d=a.min,h="range increased"),1.2*t>s&&1!==s&&(a.max=Math.ceil(1.2*t),d=a.max,h="range increased"),a.value=t}else a.value=o;var l=document.createElement("input");l.className="vis-configuration vis-config-rangeinput",l.value=a.value;var c=this;a.onchange=function(){l.value=this.value,c._update(Number(this.value),i)},a.oninput=function(){l.value=this.value};var u=this._makeLabel(i[i.length-1],i),p=this._makeItem(i,u,a,l);""!==h&&this.popupHistory[p]!==d&&(this.popupHistory[p]=d,this._setupPopup(h,p))}},{key:"_setupPopup",value:function(e,t){var i=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var o=document.createElement("div");o.id="vis-configuration-popup",o.className="vis-configuration-popup",o.innerHTML=e,o.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:o,index:t}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var e=this;if(void 0!==this.popupDiv.html){var t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(function(){e.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(function(){e._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(e,t,i){var o=document.createElement("input");o.type="checkbox",o.className="vis-configuration vis-config-checkbox",o.checked=e,void 0!==t&&(o.checked=t,t!==e&&("object"===(void 0===e?"undefined":n(e))?t!==e.enabled&&this.changedOptions.push({path:i,value:t}):this.changedOptions.push({path:i,value:t})));var s=this;o.onchange=function(){s._update(this.checked,i)};var r=this._makeLabel(i[i.length-1],i);this._makeItem(i,r,o)}},{key:"_makeTextInput",value:function(e,t,i){var o=document.createElement("input");o.type="text",o.className="vis-configuration vis-config-text",o.value=t,t!==e&&this.changedOptions.push({path:i,value:t});var n=this;o.onchange=function(){n._update(this.value,i)};var s=this._makeLabel(i[i.length-1],i);this._makeItem(i,s,o)}},{key:"_makeColorField",value:function(e,t,i){var o=this,n=e[1],s=document.createElement("div");"none"!==(t=void 0===t?n:t)?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=t):s.className="vis-configuration vis-config-colorBlock none",t=void 0===t?n:t,s.onclick=function(){o._showColorPicker(t,s,i)};var r=this._makeLabel(i[i.length-1],i);this._makeItem(i,r,s)}},{key:"_showColorPicker",value:function(e,t,i){var o=this;t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(function(e){var n="rgba("+e.r+","+e.g+","+e.b+","+e.a+")";t.style.backgroundColor=n,o._update(n,i)}),this.colorPicker.setCloseCallback(function(){t.onclick=function(){o._showColorPicker(e,t,i)}})}},{key:"_handleObject",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=!1,n=this.options.filter,s=!1;for(var r in e)if(e.hasOwnProperty(r)){o=!0;var a=e[r],d=h.copyAndExtendArray(t,r);if("function"==typeof n&&(!1===(o=n(r,t))&&!(a instanceof Array)&&"string"!=typeof a&&"boolean"!=typeof a&&a instanceof Object&&(this.allowCreation=!1,o=this._handleObject(a,d,!0),this.allowCreation=!1===i)),!1!==o){s=!0;var l=this._getValue(d);if(a instanceof Array)this._handleArray(a,l,d);else if("string"==typeof a)this._makeTextInput(a,l,d);else if("boolean"==typeof a)this._makeCheckbox(a,l,d);else if(a instanceof Object){var c=!0;if(-1!==t.indexOf("physics")&&this.moduleOptions.physics.solver!==r&&(c=!1),!0===c)if(void 0!==a.enabled){var u=h.copyAndExtendArray(d,"enabled"),p=this._getValue(u);if(!0===p){var f=this._makeLabel(r,d,!0);this._makeItem(d,f),s=this._handleObject(a,d)||s}else this._makeCheckbox(a,p,d)}else{var m=this._makeLabel(r,d,!0);this._makeItem(d,m),s=this._handleObject(a,d)||s}}else console.error("dont know how to handle",a,r,d)}}return s}},{key:"_handleArray",value:function(e,t,i){"string"==typeof e[0]&&"color"===e[0]?(this._makeColorField(e,t,i),e[1]!==t&&this.changedOptions.push({path:i,value:t})):"string"==typeof e[0]?(this._makeDropdown(e,t,i),e[0]!==t&&this.changedOptions.push({path:i,value:t})):"number"==typeof e[0]&&(this._makeRange(e,t,i),e[0]!==t&&this.changedOptions.push({path:i,value:Number(t)}))}},{key:"_update",value:function(e,t){var i=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=i;e="false"!==(e="true"===e||e)&&e;for(var n=0;n<t.length;n++)"global"!==t[n]&&(void 0===o[t[n]]&&(o[t[n]]={}),n!==t.length-1?o=o[t[n]]:o[t[n]]=e);return i}},{key:"_printOptions",value:function(){var e=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+JSON.stringify(e,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var e={},t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}}]),e}();t.default=d},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),n=i(20),s=i(28),r=i(1),a=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.pixelRatio=t,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return o(e,[{key:"insertTo",value:function(e){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(e){if("function"!=typeof e)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=e}},{key:"setCloseCallback",value:function(e){if("function"!=typeof e)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=e}},{key:"_isColorString",value:function(e){return"string"==typeof e?{black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"}[e]:void 0}},{key:"setColor",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];if("none"!==e){var i=void 0,o=this._isColorString(e);if(void 0!==o&&(e=o),!0===r.isString(e)){if(!0===r.isValidRGB(e)){var n=e.substr(4).substr(0,e.length-5).split(",");i={r:n[0],g:n[1],b:n[2],a:1}}else if(!0===r.isValidRGBA(e)){var s=e.substr(5).substr(0,e.length-6).split(",");i={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(!0===r.isValidHex(e)){var a=r.hexToRGB(e);i={r:a.r,g:a.g,b:a.b,a:1}}}else if(e instanceof Object&&void 0!==e.r&&void 0!==e.g&&void 0!==e.b){var h=void 0!==e.a?e.a:"1.0";i={r:e.r,g:e.g,b:e.b,a:h}}if(void 0===i)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(e));this._setColor(i,t)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var e=this;!0===(arguments.length<=0||void 0===arguments[0]||arguments[0])&&(this.previousColor=r.extend({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(function(){void 0!==e.closeCallback&&(e.closeCallback(),e.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(e){!0===(arguments.length<=1||void 0===arguments[1]||arguments[1])&&(this.initialColor=r.extend({},e)),this.color=e;var t=r.RGBToHSV(e.r,e.g,e.b),i=2*Math.PI,o=this.r*t.s,n=this.centerCoordinates.x+o*Math.sin(i*t.h),s=this.centerCoordinates.y+o*Math.cos(i*t.h);this.colorPickerSelector.style.left=n-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=s-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}},{key:"_setOpacity",value:function(e){this.color.a=e/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(e){var t=r.RGBToHSV(this.color.r,this.color.g,this.color.b);t.v=e/100;var i=r.HSVToRGB(t.h,t.s,t.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.color:arguments[0],t=r.RGBToHSV(e.r,e.g,e.b),i=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var o=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,o,n),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-t.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),i.fill(),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var e=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(t)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(e){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(e){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var i=this;this.opacityRange.onchange=function(){i._setOpacity(this.value)},this.opacityRange.oninput=function(){i._setOpacity(this.value)},this.brightnessRange.onchange=function(){i._setBrightness(this.value)},this.brightnessRange.oninput=function(){i._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var e=this;this.drag={},this.pinch={},this.hammer=new n(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),s.onTouch(this.hammer,function(t){e._moveSelector(t)}),this.hammer.on("tap",function(t){e._moveSelector(t)}),this.hammer.on("panstart",function(t){e._moveSelector(t)}),this.hammer.on("panmove",function(t){e._moveSelector(t)}),this.hammer.on("panend",function(t){e._moveSelector(t)})}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var e=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var t=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,i);var o=void 0,n=void 0,s=void 0,a=void 0;this.centerCoordinates={x:.5*t,y:.5*i},this.r=.49*t;var h=2*Math.PI/360,d=1/this.r,l=void 0;for(s=0;360>s;s++)for(a=0;a<this.r;a++)o=this.centerCoordinates.x+a*Math.sin(h*s),n=this.centerCoordinates.y+a*Math.cos(h*s),l=r.HSVToRGB(s*(1/360),a*d,1),e.fillStyle="rgb("+l.r+","+l.g+","+l.b+")",e.fillRect(o-.5,n-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,i)}this.generated=!0}},{key:"_moveSelector",value:function(e){var t=this.colorPickerDiv.getBoundingClientRect(),i=e.center.x-t.left,o=e.center.y-t.top,n=.5*this.colorPickerDiv.clientHeight,s=.5*this.colorPickerDiv.clientWidth,a=i-s,h=o-n,d=Math.atan2(a,h),l=.98*Math.min(Math.sqrt(a*a+h*h),s),c=Math.cos(d)*l+n,u=Math.sin(d)*l+s;this.colorPickerSelector.style.top=c-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=u-.5*this.colorPickerSelector.clientWidth+"px";var p=d/(2*Math.PI);p=0>p?p+1:p;var f=l/this.r,m=r.RGBToHSV(this.color.r,this.color.g,this.color.b);m.h=p,m.s=f;var g=r.HSVToRGB(m.h,m.s,m.v);g.a=this.color.a,this.color=g,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),e}();t.default=a},function(e,t,i){i(20),t.onTouch=function(e,t){t.inputHandler=function(e){e.isFirst&&t(e)},e.on("hammer.input",t.inputHandler)},t.onRelease=function(e,t){return t.inputHandler=function(e){e.isFinal&&t(e)},e.on("hammer.input",t.inputHandler)},t.offTouch=function(e,t){e.off("hammer.input",t.inputHandler)},t.offRelease=t.offTouch,t.disablePreventDefaultVertically=function(e){return e.getTouchAction=function(){return["pan-y"]},e}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(1),r=!1,a=void 0,h="background: #FFeeee; color: #dd0000",d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"validate",value:function(t,i,o){r=!1,a=i;var n=i;return void 0!==o&&(n=i[o]),e.parse(t,n,[]),r}},{key:"parse",value:function(t,i,o){for(var n in t)t.hasOwnProperty(n)&&e.check(n,t,i,o)}},{key:"check",value:function(t,i,o,n){void 0===o[t]&&void 0===o.__any__?e.getSuggestion(t,o,n):void 0===o[t]&&void 0!==o.__any__?"object"===e.getType(i[t])&&void 0!==o.__any__.__type__?e.checkFields(t,i,o,"__any__",o.__any__.__type__,n):e.checkFields(t,i,o,"__any__",o.__any__,n):void 0!==o[t].__type__?e.checkFields(t,i,o,t,o[t].__type__,n):e.checkFields(t,i,o,t,o[t],n)}},{key:"checkFields",value:function(t,i,o,n,a,d){var l=e.getType(i[t]),c=a[l];void 0!==c?"array"===e.getType(c)&&-1===c.indexOf(i[t])?(console.log('%cInvalid option detected in "'+t+'". Allowed values are:'+e.print(c)+' not "'+i[t]+'". '+e.printLocation(d,t),h),r=!0):"object"===l&&"__any__"!==n&&(d=s.copyAndExtendArray(d,t),e.parse(i[t],o[n],d)):void 0===a.any&&(console.log('%cInvalid type received for "'+t+'". Expected: '+e.print(Object.keys(a))+". Received ["+l+'] "'+i[t]+'"'+e.printLocation(d,t),h),r=!0)}},{key:"getType",value:function(e){var t=void 0===e?"undefined":o(e);return"object"===t?null===e?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Array.isArray(e)?"array":e instanceof Date?"date":void 0!==e.nodeType?"dom":!0===e._isAMomentObject?"moment":"object":"number"===t?"number":"boolean"===t?"boolean":"string"===t?"string":void 0===t?"undefined":t}},{key:"getSuggestion",value:function(t,i,o){var n=e.findInOptions(t,i,o,!1),s=e.findInOptions(t,a,[],!0);void 0!==n.indexMatch?console.log('%cUnknown option detected: "'+t+'" in '+e.printLocation(n.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+n.indexMatch+'"?\n\n',h):s.distance<=4&&n.distance>s.distance?console.log('%cUnknown option detected: "'+t+'" in '+e.printLocation(n.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(s.path,s.closestMatch,""),h):n.distance<=8?console.log('%cUnknown option detected: "'+t+'". Did you mean "'+n.closestMatch+'"?'+e.printLocation(n.path,t),h):console.log('%cUnknown option detected: "'+t+'". Did you mean one of these: '+e.print(Object.keys(i))+e.printLocation(o,t),h),r=!0}},{key:"findInOptions",value:function(t,i,o){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],r=1e9,a="",h=[],d=t.toLowerCase(),l=void 0;for(var c in i){var u=void 0;if(void 0!==i[c].__type__&&!0===n){var p=e.findInOptions(t,i[c],s.copyAndExtendArray(o,c));r>p.distance&&(a=p.closestMatch,h=p.path,r=p.distance,l=p.indexMatch)}else-1!==c.toLowerCase().indexOf(d)&&(l=c),u=e.levenshteinDistance(t,c),r>u&&(a=c,h=s.copyArray(o),r=u)}return{closestMatch:a,path:h,distance:r,indexMatch:l}}},{key:"printLocation",value:function(e,t){for(var i="\n\n"+(arguments.length<=2||void 0===arguments[2]?"Problem value found at: \n":arguments[2])+"options = {\n",o=0;o<e.length;o++){for(var n=0;o+1>n;n++)i+="  ";i+=e[o]+": {\n"}for(var s=0;s<e.length+1;s++)i+="  ";i+=t+"\n";for(var r=0;r<e.length+1;r++){for(var a=0;a<e.length-r;a++)i+="  ";i+="}\n"}return i+"\n\n"}},{key:"print",value:function(e){return JSON.stringify(e).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;var i,o,n=[];for(i=0;i<=t.length;i++)n[i]=[i];for(o=0;o<=e.length;o++)n[0][o]=o;for(i=1;i<=t.length;i++)for(o=1;o<=e.length;o++)t.charAt(i-1)==e.charAt(o-1)?n[i][o]=n[i-1][o-1]:n[i][o]=Math.min(n[i-1][o-1]+1,Math.min(n[i][o-1]+1,n[i-1][o]+1));return n[t.length][e.length]}}]),e}();t.default=d,t.printStyle=h},function(e,t,i){function o(e,t){var i=a().hours(0).minutes(0).seconds(0).milliseconds(0);this.start=i.clone().add(-3,"days").valueOf(),this.end=i.clone().add(4,"days").valueOf(),this.body=e,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:a,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10},this.options=r.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.setOptions(t)}function n(e){if("horizontal"!=e&&"vertical"!=e)throw new TypeError('Unknown direction "'+e+'". Choose "horizontal" or "vertical".')}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=i(1),a=(i(28),i(2)),h=i(31),d=i(32);o.prototype=new h,o.prototype.setOptions=function(e){if(e){r.selectiveExtend(["direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","rtl"],this.options,e),("start"in e||"end"in e)&&this.setRange(e.start,e.end)}},o.prototype.setRange=function(e,t,i,o){!0!==o&&(o=!1);var n=void 0!=e?r.convert(e,"Date").valueOf():null,a=void 0!=t?r.convert(t,"Date").valueOf():null;if(this._cancelAnimation(),i){var h=this,l=this.start,c=this.end,u="object"===(void 0===i?"undefined":s(i))&&"duration"in i?i.duration:500,p="object"===(void 0===i?"undefined":s(i))&&"easingFunction"in i?i.easingFunction:"easeInOutQuad",f=r.easingFunctions[p];if(!f)throw new Error("Unknown easing function "+JSON.stringify(p)+". Choose from: "+Object.keys(r.easingFunctions).join(", "));var m=(new Date).valueOf(),g=!1;return function e(){if(!h.props.touch.dragging){var t=(new Date).valueOf()-m,i=f(t/u),s=t>u,r=s||null===n?n:l+(n-l)*i,p=s||null===a?a:c+(a-c)*i;v=h._applyRange(r,p),d.updateHiddenDates(h.options.moment,h.body,h.options.hiddenDates),g=g||v,v&&h.body.emitter.emit("rangechange",{start:new Date(h.start),end:new Date(h.end),byUser:o}),s?g&&h.body.emitter.emit("rangechanged",{start:new Date(h.start),end:new Date(h.end),byUser:o}):h.animationTimer=setTimeout(e,20)}}()}var v=this._applyRange(n,a);if(d.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),v){var y={start:new Date(this.start),end:new Date(this.end),byUser:o};this.body.emitter.emit("rangechange",y),this.body.emitter.emit("rangechanged",y)}},o.prototype._cancelAnimation=function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)},o.prototype._applyRange=function(e,t){var i,o=null!=e?r.convert(e,"Date").valueOf():this.start,n=null!=t?r.convert(t,"Date").valueOf():this.end,s=null!=this.options.max?r.convert(this.options.max,"Date").valueOf():null,a=null!=this.options.min?r.convert(this.options.min,"Date").valueOf():null;if(isNaN(o)||null===o)throw new Error('Invalid start "'+e+'"');if(isNaN(n)||null===n)throw new Error('Invalid end "'+t+'"');if(o>n&&(n=o),null!==a&&a>o&&(o+=i=a-o,n+=i,null!=s&&n>s&&(n=s)),null!==s&&n>s&&(o-=i=n-s,n-=i,null!=a&&a>o&&(o=a)),null!==this.options.zoomMin){var h=parseFloat(this.options.zoomMin);0>h&&(h=0),h>n-o&&(this.end-this.start===h&&o>this.start&&n<this.end?(o=this.start,n=this.end):(o-=(i=h-(n-o))/2,n+=i/2))}if(null!==this.options.zoomMax){var d=parseFloat(this.options.zoomMax);0>d&&(d=0),n-o>d&&(this.end-this.start===d&&o<this.start&&n>this.end?(o=this.start,n=this.end):(o+=(i=n-o-d)/2,n-=i/2))}var l=this.start!=o||this.end!=n;return o>=this.start&&o<=this.end||n>=this.start&&n<=this.end||this.start>=o&&this.start<=n||this.end>=o&&this.end<=n||this.body.emitter.emit("checkRangedItems"),this.start=o,this.end=n,l},o.prototype.getRange=function(){return{start:this.start,end:this.end}},o.prototype.conversion=function(e,t){return o.conversion(this.start,this.end,e,t)},o.conversion=function(e,t,i,o){return void 0===o&&(o=0),0!=i&&t-e!=0?{offset:e,scale:i/(t-e-o)}:{offset:0,scale:1}},o.prototype._onDragStart=function(e){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(e)&&this.props.touch.allowDragging&&(this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))},o.prototype._onDrag=function(e){if(this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging){var t=this.options.direction;n(t);var i="horizontal"==t?e.deltaX:e.deltaY;i-=this.deltaDifference;var o=this.props.touch.end-this.props.touch.start;o-=d.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);var s="horizontal"==t?this.body.domProps.center.width:this.body.domProps.center.height;if(this.options.rtl)var r=i/s*o;else r=-i/s*o;var a=this.props.touch.start+r,h=this.props.touch.end+r,l=d.snapAwayFromHidden(this.body.hiddenDates,a,this.previousDelta-i,!0),c=d.snapAwayFromHidden(this.body.hiddenDates,h,this.previousDelta-i,!0);if(l!=a||c!=h)return this.deltaDifference+=i,this.props.touch.start=l,this.props.touch.end=c,void this._onDrag(e);this.previousDelta=i,this._applyRange(a,h);var u=new Date(this.start),p=new Date(this.end);this.body.emitter.emit("rangechange",{start:u,end:p,byUser:!0})}},o.prototype._onDragEnd=function(e){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0}))},o.prototype._onMouseWheel=function(e){if(this.options.zoomable&&this.options.moveable&&this._isInsideRange(e)&&(!this.options.zoomKey||e[this.options.zoomKey])){var t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t){var i;i=0>t?1-t/5:1/(1+t/5);var o=this.getPointer({x:e.clientX,y:e.clientY},this.body.dom.center),n=this._pointerToDate(o);this.zoom(i,n,t)}e.preventDefault()}},o.prototype._onTouch=function(e){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.scaleOffset=0,this.deltaDifference=0},o.prototype._onPinch=function(e){if(this.options.zoomable&&this.options.moveable){this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(e.center,this.body.dom.center));var t=1/(e.scale+this.scaleOffset),i=this._pointerToDate(this.props.touch.center),o=d.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),n=d.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,i),s=o-n,r=i-n+(this.props.touch.start-(i-n))*t,a=i+s+(this.props.touch.end-(i+s))*t;this.startToFront=0>=1-t,this.endToFront=0>=t-1;var h=d.snapAwayFromHidden(this.body.hiddenDates,r,1-t,!0),l=d.snapAwayFromHidden(this.body.hiddenDates,a,t-1,!0);h==r&&l==a||(this.props.touch.start=h,this.props.touch.end=l,this.scaleOffset=1-e.scale,r=h,a=l),this.setRange(r,a,!1,!0),this.startToFront=!1,this.endToFront=!0}},o.prototype._isInsideRange=function(e){var t=e.center?e.center.x:e.clientX;if(this.options.rtl)var i=t-r.getAbsoluteLeft(this.body.dom.centerContainer);else i=r.getAbsoluteRight(this.body.dom.centerContainer)-t;var o=this.body.util.toTime(i);return o>=this.start&&o<=this.end},o.prototype._pointerToDate=function(e){var t,i=this.options.direction;if(n(i),"horizontal"==i)return this.body.util.toTime(e.x).valueOf();var o=this.body.domProps.center.height;return t=this.conversion(o),e.y/t.scale+t.offset},o.prototype.getPointer=function(e,t){return this.options.rtl?{x:r.getAbsoluteRight(t)-e.x,y:e.y-r.getAbsoluteTop(t)}:{x:e.x-r.getAbsoluteLeft(t),y:e.y-r.getAbsoluteTop(t)}},o.prototype.zoom=function(e,t,i){null==t&&(t=(this.start+this.end)/2);var o=d.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),n=d.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,t),s=o-n,r=t-n+(this.start-(t-n))*e,a=t+s+(this.end-(t+s))*e;this.startToFront=!(i>0),this.endToFront=!(-i>0);var h=d.snapAwayFromHidden(this.body.hiddenDates,r,i,!0),l=d.snapAwayFromHidden(this.body.hiddenDates,a,-i,!0);h==r&&l==a||(r=h,a=l),this.setRange(r,a,!1,!0),this.startToFront=!1,this.endToFront=!0},o.prototype.move=function(e){var t=this.end-this.start,i=this.start+t*e,o=this.end+t*e;this.start=i,this.end=o},o.prototype.moveTo=function(e){var t=(this.start+this.end)/2-e,i=this.start-t,o=this.end-t;this.setRange(i,o)},e.exports=o},function(e,t){function i(e,t){this.options=null,this.props=null}i.prototype.setOptions=function(e){e&&util.extend(this.options,e)},i.prototype.redraw=function(){return!1},i.prototype.destroy=function(){},i.prototype._isResized=function(){var e=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,e},e.exports=i},function(e,t){t.convertHiddenOptions=function(e,i,o){if(o&&!Array.isArray(o))return t.convertHiddenOptions(e,i,[o]);if(i.hiddenDates=[],o&&1==Array.isArray(o)){for(var n=0;n<o.length;n++)if(void 0===o[n].repeat){var s={};s.start=e(o[n].start).toDate().valueOf(),s.end=e(o[n].end).toDate().valueOf(),i.hiddenDates.push(s)}i.hiddenDates.sort(function(e,t){return e.start-t.start})}},t.updateHiddenDates=function(e,i,o){if(o&&!Array.isArray(o))return t.updateHiddenDates(e,i,[o]);if(o&&void 0!==i.domProps.centerContainer.width){t.convertHiddenOptions(e,i,o);for(var n=e(i.range.start),s=e(i.range.end),r=(i.range.end-i.range.start)/i.domProps.centerContainer.width,a=0;a<o.length;a++)if(void 0!==o[a].repeat){var h=e(o[a].start),d=e(o[a].end);if("Invalid Date"==h._d)throw new Error("Supplied start date is not valid: "+o[a].start);if("Invalid Date"==d._d)throw new Error("Supplied end date is not valid: "+o[a].end);if(d-h>=4*r){var l=0,c=s.clone();switch(o[a].repeat){case"daily":h.day()!=d.day()&&(l=1),h.dayOfYear(n.dayOfYear()),h.year(n.year()),h.subtract(7,"days"),d.dayOfYear(n.dayOfYear()),d.year(n.year()),d.subtract(7-l,"days"),c.add(1,"weeks");break;case"weekly":var u=d.diff(h,"days"),p=h.day();h.date(n.date()),h.month(n.month()),h.year(n.year()),d=h.clone(),h.day(p),d.day(p),d.add(u,"days"),h.subtract(1,"weeks"),d.subtract(1,"weeks"),c.add(1,"weeks");break;case"monthly":h.month()!=d.month()&&(l=1),h.month(n.month()),h.year(n.year()),h.subtract(1,"months"),d.month(n.month()),d.year(n.year()),d.subtract(1,"months"),d.add(l,"months"),c.add(1,"months");break;case"yearly":h.year()!=d.year()&&(l=1),h.year(n.year()),h.subtract(1,"years"),d.year(n.year()),d.subtract(1,"years"),d.add(l,"years"),c.add(1,"years");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",o[a].repeat)}for(;c>h;)switch(i.hiddenDates.push({start:h.valueOf(),end:d.valueOf()}),o[a].repeat){case"daily":h.add(1,"days"),d.add(1,"days");break;case"weekly":h.add(1,"weeks"),d.add(1,"weeks");break;case"monthly":h.add(1,"months"),d.add(1,"months");break;case"yearly":h.add(1,"y"),d.add(1,"y");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",o[a].repeat)}i.hiddenDates.push({start:h.valueOf(),end:d.valueOf()})}}t.removeDuplicates(i);var f=t.isHidden(i.range.start,i.hiddenDates),m=t.isHidden(i.range.end,i.hiddenDates),g=i.range.start,v=i.range.end;1==f.hidden&&(g=1==i.range.startToFront?f.startDate-1:f.endDate+1),1==m.hidden&&(v=1==i.range.endToFront?m.startDate-1:m.endDate+1),1!=f.hidden&&1!=m.hidden||i.range._applyRange(g,v)}},t.removeDuplicates=function(e){for(var t=e.hiddenDates,i=[],o=0;o<t.length;o++)for(var n=0;n<t.length;n++)o!=n&&1!=t[n].remove&&1!=t[o].remove&&(t[n].start>=t[o].start&&t[n].end<=t[o].end?t[n].remove=!0:t[n].start>=t[o].start&&t[n].start<=t[o].end?(t[o].end=t[n].end,t[n].remove=!0):t[n].end>=t[o].start&&t[n].end<=t[o].end&&(t[o].start=t[n].start,t[n].remove=!0));for(o=0;o<t.length;o++)!0!==t[o].remove&&i.push(t[o]);e.hiddenDates=i,e.hiddenDates.sort(function(e,t){return e.start-t.start})},t.printDates=function(e){for(var t=0;t<e.length;t++)console.log(t,new Date(e[t].start),new Date(e[t].end),e[t].start,e[t].end,e[t].remove)},t.stepOverHiddenDates=function(e,t,i){for(var o=!1,n=t.current.valueOf(),s=0;s<t.hiddenDates.length;s++){var r=t.hiddenDates[s].start,a=t.hiddenDates[s].end;if(n>=r&&a>n){o=!0;break}}if(1==o&&n<t._end.valueOf()&&n!=i){var h=e(i),d=e(a);h.year()!=d.year()?t.switchedYear=!0:h.month()!=d.month()?t.switchedMonth=!0:h.dayOfYear()!=d.dayOfYear()&&(t.switchedDay=!0),t.current=d}},t.toScreen=function(e,i,o){if(0==e.body.hiddenDates.length){var n=e.range.conversion(o);return(i.valueOf()-n.offset)*n.scale}var s=t.isHidden(i,e.body.hiddenDates);1==s.hidden&&(i=s.startDate);var r=t.getHiddenDurationBetween(e.body.hiddenDates,e.range.start,e.range.end);i=t.correctTimeForHidden(e.options.moment,e.body.hiddenDates,e.range,i);n=e.range.conversion(o,r);return(i.valueOf()-n.offset)*n.scale},t.toTime=function(e,i,o){if(0==e.body.hiddenDates.length){var n=e.range.conversion(o);return new Date(i/n.scale+n.offset)}var s=t.getHiddenDurationBetween(e.body.hiddenDates,e.range.start,e.range.end),r=(e.range.end-e.range.start-s)*i/o,a=t.getAccumulatedHiddenDuration(e.body.hiddenDates,e.range,r);return new Date(a+r+e.range.start)},t.getHiddenDurationBetween=function(e,t,i){for(var o=0,n=0;n<e.length;n++){var s=e[n].start,r=e[n].end;s>=t&&i>r&&(o+=r-s)}return o},t.correctTimeForHidden=function(e,i,o,n){return(n=e(n).toDate().valueOf())-t.getHiddenDurationBefore(e,i,o,n)},t.getHiddenDurationBefore=function(e,t,i,o){var n=0;o=e(o).toDate().valueOf();for(var s=0;s<t.length;s++){var r=t[s].start,a=t[s].end;r>=i.start&&a<i.end&&o>=a&&(n+=a-r)}return n},t.getAccumulatedHiddenDuration=function(e,t,i){for(var o=0,n=0,s=t.start,r=0;r<e.length;r++){var a=e[r].start,h=e[r].end;if(a>=t.start&&h<t.end){if(n+=a-s,s=h,n>=i)break;o+=h-a}}return o},t.snapAwayFromHidden=function(e,i,o,n){var s=t.isHidden(i,e);return 1==s.hidden?0>o?1==n?s.startDate-(s.endDate-i)-1:s.startDate-1:1==n?s.endDate+(i-s.startDate)+1:s.endDate+1:i},t.isHidden=function(e,t){for(var i=0;i<t.length;i++){var o=t[i].start,n=t[i].end;if(e>=o&&n>e)return{hidden:!0,startDate:o,endDate:n}}return{hidden:!1,startDate:o,endDate:n}}},function(e,t,i){function o(){}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=i(13),r=i(20),a=i(28),h=i(1),d=(i(9),i(11),i(30),i(34),i(44)),l=i(45),c=i(32),u=i(46);s(o.prototype),o.prototype._create=function(e){function t(e){i.isActive()&&i.emit("mousewheel",e)}this.dom={},this.dom.container=e,this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.on("rangechange",function(){!0===this.initialDrawDone&&this._redraw()}.bind(this)),this.on("touch",this._onTouch.bind(this)),this.on("pan",this._onDrag.bind(this));var i=this;this.on("_change",function(e){e&&1==e.queue?i._redrawTimer||(i._redrawTimer=setTimeout(function(){i._redrawTimer=null,i._redraw()},0)):i._redraw()}),this.hammer=new r(this.dom.root);var o=this.hammer.get("pinch").set({enable:!0});a.disablePreventDefaultVertically(o),this.hammer.get("pan").set({threshold:5,direction:r.DIRECTION_HORIZONTAL}),this.listeners={};if(["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(function(e){var t=function(t){i.isActive()&&i.emit(e,t)};i.hammer.on(e,t),i.listeners[e]=t}),a.onTouch(this.hammer,function(e){i.emit("touch",e)}.bind(this)),a.onRelease(this.hammer,function(e){i.emit("release",e)}.bind(this)),this.dom.root.addEventListener("mousewheel",t),this.dom.root.addEventListener("DOMMouseScroll",t),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,!e)throw new Error("No container provided");e.appendChild(this.dom.root)},o.prototype.setOptions=function(e){if(e){if(h.selectiveExtend(["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","rtl","throttleRedraw"],this.options,e),this.options.rtl){var t=this.dom.leftContainer;this.dom.leftContainer=this.dom.rightContainer,this.dom.rightContainer=t,this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"}if(this.options.orientation={item:void 0,axis:void 0},"orientation"in e&&("string"==typeof e.orientation?this.options.orientation={item:e.orientation,axis:e.orientation}:"object"===n(e.orientation)&&("item"in e.orientation&&(this.options.orientation.item=e.orientation.item),"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis))),"both"===this.options.orientation.axis){if(!this.timeAxis2){var i=this.timeAxis2=new d(this.body);i.setOptions=function(e){var t=e?h.extend({},e):{};t.orientation="top",d.prototype.setOptions.call(i,t)},this.components.push(i)}}else if(this.timeAxis2){var o=this.components.indexOf(this.timeAxis2);-1!==o&&this.components.splice(o,1),this.timeAxis2.destroy(),this.timeAxis2=null}if("function"==typeof e.drawPoints&&(e.drawPoints={onRender:e.drawPoints}),"hiddenDates"in this.options&&c.convertHiddenOptions(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in e&&(e.clickToUse?this.activator||(this.activator=new l(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),"showCustomTime"in e)throw new Error("Option `showCustomTime` is deprecated. Create a custom time bar via timeline.addCustomTime(time [, id])");this._initAutoResize()}if(this.components.forEach(function(t){return t.setOptions(e)}),"configure"in e){this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(e.configure);var s=h.deepExtend({},this.options);this.components.forEach(function(e){h.deepExtend(s,e.options)}),this.configurator.setModuleOptions({global:s})}this._origRedraw?this._redraw():(this._origRedraw=this._redraw.bind(this),this._redraw=h.throttle(this._origRedraw,this.options.throttleRedraw))},o.prototype.isActive=function(){return!this.activator||this.activator.active},o.prototype.destroy=function(){this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(var e in this.listeners)this.listeners.hasOwnProperty(e)&&delete this.listeners[e];this.listeners=null,this.hammer=null,this.components.forEach(function(e){return e.destroy()}),this.body=null},o.prototype.setCustomTime=function(e,t){var i=this.customTimes.filter(function(e){return t===e.options.id});if(0===i.length)throw new Error("No custom time bar found with id "+JSON.stringify(t));i.length>0&&i[0].setCustomTime(e)},o.prototype.getCustomTime=function(e){var t=this.customTimes.filter(function(t){return t.options.id===e});if(0===t.length)throw new Error("No custom time bar found with id "+JSON.stringify(e));return t[0].getCustomTime()},o.prototype.setCustomTimeTitle=function(e,t){var i=this.customTimes.filter(function(e){return e.options.id===t});if(0===i.length)throw new Error("No custom time bar found with id "+JSON.stringify(t));return i.length>0?i[0].setCustomTitle(e):void 0},o.prototype.getEventProperties=function(e){return{event:e}},o.prototype.addCustomTime=function(e,t){var i=void 0!==e?h.convert(e,"Date").valueOf():new Date;if(this.customTimes.some(function(e){return e.options.id===t}))throw new Error("A custom time with id "+JSON.stringify(t)+" already exists");var o=new u(this.body,h.extend({},this.options,{time:i,id:t}));return this.customTimes.push(o),this.components.push(o),this._redraw(),t},o.prototype.removeCustomTime=function(e){var t=this.customTimes.filter(function(t){return t.options.id===e});if(0===t.length)throw new Error("No custom time bar found with id "+JSON.stringify(e));t.forEach(function(e){this.customTimes.splice(this.customTimes.indexOf(e),1),this.components.splice(this.components.indexOf(e),1),e.destroy()}.bind(this))},o.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]},o.prototype.fit=function(e){var t=this.getDataRange();if(null!==t.min||null!==t.max){var i=t.max-t.min,o=new Date(t.min.valueOf()-.01*i),n=new Date(t.max.valueOf()+.01*i),s=!e||void 0===e.animation||e.animation;this.range.setRange(o,n,s)}},o.prototype.getDataRange=function(){throw new Error("Cannot invoke abstract method getDataRange")},o.prototype.setWindow=function(e,t,i){var o;if(1==arguments.length){var n=arguments[0];o=void 0===n.animation||n.animation,this.range.setRange(n.start,n.end,o)}else o=!i||void 0===i.animation||i.animation,this.range.setRange(e,t,o)},o.prototype.moveTo=function(e,t){var i=this.range.end-this.range.start,o=h.convert(e,"Date").valueOf(),n=o-i/2,s=o+i/2,r=!t||void 0===t.animation||t.animation;this.range.setRange(n,s,r)},o.prototype.getWindow=function(){var e=this.range.getRange();return{start:new Date(e.start),end:new Date(e.end)}},o.prototype.redraw=function(){this._redraw()},o.prototype._redraw=function(){this.redrawCount++;var e=!1,t=this.options,i=this.props,o=this.dom;if(o&&o.container&&0!=o.root.offsetWidth){c.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),"top"==t.orientation?(h.addClassName(o.root,"vis-top"),h.removeClassName(o.root,"vis-bottom")):(h.removeClassName(o.root,"vis-top"),h.addClassName(o.root,"vis-bottom")),o.root.style.maxHeight=h.option.asSize(t.maxHeight,""),o.root.style.minHeight=h.option.asSize(t.minHeight,""),o.root.style.width=h.option.asSize(t.width,""),i.border.left=(o.centerContainer.offsetWidth-o.centerContainer.clientWidth)/2,i.border.right=i.border.left,i.border.top=(o.centerContainer.offsetHeight-o.centerContainer.clientHeight)/2,i.border.bottom=i.border.top;var n=o.root.offsetHeight-o.root.clientHeight,s=o.root.offsetWidth-o.root.clientWidth;0===o.centerContainer.clientHeight&&(i.border.left=i.border.top,i.border.right=i.border.left),0===o.root.clientHeight&&(s=n),i.center.height=o.center.offsetHeight,i.left.height=o.left.offsetHeight,i.right.height=o.right.offsetHeight,i.top.height=o.top.clientHeight||-i.border.top,i.bottom.height=o.bottom.clientHeight||-i.border.bottom;var a=Math.max(i.left.height,i.center.height,i.right.height),d=i.top.height+a+i.bottom.height+n+i.border.top+i.border.bottom;o.root.style.height=h.option.asSize(t.height,d+"px"),i.root.height=o.root.offsetHeight,i.background.height=i.root.height-n;var l=i.root.height-i.top.height-i.bottom.height-n;i.centerContainer.height=l,i.leftContainer.height=l,i.rightContainer.height=i.leftContainer.height,i.root.width=o.root.offsetWidth,i.background.width=i.root.width-s,i.left.width=o.leftContainer.clientWidth||-i.border.left,i.leftContainer.width=i.left.width,i.right.width=o.rightContainer.clientWidth||-i.border.right,i.rightContainer.width=i.right.width;var u=i.root.width-i.left.width-i.right.width-s;i.center.width=u,i.centerContainer.width=u,i.top.width=u,i.bottom.width=u,o.background.style.height=i.background.height+"px",o.backgroundVertical.style.height=i.background.height+"px",o.backgroundHorizontal.style.height=i.centerContainer.height+"px",o.centerContainer.style.height=i.centerContainer.height+"px",o.leftContainer.style.height=i.leftContainer.height+"px",o.rightContainer.style.height=i.rightContainer.height+"px",o.background.style.width=i.background.width+"px",o.backgroundVertical.style.width=i.centerContainer.width+"px",o.backgroundHorizontal.style.width=i.background.width+"px",o.centerContainer.style.width=i.center.width+"px",o.top.style.width=i.top.width+"px",o.bottom.style.width=i.bottom.width+"px",o.background.style.left="0",o.background.style.top="0",o.backgroundVertical.style.left=i.left.width+i.border.left+"px",o.backgroundVertical.style.top="0",o.backgroundHorizontal.style.left="0",o.backgroundHorizontal.style.top=i.top.height+"px",o.centerContainer.style.left=i.left.width+"px",o.centerContainer.style.top=i.top.height+"px",o.leftContainer.style.left="0",o.leftContainer.style.top=i.top.height+"px",o.rightContainer.style.left=i.left.width+i.center.width+"px",o.rightContainer.style.top=i.top.height+"px",o.top.style.left=i.left.width+"px",o.top.style.top="0",o.bottom.style.left=i.left.width+"px",o.bottom.style.top=i.top.height+i.centerContainer.height+"px",this._updateScrollTop();var p=this.props.scrollTop;"top"!=t.orientation.item&&(p+=Math.max(this.props.centerContainer.height-this.props.center.height-this.props.border.top-this.props.border.bottom,0)),o.center.style.left="0",o.center.style.top=p+"px",o.left.style.left="0",o.left.style.top=p+"px",o.right.style.left="0",o.right.style.top=p+"px";var f=0==this.props.scrollTop?"hidden":"",m=this.props.scrollTop==this.props.scrollTopMin?"hidden":"";o.shadowTop.style.visibility=f,o.shadowBottom.style.visibility=m,o.shadowTopLeft.style.visibility=f,o.shadowBottomLeft.style.visibility=m,o.shadowTopRight.style.visibility=f,o.shadowBottomRight.style.visibility=m;var g=this.props.center.height>this.props.centerContainer.height;this.hammer.get("pan").set({direction:g?r.DIRECTION_ALL:r.DIRECTION_HORIZONTAL}),this.components.forEach(function(t){e=t.redraw()||e});if(e){if(this.redrawCount<5)return void this.body.emitter.emit("_change");console.log("WARNING: infinite loop in redraw?")}else this.redrawCount=0;this.initialDrawDone=!0,this.body.emitter.emit("changed")}},o.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.")},o.prototype.setCurrentTime=function(e){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(e)},o.prototype.getCurrentTime=function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()},o.prototype._toTime=function(e){return c.toTime(this,e,this.props.center.width)},o.prototype._toGlobalTime=function(e){return c.toTime(this,e,this.props.root.width)},o.prototype._toScreen=function(e){return c.toScreen(this,e,this.props.center.width)},o.prototype._toGlobalScreen=function(e){return c.toScreen(this,e,this.props.root.width)},o.prototype._initAutoResize=function(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()},o.prototype._startAutoResize=function(){var e=this;this._stopAutoResize(),this._onResize=function(){return 1!=e.options.autoResize?void e._stopAutoResize():void(e.dom.root&&(e.dom.root.offsetWidth==e.props.lastWidth&&e.dom.root.offsetHeight==e.props.lastHeight||(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight,e.body.emitter.emit("_change"))))},h.addEventListener(window,"resize",this._onResize),e.dom.root&&(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight),this.watchTimer=setInterval(this._onResize,1e3)},o.prototype._stopAutoResize=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(h.removeEventListener(window,"resize",this._onResize),this._onResize=null)},o.prototype._onTouch=function(e){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop},o.prototype._onPinch=function(e){this.touch.allowDragging=!1},o.prototype._onDrag=function(e){if(this.touch.allowDragging){var t=e.deltaY,i=this._getScrollTop();this._setScrollTop(this.touch.initialScrollTop+t)!=i&&this.emit("verticalDrag")}},o.prototype._setScrollTop=function(e){return this.props.scrollTop=e,this._updateScrollTop(),this.props.scrollTop},o.prototype._updateScrollTop=function(){var e=Math.min(this.props.centerContainer.height-this.props.center.height,0);return e!=this.props.scrollTopMin&&("top"!=this.options.orientation.item&&(this.props.scrollTop+=e-this.props.scrollTopMin),this.props.scrollTopMin=e),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<e&&(this.props.scrollTop=e),this.props.scrollTop},o.prototype._getScrollTop=function(){return this.props.scrollTop},o.prototype._createConfigurator=function(){throw new Error("Cannot invoke abstract method _createConfigurator")},e.exports=o},function(e,t,i){function o(e,t){this.body=e,this.defaultOptions={rtl:!1,type:null,orientation:{item:"bottom"},align:"auto",stack:!0,groupOrderSwap:function(e,t,i){var o=t.order;t.order=e.order,e.order=o},groupOrder:"order",selectable:!0,multiselect:!1,itemsAlwaysDraggable:!1,editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:d.snap,onAdd:function(e,t){t(e)},onUpdate:function(e,t){t(e)},onMove:function(e,t){t(e)},onRemove:function(e,t){t(e)},onMoving:function(e,t){t(e)},onAddGroup:function(e,t){t(e)},onMoveGroup:function(e,t){t(e)},onRemoveGroup:function(e,t){t(e)},margin:{item:{horizontal:10,vertical:10},axis:20}},this.options=r.extend({},this.defaultOptions),this.itemOptions={type:{start:"Date",end:"Date"}},this.conversion={toScreen:e.util.toScreen,toTime:e.util.toTime},this.dom={},this.props={},this.hammer=null;var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(e,t,o){i._onAdd(t.items)},update:function(e,t,o){i._onUpdate(t.items)},remove:function(e,t,o){i._onRemove(t.items)}},this.groupListeners={add:function(e,t,o){i._onAddGroups(t.items)},update:function(e,t,o){i._onUpdateGroups(t.items)},remove:function(e,t,o){i._onRemoveGroups(t.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.stackDirty=!0,this.touchParams={},this.groupTouchParams={},this._create(),this.setOptions(t)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=i(20),r=i(1),a=i(9),h=i(11),d=i(35),l=i(31),c=i(36),u=i(40),p=i(41),f=i(42),m=i(38),g=i(43),v="__ungrouped__",y="__background__";o.prototype=new l,o.types={background:g,box:p,range:m,point:f},o.prototype._create=function(){var e=document.createElement("div");e.className="vis-itemset",e["timeline-itemset"]=this,this.dom.frame=e;var t=document.createElement("div");t.className="vis-background",e.appendChild(t),this.dom.background=t;var i=document.createElement("div");i.className="vis-foreground",e.appendChild(i),this.dom.foreground=i;var o=document.createElement("div");o.className="vis-axis",this.dom.axis=o;var n=document.createElement("div");n.className="vis-labelset",this.dom.labelSet=n,this._updateUngrouped();var r=new u(y,null,this);r.show(),this.groups[y]=r,this.hammer=new s(this.body.dom.centerContainer),this.hammer.on("hammer.input",function(e){e.isFirst&&this._onTouch(e)}.bind(this)),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:s.DIRECTION_HORIZONTAL}),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("press",this._onMultiSelectItem.bind(this)),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.groupHammer=new s(this.body.dom.leftContainer),this.groupHammer.on("panstart",this._onGroupDragStart.bind(this)),this.groupHammer.on("panmove",this._onGroupDrag.bind(this)),this.groupHammer.on("panend",this._onGroupDragEnd.bind(this)),this.groupHammer.get("pan").set({threshold:5,direction:s.DIRECTION_HORIZONTAL}),this.show()},o.prototype.setOptions=function(e){if(e){r.selectiveExtend(["type","rtl","align","order","stack","selectable","multiselect","itemsAlwaysDraggable","multiselectPerGroup","groupOrder","dataAttributes","template","groupTemplate","hide","snap","groupOrderSwap"],this.options,e),"orientation"in e&&("string"==typeof e.orientation?this.options.orientation.item="top"===e.orientation?"top":"bottom":"object"===n(e.orientation)&&"item"in e.orientation&&(this.options.orientation.item=e.orientation.item)),"margin"in e&&("number"==typeof e.margin?(this.options.margin.axis=e.margin,this.options.margin.item.horizontal=e.margin,this.options.margin.item.vertical=e.margin):"object"===n(e.margin)&&(r.selectiveExtend(["axis"],this.options.margin,e.margin),"item"in e.margin&&("number"==typeof e.margin.item?(this.options.margin.item.horizontal=e.margin.item,this.options.margin.item.vertical=e.margin.item):"object"===n(e.margin.item)&&r.selectiveExtend(["horizontal","vertical"],this.options.margin.item,e.margin.item)))),"editable"in e&&("boolean"==typeof e.editable?(this.options.editable.updateTime=e.editable,this.options.editable.updateGroup=e.editable,this.options.editable.add=e.editable,this.options.editable.remove=e.editable):"object"===n(e.editable)&&r.selectiveExtend(["updateTime","updateGroup","add","remove"],this.options.editable,e.editable)),"groupEditable"in e&&("boolean"==typeof e.groupEditable?(this.options.groupEditable.order=e.groupEditable,this.options.groupEditable.add=e.groupEditable,this.options.groupEditable.remove=e.groupEditable):"object"===n(e.groupEditable)&&r.selectiveExtend(["order","add","remove"],this.options.groupEditable,e.groupEditable));var t=function(t){var i=e[t];if(i){if(!(i instanceof Function))throw new Error("option "+t+" must be a function "+t+"(item, callback)");this.options[t]=i}}.bind(this);["onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach(t),this.markDirty()}},o.prototype.markDirty=function(e){this.groupIds=[],this.stackDirty=!0,e&&e.refreshItems&&r.forEach(this.items,function(e){e.dirty=!0,e.displayed&&e.redraw()})},o.prototype.destroy=function(){this.hide(),this.setItems(null),this.setGroups(null),this.hammer=null,this.body=null,this.conversion=null},o.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)},o.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||this.body.dom.left.appendChild(this.dom.labelSet)},o.prototype.setSelection=function(e){var t,i,o,n;for(void 0==e&&(e=[]),Array.isArray(e)||(e=[e]),t=0,i=this.selection.length;i>t;t++)o=this.selection[t],n=this.items[o],n&&n.unselect();for(this.selection=[],t=0,i=e.length;i>t;t++)o=e[t],n=this.items[o],n&&(this.selection.push(o),n.select())},o.prototype.getSelection=function(){return this.selection.concat([])},o.prototype.getVisibleItems=function(){var e=this.body.range.getRange();if(this.options.rtl)var t=this.body.util.toScreen(e.start),i=this.body.util.toScreen(e.end);else i=this.body.util.toScreen(e.start),t=this.body.util.toScreen(e.end);var o=[];for(var n in this.groups)if(this.groups.hasOwnProperty(n))for(var s=this.groups[n],r=s.visibleItems,a=0;a<r.length;a++){var h=r[a];this.options.rtl?h.right<i&&h.right+h.width>t&&o.push(h.id):h.left<t&&h.left+h.width>i&&o.push(h.id)}return o},o.prototype._deselect=function(e){for(var t=this.selection,i=0,o=t.length;o>i;i++)if(t[i]==e){t.splice(i,1);break}},o.prototype.redraw=function(){var e=this.options.margin,t=this.body.range,i=r.option.asSize,o=this.options.orientation.item,n=!1,s=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,s.className="vis-itemset",n=this._orderGroups()||n;var a=t.end-t.start;(a!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth)&&(this.stackDirty=!0),this.lastVisibleInterval=a,this.props.lastWidth=this.props.width;var h=this.stackDirty,d=this._firstGroup(),l={item:e.item,axis:e.axis},c={item:e.item,axis:e.item.vertical/2},u=0,p=e.axis+e.item.vertical;return this.groups[y].redraw(t,c,h),r.forEach(this.groups,function(e){var i=e==d?l:c,o=e.redraw(t,i,h);n=o||n,u+=e.height}),u=Math.max(u,p),this.stackDirty=!1,s.style.height=i(u),this.props.width=s.offsetWidth,this.props.height=u,this.dom.axis.style.top=i("top"==o?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",n=this._isResized()||n},o.prototype._firstGroup=function(){var e="top"==this.options.orientation.item?0:this.groupIds.length-1,t=this.groupIds[e];return this.groups[t]||this.groups[v]||null},o.prototype._updateUngrouped=function(){var e,t,i=this.groups[v];if(this.groups[y],this.groupsData){if(i){i.hide(),delete this.groups[v];for(t in this.items)if(this.items.hasOwnProperty(t)){(e=this.items[t]).parent&&e.parent.remove(e);var o=this._getGroupId(e.data),n=this.groups[o];n&&n.add(e)||e.hide()}}}else if(!i){i=new c(null,null,this),this.groups[v]=i;for(t in this.items)this.items.hasOwnProperty(t)&&(e=this.items[t],i.add(e));i.show()}},o.prototype.getLabelSet=function(){return this.dom.labelSet},o.prototype.setItems=function(e){var t,i=this,o=this.itemsData;if(e){if(!(e instanceof a||e instanceof h))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=e}else this.itemsData=null;if(o&&(r.forEach(this.itemListeners,function(e,t){o.off(t,e)}),t=o.getIds(),this._onRemove(t)),this.itemsData){var n=this.id;r.forEach(this.itemListeners,function(e,t){i.itemsData.on(t,e,n)}),t=this.itemsData.getIds(),this._onAdd(t),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})},o.prototype.getItems=function(){return this.itemsData},o.prototype.setGroups=function(e){var t,i=this;if(this.groupsData&&(r.forEach(this.groupListeners,function(e,t){i.groupsData.off(t,e)}),t=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(t)),e){if(!(e instanceof a||e instanceof h))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=e}else this.groupsData=null;if(this.groupsData){var o=this.id;r.forEach(this.groupListeners,function(e,t){i.groupsData.on(t,e,o)}),t=this.groupsData.getIds(),this._onAddGroups(t)}this._updateUngrouped(),this._order(),this.body.emitter.emit("_change",{queue:!0})},o.prototype.getGroups=function(){return this.groupsData},o.prototype.removeItem=function(e){var t=this.itemsData.get(e),i=this.itemsData.getDataSet();t&&this.options.onRemove(t,function(t){t&&i.remove(e)})},o.prototype._getType=function(e){return e.type||this.options.type||(e.end?"range":"box")},o.prototype._getGroupId=function(e){return"background"==this._getType(e)&&void 0==e.group?y:this.groupsData?e.group:v},o.prototype._onUpdate=function(e){var t=this;e.forEach(function(e){var i,n=t.itemsData.get(e,t.itemOptions),s=t.items[e],r=t._getType(n),a=o.types[r];if(s&&(a&&s instanceof a?t._updateItem(s,n):(i=s.selected,t._removeItem(s),s=null)),!s){if(!a)throw"rangeoverflow"==r?new TypeError('Item type "rangeoverflow" is deprecated. Use css styling instead: .vis-item.vis-range .vis-item-content {overflow: visible;}'):new TypeError('Unknown item type "'+r+'"');(s=new a(n,t.conversion,t.options)).id=e,t._addItem(s),i&&(this.selection.push(e),s.select())}}.bind(this)),this._order(),this.stackDirty=!0,this.body.emitter.emit("_change",{queue:!0})},o.prototype._onAdd=o.prototype._onUpdate,o.prototype._onRemove=function(e){var t=0,i=this;e.forEach(function(e){var o=i.items[e];o&&(t++,i._removeItem(o))}),t&&(this._order(),this.stackDirty=!0,this.body.emitter.emit("_change",{queue:!0}))},o.prototype._order=function(){r.forEach(this.groups,function(e){e.order()})},o.prototype._onUpdateGroups=function(e){this._onAddGroups(e)},o.prototype._onAddGroups=function(e){var t=this;e.forEach(function(e){var i=t.groupsData.get(e),o=t.groups[e];if(o)o.setData(i);else{if(e==v||e==y)throw new Error("Illegal group id. "+e+" is a reserved id.");var n=Object.create(t.options);r.extend(n,{height:null}),o=new c(e,i,t),t.groups[e]=o;for(var s in t.items)if(t.items.hasOwnProperty(s)){var a=t.items[s];a.data.group==e&&o.add(a)}o.order(),o.show()}}),this.body.emitter.emit("_change",{queue:!0})},o.prototype._onRemoveGroups=function(e){var t=this.groups;e.forEach(function(e){var i=t[e];i&&(i.hide(),delete t[e])}),this.markDirty(),this.body.emitter.emit("_change",{queue:!0})},o.prototype._orderGroups=function(){if(this.groupsData){var e=this.groupsData.getIds({order:this.options.groupOrder}),t=!r.equalArray(e,this.groupIds);if(t){var i=this.groups;e.forEach(function(e){i[e].hide()}),e.forEach(function(e){i[e].show()}),this.groupIds=e}return t}return!1},o.prototype._addItem=function(e){this.items[e.id]=e;var t=this._getGroupId(e.data),i=this.groups[t];i&&i.add(e)},o.prototype._updateItem=function(e,t){var i=e.data.group,o=e.data.subgroup;if(e.setData(t),i!=e.data.group||o!=e.data.subgroup){var n=this.groups[i];n&&n.remove(e);var s=this._getGroupId(e.data),r=this.groups[s];r&&r.add(e)}},o.prototype._removeItem=function(e){e.hide(),delete this.items[e.id];var t=this.selection.indexOf(e.id);-1!=t&&this.selection.splice(t,1),e.parent&&e.parent.remove(e)},o.prototype._constructByEndArray=function(e){for(var t=[],i=0;i<e.length;i++)e[i]instanceof m&&t.push(e[i]);return t},o.prototype._onTouch=function(e){this.touchParams.item=this.itemFromTarget(e),this.touchParams.dragLeftItem=e.target.dragLeftItem||!1,this.touchParams.dragRightItem=e.target.dragRightItem||!1,this.touchParams.itemProps=null},o.prototype._getGroupIndex=function(e){for(var t=0;t<this.groupIds.length;t++)if(e==this.groupIds[t])return t},o.prototype._onDragStart=function(e){var t,i=this.touchParams.item||null,o=this;if(i&&(i.selected||this.options.itemsAlwaysDraggable)){if(!this.options.editable.updateTime&&!this.options.editable.updateGroup&&!i.editable)return;if(!1===i.editable)return;var n=this.touchParams.dragLeftItem,s=this.touchParams.dragRightItem;if(n)t={item:n,initialX:e.center.x,dragLeft:!0,data:this._cloneItemData(i.data)},this.touchParams.itemProps=[t];else if(s)t={item:s,initialX:e.center.x,dragRight:!0,data:this._cloneItemData(i.data)},this.touchParams.itemProps=[t];else{this.touchParams.selectedItem=i;var r=this._getGroupIndex(i.data.group),a=this.options.itemsAlwaysDraggable&&!i.selected?[i.id]:this.getSelection();this.touchParams.itemProps=a.map(function(t){var i=o.items[t],n=o._getGroupIndex(i.data.group);return{item:i,initialX:e.center.x,groupOffset:r-n,data:this._cloneItemData(i.data)}}.bind(this))}e.stopPropagation()}else this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey)&&this._onDragStartAddItem(e)},o.prototype._onDragStartAddItem=function(e){var t=this.options.snap||null;if(this.options.rtl)var i=r.getAbsoluteRight(this.dom.frame),o=i-e.center.x+10;else i=r.getAbsoluteLeft(this.dom.frame),o=e.center.x-i-10;var n=this.body.util.toTime(o),s=this.body.util.getScale(),a=this.body.util.getStep(),h=t?t(n,s,a):n,d={type:"range",start:h,end:h,content:"new item"},l=r.randomUUID();d[this.itemsData._fieldId]=l;var c=this.groupFromTarget(e);c&&(d.group=c.groupId);var u=new m(d,this.conversion,this.options);u.id=l,u.data=this._cloneItemData(d),this._addItem(u);var p={item:u,initialX:e.center.x,data:u.data};this.options.rtl?p.dragLeft=!0:p.dragRight=!0,this.touchParams.itemProps=[p],e.stopPropagation()},o.prototype._onDrag=function(e){if(this.touchParams.itemProps){e.stopPropagation();var t=this,i=this.options.snap||null;if(this.options.rtl)var o=this.body.dom.root.offsetLeft+this.body.domProps.right.width;else o=this.body.dom.root.offsetLeft+this.body.domProps.left.width;var n=this.body.util.getScale(),s=this.body.util.getStep(),a=this.touchParams.selectedItem,h=null;if(t.options.editable.updateGroup&&a&&void 0!=a.data.group){var d=t.groupFromTarget(e);d&&(h=this._getGroupIndex(d.groupId))}this.touchParams.itemProps.forEach(function(a){var d=t.body.util.toTime(e.center.x-o),l=t.body.util.toTime(a.initialX-o);if(this.options.rtl)var c=-(d-l);else c=d-l;var u=this._cloneItemData(a.item.data);if(!1!==a.item.editable){if(t.options.editable.updateTime||!0===a.item.editable)if(a.dragLeft){if(this.options.rtl){if(void 0!=u.end){var p=r.convert(a.data.end,"Date"),f=new Date(p.valueOf()+c);u.end=i?i(f,n,s):f}}else if(void 0!=u.start){var m=r.convert(a.data.start,"Date"),g=new Date(m.valueOf()+c);u.start=i?i(g,n,s):g}}else if(a.dragRight){if(this.options.rtl){if(void 0!=u.start){m=r.convert(a.data.start,"Date"),g=new Date(m.valueOf()+c);u.start=i?i(g,n,s):g}}else if(void 0!=u.end){p=r.convert(a.data.end,"Date"),f=new Date(p.valueOf()+c);u.end=i?i(f,n,s):f}}else if(void 0!=u.start){m=r.convert(a.data.start,"Date").valueOf(),g=new Date(m+c);if(void 0!=u.end){var v=(p=r.convert(a.data.end,"Date")).valueOf()-m.valueOf();u.start=i?i(g,n,s):g,u.end=new Date(u.start.valueOf()+v)}else u.start=i?i(g,n,s):g}if((t.options.editable.updateGroup||!0===a.item.editable)&&!a.dragLeft&&!a.dragRight&&null!=h&&void 0!=u.group){var y=h-a.groupOffset;y=Math.max(0,y),y=Math.min(t.groupIds.length-1,y),u.group=t.groupIds[y]}u=this._cloneItemData(u),t.options.onMoving(u,function(e){e&&a.item.setData(this._cloneItemData(e,"Date"))}.bind(this))}}.bind(this)),this.stackDirty=!0,this.body.emitter.emit("_change")}},o.prototype._moveToGroup=function(e,t){var i=this.groups[t];if(i&&i.groupId!=e.data.group){var o=e.parent;o.remove(e),o.order(),i.add(e),i.order(),e.data.group=i.groupId}},o.prototype._onDragEnd=function(e){if(this.touchParams.itemProps){e.stopPropagation();var t=this,i=this.itemsData.getDataSet(),o=this.touchParams.itemProps;this.touchParams.itemProps=null,o.forEach(function(e){var o=e.item.id;if(null!=t.itemsData.get(o,t.itemOptions)){var n=this._cloneItemData(e.item.data);t.options.onMove(n,function(n){n?(n[i._fieldId]=o,i.update(n)):(e.item.setData(e.data),t.stackDirty=!0,t.body.emitter.emit("_change"))})}else t.options.onAdd(e.item.data,function(i){t._removeItem(e.item),i&&t.itemsData.getDataSet().add(i),t.stackDirty=!0,t.body.emitter.emit("_change")})}.bind(this))}},o.prototype._onGroupDragStart=function(e){this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(e),this.groupTouchParams.group&&(e.stopPropagation(),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))},o.prototype._onGroupDrag=function(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();var t=this.groupFromTarget(e);if(t&&t.height!=this.groupTouchParams.group.height){var i=t.top<this.groupTouchParams.group.top,o=e.center?e.center.y:e.clientY,n=r.getAbsoluteTop(t.dom.foreground),s=this.groupTouchParams.group.height;if(i){if(o>n+s)return}else if(n+t.height-s>o)return}if(t&&t!=this.groupTouchParams.group){var a=(l=this.groupsData).get(t.groupId),h=l.get(this.groupTouchParams.group.groupId);h&&a&&(this.options.groupOrderSwap(h,a,this.groupsData),this.groupsData.update(h),this.groupsData.update(a));var d=this.groupsData.getIds({order:this.options.groupOrder});if(!r.equalArray(d,this.groupTouchParams.originalOrder))for(var l=this.groupsData,c=this.groupTouchParams.originalOrder,u=this.groupTouchParams.group.groupId,p=Math.min(c.length,d.length),f=0,m=0,g=0;p>f;){for(;p>f+m&&p>f+g&&d[f+m]==c[f+g];)f++;if(f+m>=p)break;if(d[f+m]!=u)if(c[f+g]!=u){var v=d.indexOf(c[f+g]),y=l.get(d[f+m]),b=l.get(c[f+g]);this.options.groupOrderSwap(y,b,l),l.update(y),l.update(b);var w=d[f+m];d[f+m]=c[f+g],d[v]=w,f++}else g=1;else m=1}}}},o.prototype._onGroupDragEnd=function(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();var t=this,i=t.groupTouchParams.group.groupId,o=t.groupsData.getDataSet(),n=r.extend({},o.get(i));t.options.onMoveGroup(n,function(e){if(e)e[o._fieldId]=i,o.update(e);else{var n=o.getIds({order:t.options.groupOrder});if(!r.equalArray(n,t.groupTouchParams.originalOrder))for(var s=t.groupTouchParams.originalOrder,a=Math.min(s.length,n.length),h=0;a>h;){for(;a>h&&n[h]==s[h];)h++;if(h>=a)break;var d=n.indexOf(s[h]),l=o.get(n[h]),c=o.get(s[h]);t.options.groupOrderSwap(l,c,o),groupsData.update(l),groupsData.update(c);var u=n[h];n[h]=s[h],n[d]=u,h++}}}),t.body.emitter.emit("groupDragged",{groupId:i})}},o.prototype._onSelectItem=function(e){if(this.options.selectable){var t=e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey),i=e.srcEvent&&e.srcEvent.shiftKey;if(t||i)return void this._onMultiSelectItem(e);var o=this.getSelection(),n=this.itemFromTarget(e),s=n?[n.id]:[];this.setSelection(s);var r=this.getSelection();(r.length>0||o.length>0)&&this.body.emitter.emit("select",{items:r,event:e})}},o.prototype._onAddItem=function(e){if(this.options.selectable&&this.options.editable.add){var t=this,i=this.options.snap||null,o=this.itemFromTarget(e);if(o){var n=t.itemsData.get(o.id);this.options.onUpdate(n,function(e){e&&t.itemsData.getDataSet().update(e)})}else{if(this.options.rtl)var s=r.getAbsoluteRight(this.dom.frame),a=s-e.center.x;else s=r.getAbsoluteLeft(this.dom.frame),a=e.center.x-s;var h=this.body.util.toTime(a),d=this.body.util.getScale(),l=this.body.util.getStep(),c={start:i?i(h,d,l):h,content:"new item"};if("range"===this.options.type){var u=this.body.util.toTime(a+this.props.width/5);c.end=i?i(u,d,l):u}c[this.itemsData._fieldId]=r.randomUUID();var p=this.groupFromTarget(e);p&&(c.group=p.groupId),c=this._cloneItemData(c),this.options.onAdd(c,function(e){e&&t.itemsData.getDataSet().add(e)})}}},o.prototype._onMultiSelectItem=function(e){if(this.options.selectable){var t=this.itemFromTarget(e);if(t){var i=this.options.multiselect?this.getSelection():[];if((e.srcEvent&&e.srcEvent.shiftKey||!1)&&this.options.multiselect){var n=this.itemsData.get(t.id).group,s=void 0;this.options.multiselectPerGroup&&i.length>0&&(s=this.itemsData.get(i[0]).group),this.options.multiselectPerGroup&&void 0!=s&&s!=n||i.push(t.id);var r=o._getItemRange(this.itemsData.get(i,this.itemOptions));if(!this.options.multiselectPerGroup||s==n){i=[];for(var a in this.items)if(this.items.hasOwnProperty(a)){var h=this.items[a],d=h.data.start,l=void 0!==h.data.end?h.data.end:d;!(d>=r.min&&l<=r.max)||this.options.multiselectPerGroup&&s!=this.itemsData.get(h.id).group||h instanceof g||i.push(h.id)}}}else{var c=i.indexOf(t.id);-1==c?i.push(t.id):i.splice(c,1)}this.setSelection(i),this.body.emitter.emit("select",{items:this.getSelection(),event:e})}}},o._getItemRange=function(e){var t=null,i=null;return e.forEach(function(e){(null==i||e.start<i)&&(i=e.start),void 0!=e.end?(null==t||e.end>t)&&(t=e.end):(null==t||e.start>t)&&(t=e.start)}),{min:i,max:t}},o.prototype.itemFromTarget=function(e){for(var t=e.target;t;){if(t.hasOwnProperty("timeline-item"))return t["timeline-item"];t=t.parentNode}return null},o.prototype.groupFromTarget=function(e){for(var t=e.center?e.center.y:e.clientY,i=0;i<this.groupIds.length;i++){var o=this.groupIds[i],n=this.groups[o],s=n.dom.foreground,a=r.getAbsoluteTop(s);if(t>a&&t<a+s.offsetHeight)return n;if("top"===this.options.orientation.item){if(i===this.groupIds.length-1&&t>a)return n}else if(0===i&&t<a+s.offset)return n}return null},o.itemSetFromTarget=function(e){for(var t=e.target;t;){if(t.hasOwnProperty("timeline-itemset"))return t["timeline-itemset"];t=t.parentNode}return null},o.prototype._cloneItemData=function(e,t){var i=r.extend({},e);return t||(t=this.itemsData.getDataSet()._options.type),void 0!=i.start&&(i.start=r.convert(i.start,t&&t.start||"Date")),void 0!=i.end&&(i.end=r.convert(i.end,t&&t.end||"Date")),i},e.exports=o},function(e,t,i){function o(e,t,i,s){this.moment=n,this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(e,t,i),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Array.isArray(s)?this.hiddenDates=s:this.hiddenDates=void 0!=s?[s]:[],this.format=o.FORMAT}var n=i(2),s=i(32),r=i(1);o.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},o.prototype.setMoment=function(e){this.moment=e,this.current=this.moment(this.current),this._start=this.moment(this._start),this._end=this.moment(this._end)},o.prototype.setFormat=function(e){var t=r.deepExtend({},o.FORMAT);this.format=r.deepExtend(t,e)},o.prototype.setRange=function(e,t,i){if(!(e instanceof Date&&t instanceof Date))throw"No legal start or end date in method setRange";this._start=void 0!=e?this.moment(e.valueOf()):new Date,this._end=void 0!=t?this.moment(t.valueOf()):new Date,this.autoScale&&this.setMinimumStep(i)},o.prototype.start=function(){this.current=this._start.clone(),this.roundToMinor()},o.prototype.roundToMinor=function(){switch(this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(1!=this.step)switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year")}},o.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()},o.prototype.next=function(){var e=this.current.valueOf();if(this.current.month()<6)switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.subtract(this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}else switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}if(1!=this.step)switch(this.scale){case"millisecond":this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"month":this.current.month()<this.step&&this.current.month(0)}this.current.valueOf()==e&&(this.current=this._end.clone()),s.stepOverHiddenDates(this.moment,this,e)},o.prototype.getCurrent=function(){return this.current},o.prototype.setScale=function(e){e&&"string"==typeof e.scale&&(this.scale=e.scale,this.step=e.step>0?e.step:1,this.autoScale=!1)},o.prototype.setAutoScale=function(e){this.autoScale=e},o.prototype.setMinimumStep=function(e){if(void 0!=e){31104e9>e&&(this.scale="year",this.step=1e3),15552e9>e&&(this.scale="year",this.step=500),31104e8>e&&(this.scale="year",this.step=100),15552e8>e&&(this.scale="year",this.step=50),31104e7>e&&(this.scale="year",this.step=10),15552e7>e&&(this.scale="year",this.step=5),31104e6>e&&(this.scale="year",this.step=1),7776e6>e&&(this.scale="month",this.step=3),2592e6>e&&(this.scale="month",this.step=1),432e6>e&&(this.scale="day",this.step=5),1728e5>e&&(this.scale="day",this.step=2),864e5>e&&(this.scale="day",this.step=1),432e5>e&&(this.scale="weekday",this.step=1),144e5>e&&(this.scale="hour",this.step=4),36e5>e&&(this.scale="hour",this.step=1),9e5>e&&(this.scale="minute",this.step=15),6e5>e&&(this.scale="minute",this.step=10),3e5>e&&(this.scale="minute",this.step=5),6e4>e&&(this.scale="minute",this.step=1),15e3>e&&(this.scale="second",this.step=15),1e4>e&&(this.scale="second",this.step=10),5e3>e&&(this.scale="second",this.step=5),1e3>e&&(this.scale="second",this.step=1),200>e&&(this.scale="millisecond",this.step=200),100>e&&(this.scale="millisecond",this.step=100),50>e&&(this.scale="millisecond",this.step=50),10>e&&(this.scale="millisecond",this.step=10),5>e&&(this.scale="millisecond",this.step=5),1>e&&(this.scale="millisecond",this.step=1)}},o.snap=function(e,t,i){var o=n(e);if("year"==t){var s=o.year()+Math.round(o.month()/12);o.year(Math.round(s/i)*i),o.month(0),o.date(0),o.hours(0),o.minutes(0),o.seconds(0),o.milliseconds(0)}else if("month"==t)o.date()>15?(o.date(1),o.add(1,"month")):o.date(1),o.hours(0),o.minutes(0),o.seconds(0),o.milliseconds(0);else if("day"==t){switch(i){case 5:case 2:o.hours(24*Math.round(o.hours()/24));break;default:o.hours(12*Math.round(o.hours()/12))}o.minutes(0),o.seconds(0),o.milliseconds(0)}else if("weekday"==t){switch(i){case 5:case 2:o.hours(12*Math.round(o.hours()/12));break;default:o.hours(6*Math.round(o.hours()/6))}o.minutes(0),o.seconds(0),o.milliseconds(0)}else if("hour"==t){switch(i){case 4:o.minutes(60*Math.round(o.minutes()/60));break;default:o.minutes(30*Math.round(o.minutes()/30))}o.seconds(0),o.milliseconds(0)}else if("minute"==t){switch(i){case 15:case 10:o.minutes(5*Math.round(o.minutes()/5)),o.seconds(0);break;case 5:o.seconds(60*Math.round(o.seconds()/60));break;default:o.seconds(30*Math.round(o.seconds()/30))}o.milliseconds(0)}else if("second"==t)switch(i){case 15:case 10:o.seconds(5*Math.round(o.seconds()/5)),o.milliseconds(0);break;case 5:o.milliseconds(1e3*Math.round(o.milliseconds()/1e3));break;default:o.milliseconds(500*Math.round(o.milliseconds()/500))}else if("millisecond"==t){var r=i>5?i/2:1;o.milliseconds(Math.round(o.milliseconds()/r)*r)}return o},o.prototype.isMajor=function(){if(1==this.switchedYear)switch(this.switchedYear=!1,this.scale){case"year":case"month":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedMonth)switch(this.switchedMonth=!1,this.scale){case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedDay)switch(this.switchedDay=!1,this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}var e=this.moment(this.current);switch(this.scale){case"millisecond":return 0==e.milliseconds();case"second":return 0==e.seconds();case"minute":return 0==e.hours()&&0==e.minutes();case"hour":return 0==e.hours();case"weekday":case"day":return 1==e.date();case"month":return 0==e.month();case"year":default:return!1}},o.prototype.getLabelMinor=function(e){void 0==e&&(e=this.current);var t=this.format.minorLabels[this.scale];return t&&t.length>0?this.moment(e).format(t):""},o.prototype.getLabelMajor=function(e){void 0==e&&(e=this.current);var t=this.format.majorLabels[this.scale];return t&&t.length>0?this.moment(e).format(t):""},o.prototype.getClassName=function(){function e(e){return e/r%2==0?" vis-even":" vis-odd"}function t(e){return e.isSame(new Date,"day")?" vis-today":e.isSame(o().add(1,"day"),"day")?" vis-tomorrow":e.isSame(o().add(-1,"day"),"day")?" vis-yesterday":""}function i(e){return e.isSame(new Date,"month")?" vis-current-month":""}var o=this.moment,n=this.moment(this.current),s=n.locale?n.locale("en"):n.lang("en"),r=this.step;switch(this.scale){case"millisecond":return e(s.milliseconds()).trim();case"second":return e(s.seconds()).trim();case"minute":return e(s.minutes()).trim();case"hour":var a=s.hours();return 4==this.step&&(a=a+"-h"+(a+4)),"vis-h"+a+t(s)+e(s.hours());case"weekday":return"vis-"+s.format("dddd").toLowerCase()+t(s)+(s.isSame(new Date,"week")?" vis-current-week":"")+e(s.date());case"day":var h=s.date();return"vis-day"+h+" vis-"+s.format("MMMM").toLowerCase()+i(s)+e(h-1);case"month":return"vis-"+s.format("MMMM").toLowerCase()+i(s)+e(s.month());case"year":var d=s.year();return"vis-year"+d+(s.isSame(new Date,"year")?" vis-current-year":"")+e(d);default:return""}},e.exports=o},function(e,t,i){function o(e,t,i){this.groupId=e,this.subgroups={},this.subgroupIndex=0,this.subgroupOrderer=t&&t.subgroupOrder,this.itemSet=i,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var o=this;this.itemSet.body.emitter.on("checkRangedItems",function(){o.checkRangedItems=!0}),this._create(),this.setData(t)}var n=i(1),s=i(37);i(38),o.prototype._create=function(){var e=document.createElement("div");this.itemSet.options.groupEditable.order?e.className="vis-label draggable":e.className="vis-label",this.dom.label=e;var t=document.createElement("div");t.className="vis-inner",e.appendChild(t),this.dom.inner=t;var i=document.createElement("div");i.className="vis-group",i["timeline-group"]=this,this.dom.foreground=i,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.innerHTML="?",this.dom.background.appendChild(this.dom.marker)},o.prototype.setData=function(e){var t;if((t=this.itemSet.options&&this.itemSet.options.groupTemplate?this.itemSet.options.groupTemplate(e):e&&e.content)instanceof Element){for(this.dom.inner.appendChild(t);this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(t)}else this.dom.inner.innerHTML=void 0!==t&&null!==t?t:this.groupId||"";this.dom.label.title=e&&e.title||"",this.dom.inner.firstChild?n.removeClassName(this.dom.inner,"vis-hidden"):n.addClassName(this.dom.inner,"vis-hidden");var i=e&&e.className||null;i!=this.className&&(this.className&&(n.removeClassName(this.dom.label,this.className),n.removeClassName(this.dom.foreground,this.className),n.removeClassName(this.dom.background,this.className),n.removeClassName(this.dom.axis,this.className)),n.addClassName(this.dom.label,i),n.addClassName(this.dom.foreground,i),n.addClassName(this.dom.background,i),n.addClassName(this.dom.axis,i),this.className=i),this.style&&(n.removeCssText(this.dom.label,this.style),this.style=null),e&&e.style&&(n.addCssText(this.dom.label,e.style),this.style=e.style)},o.prototype.getLabelWidth=function(){return this.props.label.width},o.prototype.redraw=function(e,t,i){var o=!1,r=this.dom.marker.clientHeight;if(r!=this.lastMarkerHeight&&(this.lastMarkerHeight=r,n.forEach(this.items,function(e){e.dirty=!0,e.displayed&&e.redraw()}),i=!0),this._calculateSubGroupHeights(),"function"==typeof this.itemSet.options.order){if(i){var a=this;n.forEach(this.items,function(e){e.displayed||(e.redraw(),a.visibleItems.push(e)),e.repositionX(!1)});var h=this.orderedItems.byStart.slice().sort(function(e,t){return a.itemSet.options.order(e.data,t.data)});s.stack(h,t,!0)}this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,e)}else this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,e),this.itemSet.options.stack?s.stack(this.visibleItems,t,i):s.nostack(this.visibleItems,t,this.subgroups);var d=this._calculateHeight(t),l=this.dom.foreground;this.top=l.offsetTop,this.right=l.offsetLeft,this.width=l.offsetWidth,o=n.updateProperty(this,"height",d)||o,o=n.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||o,o=n.updateProperty(this.props.label,"height",this.dom.inner.clientHeight)||o,this.dom.background.style.height=d+"px",this.dom.foreground.style.height=d+"px",this.dom.label.style.height=d+"px";for(var c=0,u=this.visibleItems.length;u>c;c++){this.visibleItems[c].repositionY(t)}return o},o.prototype._calculateSubGroupHeights=function(){if(Object.keys(this.subgroups).length>0){var e=this;this.resetSubgroups(),n.forEach(this.visibleItems,function(t){void 0!==t.data.subgroup&&(e.subgroups[t.data.subgroup].height=Math.max(e.subgroups[t.data.subgroup].height,t.height),e.subgroups[t.data.subgroup].visible=!0)})}},o.prototype._calculateHeight=function(e){var t,i=this.visibleItems;if(i.length>0){var o=i[0].top,s=i[0].top+i[0].height;if(n.forEach(i,function(e){o=Math.min(o,e.top),s=Math.max(s,e.top+e.height)}),o>e.axis){var r=o-e.axis;s-=r,n.forEach(i,function(e){e.top-=r})}t=s+e.item.vertical/2}else t=0;return Math.max(t,this.props.label.height)},o.prototype.show=function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)},o.prototype.hide=function(){var e=this.dom.label;e.parentNode&&e.parentNode.removeChild(e);var t=this.dom.foreground;t.parentNode&&t.parentNode.removeChild(t);var i=this.dom.background;i.parentNode&&i.parentNode.removeChild(i);var o=this.dom.axis;o.parentNode&&o.parentNode.removeChild(o)},o.prototype.add=function(e){if(this.items[e.id]=e,e.setParent(this),void 0!==e.data.subgroup&&(void 0===this.subgroups[e.data.subgroup]&&(this.subgroups[e.data.subgroup]={height:0,visible:!1,index:this.subgroupIndex,items:[]},this.subgroupIndex++),this.subgroups[e.data.subgroup].items.push(e)),this.orderSubgroups(),-1==this.visibleItems.indexOf(e)){var t=this.itemSet.body.range;this._checkIfVisible(e,this.visibleItems,t)}},o.prototype.orderSubgroups=function(){if(void 0!==this.subgroupOrderer){var e=[];if("string"==typeof this.subgroupOrderer){for(var t in this.subgroups)e.push({subgroup:t,sortField:this.subgroups[t].items[0].data[this.subgroupOrderer]});e.sort(function(e,t){return e.sortField-t.sortField})}else if("function"==typeof this.subgroupOrderer){for(var t in this.subgroups)e.push(this.subgroups[t].items[0].data);e.sort(this.subgroupOrderer)}if(e.length>0)for(var i=0;i<e.length;i++)this.subgroups[e[i].subgroup].index=i}},o.prototype.resetSubgroups=function(){for(var e in this.subgroups)this.subgroups.hasOwnProperty(e)&&(this.subgroups[e].visible=!1)},o.prototype.remove=function(e){delete this.items[e.id],e.setParent(null);var t=this.visibleItems.indexOf(e);if(-1!=t&&this.visibleItems.splice(t,1),void 0!==e.data.subgroup){var i=this.subgroups[e.data.subgroup];if(i){var o=i.items.indexOf(e);i.items.splice(o,1),i.items.length||(delete this.subgroups[e.data.subgroup],this.subgroupIndex--),this.orderSubgroups()}}},o.prototype.removeFromDataSet=function(e){this.itemSet.removeItem(e.id)},o.prototype.order=function(){for(var e=n.toArray(this.items),t=[],i=[],o=0;o<e.length;o++)void 0!==e[o].data.end&&i.push(e[o]),t.push(e[o]);this.orderedItems={byStart:t,byEnd:i},s.orderByStart(this.orderedItems.byStart),s.orderByEnd(this.orderedItems.byEnd)},o.prototype._updateVisibleItems=function(e,t,i){var o,s,r=[],a={},h=(i.end-i.start)/4,d=i.start-h,l=i.end+h,c=function(e){return d>e?-1:l>=e?0:1};if(t.length>0)for(s=0;s<t.length;s++)this._checkIfVisibleWithReference(t[s],r,a,i);var u=n.binarySearchCustom(e.byStart,c,"data","start");if(this._traceVisible(u,e.byStart,r,a,function(e){return e.data.start<d||e.data.start>l}),1==this.checkRangedItems)for(this.checkRangedItems=!1,s=0;s<e.byEnd.length;s++)this._checkIfVisibleWithReference(e.byEnd[s],r,a,i);else{var p=n.binarySearchCustom(e.byEnd,c,"data","end");this._traceVisible(p,e.byEnd,r,a,function(e){return e.data.end<d||e.data.end>l})}for(s=0;s<r.length;s++)o=r[s],o.displayed||o.show(),o.repositionX();return r},o.prototype._traceVisible=function(e,t,i,o,n){var s,r;if(-1!=e){for(r=e;r>=0&&!n(s=t[r]);r--)void 0===o[s.id]&&(o[s.id]=!0,i.push(s));for(r=e+1;r<t.length&&!n(s=t[r]);r++)void 0===o[s.id]&&(o[s.id]=!0,i.push(s))}},o.prototype._checkIfVisible=function(e,t,i){e.isVisible(i)?(e.displayed||e.show(),e.repositionX(),t.push(e)):e.displayed&&e.hide()},o.prototype._checkIfVisibleWithReference=function(e,t,i,o){e.isVisible(o)?void 0===i[e.id]&&(i[e.id]=!0,t.push(e)):e.displayed&&e.hide()},e.exports=o},function(e,t){t.orderByStart=function(e){e.sort(function(e,t){return e.data.start-t.data.start})},t.orderByEnd=function(e){e.sort(function(e,t){return("end"in e.data?e.data.end:e.data.start)-("end"in t.data?t.data.end:t.data.start)})},t.stack=function(e,i,o){var n,s;if(o)for(n=0,s=e.length;s>n;n++)e[n].top=null;for(n=0,s=e.length;s>n;n++){var r=e[n];if(r.stack&&null===r.top){r.top=i.axis;do{for(var a=null,h=0,d=e.length;d>h;h++){var l=e[h];if(null!==l.top&&l!==r&&l.stack&&t.collision(r,l,i.item,l.options.rtl)){a=l;break}}null!=a&&(r.top=a.top+a.height+i.item.vertical)}while(a)}}},t.nostack=function(e,t,i){var o,n,s;for(o=0,n=e.length;n>o;o++)if(void 0!==e[o].data.subgroup){s=t.axis;for(var r in i)i.hasOwnProperty(r)&&1==i[r].visible&&i[r].index<i[e[o].data.subgroup].index&&(s+=i[r].height+t.item.vertical);e[o].top=s}else e[o].top=t.axis},t.collision=function(e,t,i,o){return o?e.right-i.horizontal+.001<t.right+t.width&&e.right+e.width+i.horizontal-.001>t.right&&e.top-i.vertical+.001<t.top+t.height&&e.top+e.height+i.vertical-.001>t.top:e.left-i.horizontal+.001<t.left+t.width&&e.left+e.width+i.horizontal-.001>t.left&&e.top-i.vertical+.001<t.top+t.height&&e.top+e.height+i.vertical-.001>t.top}},function(e,t,i){function o(e,t,i){if(this.props={content:{width:0}},this.overflow=!1,this.options=i,e){if(void 0==e.start)throw new Error('Property "start" missing in item '+e.id);if(void 0==e.end)throw new Error('Property "end" missing in item '+e.id)}n.call(this,e,t,i)}var n=(i(20),i(39));o.prototype=new n(null,null,null),o.prototype.baseClassName="vis-item vis-range",o.prototype.isVisible=function(e){return this.data.start<e.end&&this.data.end>e.start},o.prototype.redraw=function(){var e=this.dom;if(e||(this.dom={},(e=this.dom).box=document.createElement("div"),e.frame=document.createElement("div"),e.frame.className="vis-item-overflow",e.box.appendChild(e.frame),e.content=document.createElement("div"),e.content.className="vis-item-content",e.frame.appendChild(e.content),e.box["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(e.box)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var i=(this.options.editable.updateTime||this.options.editable.updateGroup||!0===this.editable)&&!1!==this.editable,o=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(i?" vis-editable":" vis-readonly");e.box.className=this.baseClassName+o,this.overflow="hidden"!==window.getComputedStyle(e.frame).overflow,this.dom.content.style.maxWidth="none",this.props.content.width=this.dom.content.offsetWidth,this.height=this.dom.box.offsetHeight,this.dom.content.style.maxWidth="",this.dirty=!1}this._repaintDeleteButton(e.box),this._repaintDragLeft(),this._repaintDragRight()},o.prototype.show=function(){this.displayed||this.redraw()},o.prototype.hide=function(){if(this.displayed){var e=this.dom.box;e.parentNode&&e.parentNode.removeChild(e),this.displayed=!1}},o.prototype.repositionX=function(e){var t,i,o=this.parent.width,n=this.conversion.toScreen(this.data.start),s=this.conversion.toScreen(this.data.end);void 0!==e&&!0!==e||(-o>n&&(n=-o),s>2*o&&(s=2*o));var r=Math.max(s-n,1);switch(this.overflow?(this.options.rtl?this.right=n:this.left=n,this.width=r+this.props.content.width,i=this.props.content.width):(this.options.rtl?this.right=n:this.left=n,this.width=r,i=Math.min(s-n,this.props.content.width)),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=r+"px",this.options.align){case"left":this.options.rtl?this.dom.content.style.right="0":this.dom.content.style.left="0";break;case"right":this.options.rtl?this.dom.content.style.right=Math.max(r-i,0)+"px":this.dom.content.style.left=Math.max(r-i,0)+"px";break;case"center":this.options.rtl?this.dom.content.style.right=Math.max((r-i)/2,0)+"px":this.dom.content.style.left=Math.max((r-i)/2,0)+"px";break;default:t=this.overflow?s>0?Math.max(-n,0):-i:0>n?-n:0,this.options.rtl?this.dom.content.style.right=t+"px":this.dom.content.style.left=t+"px"}},o.prototype.repositionY=function(){var e=this.options.orientation.item,t=this.dom.box;t.style.top="top"==e?this.top+"px":this.parent.height-this.top-this.height+"px"},o.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var e=document.createElement("div");e.className="vis-drag-left",e.dragLeftItem=this,this.dom.box.appendChild(e),this.dom.dragLeft=e}else!this.selected&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)},o.prototype._repaintDragRight=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragRight){var e=document.createElement("div");e.className="vis-drag-right",e.dragRightItem=this,this.dom.box.appendChild(e),this.dom.dragRight=e}else!this.selected&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)},e.exports=o},function(e,t,i){function o(e,t,i){this.id=null,this.parent=null,this.data=e,this.dom=null,this.conversion=t||{},this.options=i||{},this.selected=!1,this.displayed=!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.editable=null,this.data&&this.data.hasOwnProperty("editable")&&"boolean"==typeof this.data.editable&&(this.editable=e.editable)}var n=i(20),s=i(1);o.prototype.stack=!0,o.prototype.select=function(){this.selected=!0,this.dirty=!0,this.displayed&&this.redraw()},o.prototype.unselect=function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()},o.prototype.setData=function(e){void 0!=e.group&&this.data.group!=e.group&&this.parent.itemSet._moveToGroup(this,e.group),e.hasOwnProperty("editable")&&"boolean"==typeof e.editable&&(this.editable=e.editable),this.data=e,this.dirty=!0,this.displayed&&this.redraw()},o.prototype.setParent=function(e){this.displayed?(this.hide(),this.parent=e,this.parent&&this.show()):this.parent=e},o.prototype.isVisible=function(e){return!1},o.prototype.show=function(){return!1},o.prototype.hide=function(){return!1},o.prototype.redraw=function(){},o.prototype.repositionX=function(){},o.prototype.repositionY=function(){},o.prototype._repaintDeleteButton=function(e){var t=(this.options.editable.remove||!0===this.data.editable)&&!1!==this.data.editable;if(this.selected&&t&&!this.dom.deleteButton){var i=this,o=document.createElement("div");this.options.rtl?o.className="vis-delete-rtl":o.className="vis-delete",o.title="Delete this item",new n(o).on("tap",function(e){e.stopPropagation(),i.parent.removeFromDataSet(i)}),e.appendChild(o),this.dom.deleteButton=o}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)},o.prototype._updateContents=function(e){var t;if(this.options.template){var i=this.parent.itemSet.itemsData.get(this.id);t=this.options.template(i)}else t=this.data.content;if(this._contentToString(this.content)!==this._contentToString(t)){if(t instanceof Element)e.innerHTML="",e.appendChild(t);else if(void 0!=t)e.innerHTML=t;else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '+this.id);this.content=t}},o.prototype._updateTitle=function(e){null!=this.data.title?e.title=this.data.title||"":e.removeAttribute("vis-title")},o.prototype._updateDataAttributes=function(e){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var t=[];if(Array.isArray(this.options.dataAttributes))t=this.options.dataAttributes;else{if("all"!=this.options.dataAttributes)return;t=Object.keys(this.data)}for(var i=0;i<t.length;i++){var o=t[i],n=this.data[o];null!=n?e.setAttribute("data-"+o,n):e.removeAttribute("data-"+o)}}},o.prototype._updateStyle=function(e){this.style&&(s.removeCssText(e,this.style),this.style=null),this.data.style&&(s.addCssText(e,this.data.style),this.style=this.data.style)},o.prototype._contentToString=function(e){return"string"==typeof e?e:e&&"outerHTML"in e?e.outerHTML:e},o.prototype.getWidthLeft=function(){return 0},o.prototype.getWidthRight=function(){return 0},e.exports=o},function(e,t,i){function o(e,t,i){n.call(this,e,t,i),this.width=0,this.height=0,this.top=0,this.left=0}var n=(i(1),i(36));o.prototype=Object.create(n.prototype),o.prototype.redraw=function(e,t,i){this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,e),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var o=0,n=this.visibleItems.length;n>o;o++){this.visibleItems[o].repositionY(t)}return!1},o.prototype.show=function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)},e.exports=o},function(e,t,i){function o(e,t,i){if(this.props={dot:{width:0,height:0},line:{width:0,height:0}},this.options=i,e&&void 0==e.start)throw new Error('Property "start" missing in item '+e);n.call(this,e,t,i)}var n=i(39);i(1),o.prototype=new n(null,null,null),o.prototype.isVisible=function(e){var t=(e.end-e.start)/4;return this.data.start>e.start-t&&this.data.start<e.end+t},o.prototype.redraw=function(){var e=this.dom;if(e||(this.dom={},(e=this.dom).box=document.createElement("DIV"),e.content=document.createElement("DIV"),e.content.className="vis-item-content",e.box.appendChild(e.content),e.line=document.createElement("DIV"),e.line.className="vis-line",e.dot=document.createElement("DIV"),e.dot.className="vis-dot",e.box["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(e.box)}if(!e.line.parentNode){var i=this.parent.dom.background;if(!i)throw new Error("Cannot redraw item: parent has no background container element");i.appendChild(e.line)}if(!e.dot.parentNode){var o=this.parent.dom.axis;if(!i)throw new Error("Cannot redraw item: parent has no axis container element");o.appendChild(e.dot)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var n=(this.options.editable.updateTime||this.options.editable.updateGroup||!0===this.editable)&&!1!==this.editable,s=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(n?" vis-editable":" vis-readonly");e.box.className="vis-item vis-box"+s,e.line.className="vis-item vis-line"+s,e.dot.className="vis-item vis-dot"+s,this.props.dot.height=e.dot.offsetHeight,this.props.dot.width=e.dot.offsetWidth,this.props.line.width=e.line.offsetWidth,this.width=e.box.offsetWidth,this.height=e.box.offsetHeight,this.dirty=!1}this._repaintDeleteButton(e.box)},o.prototype.show=function(){this.displayed||this.redraw()},o.prototype.hide=function(){if(this.displayed){var e=this.dom;e.box.parentNode&&e.box.parentNode.removeChild(e.box),e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.displayed=!1}},o.prototype.repositionX=function(){var e=this.conversion.toScreen(this.data.start),t=this.options.align;"right"==t?this.options.rtl?(this.right=e-this.width,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=e-this.props.line.width+"px",this.dom.dot.style.right=e-this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=e-this.width,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=e-this.props.line.width+"px",this.dom.dot.style.left=e-this.props.line.width/2-this.props.dot.width/2+"px"):"left"==t?this.options.rtl?(this.right=e,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=e+"px",this.dom.dot.style.right=e+this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=e,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=e+"px",this.dom.dot.style.left=e+this.props.line.width/2-this.props.dot.width/2+"px"):this.options.rtl?(this.right=e-this.width/2,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=e-this.props.line.width+"px",this.dom.dot.style.right=e-this.props.dot.width/2+"px"):(this.left=e-this.width/2,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=e-this.props.line.width/2+"px",this.dom.dot.style.left=e-this.props.dot.width/2+"px")},o.prototype.repositionY=function(){var e=this.options.orientation.item,t=this.dom.box,i=this.dom.line,o=this.dom.dot;if("top"==e)t.style.top=(this.top||0)+"px",i.style.top="0",i.style.height=this.parent.top+this.top+1+"px",i.style.bottom="";else{var n=this.parent.itemSet.props.height,s=n-this.parent.top-this.parent.height+this.top;t.style.top=(this.parent.height-this.top-this.height||0)+"px",i.style.top=n-s+"px",i.style.bottom="0"}o.style.top=-this.props.dot.height/2+"px"},o.prototype.getWidthLeft=function(){return this.width/2},o.prototype.getWidthRight=function(){return this.width/2},e.exports=o},function(e,t,i){function o(e,t,i){if(this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},this.options=i,e&&void 0==e.start)throw new Error('Property "start" missing in item '+e);n.call(this,e,t,i)}var n=i(39);o.prototype=new n(null,null,null),o.prototype.isVisible=function(e){var t=(e.end-e.start)/4;return this.data.start>e.start-t&&this.data.start<e.end+t},o.prototype.redraw=function(){var e=this.dom;if(e||(this.dom={},(e=this.dom).point=document.createElement("div"),e.content=document.createElement("div"),e.content.className="vis-item-content",e.point.appendChild(e.content),e.dot=document.createElement("div"),e.point.appendChild(e.dot),e.point["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.point.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(e.point)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.point),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var i=(this.options.editable.updateTime||this.options.editable.updateGroup||!0===this.editable)&&!1!==this.editable,o=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(i?" vis-editable":" vis-readonly");e.point.className="vis-item vis-point"+o,e.dot.className="vis-item vis-dot"+o,this.props.dot.width=e.dot.offsetWidth,this.props.dot.height=e.dot.offsetHeight,this.props.content.height=e.content.offsetHeight,this.options.rtl?e.content.style.marginRight=2*this.props.dot.width+"px":e.content.style.marginLeft=2*this.props.dot.width+"px",this.width=e.point.offsetWidth,this.height=e.point.offsetHeight,e.dot.style.top=(this.height-this.props.dot.height)/2+"px",this.options.rtl?e.dot.style.right=this.props.dot.width/2+"px":e.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1}this._repaintDeleteButton(e.point)},o.prototype.show=function(){this.displayed||this.redraw()},o.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)},o.prototype.repositionX=function(){var e=this.conversion.toScreen(this.data.start);this.options.rtl?(this.right=e-this.props.dot.width,this.dom.point.style.right=this.right+"px"):(this.left=e-this.props.dot.width,this.dom.point.style.left=this.left+"px")},o.prototype.repositionY=function(){var e=this.options.orientation.item,t=this.dom.point;t.style.top="top"==e?this.top+"px":this.parent.height-this.top-this.height+"px"},o.prototype.getWidthLeft=function(){return this.props.dot.width},o.prototype.getWidthRight=function(){return this.props.dot.width},e.exports=o},function(e,t,i){function o(e,t,i){if(this.props={content:{width:0}},this.overflow=!1,e){if(void 0==e.start)throw new Error('Property "start" missing in item '+e.id);if(void 0==e.end)throw new Error('Property "end" missing in item '+e.id)}n.call(this,e,t,i)}var n=(i(20),i(39)),s=i(40),r=i(38);o.prototype=new n(null,null,null),o.prototype.baseClassName="vis-item vis-background",o.prototype.stack=!1,o.prototype.isVisible=function(e){return this.data.start<e.end&&this.data.end>e.start},o.prototype.redraw=function(){var e=this.dom;if(e||(this.dom={},(e=this.dom).box=document.createElement("div"),e.frame=document.createElement("div"),e.frame.className="vis-item-overflow",e.box.appendChild(e.frame),e.content=document.createElement("div"),e.content.className="vis-item-content",e.frame.appendChild(e.content),this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!e.box.parentNode){var t=this.parent.dom.background;if(!t)throw new Error("Cannot redraw item: parent has no background container element");t.appendChild(e.box)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var i=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");e.box.className=this.baseClassName+i,this.overflow="hidden"!==window.getComputedStyle(e.content).overflow,this.props.content.width=this.dom.content.offsetWidth,this.height=0,this.dirty=!1}},o.prototype.show=r.prototype.show,o.prototype.hide=r.prototype.hide,o.prototype.repositionX=r.prototype.repositionX,o.prototype.repositionY=function(e){var t,i="top"===this.options.orientation.item;if(this.dom.content.style.top=i?"":"0",this.dom.content.style.bottom=i?"0":"",void 0!==this.data.subgroup){var o=this.data.subgroup,n=this.parent.subgroups,r=n[o].index;if(1==i){t=this.parent.subgroups[o].height+e.item.vertical,t+=0==r?e.axis-.5*e.item.vertical:0;var a=this.parent.top;for(var h in n)n.hasOwnProperty(h)&&1==n[h].visible&&n[h].index<r&&(a+=n[h].height+e.item.vertical);a+=0!=r?e.axis-.5*e.item.vertical:0,this.dom.box.style.top=a+"px",this.dom.box.style.bottom=""}else{a=this.parent.top;var d=0;for(var h in n)if(n.hasOwnProperty(h)&&1==n[h].visible){var l=n[h].height+e.item.vertical;d+=l,n[h].index>r&&(a+=l)}t=this.parent.subgroups[o].height+e.item.vertical,this.dom.box.style.top=this.parent.height-d+a+"px",this.dom.box.style.bottom=""}}else this.parent instanceof s?(t=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.top=i?"0":"",this.dom.box.style.bottom=i?"":"0"):(t=this.parent.height,this.dom.box.style.top=this.parent.top+"px",this.dom.box.style.bottom="");this.dom.box.style.height=t+"px"},e.exports=o},function(e,t,i){function o(e,t){this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,maxMinorChars:7,format:a.FORMAT,moment:d,timeAxis:null},this.options=s.extend({},this.defaultOptions),this.body=e,this._create(),this.setOptions(t)}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=i(1),r=i(31),a=i(35),h=i(32),d=i(2);o.prototype=new r,o.prototype.setOptions=function(e){e&&(s.selectiveExtend(["showMinorLabels","showMajorLabels","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,e),s.selectiveDeepExtend(["format"],this.options,e),"orientation"in e&&("string"==typeof e.orientation?this.options.orientation.axis=e.orientation:"object"===n(e.orientation)&&"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis)),"locale"in e&&("function"==typeof d.locale?d.locale(e.locale):d.lang(e.locale)))},o.prototype._create=function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"},o.prototype.destroy=function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null},o.prototype.redraw=function(){var e=this.props,t=this.dom.foreground,i=this.dom.background,o="top"==this.options.orientation.axis?this.body.dom.top:this.body.dom.bottom,n=t.parentNode!==o;this._calculateCharSize();var s=this.options.showMinorLabels&&"none"!==this.options.orientation.axis,r=this.options.showMajorLabels&&"none"!==this.options.orientation.axis;e.minorLabelHeight=s?e.minorCharHeight:0,e.majorLabelHeight=r?e.majorCharHeight:0,e.height=e.minorLabelHeight+e.majorLabelHeight,e.width=t.offsetWidth,e.minorLineHeight=this.body.domProps.root.height-e.majorLabelHeight-("top"==this.options.orientation.axis?this.body.domProps.bottom.height:this.body.domProps.top.height),e.minorLineWidth=1,e.majorLineHeight=e.minorLineHeight+e.majorLabelHeight,e.majorLineWidth=1;var a=t.nextSibling,h=i.nextSibling;return t.parentNode&&t.parentNode.removeChild(t),i.parentNode&&i.parentNode.removeChild(i),t.style.height=this.props.height+"px",this._repaintLabels(),a?o.insertBefore(t,a):o.appendChild(t),h?this.body.dom.backgroundVertical.insertBefore(i,h):this.body.dom.backgroundVertical.appendChild(i),this._isResized()||n},o.prototype._repaintLabels=function(){var e=this.options.orientation.axis,t=s.convert(this.body.range.start,"Number"),i=s.convert(this.body.range.end,"Number"),o=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf(),n=o-h.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this.body.range,o);n-=this.body.util.toTime(0).valueOf();var r=new a(new Date(t),new Date(i),n,this.body.hiddenDates);r.setMoment(this.options.moment),this.options.format&&r.setFormat(this.options.format),this.options.timeAxis&&r.setScale(this.options.timeAxis),this.step=r;var d=this.dom;d.redundant.lines=d.lines,d.redundant.majorTexts=d.majorTexts,d.redundant.minorTexts=d.minorTexts,d.lines=[],d.majorTexts=[],d.minorTexts=[];var c,u,p,f,m,g,v,y,b=0,w=void 0,_=0;for(r.start(),c=r.getCurrent(),p=this.body.util.toScreen(c);r.hasNext()&&1e3>_;){_++,f=r.isMajor(),y=r.getClassName(),v=r.getLabelMinor(),c,u=p,r.next(),c=r.getCurrent(),r.isMajor(),m=b;var x=(b=(p=this.body.util.toScreen(c))-u)>=.4*m;if(this.options.showMinorLabels&&x){var k=this._repaintMinorText(u,v,e,y);k.style.width=b+"px"}f&&this.options.showMajorLabels?(u>0&&(void 0==w&&(w=u),k=this._repaintMajorText(u,r.getLabelMajor(),e,y)),g=this._repaintMajorLine(u,b,e,y)):x?g=this._repaintMinorLine(u,b,e,y):g&&(g.style.width=parseInt(g.style.width)+b+"px")}if(1e3!==_||l||(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to 1000 lines."),l=!0),this.options.showMajorLabels){var S=this.body.util.toTime(0),O=r.getLabelMajor(S),C=O.length*(this.props.majorCharWidth||10)+10;(void 0==w||w>C)&&this._repaintMajorText(0,O,e,y)}s.forEach(this.dom.redundant,function(e){for(;e.length;){var t=e.pop();t&&t.parentNode&&t.parentNode.removeChild(t)}})},o.prototype._repaintMinorText=function(e,t,i,o){var n=this.dom.redundant.minorTexts.shift();if(!n){var s=document.createTextNode("");(n=document.createElement("div")).appendChild(s),this.dom.foreground.appendChild(n)}return this.dom.minorTexts.push(n),n.childNodes[0].nodeValue=t,n.style.top="top"==i?this.props.majorLabelHeight+"px":"0",this.options.rtl?(n.style.left="",n.style.right=e+"px"):n.style.left=e+"px",n.className="vis-text vis-minor "+o,n},o.prototype._repaintMajorText=function(e,t,i,o){var n=this.dom.redundant.majorTexts.shift();if(!n){var s=document.createTextNode(t);(n=document.createElement("div")).appendChild(s),this.dom.foreground.appendChild(n)}return this.dom.majorTexts.push(n),n.childNodes[0].nodeValue=t,n.className="vis-text vis-major "+o,n.style.top="top"==i?"0":this.props.minorLabelHeight+"px",this.options.rtl?(n.style.left="",n.style.right=e+"px"):n.style.left=e+"px",n},o.prototype._repaintMinorLine=function(e,t,i,o){var n=this.dom.redundant.lines.shift();n||(n=document.createElement("div"),this.dom.background.appendChild(n)),this.dom.lines.push(n);var s=this.props;return n.style.top="top"==i?s.majorLabelHeight+"px":this.body.domProps.top.height+"px",n.style.height=s.minorLineHeight+"px",this.options.rtl?(n.style.left="",n.style.right=e-s.minorLineWidth/2+"px",n.className="vis-grid vis-vertical-rtl vis-minor "+o):(n.style.left=e-s.minorLineWidth/2+"px",n.className="vis-grid vis-vertical vis-minor "+o),n.style.width=t+"px",n},o.prototype._repaintMajorLine=function(e,t,i,o){var n=this.dom.redundant.lines.shift();n||(n=document.createElement("div"),this.dom.background.appendChild(n)),this.dom.lines.push(n);var s=this.props;return n.style.top="top"==i?"0":this.body.domProps.top.height+"px",this.options.rtl?(n.style.left="",n.style.right=e-s.majorLineWidth/2+"px",n.className="vis-grid vis-vertical-rtl vis-major "+o):(n.style.left=e-s.majorLineWidth/2+"px",n.className="vis-grid vis-vertical vis-major "+o),n.style.height=s.majorLineHeight+"px",n.style.width=t+"px",n},o.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth};var l=!1;e.exports=o},function(e,t,i){function o(e){this.active=!1,this.dom={container:e},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=r(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var t=this;["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(function(e){t.hammer.on(e,function(e){e.stopPropagation()})}),document&&document.body&&(this.onClick=function(i){(function(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1})(i.target,e)||t.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=n(),this.escListener=this.deactivate.bind(this)}var n=i(23),s=i(13),r=i(20),a=i(1);s(o.prototype),o.current=null,o.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.hammer.destroy(),this.hammer=null},o.prototype.activate=function(){o.current&&o.current.deactivate(),o.current=this,this.active=!0,this.dom.overlay.style.display="none",a.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)},o.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="",a.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},o.prototype._onTapOverlay=function(e){this.activate(),e.stopPropagation()},e.exports=o},function(e,t,i){function o(e,t){this.body=e,this.defaultOptions={moment:a,locales:h,locale:"en",id:void 0,title:void 0},this.options=s.extend({},this.defaultOptions),t&&t.time?this.customTime=t.time:this.customTime=new Date,this.eventParams={},this.setOptions(t),this._create()}var n=i(20),s=i(1),r=i(31),a=i(2),h=i(47);o.prototype=new r,o.prototype.setOptions=function(e){e&&s.selectiveExtend(["moment","locale","locales","id"],this.options,e)},o.prototype._create=function(){var e=document.createElement("div");e["custom-time"]=this,e.className="vis-custom-time "+(this.options.id||""),e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e;var t=document.createElement("div");t.style.position="relative",t.style.top="0px",t.style.left="-10px",t.style.height="100%",t.style.width="20px",e.appendChild(t),this.hammer=new n(t),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:n.DIRECTION_HORIZONTAL})},o.prototype.destroy=function(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null},o.prototype.redraw=function(){var e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar));var t=this.body.util.toScreen(this.customTime),i=this.options.locales[this.options.locale];i||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline.html#Localization"),this.warned=!0),i=this.options.locales.en);var o=this.options.title;return void 0===o&&(o=(o=i.time+": "+this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")).charAt(0).toUpperCase()+o.substring(1)),this.bar.style.left=t+"px",this.bar.title=o,!1},o.prototype.hide=function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)},o.prototype.setCustomTime=function(e){this.customTime=s.convert(e,"Date"),this.redraw()},o.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},o.prototype.setCustomTitle=function(e){this.options.title=e},o.prototype._onDragStart=function(e){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,e.stopPropagation()},o.prototype._onDrag=function(e){if(this.eventParams.dragging){var t=this.body.util.toScreen(this.eventParams.customTime)+e.deltaX,i=this.body.util.toTime(t);this.setCustomTime(i),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf())}),e.stopPropagation()}},o.prototype._onDragEnd=function(e){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf())}),e.stopPropagation())},o.customTimeFromTarget=function(e){for(var t=e.target;t;){if(t.hasOwnProperty("custom-time"))return t["custom-time"];t=t.parentNode}return null},e.exports=o},function(e,t){t.en={current:"current",time:"time"},t.en_EN=t.en,t.en_US=t.en,t.nl={current:"huidige",time:"tijd"},t.nl_NL=t.nl,t.nl_BE=t.nl},function(e,t,i){function o(e,t){this.body=e,this.defaultOptions={rtl:!1,showCurrentTime:!0,moment:r,locales:a,locale:"en"},this.options=n.extend({},this.defaultOptions),this.offset=0,this._create(),this.setOptions(t)}var n=i(1),s=i(31),r=i(2),a=i(47);o.prototype=new s,o.prototype._create=function(){var e=document.createElement("div");e.className="vis-current-time",e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e},o.prototype.destroy=function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null},o.prototype.setOptions=function(e){e&&n.selectiveExtend(["rtl","showCurrentTime","moment","locale","locales"],this.options,e)},o.prototype.redraw=function(){if(this.options.showCurrentTime){var e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar),this.start());var t=this.options.moment((new Date).valueOf()+this.offset),i=this.body.util.toScreen(t),o=this.options.locales[this.options.locale];o||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline/#Localization"),this.warned=!0),o=this.options.locales.en);var n=o.current+" "+o.time+": "+t.format("dddd, MMMM Do YYYY, H:mm:ss");n=n.charAt(0).toUpperCase()+n.substring(1),this.options.rtl?this.bar.style.right=i+"px":this.bar.style.left=i+"px",this.bar.title=n}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1},o.prototype.start=function(){var e=this;!function t(){e.stop();var i=1/e.body.range.conversion(e.body.domProps.center.width).scale/10;30>i&&(i=30),i>1e3&&(i=1e3),e.redraw(),e.body.emitter.emit("currentTimeTick"),e.currentTimeTimer=setTimeout(t,i)}()},o.prototype.stop=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)},o.prototype.setCurrentTime=function(e){var t=n.convert(e,"Date").valueOf(),i=(new Date).valueOf();this.offset=t-i,this.redraw()},o.prototype.getCurrentTime=function(){return new Date((new Date).valueOf()+this.offset)},e.exports=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i="string",o="boolean",n="number",s="object",r="moment",a={configure:{enabled:{boolean:o},filter:{boolean:o,function:"function"},container:{dom:"dom"},__type__:{object:s,boolean:o,function:"function"}},align:{string:i},rtl:{boolean:o,undefined:"undefined"},autoResize:{boolean:o},throttleRedraw:{number:n},clickToUse:{boolean:o},dataAttributes:{string:i,array:"array"},editable:{add:{boolean:o,undefined:"undefined"},remove:{boolean:o,undefined:"undefined"},updateGroup:{boolean:o,undefined:"undefined"},updateTime:{boolean:o,undefined:"undefined"},__type__:{boolean:o,object:s}},end:{number:n,date:"date",string:i,moment:r},format:{minorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:s}},majorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:s}},__type__:{object:s}},moment:{function:"function"},groupOrder:{string:i,function:"function"},groupEditable:{add:{boolean:o,undefined:"undefined"},remove:{boolean:o,undefined:"undefined"},order:{boolean:o,undefined:"undefined"},__type__:{boolean:o,object:s}},groupOrderSwap:{function:"function"},height:{string:i,number:n},hiddenDates:{start:{date:"date",number:n,string:i,moment:r},end:{date:"date",number:n,string:i,moment:r},repeat:{string:i},__type__:{object:s,array:"array"}},itemsAlwaysDraggable:{boolean:o},locale:{string:i},locales:{__any__:{any:"any"},__type__:{object:s}},margin:{axis:{number:n},item:{horizontal:{number:n,undefined:"undefined"},vertical:{number:n,undefined:"undefined"},__type__:{object:s,number:n}},__type__:{object:s,number:n}},max:{date:"date",number:n,string:i,moment:r},maxHeight:{number:n,string:i},maxMinorChars:{number:n},min:{date:"date",number:n,string:i,moment:r},minHeight:{number:n,string:i},moveable:{boolean:o},multiselect:{boolean:o},multiselectPerGroup:{boolean:o},onAdd:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},order:{function:"function"},orientation:{axis:{string:i,undefined:"undefined"},item:{string:i,undefined:"undefined"},__type__:{string:i,object:s}},selectable:{boolean:o},showCurrentTime:{boolean:o},showMajorLabels:{boolean:o},showMinorLabels:{boolean:o},stack:{boolean:o},snap:{function:"function",null:"null"},start:{date:"date",number:n,string:i,moment:r},template:{function:"function"},groupTemplate:{function:"function"},timeAxis:{scale:{string:i,undefined:"undefined"},step:{number:n,undefined:"undefined"},__type__:{object:s}},type:{string:i},width:{string:i,number:n},zoomable:{boolean:o},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:n},zoomMin:{number:n},__type__:{object:s}};t.allOptions=a,t.configureOptions={global:{align:["center","left","right"],direction:!1,autoResize:!0,throttleRedraw:[10,0,1e3,10],clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},groupsDraggable:!1,height:"",locale:"",margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,start:"",type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1]}}},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,i,o){if(!(Array.isArray(i)||i instanceof d||i instanceof l)&&i instanceof Object){var n=o;o=i,i=n}var s=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:a,width:null,height:null,maxHeight:null,minHeight:null},this.options=h.deepExtend({},this.defaultOptions),this._create(e),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{toScreen:s._toScreen.bind(s),toGlobalScreen:s._toGlobalScreen.bind(s),toTime:s._toTime.bind(s),toGlobalTime:s._toGlobalTime.bind(s)}},this.range=new c(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new p(this.body),this.components.push(this.timeAxis),this.currentTime=new f(this.body),this.components.push(this.currentTime),this.linegraph=new g(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(e){s.emit("click",s.getEventProperties(e))}),this.on("doubletap",function(e){s.emit("doubleClick",s.getEventProperties(e))}),this.dom.root.oncontextmenu=function(e){s.emit("contextmenu",s.getEventProperties(e))},o&&this.setOptions(o),i&&this.setGroups(i),t&&this.setItems(t),this._redraw()}var s=o(i(26)),r=o(i(29)),a=(i(13),i(20),i(2)),h=i(1),d=i(9),l=i(11),c=i(30),u=i(33),p=i(44),f=i(48),m=i(46),g=i(51),v=i(29).printStyle,y=i(59).allOptions,b=i(59).configureOptions;n.prototype=new u,n.prototype.setOptions=function(e){!0===r.default.validate(e,y)&&console.log("%cErrors have been found in the supplied options object.",v),u.prototype.setOptions.call(this,e)},n.prototype.setItems=function(e){var t,i=null==this.itemsData;if(t=e?e instanceof d||e instanceof l?e:new d(e,{type:{start:"Date",end:"Date"}}):null,this.itemsData=t,this.linegraph&&this.linegraph.setItems(t),i)if(void 0!=this.options.start||void 0!=this.options.end){var o=void 0!=this.options.start?this.options.start:null,n=void 0!=this.options.end?this.options.end:null;this.setWindow(o,n,{animation:!1})}else this.fit({animation:!1})},n.prototype.setGroups=function(e){var t;t=e?e instanceof d||e instanceof l?e:new d(e):null,this.groupsData=t,this.linegraph.setGroups(t)},n.prototype.getLegend=function(e,t,i){return void 0===t&&(t=15),void 0===i&&(i=15),void 0!==this.linegraph.groups[e]?this.linegraph.groups[e].getLegend(t,i):"cannot find group:'"+e+"'"},n.prototype.isGroupVisible=function(e){return void 0!==this.linegraph.groups[e]&&(this.linegraph.groups[e].visible&&(void 0===this.linegraph.options.groups.visibility[e]||1==this.linegraph.options.groups.visibility[e]))},n.prototype.getDataRange=function(){var e=null,t=null;for(var i in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(i)&&1==this.linegraph.groups[i].visible)for(var o=0;o<this.linegraph.groups[i].itemsData.length;o++){var n=this.linegraph.groups[i].itemsData[o],s=h.convert(n.x,"Date").valueOf();e=null==e?s:e>s?s:e,t=null==t?s:s>t?s:t}return{min:null!=e?new Date(e):null,max:null!=t?new Date(t):null}},n.prototype.getEventProperties=function(e){var t=e.center?e.center.x:e.clientX,i=e.center?e.center.y:e.clientY,o=t-h.getAbsoluteLeft(this.dom.centerContainer),n=i-h.getAbsoluteTop(this.dom.centerContainer),s=this._toTime(o),r=m.customTimeFromTarget(e),a=h.getTarget(e),d=null;h.hasParent(a,this.timeAxis.dom.foreground)?d="axis":this.timeAxis2&&h.hasParent(a,this.timeAxis2.dom.foreground)?d="axis":h.hasParent(a,this.linegraph.yAxisLeft.dom.frame)?d="data-axis":h.hasParent(a,this.linegraph.yAxisRight.dom.frame)?d="data-axis":h.hasParent(a,this.linegraph.legendLeft.dom.frame)?d="legend":h.hasParent(a,this.linegraph.legendRight.dom.frame)?d="legend":null!=r?d="custom-time":h.hasParent(a,this.currentTime.bar)?d="current-time":h.hasParent(a,this.dom.center)&&(d="background");var l=[],c=this.linegraph.yAxisLeft,u=this.linegraph.yAxisRight;return c.hidden||l.push(c.screenToValue(n)),u.hidden||l.push(u.screenToValue(n)),{event:e,what:d,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:o,y:n,time:s,value:l}},n.prototype._createConfigurator=function(){return new s.default(this,this.dom.container,b)},e.exports=n},function(e,t,i){function o(e,t){this.id=s.randomUUID(),this.body=e,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=s.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(e,t,o){i._onAdd(t.items)},update:function(e,t,o){i._onUpdate(t.items)},remove:function(e,t,o){i._onRemove(t.items)}},this.groupListeners={add:function(e,t,o){i._onAddGroups(t.items)},update:function(e,t,o){i._onUpdateGroups(t.items)},remove:function(e,t,o){i._onRemoveGroups(t.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(t),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){i.lastStart=i.body.range.start,i.svg.style.left=s.option.asSize(-i.props.width),i.forceGraphUpdate=!0,i.redraw.call(i)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=i(1),r=i(8),a=i(9),h=i(11),d=i(31),l=i(52),c=i(54),u=i(58),p=i(55),f=i(57),m=i(56),g="__ungrouped__";o.prototype=new d,o.prototype._create=function(){var e=document.createElement("div");e.className="vis-line-graph",this.dom.frame=e,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",e.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new l(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new l(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new u(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new u(this.body,this.options.legend,"right",this.options.groups),this.show()},o.prototype.setOptions=function(e){if(e){void 0===e.graphHeight&&void 0!==e.height?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):void 0!==this.body.domProps.centerContainer.height&&void 0!==e.graphHeight&&parseInt((e.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),s.selectiveDeepExtend(["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"],this.options,e),s.mergeOptions(this.options,e,"interpolation"),s.mergeOptions(this.options,e,"drawPoints"),s.mergeOptions(this.options,e,"shaded"),s.mergeOptions(this.options,e,"legend"),e.interpolation&&"object"==n(e.interpolation)&&e.interpolation.parametrization&&("uniform"==e.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==e.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&void 0!==e.dataAxis&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&void 0!==e.legend&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(g)&&this.groups[g].setOptions(e)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))},o.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},o.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},o.prototype.setItems=function(e){var t,i=this,o=this.itemsData;if(e){if(!(e instanceof a||e instanceof h))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=e}else this.itemsData=null;if(o&&(s.forEach(this.itemListeners,function(e,t){o.off(t,e)}),t=o.getIds(),this._onRemove(t)),this.itemsData){var n=this.id;s.forEach(this.itemListeners,function(e,t){i.itemsData.on(t,e,n)}),t=this.itemsData.getIds(),this._onAdd(t)}},o.prototype.setGroups=function(e){var t,i=this;if(this.groupsData){s.forEach(this.groupListeners,function(e,t){i.groupsData.off(t,e)}),t=this.groupsData.getIds(),this.groupsData=null;for(var o=0;o<t.length;o++)this._removeGroup(t[o])}if(e){if(!(e instanceof a||e instanceof h))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=e}else this.groupsData=null;if(this.groupsData){var n=this.id;s.forEach(this.groupListeners,function(e,t){i.groupsData.on(t,e,n)}),t=this.groupsData.getIds(),this._onAddGroups(t)}},o.prototype._onUpdate=function(e){this._updateAllGroupData()},o.prototype._onAdd=function(e){this._onUpdate(e)},o.prototype._onRemove=function(e){this._onUpdate(e)},o.prototype._onUpdateGroups=function(e){this._updateAllGroupData()},o.prototype._onAddGroups=function(e){this._onUpdateGroups(e)},o.prototype._onRemoveGroups=function(e){for(var t=0;t<e.length;t++)this._removeGroup(e[t]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})},o.prototype._removeGroup=function(e){this.groups.hasOwnProperty(e)&&("right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e),this.legendLeft.redraw()),delete this.groups[e])},o.prototype._updateGroup=function(e,t){this.groups.hasOwnProperty(t)?(this.groups[t].update(e),"right"==this.groups[t].options.yAxisOrientation?(this.yAxisRight.updateGroup(t,this.groups[t]),this.legendRight.updateGroup(t,this.groups[t]),this.yAxisLeft.removeGroup(t),this.legendLeft.removeGroup(t)):(this.yAxisLeft.updateGroup(t,this.groups[t]),this.legendLeft.updateGroup(t,this.groups[t]),this.yAxisRight.removeGroup(t),this.legendRight.removeGroup(t))):(this.groups[t]=new c(e,t,this.options,this.groupsUsingDefaultStyles),"right"==this.groups[t].options.yAxisOrientation?(this.yAxisRight.addGroup(t,this.groups[t]),this.legendRight.addGroup(t,this.groups[t])):(this.yAxisLeft.addGroup(t,this.groups[t]),this.legendLeft.addGroup(t,this.groups[t]))),this.legendLeft.redraw(),this.legendRight.redraw()},o.prototype._updateAllGroupData=function(){if(null!=this.itemsData){for(var e={},t=this.itemsData.get(),i={},o=0;o<t.length;o++){null!==(h=(n=t[o]).group)&&void 0!==h||(h=g),i.hasOwnProperty(h)?i[h]++:i[h]=1}for(o=0;o<t.length;o++){var n;null!==(h=(n=t[o]).group)&&void 0!==h||(h=g),e.hasOwnProperty(h)||(e[h]=new Array(i[h]));var r=s.bridgeObject(n);r.x=s.convert(n.x,"Date"),r.orginalY=n.y,r.y=Number(n.y);var a=e[h].length-i[h]--;e[h][a]=r}for(var h in this.groups)this.groups.hasOwnProperty(h)&&(e.hasOwnProperty(h)||(e[h]=new Array(0)));for(var h in e)if(e.hasOwnProperty(h))if(0==e[h].length)this.groups.hasOwnProperty(h)&&this._removeGroup(h);else{var d=void 0;void 0!=this.groupsData&&(d=this.groupsData.get(h)),void 0==d&&(d={id:h,content:this.options.defaultGroup+h}),this._updateGroup(d,h),this.groups[h].setItems(e[h])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}},o.prototype.redraw=function(){var e=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,e=this._isResized()||e;var t=this.body.range.end-this.body.range.start,i=t!=this.lastVisibleInterval;if(this.lastVisibleInterval=t,1==e&&(this.svg.style.width=s.option.asSize(3*this.props.width),this.svg.style.left=s.option.asSize(-this.props.width),-1==(this.options.height+"").indexOf("%")&&1!=this.updateSVGheightOnResize||(this.updateSVGheight=!0)),1==this.updateSVGheight?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",1==e||1==i||1==this.abortedGraphUpdate||1==this.forceGraphUpdate)e=this._updateGraph()||e,this.forceGraphUpdate=!1;else if(0!=this.lastStart){var o=this.body.range.start-this.lastStart,n=this.body.range.end-this.body.range.start;if(0!=this.props.width){var r=o*(this.props.width/n);this.svg.style.left=-this.props.width-r+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),e},o.prototype._getSortedGroupIds=function(){var e=[];for(var t in this.groups)if(this.groups.hasOwnProperty(t)){var i=this.groups[t];1!=i.visible||void 0!==this.options.groups.visibility[t]&&1!=this.options.groups.visibility[t]||e.push({id:t,zIndex:i.options.zIndex})}s.insertSort(e,function(e,t){var i=e.zIndex,o=t.zIndex;return void 0===i&&(i=0),void 0===o&&(o=0),i==o?0:o>i?-1:1});for(var o=new Array(e.length),n=0;n<e.length;n++)o[n]=e[n].id;return o},o.prototype._updateGraph=function(){if(r.prepareElements(this.svgElements),0!=this.props.width&&null!=this.itemsData){var e,t,i={},o=this.body.util.toGlobalTime(-this.body.domProps.root.width),n=this.body.util.toGlobalTime(2*this.body.domProps.root.width),s=this._getSortedGroupIds();if(s.length>0){var a={};for(this._getRelevantData(s,a,o,n),this._applySampling(s,a),t=0;t<s.length;t++)this._convertXcoordinates(a[s[t]]);if(this._getYRanges(s,a,i),1==this._updateYAxis(s,i))return r.cleanupElements(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var h=void 0;for(t=0;t<s.length;t++)e=this.groups[s[t]],!0===this.options.stack&&"line"===this.options.style&&(void 0!=e.options.excludeFromStacking&&e.options.excludeFromStacking||(void 0!=h&&(this._stack(a[e.id],a[h.id]),1==e.options.shaded.enabled&&"group"!==e.options.shaded.orientation&&("top"==e.options.shaded.orientation&&"group"!==h.options.shaded.orientation?(h.options.shaded.orientation="group",h.options.shaded.groupId=e.id):(e.options.shaded.orientation="group",e.options.shaded.groupId=h.id))),h=e)),this._convertYcoordinates(a[s[t]],e);var d={};for(t=0;t<s.length;t++)if(e=this.groups[s[t]],"line"===e.options.style&&1==e.options.shaded.enabled){var l=a[s[t]];if(null==l||0==l.length)continue;if(d.hasOwnProperty(s[t])||(d[s[t]]=f.calcPath(l,e)),"group"===e.options.shaded.orientation){var c=e.options.shaded.groupId;if(-1===s.indexOf(c)){console.log(e.id+": Unknown shading group target given:"+c);continue}d.hasOwnProperty(c)||(d[c]=f.calcPath(a[c],this.groups[c])),f.drawShading(d[s[t]],e,d[c],this.framework)}else f.drawShading(d[s[t]],e,void 0,this.framework)}for(p.draw(s,a,this.framework),t=0;t<s.length;t++)if(e=this.groups[s[t]],a[s[t]].length>0)switch(e.options.style){case"line":d.hasOwnProperty(s[t])||(d[s[t]]=f.calcPath(a[s[t]],e)),f.draw(d[s[t]],e,this.framework);case"point":case"points":"point"!=e.options.style&&"points"!=e.options.style&&1!=e.options.drawPoints.enabled||m.draw(a[s[t]],e,this.framework)}}}return r.cleanupElements(this.svgElements),!1},o.prototype._stack=function(e,t){var i,o,n,s,r;i=0;for(var a=0;a<e.length;a++){s=void 0,r=void 0;for(var h=i;h<t.length;h++){if(t[h].x===e[a].x){s=t[h],r=t[h],i=h;break}if(t[h].x>e[a].x){r=t[h],s=0==h?r:t[h-1],i=h;break}}void 0===r&&(s=t[t.length-1],r=t[t.length-1]),o=r.x-s.x,n=r.y-s.y,e[a].y=0==o?e[a].orginalY+r.y:e[a].orginalY+n/o*(e[a].x-s.x)+s.y}},o.prototype._getRelevantData=function(e,t,i,o){var n,r,a,h;if(e.length>0)for(r=0;r<e.length;r++){var d=(n=this.groups[e[r]]).getItems();if(1==n.options.sort){var l=function(e,t){return e.getTime()==t.getTime()?0:t>e?-1:1},c=Math.max(0,s.binarySearchValue(d,i,"x","before",l)),u=Math.min(d.length,s.binarySearchValue(d,o,"x","after",l)+1);0>=u&&(u=d.length);var p=new Array(u-c);for(a=c;u>a;a++)h=n.itemsData[a],p[a-c]=h;t[e[r]]=p}else t[e[r]]=n.itemsData}},o.prototype._applySampling=function(e,t){var i;if(e.length>0)for(var o=0;o<e.length;o++)if(i=this.groups[e[o]],1==i.options.sampling){var n=t[e[o]];if(n.length>0){var s,r=n.length,a=r/(this.body.util.toGlobalScreen(n[n.length-1].x)-this.body.util.toGlobalScreen(n[0].x));s=Math.min(Math.ceil(.2*r),Math.max(1,Math.round(a)));for(var h=new Array(r),d=0;r>d;d+=s){h[Math.round(d/s)]=n[d]}t[e[o]]=h.splice(0,Math.round(r/s))}}},o.prototype._getYRanges=function(e,t,i){var o,n,s,r,a=[],h=[];if(e.length>0){for(s=0;s<e.length;s++)o=t[e[s]],r=this.groups[e[s]].options,o.length>0&&(n=this.groups[e[s]],!0===r.stack&&"bar"===r.style?"left"===r.yAxisOrientation?a=a.concat(n.getItems()):h=h.concat(n.getItems()):i[e[s]]=n.getYRange(o,e[s]));p.getStackedYRange(a,i,e,"__barStackLeft","left"),p.getStackedYRange(h,i,e,"__barStackRight","right")}},o.prototype._updateYAxis=function(e,t){var i,o,n=!1,s=!1,r=!1,a=1e9,h=1e9,d=-1e9,l=-1e9;if(e.length>0){for(var c=0;c<e.length;c++){var u=this.groups[e[c]];u&&"right"!=u.options.yAxisOrientation?(s=!0,a=1e9,d=-1e9):u&&u.options.yAxisOrientation&&(r=!0,h=1e9,l=-1e9)}for(c=0;c<e.length;c++)t.hasOwnProperty(e[c])&&!0!==t[e[c]].ignore&&(i=t[e[c]].min,o=t[e[c]].max,"right"!=t[e[c]].yAxisOrientation?(s=!0,a=a>i?i:a,d=o>d?o:d):(r=!0,h=h>i?i:h,l=o>l?o:l));1==s&&this.yAxisLeft.setRange(a,d),1==r&&this.yAxisRight.setRange(h,l)}n=this._toggleAxisVisiblity(s,this.yAxisLeft)||n,n=this._toggleAxisVisiblity(r,this.yAxisRight)||n,1==r&&1==s?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!s,this.yAxisRight.masterAxis=this.yAxisLeft,0==this.yAxisRight.master?(this.yAxisLeft.lineOffset=1==r?this.yAxisRight.width:0,n=this.yAxisLeft.redraw()||n,n=this.yAxisRight.redraw()||n):n=this.yAxisRight.redraw()||n;var p=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(c=0;c<p.length;c++)-1!=e.indexOf(p[c])&&e.splice(e.indexOf(p[c]),1);return n},o.prototype._toggleAxisVisiblity=function(e,t){var i=!1;return 0==e?t.dom.frame.parentNode&&0==t.hidden&&(t.hide(),i=!0):t.dom.frame.parentNode||1!=t.hidden||(t.show(),i=!0),i},o.prototype._convertXcoordinates=function(e){for(var t=this.body.util.toScreen,i=0;i<e.length;i++)e[i].screen_x=t(e[i].x)+this.props.width,e[i].screen_y=e[i].y},o.prototype._convertYcoordinates=function(e,t){var i=this.yAxisLeft,o=Number(this.svg.style.height.replace("px",""));"right"==t.options.yAxisOrientation&&(i=this.yAxisRight);for(var n=0;n<e.length;n++)e[n].screen_y=Math.round(i.convertValue(e[n].y));t.setZeroPosition(Math.min(o,i.convertValue(0)))},e.exports=o},function(e,t,i){function o(e,t,i,o){this.id=n.randomUUID(),this.body=e,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:function(e){return""+parseFloat(e.toPrecision(3))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format:function(e){return""+parseFloat(e.toPrecision(3))},title:{text:void 0,style:void 0}}},this.linegraphOptions=o,this.linegraphSVG=i,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=n.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(t),this.width=Number((""+this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};var s=this;this.body.emitter.on("verticalDrag",function(){s.dom.lineContainer.style.top=s.body.domProps.scrollTop+"px"})}var n=i(1),s=i(8),r=i(31),a=i(53);o.prototype=new r,o.prototype.addGroup=function(e,t){this.groups.hasOwnProperty(e)||(this.groups[e]=t),this.amountOfGroups+=1},o.prototype.updateGroup=function(e,t){this.groups.hasOwnProperty(e)||(this.amountOfGroups+=1),this.groups[e]=t},o.prototype.removeGroup=function(e){this.groups.hasOwnProperty(e)&&(delete this.groups[e],this.amountOfGroups-=1)},o.prototype.setOptions=function(e){if(e){var t=!1;this.options.orientation!=e.orientation&&void 0!==e.orientation&&(t=!0);n.selectiveDeepExtend(["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"],this.options,e),this.minWidth=Number((""+this.options.width).replace("px","")),!0===t&&this.dom.frame&&(this.hide(),this.show())}},o.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)},o.prototype._redrawGroupIcons=function(){s.prepareElements(this.svgElements);var e,t=this.options.iconWidth,i=11.5;e="left"===this.options.orientation?4:this.width-t-4;var o=Object.keys(this.groups);o.sort(function(e,t){return t>e?-1:1});for(var n=0;n<o.length;n++){var r=o[n];!0!==this.groups[r].visible||void 0!==this.linegraphOptions.visibility[r]&&!0!==this.linegraphOptions.visibility[r]||(this.groups[r].getLegend(t,15,this.framework,e,i),i+=19)}s.cleanupElements(this.svgElements),this.iconsRemoved=!1},o.prototype._cleanupIcons=function(){!1===this.iconsRemoved&&(s.prepareElements(this.svgElements),s.cleanupElements(this.svgElements),this.iconsRemoved=!0)},o.prototype.show=function(){this.hidden=!1,this.dom.frame.parentNode||(this.options.rtl,this.body.dom.left.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer)},o.prototype.hide=function(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.parentNode&&this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer)},o.prototype.setRange=function(e,t){this.range.start=e,this.range.end=t},o.prototype.redraw=function(){var e=!1,t=0;this.dom.lineContainer.style.top=this.body.domProps.scrollTop+"px";for(var i in this.groups)this.groups.hasOwnProperty(i)&&(!0!==this.groups[i].visible||void 0!==this.linegraphOptions.visibility[i]&&!0!==this.linegraphOptions.visibility[i]||t++);if(0===this.amountOfGroups||0===t)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=this.height+"px",this.width=!0===this.options.visible?Number((""+this.options.width).replace("px","")):0;var o=this.props,n=this.dom.frame;n.className="vis-data-axis",this._calculateCharSize();var s=this.options.orientation,r=this.options.showMinorLabels,a=this.options.showMajorLabels;o.minorLabelHeight=r?o.minorCharHeight:0,o.majorLabelHeight=a?o.majorCharHeight:0,o.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset,o.minorLineHeight=1,o.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset,o.majorLineHeight=1,"left"===s?(n.style.top="0",n.style.left="0",n.style.bottom="",n.style.width=this.width+"px",n.style.height=this.height+"px",this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(n.style.top="",n.style.bottom="0",n.style.left="0",n.style.width=this.width+"px",n.style.height=this.height+"px",this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),e=this._redrawLabels(),e=this._isResized()||e,!0===this.options.icons?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(s)}return e},o.prototype._redrawLabels=function(){var e=this,t=!1;s.prepareElements(this.DOMelements.lines),s.prepareElements(this.DOMelements.labels);var i=this.options.orientation,o=void 0!=this.options[i].range?this.options[i].range:{},n=!0;void 0!=o.max&&(this.range.end=o.max,n=!1);var r=!0;void 0!=o.min&&(this.range.start=o.min,r=!1),this.scale=new a(this.range.start,this.range.end,r,n,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[i].format),!1===this.master&&void 0!=this.masterAxis&&this.scale.followScale(this.masterAxis.scale),this.maxLabelSize=0,this.scale.getLines().forEach(function(t){var o=t.y,n=t.major;e.options.showMinorLabels&&!1===n&&e._redrawLabel(o-2,t.val,i,"vis-y-axis vis-minor",e.props.minorCharHeight),n&&o>=0&&e._redrawLabel(o-2,t.val,i,"vis-y-axis vis-major",e.props.majorCharHeight),!0===e.master&&(n?e._redrawLine(o,i,"vis-grid vis-horizontal vis-major",e.options.majorLinesOffset,e.props.majorLineWidth):e._redrawLine(o,i,"vis-grid vis-horizontal vis-minor",e.options.minorLinesOffset,e.props.minorLineWidth))});var h=0;void 0!==this.options[i].title&&void 0!==this.options[i].title.text&&(h=this.props.titleCharHeight);var d=!0===this.options.icons?Math.max(this.options.iconWidth,h)+this.options.labelOffsetX+15:h+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-d&&!0===this.options.visible?(this.width=this.maxLabelSize+d,this.options.width=this.width+"px",s.cleanupElements(this.DOMelements.lines),s.cleanupElements(this.DOMelements.labels),this.redraw(),t=!0):this.maxLabelSize<this.width-d&&!0===this.options.visible&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+d),this.options.width=this.width+"px",s.cleanupElements(this.DOMelements.lines),s.cleanupElements(this.DOMelements.labels),this.redraw(),t=!0):(s.cleanupElements(this.DOMelements.lines),s.cleanupElements(this.DOMelements.labels),t=!1),t},o.prototype.convertValue=function(e){return this.scale.convertValue(e)},o.prototype.screenToValue=function(e){return this.scale.screenToValue(e)},o.prototype._redrawLabel=function(e,t,i,o,n){var r=s.getDOMElement("div",this.DOMelements.labels,this.dom.frame);r.className=o,r.innerHTML=t,"left"===i?(r.style.left="-"+this.options.labelOffsetX+"px",r.style.textAlign="right"):(r.style.right="-"+this.options.labelOffsetX+"px",r.style.textAlign="left"),r.style.top=e-.5*n+this.options.labelOffsetY+"px",t+="";var a=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<t.length*a&&(this.maxLabelSize=t.length*a)},o.prototype._redrawLine=function(e,t,i,o,n){if(!0===this.master){var r=s.getDOMElement("div",this.DOMelements.lines,this.dom.lineContainer);r.className=i,r.innerHTML="","left"===t?r.style.left=this.width-o+"px":r.style.right=this.width-o+"px",r.style.width=n+"px",r.style.top=e+"px"}},o.prototype._redrawTitle=function(e){if(s.prepareElements(this.DOMelements.title),void 0!==this.options[e].title&&void 0!==this.options[e].title.text){var t=s.getDOMElement("div",this.DOMelements.title,this.dom.frame);t.className="vis-y-axis vis-title vis-"+e,t.innerHTML=this.options[e].title.text,void 0!==this.options[e].title.style&&n.addCssText(t,this.options[e].title.style),"left"===e?t.style.left=this.props.titleCharHeight+"px":t.style.right=this.props.titleCharHeight+"px",t.style.width=this.height+"px"}s.cleanupElements(this.DOMelements.title)},o.prototype._calculateCharSize=function(){if(!("minorCharHeight"in this.props)){var e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-minor vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.minorCharHeight=t.clientHeight,this.props.minorCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}if(!("majorCharHeight"in this.props)){var i=document.createTextNode("0"),o=document.createElement("div");o.className="vis-y-axis vis-major vis-measure",o.appendChild(i),this.dom.frame.appendChild(o),this.props.majorCharHeight=o.clientHeight,this.props.majorCharWidth=o.clientWidth,this.dom.frame.removeChild(o)}if(!("titleCharHeight"in this.props)){var n=document.createTextNode("0"),s=document.createElement("div");s.className="vis-y-axis vis-title vis-measure",s.appendChild(n),this.dom.frame.appendChild(s),this.props.titleCharHeight=s.clientHeight,this.props.titleCharWidth=s.clientWidth,this.dom.frame.removeChild(s)}},e.exports=o},function(e,t){function i(e,t,i,o,n,s){var r=!(arguments.length<=6||void 0===arguments[6])&&arguments[6],a=!(arguments.length<=7||void 0===arguments[7])&&arguments[7];if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=n,this.majorCharHeight=s,this._start=e,this._end=t,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=r,this.autoScaleStart=i,this.autoScaleEnd=o,this.formattingFunction=a,i||o){var h=this,d=function(e){var t=e-e%(h.magnitudefactor*h.minorSteps[h.minorStepIdx]);return e%(h.magnitudefactor*h.minorSteps[h.minorStepIdx])>h.magnitudefactor*h.minorSteps[h.minorStepIdx]*.5?t+h.magnitudefactor*h.minorSteps[h.minorStepIdx]:t};i&&(this._start-=2*this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._start=d(this._start)),o&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=d(this._end)),this.determineScale()}}i.prototype.setCharHeight=function(e){this.majorCharHeight=e},i.prototype.setHeight=function(e){this.containerHeight=e},i.prototype.determineScale=function(){var e=this._end-this._start;this.scale=this.containerHeight/e;var t=this.majorCharHeight/this.scale,i=e>0?Math.round(Math.log(e)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,i);var o=0;0>i&&(o=i);for(var n=!1,s=o;Math.abs(s)<=Math.abs(i);s++){this.magnitudefactor=Math.pow(10,s);for(var r=0;r<this.minorSteps.length;r++){if(this.magnitudefactor*this.minorSteps[r]>=t){n=!0,this.minorStepIdx=r;break}}if(!0===n)break}},i.prototype.is_major=function(e){return e%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])==0},i.prototype.getStep=function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]},i.prototype.getFirstMajor=function(){var e=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(e-this._start%e)%e)},i.prototype.formatValue=function(e){var t=e.toPrecision(5);return"function"==typeof this.formattingFunction&&(t=this.formattingFunction(e)),"number"==typeof t?""+t:"string"==typeof t?t:e.toPrecision(5)},i.prototype.getLines=function(){for(var e=[],t=this.getStep(),i=(t-this._start%t)%t,o=this._start+i;this._end-o>1e-5;o+=t)o!=this._start&&e.push({major:this.is_major(o),y:this.convertValue(o),val:this.formatValue(o)});return e},i.prototype.followScale=function(e){var t=this.minorStepIdx,i=this._start,o=this._end,n=this,s=function(){n.magnitudefactor*=2},r=function(){n.magnitudefactor/=2};e.minorStepIdx<=1&&this.minorStepIdx<=1||e.minorStepIdx>1&&this.minorStepIdx>1||(e.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,2==t?s():(s(),s())):(this.minorStepIdx=2,1==t?r():(r(),r())));for(var a=(e.getLines(),e.convertValue(0)),h=e.getStep()*e.scale,d=!1,l=0;!d&&l++<5;){this.scale=h/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);var c=this.containerHeight/this.scale;this._start=i,this._end=this._start+c;var u=this._end*this.scale,p=this.magnitudefactor*this.majorSteps[this.minorStepIdx],f=this.getFirstMajor()-e.getFirstMajor();if(this.zeroAlign){var m=a-u;this._end+=m/this.scale,this._start=this._end-c}else this.autoScaleStart?(this._start-=f/this.scale,this._end=this._start+c):(this._start+=p-f/this.scale,this._end=this._start+c);if(!this.autoScaleEnd&&this._end>o+1e-5)r(),d=!1;else{if(!this.autoScaleStart&&this._start<i-1e-5){if(!(this.zeroAlign&&i>=0)){r(),d=!1;continue}console.warn("Can't adhere to given 'min' range, due to zeroalign")}this.autoScaleStart&&this.autoScaleEnd&&o-i>c?(s(),d=!1):d=!0}}},i.prototype.convertValue=function(e){return this.containerHeight-(e-this._start)*this.scale},i.prototype.screenToValue=function(e){return(this.containerHeight-e)/this.scale+this._start},e.exports=i},function(e,t,i){function o(e,t,i,o){this.id=t;this.options=s.selectiveBridgeObject(["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"],i),this.usingDefaultStyle=void 0===e.className,this.groupsUsingDefaultStyles=o,this.zeroPosition=0,this.update(e),1==this.usingDefaultStyle&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=void 0===e.visible||e.visible}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=i(1),r=(i(8),i(55)),a=i(57),h=i(56);o.prototype.setItems=function(e){null!=e?(this.itemsData=e,1==this.options.sort&&s.insertSort(this.itemsData,function(e,t){return e.x>t.x?1:-1})):this.itemsData=[]},o.prototype.getItems=function(){return this.itemsData},o.prototype.setZeroPosition=function(e){this.zeroPosition=e},o.prototype.setOptions=function(e){if(void 0!==e){s.selectiveDeepExtend(["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"],this.options,e),"function"==typeof e.drawPoints&&(e.drawPoints={onRender:e.drawPoints}),s.mergeOptions(this.options,e,"interpolation"),s.mergeOptions(this.options,e,"drawPoints"),s.mergeOptions(this.options,e,"shaded"),e.interpolation&&"object"==n(e.interpolation)&&e.interpolation.parametrization&&("uniform"==e.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==e.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}},o.prototype.update=function(e){this.group=e,this.content=e.content||"graph",this.className=e.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=void 0===e.visible||e.visible,this.style=e.style,this.setOptions(e.options)},o.prototype.getLegend=function(e,t,i,o,n){void 0!=i&&null!=i||(i={svg:document.createElementNS("http://www.w3.org/2000/svg","svg"),svgElements:{},options:this.options,groups:[this]});switch(void 0!=o&&null!=o||(o=0),void 0!=n&&null!=n||(n=.5*t),this.options.style){case"line":a.drawIcon(this,o,n,e,t,i);break;case"points":case"point":h.drawIcon(this,o,n,e,t,i);break;case"bar":r.drawIcon(this,o,n,e,t,i)}return{icon:i.svg,label:this.content,orientation:this.options.yAxisOrientation}},o.prototype.getYRange=function(e){for(var t=e[0].y,i=e[0].y,o=0;o<e.length;o++)t=t>e[o].y?e[o].y:t,i=i<e[o].y?e[o].y:i;return{min:t,max:i,yAxisOrientation:this.options.yAxisOrientation}},e.exports=o},function(e,t,i){function o(e,t){}var n=i(8),s=i(56);o.drawIcon=function(e,t,i,o,s,r){var a=.5*s,h=n.getSVGElement("rect",r.svgElements,r.svg);h.setAttributeNS(null,"x",t),h.setAttributeNS(null,"y",i-a),h.setAttributeNS(null,"width",o),h.setAttributeNS(null,"height",2*a),h.setAttributeNS(null,"class","vis-outline");var d=Math.round(.3*o),l=e.options.barChart.width/d,c=Math.round(.4*s),u=Math.round(.75*s),p=Math.round((o-2*d)/3);if(n.drawBar(t+.5*d+p,i+a-c-1,d,c,e.className+" vis-bar",r.svgElements,r.svg,e.style),n.drawBar(t+1.5*d+p+2,i+a-u-1,d,u,e.className+" vis-bar",r.svgElements,r.svg,e.style),1==e.options.drawPoints.enabled){var f={style:e.options.drawPoints.style,styles:e.options.drawPoints.styles,size:e.options.drawPoints.size/l,className:e.className};n.drawPoint(t+.5*d+p,i+a-c-1,f,r.svgElements,r.svg),n.drawPoint(t+1.5*d+p+2,i+a-u-1,f,r.svgElements,r.svg)}},o.draw=function(e,t,i){var r,a,h,d,l,c,u=[],p={},f=0;for(l=0;l<e.length;l++)if(d=i.groups[e[l]],"bar"===d.options.style&&!0===d.visible&&(void 0===i.options.groups.visibility[e[l]]||!0===i.options.groups.visibility[e[l]]))for(c=0;c<t[e[l]].length;c++)u.push({screen_x:t[e[l]][c].screen_x,screen_y:t[e[l]][c].screen_y,x:t[e[l]][c].x,y:t[e[l]][c].y,groupId:e[l],label:t[e[l]][c].label}),f+=1;if(0!==f)for(u.sort(function(e,t){return e.screen_x===t.screen_x?e.groupId<t.groupId?-1:1:e.screen_x-t.screen_x}),o._getDataIntersections(p,u),l=0;l<u.length;l++){var m=void 0!=(d=i.groups[u[l].groupId]).options.barChart.minWidth?d.options.barChart.minWidth:.1*d.options.barChart.width,g=0;if(void 0===p[a=u[l].screen_x])l+1<u.length&&(r=Math.abs(u[l+1].screen_x-a)),h=o._getSafeDrawData(r,d,m);else{var v=l+(p[a].amount-p[a].resolved);p[a].resolved,v<u.length&&(r=Math.abs(u[v].screen_x-a)),h=o._getSafeDrawData(r,d,m),p[a].resolved+=1,!0===d.options.stack&&!0!==d.options.excludeFromStacking?u[l].screen_y<d.zeroPosition?(g=p[a].accumulatedNegative,p[a].accumulatedNegative+=d.zeroPosition-u[l].screen_y):(g=p[a].accumulatedPositive,p[a].accumulatedPositive+=d.zeroPosition-u[l].screen_y):!0===d.options.barChart.sideBySide&&(h.width=h.width/p[a].amount,h.offset+=p[a].resolved*h.width-.5*h.width*(p[a].amount+1))}if(n.drawBar(u[l].screen_x+h.offset,u[l].screen_y-g,h.width,d.zeroPosition-u[l].screen_y,d.className+" vis-bar",i.svgElements,i.svg,d.style),!0===d.options.drawPoints.enabled){var y={screen_x:u[l].screen_x,screen_y:u[l].screen_y-g,x:u[l].x,y:u[l].y,groupId:u[l].groupId,label:u[l].label};s.draw([y],d,i,h.offset)}}},o._getDataIntersections=function(e,t){for(var i,o=0;o<t.length;o++)o+1<t.length&&(i=Math.abs(t[o+1].screen_x-t[o].screen_x)),o>0&&(i=Math.min(i,Math.abs(t[o-1].screen_x-t[o].screen_x))),0===i&&(void 0===e[t[o].screen_x]&&(e[t[o].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),e[t[o].screen_x].amount+=1)},o._getSafeDrawData=function(e,t,i){var o,n;return e<t.options.barChart.width&&e>0?(o=i>e?i:e,n=0,"left"===t.options.barChart.align?n-=.5*e:"right"===t.options.barChart.align&&(n+=.5*e)):(o=t.options.barChart.width,n=0,"left"===t.options.barChart.align?n-=.5*t.options.barChart.width:"right"===t.options.barChart.align&&(n+=.5*t.options.barChart.width)),{width:o,offset:n}},o.getStackedYRange=function(e,t,i,n,s){if(e.length>0){e.sort(function(e,t){return e.screen_x===t.screen_x?e.groupId<t.groupId?-1:1:e.screen_x-t.screen_x});var r={};o._getDataIntersections(r,e),t[n]=o._getStackedYRange(r,e),t[n].yAxisOrientation=s,i.push(n)}},o._getStackedYRange=function(e,t){for(var i,o=t[0].screen_y,n=t[0].screen_y,s=0;s<t.length;s++)i=t[s].screen_x,void 0===e[i]?(o=o>t[s].screen_y?t[s].screen_y:o,n=n<t[s].screen_y?t[s].screen_y:n):t[s].screen_y<0?e[i].accumulatedNegative+=t[s].screen_y:e[i].accumulatedPositive+=t[s].screen_y;for(var r in e)e.hasOwnProperty(r)&&(o=o>e[r].accumulatedNegative?e[r].accumulatedNegative:o,o=o>e[r].accumulatedPositive?e[r].accumulatedPositive:o,n=n<e[r].accumulatedNegative?e[r].accumulatedNegative:n,n=n<e[r].accumulatedPositive?e[r].accumulatedPositive:n);return{min:o,max:n}},e.exports=o},function(e,t,i){function o(e,t){}function n(e,t){return{style:(t=void 0===t?{}:t).style||e.options.drawPoints.style,styles:t.styles||e.options.drawPoints.styles,size:t.size||e.options.drawPoints.size,className:t.className||e.className}}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=i(8);o.draw=function(e,t,i,o){o=o||0;for(var a=(c=t,u=void 0,u=void 0,(l=i).options&&l.options.drawPoints&&l.options.drawPoints.onRender&&"function"==typeof l.options.drawPoints.onRender&&(u=l.options.drawPoints.onRender),c.group.options&&c.group.options.drawPoints&&c.group.options.drawPoints.onRender&&"function"==typeof c.group.options.drawPoints.onRender&&(u=c.group.options.drawPoints.onRender),u),h=0;h<e.length;h++)if(a){var d=a(e[h],t);!0!==d&&"object"!==(void 0===d?"undefined":s(d))||r.drawPoint(e[h].screen_x+o,e[h].screen_y,n(t,d),i.svgElements,i.svg,e[h].label)}else r.drawPoint(e[h].screen_x+o,e[h].screen_y,n(t),i.svgElements,i.svg,e[h].label);var l,c,u},o.drawIcon=function(e,t,i,o,s,a){var h=.5*s,d=r.getSVGElement("rect",a.svgElements,a.svg);d.setAttributeNS(null,"x",t),d.setAttributeNS(null,"y",i-h),d.setAttributeNS(null,"width",o),d.setAttributeNS(null,"height",2*h),d.setAttributeNS(null,"class","vis-outline"),r.drawPoint(t+.5*o,i,n(e),a.svgElements,a.svg)},e.exports=o},function(e,t,i){function o(e,t){}var n=i(8);o.calcPath=function(e,t){if(null!=e&&e.length>0){return 1==t.options.interpolation.enabled?o._catmullRom(e,t):o._linear(e)}},o.drawIcon=function(e,t,i,o,s,r){var a,h,d=.5*s,l=n.getSVGElement("rect",r.svgElements,r.svg);if(l.setAttributeNS(null,"x",t),l.setAttributeNS(null,"y",i-d),l.setAttributeNS(null,"width",o),l.setAttributeNS(null,"height",2*d),l.setAttributeNS(null,"class","vis-outline"),(a=n.getSVGElement("path",r.svgElements,r.svg)).setAttributeNS(null,"class",e.className),void 0!==e.style&&a.setAttributeNS(null,"style",e.style),a.setAttributeNS(null,"d","M"+t+","+i+" L"+(t+o)+","+i),1==e.options.shaded.enabled&&(h=n.getSVGElement("path",r.svgElements,r.svg),"top"==e.options.shaded.orientation?h.setAttributeNS(null,"d","M"+t+", "+(i-d)+"L"+t+","+i+" L"+(t+o)+","+i+" L"+(t+o)+","+(i-d)):h.setAttributeNS(null,"d","M"+t+","+i+" L"+t+","+(i+d)+" L"+(t+o)+","+(i+d)+"L"+(t+o)+","+i),h.setAttributeNS(null,"class",e.className+" vis-icon-fill"),void 0!==e.options.shaded.style&&""!==e.options.shaded.style&&h.setAttributeNS(null,"style",e.options.shaded.style)),1==e.options.drawPoints.enabled){var c={style:e.options.drawPoints.style,styles:e.options.drawPoints.styles,size:e.options.drawPoints.size,className:e.className};n.drawPoint(t+.5*o,i,c,r.svgElements,r.svg)}},o.drawShading=function(e,t,i,o){if(1==t.options.shaded.enabled){var s=Number(o.svg.style.height.replace("px","")),r=n.getSVGElement("path",o.svgElements,o.svg),a="L";1==t.options.interpolation.enabled&&(a="C");var h,d;d="top"==t.options.shaded.orientation?0:"bottom"==t.options.shaded.orientation?s:Math.min(Math.max(0,t.zeroPosition),s),h="group"==t.options.shaded.orientation&&null!=i&&void 0!=i?"M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,a,!1)+" L"+i[i.length-1][0]+","+i[i.length-1][1]+" "+this.serializePath(i,a,!0)+i[0][0]+","+i[0][1]+" Z":"M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,a,!1)+" V"+d+" H"+e[0][0]+" Z",r.setAttributeNS(null,"class",t.className+" vis-fill"),void 0!==t.options.shaded.style&&r.setAttributeNS(null,"style",t.options.shaded.style),r.setAttributeNS(null,"d",h)}},o.draw=function(e,t,i){if(null!=e&&void 0!=e){var o=n.getSVGElement("path",i.svgElements,i.svg);o.setAttributeNS(null,"class",t.className),void 0!==t.style&&o.setAttributeNS(null,"style",t.style);var s="L";1==t.options.interpolation.enabled&&(s="C"),o.setAttributeNS(null,"d","M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,s,!1))}},o.serializePath=function(e,t,i){if(e.length<2)return"";var o=t;if(i)for(var n=e.length-2;n>0;n--)o+=e[n][0]+","+e[n][1]+" ";else for(n=1;n<e.length;n++)o+=e[n][0]+","+e[n][1]+" ";return o},o._catmullRomUniform=function(e){var t,i,o,n,s,r,a=[];a.push([Math.round(e[0].screen_x),Math.round(e[0].screen_y)]);for(var h=e.length,d=0;h-1>d;d++)t=0==d?e[0]:e[d-1],i=e[d],o=e[d+1],n=h>d+2?e[d+2]:o,s={screen_x:(-t.screen_x+6*i.screen_x+o.screen_x)*(1/6),screen_y:(-t.screen_y+6*i.screen_y+o.screen_y)*(1/6)},r={screen_x:(i.screen_x+6*o.screen_x-n.screen_x)*(1/6),screen_y:(i.screen_y+6*o.screen_y-n.screen_y)*(1/6)},a.push([s.screen_x,s.screen_y]),a.push([r.screen_x,r.screen_y]),a.push([o.screen_x,o.screen_y]);return a},o._catmullRom=function(e,t){var i=t.options.interpolation.alpha;if(0==i||void 0===i)return this._catmullRomUniform(e);var o,n,s,r,a,h,d,l,c,u,p,f,m,g,v,y,b,w,_,x=[];x.push([Math.round(e[0].screen_x),Math.round(e[0].screen_y)]);for(var k=e.length,S=0;k-1>S;S++)o=0==S?e[0]:e[S-1],n=e[S],s=e[S+1],r=k>S+2?e[S+2]:s,d=Math.sqrt(Math.pow(o.screen_x-n.screen_x,2)+Math.pow(o.screen_y-n.screen_y,2)),l=Math.sqrt(Math.pow(n.screen_x-s.screen_x,2)+Math.pow(n.screen_y-s.screen_y,2)),c=Math.sqrt(Math.pow(s.screen_x-r.screen_x,2)+Math.pow(s.screen_y-r.screen_y,2)),g=Math.pow(c,i),y=Math.pow(c,2*i),v=Math.pow(l,i),b=Math.pow(l,2*i),_=Math.pow(d,i),w=Math.pow(d,2*i),u=2*w+3*_*v+b,p=2*y+3*g*v+b,f=3*_*(_+v),f>0&&(f=1/f),m=3*g*(g+v),m>0&&(m=1/m),a={screen_x:(-b*o.screen_x+u*n.screen_x+w*s.screen_x)*f,screen_y:(-b*o.screen_y+u*n.screen_y+w*s.screen_y)*f},h={screen_x:(y*n.screen_x+p*s.screen_x-b*r.screen_x)*m,screen_y:(y*n.screen_y+p*s.screen_y-b*r.screen_y)*m},0==a.screen_x&&0==a.screen_y&&(a=n),0==h.screen_x&&0==h.screen_y&&(h=s),x.push([a.screen_x,a.screen_y]),x.push([h.screen_x,h.screen_y]),x.push([s.screen_x,s.screen_y]);return x},o._linear=function(e){for(var t=[],i=0;i<e.length;i++)t.push([e[i].screen_x,e[i].screen_y]);return t},e.exports=o},function(e,t,i){function o(e,t,i,o){this.body=e,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=i,this.options=n.extend({},this.defaultOptions),this.linegraphOptions=o,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(t)}var n=i(1),s=i(8),r=i(31);o.prototype=new r,o.prototype.clear=function(){this.groups={},this.amountOfGroups=0},o.prototype.addGroup=function(e,t){1!=t.options.excludeFromLegend&&(this.groups.hasOwnProperty(e)||(this.groups[e]=t),this.amountOfGroups+=1)},o.prototype.updateGroup=function(e,t){this.groups[e]=t},o.prototype.removeGroup=function(e){this.groups.hasOwnProperty(e)&&(delete this.groups[e],this.amountOfGroups-=1)},o.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)},o.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},o.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},o.prototype.setOptions=function(e){n.selectiveDeepExtend(["enabled","orientation","icons","left","right"],this.options,e)},o.prototype.redraw=function(){var e=0,t=Object.keys(this.groups);t.sort(function(e,t){return t>e?-1:1});for(var i=0;i<t.length;i++){var o=t[i];1!=this.groups[o].visible||void 0!==this.linegraphOptions.visibility[o]&&1!=this.linegraphOptions.visibility[o]||e++}if(0==this.options[this.side].visible||0==this.amountOfGroups||0==this.options.enabled||0==e)this.hide();else{if(this.show(),"top-left"==this.options[this.side].position||"bottom-left"==this.options[this.side].position?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),"top-left"==this.options[this.side].position||"top-right"==this.options[this.side].position)this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var n=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+n+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}0==this.options.icons?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var s="";for(i=0;i<t.length;i++){o=t[i];1!=this.groups[o].visible||void 0!==this.linegraphOptions.visibility[o]&&1!=this.linegraphOptions.visibility[o]||(s+=this.groups[o].content+"<br />")}this.dom.textArea.innerHTML=s,this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}},o.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var e=Object.keys(this.groups);e.sort(function(e,t){return t>e?-1:1}),s.resetElements(this.svgElements);var t=window.getComputedStyle(this.dom.frame).paddingTop,i=Number(t.replace("px","")),o=i,n=this.options.iconSize,r=.75*this.options.iconSize,a=i+.5*r+3;this.svg.style.width=n+5+i+"px";for(var h=0;h<e.length;h++){var d=e[h];1!=this.groups[d].visible||void 0!==this.linegraphOptions.visibility[d]&&1!=this.linegraphOptions.visibility[d]||(this.groups[d].getLegend(n,r,this.framework,o,a),a+=r+this.options.iconSpacing)}}},e.exports=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i="string",o="boolean",n="number",s="object",r="moment",a={configure:{enabled:{boolean:o},filter:{boolean:o,function:"function"},container:{dom:"dom"},__type__:{object:s,boolean:o,function:"function"}},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:i},sort:{boolean:o},sampling:{boolean:o},stack:{boolean:o},graphHeight:{string:i,number:n},shaded:{enabled:{boolean:o},orientation:{string:["bottom","top","zero","group"]},groupId:{object:s},__type__:{boolean:o,object:s}},style:{string:["line","bar","points"]},barChart:{width:{number:n},minWidth:{number:n},sideBySide:{boolean:o},align:{string:["left","center","right"]},__type__:{object:s}},interpolation:{enabled:{boolean:o},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:n},__type__:{object:s,boolean:o}},drawPoints:{enabled:{boolean:o},onRender:{function:"function"},size:{number:n},style:{string:["square","circle"]},__type__:{object:s,boolean:o,function:"function"}},dataAxis:{showMinorLabels:{boolean:o},showMajorLabels:{boolean:o},icons:{boolean:o},width:{string:i,number:n},visible:{boolean:o},alignZeros:{boolean:o},left:{range:{min:{number:n},max:{number:n},__type__:{object:s}},format:{function:"function"},title:{text:{string:i,number:n},style:{string:i},__type__:{object:s}},__type__:{object:s}},right:{range:{min:{number:n},max:{number:n},__type__:{object:s}},format:{function:"function"},title:{text:{string:i,number:n},style:{string:i},__type__:{object:s}},__type__:{object:s}},__type__:{object:s}},legend:{enabled:{boolean:o},icons:{boolean:o},left:{visible:{boolean:o},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:s}},right:{visible:{boolean:o},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:s}},__type__:{object:s,boolean:o}},groups:{visibility:{any:"any"},__type__:{object:s}},autoResize:{boolean:o},throttleRedraw:{number:n},clickToUse:{boolean:o},end:{number:n,date:"date",string:i,moment:r},format:{minorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:s}},majorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:s}},__type__:{object:s}},moment:{function:"function"},height:{string:i,number:n},hiddenDates:{start:{date:"date",number:n,string:i,moment:r},end:{date:"date",number:n,string:i,moment:r},repeat:{string:i},__type__:{object:s,array:"array"}},locale:{string:i},locales:{__any__:{any:"any"},__type__:{object:s}},max:{date:"date",number:n,string:i,moment:r},maxHeight:{number:n,string:i},maxMinorChars:{number:n},min:{date:"date",number:n,string:i,moment:r},minHeight:{number:n,string:i},moveable:{boolean:o},multiselect:{boolean:o},orientation:{string:i},showCurrentTime:{boolean:o},showMajorLabels:{boolean:o},showMinorLabels:{boolean:o},start:{date:"date",number:n,string:i,moment:r},timeAxis:{scale:{string:i,undefined:"undefined"},step:{number:n,undefined:"undefined"},__type__:{object:s}},width:{string:i,number:n},zoomable:{boolean:o},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:n},zoomMin:{number:n},zIndex:{number:n},__type__:{object:s}};t.allOptions=a,t.configureOptions={global:{sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,throttleRedraw:[10,0,1e3,10],clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}}},function(e,t,i){t.util=i(1),t.DOMutil=i(8),t.DataSet=i(9),t.DataView=i(11),t.Queue=i(10),t.Network=i(61),t.network={Images:i(62),dotparser:i(118),gephiParser:i(119),allOptions:i(114)},t.network.convertDot=function(e){return t.network.dotparser.DOTToGraph(e)},t.network.convertGephi=function(e,i){return t.network.gephiParser.parseGephi(e,i)},t.moment=i(2),t.Hammer=i(20),t.keycharm=i(23)},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,i){var o=this;if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:D,clickToUse:!1},S.extend(this.options,this.defaultOptions),this.body={container:e,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this),once:this.once.bind(this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}}},this.bindEventListeners(),this.images=new s.default(function(){return o.body.emitter.emit("_requestRedraw")}),this.groups=new r.default,this.canvas=new u.default(this.body),this.selectionHandler=new m.default(this.body,this.canvas),this.interactionHandler=new f.default(this.body,this.canvas,this.selectionHandler),this.view=new p.default(this.body,this.canvas),this.renderer=new c.default(this.body,this.canvas),this.physics=new d.default(this.body),this.layoutEngine=new g.default(this.body),this.clustering=new l.default(this.body),this.manipulation=new v.default(this.body,this.canvas,this.selectionHandler),this.nodesHandler=new a.default(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new h.default(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new x.default(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(i),this.setData(t)}var s=o(i(62)),r=o(i(63)),a=o(i(64)),h=o(i(84)),d=o(i(93)),l=o(i(102)),c=o(i(105)),u=o(i(106)),p=o(i(107)),f=o(i(108)),m=o(i(111)),g=o(i(112)),v=o(i(113)),y=o(i(26)),b=i(29),w=o(b),_=i(114),x=o(i(115));i(117);var k=i(13),S=i(1),O=(i(9),i(11),i(118)),C=i(119),M=i(45),D=i(120);k(n.prototype),n.prototype.setOptions=function(e){var t=this;if(void 0!==e){!0===w.default.validate(e,_.allOptions)&&console.log("%cErrors have been found in the supplied options object.",b.printStyle);if(S.selectiveDeepExtend(["locale","locales","clickToUse"],this.options,e),e=this.layoutEngine.setOptions(e.layout,e),this.canvas.setOptions(e),this.groups.setOptions(e.groups),this.nodesHandler.setOptions(e.nodes),this.edgesHandler.setOptions(e.edges),this.physics.setOptions(e.physics),this.manipulation.setOptions(e.manipulation,e,this.options),this.interactionHandler.setOptions(e.interaction),this.renderer.setOptions(e.interaction),this.selectionHandler.setOptions(e.interaction),void 0!==e.groups&&this.body.emitter.emit("refreshNodes"),"configure"in e&&(this.configurator||(this.configurator=new y.default(this,this.body.container,_.configureOptions,this.canvas.pixelRatio)),this.configurator.setOptions(e.configure)),this.configurator&&!0===this.configurator.options.enabled){var i={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};S.deepExtend(i.nodes,this.nodesHandler.options),S.deepExtend(i.edges,this.edgesHandler.options),S.deepExtend(i.layout,this.layoutEngine.options),S.deepExtend(i.interaction,this.selectionHandler.options),S.deepExtend(i.interaction,this.renderer.options),S.deepExtend(i.interaction,this.interactionHandler.options),S.deepExtend(i.manipulation,this.manipulation.options),S.deepExtend(i.physics,this.physics.options),S.deepExtend(i.global,this.canvas.options),S.deepExtend(i.global,this.options),this.configurator.setModuleOptions(i)}void 0!==e.clickToUse?!0===e.clickToUse?void 0===this.activator&&(this.activator=new M(this.canvas.frame),this.activator.on("change",function(){t.body.emitter.emit("activate")})):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},n.prototype._updateVisibleIndices=function(){var e=this.body.nodes,t=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(var i in e)e.hasOwnProperty(i)&&!1===e[i].options.hidden&&this.body.nodeIndices.push(e[i].id);for(var o in t)t.hasOwnProperty(o)&&!1===t[o].options.hidden&&this.body.edgeIndices.push(t[o].id)},n.prototype.bindEventListeners=function(){var e=this;this.body.emitter.on("_dataChanged",function(){e._updateVisibleIndices(),e.body.emitter.emit("_requestRedraw"),e.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){e._updateValueRange(e.body.nodes),e._updateValueRange(e.body.edges),e.body.emitter.emit("startSimulation"),e.body.emitter.emit("_requestRedraw")})},n.prototype.setData=function(e){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),e&&e.dot&&(e.nodes||e.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(e&&e.options),e&&e.dot){console.log("The dot property has been depricated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var t=O.DOTToGraph(e.dot);this.setData(t)}else if(e&&e.gephi){console.log("The gephi property has been depricated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var i=C.parseGephi(e.gephi);this.setData(i)}else this.nodesHandler.setData(e&&e.nodes,!0),this.edgesHandler.setData(e&&e.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},n.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(var e in this.body.nodes)delete this.body.nodes[e];for(var t in this.body.edges)delete this.body.edges[t];S.recursiveDOMDelete(this.body.container)},n.prototype._updateValueRange=function(e){var t,i=void 0,o=void 0,n=0;for(t in e)if(e.hasOwnProperty(t)){var s=e[t].getValue();void 0!==s&&(i=void 0===i?s:Math.min(s,i),o=void 0===o?s:Math.max(s,o),n+=s)}if(void 0!==i&&void 0!==o)for(t in e)e.hasOwnProperty(t)&&e[t].setValueRange(i,o,n)},n.prototype.isActive=function(){return!this.activator||this.activator.active},n.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},n.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},n.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},n.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},n.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},n.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},n.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},n.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},n.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},n.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},n.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},n.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},n.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},n.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},n.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},n.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},n.prototype.editNodeMode=function(){return console.log("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},n.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},n.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},n.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},n.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},n.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},n.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},n.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},n.prototype.getConnectedNodes=function(e){return void 0!==this.body.nodes[e]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},n.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},n.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},n.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},n.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},n.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},n.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},n.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,arguments)},n.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments)},n.prototype.getNodeAt=function(){var e=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==e&&void 0!==e.id?e.id:e},n.prototype.getEdgeAt=function(){var e=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==e&&void 0!==e.id?e.id:e},n.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},n.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},n.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.redraw()},n.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},n.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},n.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},n.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},n.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},n.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},n.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},n.prototype.getOptionsFromConfigurator=function(){var e={};return this.configurator&&(e=this.configurator.getOptions.apply(this.configurator)),e},e.exports=n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),o=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.images={},this.imageBroken={},this.callback=t}return i(e,[{key:"_addImageToCache",value:function(e,t){0===t.width&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t)),this.images[e]=t}},{key:"_tryloadBrokenUrl",value:function(e,t,i){var o=this;void 0!==e&&void 0!==t&&void 0!==i&&(i.onerror=function(){console.error("Could not load brokenImage:",t),o._addImageToCache(e,new Image)},i.src=t)}},{key:"_redrawWithImage",value:function(e){this.callback&&this.callback(e)}},{key:"load",value:function(e,t,i){var o=this,n=this.images[e];if(n)return n;var s=new Image;return s.onload=function(){o._addImageToCache(e,s),o._redrawWithImage(s)},s.onerror=function(){console.error("Could not load image:",e),o._tryloadBrokenUrl(e,t,s)},s.src=e,s}}]),e}();t.default=o},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),n=i(1),s=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.clear(),this.defaultIndex=0,this.groupsArray=[],this.groupIndex=0,this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},n.extend(this.options,this.defaultOptions)}return o(e,[{key:"setOptions",value:function(e){var t=["useDefaultGroups"];if(void 0!==e)for(var i in e)if(e.hasOwnProperty(i)&&-1===t.indexOf(i)){var o=e[i];this.add(i,o)}}},{key:"clear",value:function(){this.groups={},this.groupsArray=[]}},{key:"get",value:function(e){var t=this.groups[e];if(void 0===t)if(!1===this.options.useDefaultGroups&&this.groupsArray.length>0){var i=this.groupIndex%this.groupsArray.length;this.groupIndex++,(t={}).color=this.groups[this.groupsArray[i]],this.groups[e]=t}else{var o=this.defaultIndex%this.defaultGroups.length;this.defaultIndex++,(t={}).color=this.defaultGroups[o],this.groups[e]=t}return t}},{key:"add",value:function(e,t){return this.groups[e]=t,this.groupsArray.push(e),t}}]),e}();t.default=s},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=o(i(65)),r=o(i(66)),a=i(1),h=i(9),d=i(11),l=function(){function e(t,i,o,n){var s=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.images=i,this.groups=o,this.layoutEngine=n,this.body.functions.createNode=this.create.bind(this),this.nodesListeners={add:function(e,t){s.add(t.items)},update:function(e,t){s.update(t.items,t.data)},remove:function(e,t){s.remove(t.items)}},this.options={},this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center"},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,label:void 0,labelHighlightBold:!0,level:void 0,mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(e,t,i,o){if(t===e)return.5;var n=1/(t-e);return Math.max(0,(o-e)*n)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1},size:25,title:void 0,value:void 0,x:void 0,y:void 0},a.extend(this.options,this.defaultOptions),this.bindEventListeners()}return n(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("refreshNodes",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){a.forEach(e.nodesListeners,function(t,i){e.body.data.nodes&&e.body.data.nodes.off(i,t)}),delete e.body.functions.createNode,delete e.nodesListeners.add,delete e.nodesListeners.update,delete e.nodesListeners.remove,delete e.nodesListeners})}},{key:"setOptions",value:function(e){if(void 0!==e){if(s.default.parseOptions(this.options,e),void 0!==e.shape)for(var t in this.body.nodes)this.body.nodes.hasOwnProperty(t)&&this.body.nodes[t].updateShape();if(void 0!==e.font){r.default.parseOptions(this.options.font,e);for(var i in this.body.nodes)this.body.nodes.hasOwnProperty(i)&&(this.body.nodes[i].updateLabelModule(),this.body.nodes[i]._reset())}if(void 0!==e.size)for(var o in this.body.nodes)this.body.nodes.hasOwnProperty(o)&&this.body.nodes[o]._reset();void 0===e.hidden&&void 0===e.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(e){var t=this,i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],o=this.body.data.nodes;if(e instanceof h||e instanceof d)this.body.data.nodes=e;else if(Array.isArray(e))this.body.data.nodes=new h,this.body.data.nodes.add(e);else{if(e)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new h}o&&a.forEach(this.nodesListeners,function(e,t){o.off(t,e)}),this.body.nodes={},this.body.data.nodes&&function(){var e=t;a.forEach(t.nodesListeners,function(t,i){e.body.data.nodes.on(i,t)});var i=t.body.data.nodes.getIds();t.add(i,!0)}(),!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(e){for(var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],i=void 0,o=[],n=0;n<e.length;n++){i=e[n];var s=this.body.data.nodes.get(i),r=this.create(s);o.push(r),this.body.nodes[i]=r}this.layoutEngine.positionInitially(o),!1===t&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(e,t){for(var i=this.body.nodes,o=!1,n=0;n<e.length;n++){var s=e[n],r=i[s],a=t[n];void 0!==r?o=r.setOptions(a):(o=!0,r=this.create(a),i[s]=r)}!0===o?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(e){for(var t=this.body.nodes,i=0;i<e.length;i++){delete t[e[i]]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(e){return new(arguments.length<=1||void 0===arguments[1]?s.default:arguments[1])(e,this.body,this.images,this.groups,this.options)}},{key:"refresh",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=this.body.nodes;for(var i in t){var o=void 0;t.hasOwnProperty(i)&&(o=t[i]);var n=this.body.data.nodes._data[i];void 0!==o&&void 0!==n&&(!0===e&&o.setOptions({x:null,y:null}),o.setOptions({fixed:!1}),o.setOptions(n))}}},{key:"getPositions",value:function(e){var t={};if(void 0!==e){if(!0===Array.isArray(e)){for(var i=0;i<e.length;i++)if(void 0!==this.body.nodes[e[i]]){var o=this.body.nodes[e[i]];t[e[i]]={x:Math.round(o.x),y:Math.round(o.y)}}}else if(void 0!==this.body.nodes[e]){var n=this.body.nodes[e];t[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(var s=0;s<this.body.nodeIndices.length;s++){var r=this.body.nodes[this.body.nodeIndices[s]];t[this.body.nodeIndices[s]]={x:Math.round(r.x),y:Math.round(r.y)}}return t}},{key:"storePositions",value:function(){var e=[],t=this.body.data.nodes.getDataSet();for(var i in t._data)if(t._data.hasOwnProperty(i)){var o=this.body.nodes[i];t._data[i].x==Math.round(o.x)&&t._data[i].y==Math.round(o.y)||e.push({id:o.id,x:Math.round(o.x),y:Math.round(o.y)})}t.update(e)}},{key:"getBoundingBox",value:function(e){return void 0!==this.body.nodes[e]?this.body.nodes[e].shape.boundingBox:void 0}},{key:"getConnectedNodes",value:function(e){var t=[];if(void 0!==this.body.nodes[e])for(var i=this.body.nodes[e],o={},n=0;n<i.edges.length;n++){var s=i.edges[n];s.toId==i.id?void 0===o[s.fromId]&&(t.push(s.fromId),o[s.fromId]=!0):s.fromId==i.id&&void 0===o[s.toId]&&(t.push(s.toId),o[s.toId]=!0)}return t}},{key:"getConnectedEdges",value:function(e){var t=[];if(void 0!==this.body.nodes[e])for(var i=this.body.nodes[e],o=0;o<i.edges.length;o++)t.push(i.edges[o].id);else console.log("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return t}},{key:"moveNode",value:function(e,t,i){var o=this;void 0!==this.body.nodes[e]?(this.body.nodes[e].x=Number(t),this.body.nodes[e].y=Number(i),setTimeout(function(){o.body.emitter.emit("startSimulation")},0)):console.log("Node id supplied to moveNode does not exist. Provided: ",e)}}]),e}();t.default=l},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=o(i(66)),r=o(i(67)),a=o(i(69)),h=o(i(71)),d=o(i(72)),l=o(i(73)),c=o(i(75)),u=o(i(76)),p=o(i(77)),f=o(i(78)),m=o(i(79)),g=o(i(80)),v=o(i(81)),y=o(i(82)),b=o(i(83)),w=(o(i(29)),i(1)),_=function(){function e(t,i,o,n,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.options=w.bridgeObject(r),this.globalOptions=r,this.body=i,this.edges=[],this.id=void 0,this.imagelist=o,this.grouplist=n,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new s.default(this.body,this.options,!1),this.setOptions(t)}return n(e,[{key:"attachEdge",value:function(e){-1===this.edges.indexOf(e)&&this.edges.push(e)}},{key:"detachEdge",value:function(e){var t=this.edges.indexOf(e);-1!=t&&this.edges.splice(t,1)}},{key:"setOptions",value:function(t){var i=this.options.shape;if(t){if(void 0!==t.id&&(this.id=t.id),void 0===this.id)throw"Node must have an id";if(void 0!==t.x&&(null===t.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=parseInt(t.x),this.predefinedPosition=!0)),void 0!==t.y&&(null===t.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=parseInt(t.y),this.predefinedPosition=!0)),void 0!==t.size&&(this.baseSize=t.size),void 0!==t.value&&(t.value=parseFloat(t.value)),"number"==typeof t.group||"string"==typeof t.group&&""!=t.group){var o=this.grouplist.get(t.group);w.deepExtend(this.options,o),this.options.color=w.parseColor(this.options.color)}if(e.parseOptions(this.options,t,!0,this.globalOptions),void 0!==this.options.image){if(!this.imagelist)throw"No imagelist provided";this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id)}return this.updateLabelModule(),this.updateShape(i),void 0!==t.hidden||void 0!==t.physics}}},{key:"updateLabelModule",value:function(){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),this.labelModule.setOptions(this.options,!0),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj);else switch(this.options.shape){case"box":this.shape=new r.default(this.options,this.body,this.labelModule);break;case"circle":this.shape=new a.default(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new h.default(this.options,this.body,this.labelModule,this.imageObj);break;case"database":this.shape=new d.default(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new l.default(this.options,this.body,this.labelModule);break;case"dot":this.shape=new c.default(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new u.default(this.options,this.body,this.labelModule);break;case"icon":this.shape=new p.default(this.options,this.body,this.labelModule);break;case"image":this.shape=new f.default(this.options,this.body,this.labelModule,this.imageObj);break;case"square":this.shape=new m.default(this.options,this.body,this.labelModule);break;case"star":this.shape=new g.default(this.options,this.body,this.labelModule);break;case"text":this.shape=new v.default(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new y.default(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new b.default(this.options,this.body,this.labelModule);break;default:this.shape=new u.default(this.options,this.body,this.labelModule)}this._reset()}},{key:"select",value:function(){this.selected=!0,this._reset()}},{key:"unselect",value:function(){this.selected=!1,this._reset()}},{key:"_reset",value:function(){this.shape.width=void 0,this.shape.height=void 0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(e,t){return this.shape.distanceToBorder(e,t)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(e,t,i){if(void 0!==this.options.value){var o=this.options.scaling.customScalingFunction(e,t,i,this.options.value),n=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var s=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+o*s}this.options.size=this.options.scaling.min+o*n}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(e){this.shape.draw(e,this.x,this.y,this.selected,this.hover)}},{key:"updateBoundingBox",value:function(e){this.shape.updateBoundingBox(this.x,this.y,e)}},{key:"resize",value:function(e){this.shape.resize(e,this.selected)}},{key:"isOverlappingWith",value:function(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}},{key:"isBoundingBoxOverlappingWith",value:function(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}}],[{key:"parseOptions",value:function(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];if(w.selectiveNotDeepExtend(["color","font","fixed","shadow"],e,t,i),w.mergeOptions(e,t,"shadow",i,o),void 0!==t.color&&null!==t.color){var n=w.parseColor(t.color);w.fillIfDefined(e.color,n)}else!0===i&&null===t.color&&(e.color=w.bridgeObject(o.color));void 0!==t.fixed&&null!==t.fixed&&("boolean"==typeof t.fixed?(e.fixed.x=t.fixed,e.fixed.y=t.fixed):(void 0!==t.fixed.x&&"boolean"==typeof t.fixed.x&&(e.fixed.x=t.fixed.x),void 0!==t.fixed.y&&"boolean"==typeof t.fixed.y&&(e.fixed.y=t.fixed.y))),void 0!==t.font&&null!==t.font?s.default.parseOptions(e.font,t):!0===i&&null===t.font&&(e.font=w.bridgeObject(o.font)),void 0!==t.scaling&&w.mergeOptions(e.scaling,t.scaling,"label",i,o.scaling)}}]),e}();t.default=_},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],o=!0,n=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){n=!0,s=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),r=i(1),a=function(){function e(t,i){var o=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(i),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=o}return s(e,[{key:"setOptions",value:function(t){var i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];this.nodeOptions=t,this.fontOptions=r.deepExtend({},t.font,!0),void 0!==t.label&&(this.labelDirty=!0),void 0!==t.font&&(e.parseOptions(this.fontOptions,t,i),"string"==typeof t.font?this.baseSize=this.fontOptions.size:"object"===n(t.font)&&void 0!==t.font.size&&(this.baseSize=t.font.size))}},{key:"draw",value:function(e,t,i,o){var n=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4];if(void 0!==this.nodeOptions.label){var s=this.fontOptions.size*this.body.view.scale;this.nodeOptions.label&&s<this.nodeOptions.scaling.label.drawThreshold-1||(this.calculateLabelSize(e,o,t,i,n),this._drawBackground(e),this._drawText(e,o,t,i,n))}}},{key:"_drawBackground",value:function(e){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){e.fillStyle=this.fontOptions.background;if(this.isEdgeLabel)switch(this.fontOptions.align){case"middle":e.fillRect(.5*-this.size.width,.5*-this.size.height,this.size.width,this.size.height);break;case"top":e.fillRect(.5*-this.size.width,-(this.size.height+2),this.size.width,this.size.height);break;case"bottom":e.fillRect(.5*-this.size.width,2,this.size.width,this.size.height);break;default:e.fillRect(this.size.left,this.size.top-1,this.size.width,this.size.height)}else e.fillRect(this.size.left,this.size.top-1,this.size.width,this.size.height)}}},{key:"_drawText",value:function(e,t,i,n){var s=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4],r=this.fontOptions.size,a=r*this.body.view.scale;a>=this.nodeOptions.scaling.label.maxVisible&&(r=Number(this.nodeOptions.scaling.label.maxVisible)/this.body.view.scale);var h=this.size.yLine,d=this._getColor(a),l=o(d,2),c=l[0],u=l[1],p=this._setAlignment(e,i,h,s),f=o(p,2);i=f[0],h=f[1],e.font=(t&&this.nodeOptions.labelHighlightBold?"bold ":"")+r+"px "+this.fontOptions.face,e.fillStyle=c,this.isEdgeLabel||"left"!==this.fontOptions.align?e.textAlign="center":(e.textAlign=this.fontOptions.align,i-=.5*this.size.width),this.fontOptions.strokeWidth>0&&(e.lineWidth=this.fontOptions.strokeWidth,e.strokeStyle=u,e.lineJoin="round");for(var m=0;m<this.lineCount;m++)this.fontOptions.strokeWidth>0&&e.strokeText(this.lines[m],i,h),e.fillText(this.lines[m],i,h),h+=r}},{key:"_setAlignment",value:function(e,t,i,o){if(this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf){t=0,i=0;"top"===this.fontOptions.align?(e.textBaseline="alphabetic",i-=4):"bottom"===this.fontOptions.align?(e.textBaseline="hanging",i+=4):e.textBaseline="middle"}else e.textBaseline=o;return[t,i]}},{key:"_getColor",value:function(e){var t=this.fontOptions.color||"#000000",i=this.fontOptions.strokeColor||"#ffffff";if(e<=this.nodeOptions.scaling.label.drawThreshold){var o=Math.max(0,Math.min(1,1-(this.nodeOptions.scaling.label.drawThreshold-e)));t=r.overrideOpacity(t,o),i=r.overrideOpacity(i,o)}return[t,i]}},{key:"getTextSize",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return{width:this._processLabel(e,t),height:this.fontOptions.size*this.lineCount,lineCount:this.lineCount}}},{key:"calculateLabelSize",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=arguments.length<=3||void 0===arguments[3]?0:arguments[3],n=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4];!0===this.labelDirty&&(this.size.width=this._processLabel(e,t)),this.size.height=this.fontOptions.size*this.lineCount,this.size.left=i-.5*this.size.width,this.size.top=o-.5*this.size.height,this.size.yLine=o+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===n&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4),this.labelDirty=!1}},{key:"_processLabel",value:function(e,t){var i=0,o=[""],n=0;if(void 0!==this.nodeOptions.label){n=(o=String(this.nodeOptions.label).split("\n")).length,e.font=(t&&this.nodeOptions.labelHighlightBold?"bold ":"")+this.fontOptions.size+"px "+this.fontOptions.face,i=e.measureText(o[0]).width;for(var s=1;n>s;s++){var r=e.measureText(o[s]).width;i=r>i?r:i}}return this.lines=o,this.lineCount=n,i}}],[{key:"parseOptions",value:function(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if("string"==typeof t.font){var o=t.font.split(" ");e.size=o[0].replace("px",""),e.face=o[1],e.color=o[2]}else"object"===n(t.font)&&r.fillIfDefined(e,t.font,i);e.size=Number(e.size)}}]),e}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(68),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=this.labelModule.getTextSize(e,t);this.width=i.width+10,this.height=i.height+10,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,o,n){this.resize(e,o),this.left=t-this.width/2,this.top=i-this.height/2;var s=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth;e.strokeStyle=o?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.lineWidth=o?r:s,e.lineWidth/=this.body.view.scale,e.lineWidth=Math.min(this.width,e.lineWidth),e.fillStyle=o?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background;var a=this.options.shapeProperties.borderRadius;e.roundRect(this.left,this.top,this.width,this.height,a),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),s>0&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),this.updateBoundingBox(t,i,e,o),this.labelModule.draw(e,t,i,o)}},{key:"updateBoundingBox",value:function(e,t,i,o){this.resize(i,o),this.left=e-.5*this.width,this.top=t-.5*this.height;var n=this.options.shapeProperties.borderRadius;this.boundingBox.left=this.left-n,this.boundingBox.top=this.top-n,this.boundingBox.bottom=this.top+this.height+n,this.boundingBox.right=this.left+this.width+n}},{key:"distanceToBorder",value:function(e,t){this.resize(e);var i=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+i}}]),t}();t.default=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),o=function(){function e(t,i,o){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=i,this.labelModule=o,this.setOptions(t),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return i(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"_distanceToBorder",value:function(e,t){var i=this.options.borderWidth;return this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+i}},{key:"enableShadow",value:function(e){!0===this.options.shadow.enabled&&(e.shadowColor=this.options.shadow.color,e.shadowBlur=this.options.shadow.size,e.shadowOffsetX=this.options.shadow.x,e.shadowOffsetY=this.options.shadow.y)}},{key:"disableShadow",value:function(e){!0===this.options.shadow.enabled&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(e){if(!1!==this.options.shapeProperties.borderDashes)if(void 0!==e.setLineDash){var t=this.options.shapeProperties.borderDashes;!0===t&&(t=[5,15]),e.setLineDash(t)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1}},{key:"disableBorderDashes",value:function(e){!1!==this.options.shapeProperties.borderDashes&&(void 0!==e.setLineDash?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1))}}]),e}();t.default=o},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(70),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=this.labelModule.getTextSize(e,t),o=Math.max(i.width,i.height)+10;this.options.size=o/2,this.width=o,this.height=o,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,o,n){this.resize(e,o),this.left=t-this.width/2,this.top=i-this.height/2,this._drawRawCircle(e,t,i,o,n,this.options.size),this.boundingBox.top=i-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=i+this.options.size,this.updateBoundingBox(t,i),this.labelModule.draw(e,t,i,o)}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size}},{key:"distanceToBorder",value:function(e,t){return this.resize(e),.5*this.width}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(68),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o));return n.labelOffset=0,n.imageLoaded=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"setOptions",value:function(e,t){this.options=e,t&&(this.imageObj=t)}},{key:"_resizeImage",value:function(){var e,t,i,o=!1;(this.imageObj.width&&this.imageObj.height?!1===this.imageLoaded&&(this.imageLoaded=!0,o=!0):this.imageLoaded=!1,this.width&&this.height&&!0!==o)||(this.imageObj.width&&this.imageObj.height&&(e=0,t=0),!1===this.options.shapeProperties.useImageSize?this.imageObj.width>this.imageObj.height?(i=this.imageObj.width/this.imageObj.height,e=2*this.options.size*i||this.imageObj.width,t=2*this.options.size||this.imageObj.height):(i=this.imageObj.width&&this.imageObj.height?this.imageObj.height/this.imageObj.width:1,e=2*this.options.size,t=2*this.options.size*i):(e=this.imageObj.width,t=this.imageObj.height),this.width=e,this.height=t,this.radius=.5*this.width)}},{key:"_drawRawCircle",value:function(e,t,i,o,n,s){var r=this.options.borderWidth,a=this.options.borderWidthSelected||2*this.options.borderWidth,h=(o?a:r)/this.body.view.scale;e.lineWidth=Math.min(this.width,h),e.strokeStyle=o?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.fillStyle=o?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background,e.circle(t,i,s),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),h>0&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore()}},{key:"_drawImageAtPosition",value:function(e){if(0!=this.imageObj.width){e.globalAlpha=1,this.enableShadow(e);var t=this.imageObj.width/this.width/this.body.view.scale;if(t>2&&!0===this.options.shapeProperties.interpolation){var i=this.imageObj.width,o=this.imageObj.height,n=document.createElement("canvas");n.width=i,n.height=i;var s=n.getContext("2d");t*=.5,i*=.5,o*=.5,s.drawImage(this.imageObj,0,0,i,o);for(var r=0,a=1;t>2&&4>a;)s.drawImage(n,r,0,i,o,r+i,0,i/2,o/2),r+=i,t*=.5,i*=.5,o*=.5,a+=1;e.drawImage(n,r,0,i,o,this.left,this.top,this.width,this.height)}else e.drawImage(this.imageObj,this.left,this.top,this.width,this.height);this.disableShadow(e)}}},{key:"_drawImageLabel",value:function(e,t,i,o){var n,s=0;if(void 0!==this.height){s=.5*this.height;var r=this.labelModule.getTextSize(e);r.lineCount>=1&&(s+=r.height/2)}n=i+s,this.options.label&&(this.labelOffset=s),this.labelModule.draw(e,t,n,o,"hanging")}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(70),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o));return s.imageObj=n,s._swapToImageResizeWhenImageLoaded=!0,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"resize",value:function(){if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){if(!this.width){var e=2*this.options.size;this.width=e,this.height=e,this._swapToImageResizeWhenImageLoaded=!0,this.radius=.5*this.width}}else this._swapToImageResizeWhenImageLoaded&&(this.width=void 0,this.height=void 0,this._swapToImageResizeWhenImageLoaded=!1),this._resizeImage()}},{key:"draw",value:function(e,t,i,o,n){this.resize(),this.left=t-this.width/2,this.top=i-this.height/2;var s=Math.min(.5*this.height,.5*this.width);this._drawRawCircle(e,t,i,o,n,s),e.save(),e.clip(),this._drawImageAtPosition(e),e.restore(),this._drawImageLabel(e,t,i,o),this.updateBoundingBox(t,i)}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size,this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(e,t){return this.resize(e),.5*this.width}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(68),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=this.labelModule.getTextSize(e,t).width+10;this.width=i,this.height=i,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,o,n){this.resize(e,o),this.left=t-this.width/2,this.top=i-this.height/2;var s=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth,a=(o?r:s)/this.body.view.scale;e.lineWidth=Math.min(this.width,a),e.strokeStyle=o?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.fillStyle=o?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background,e.database(t-this.width/2,i-.5*this.height,this.width,this.height),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),a>0&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),this.updateBoundingBox(t,i,e,o),this.labelModule.draw(e,t,i,o)}},{key:"updateBoundingBox",value:function(e,t,i,o){this.resize(i,o),this.left=e-.5*this.width,this.top=t-.5*this.height,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(74),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,o,n){this._drawShape(e,"diamond",4,t,i,o,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(68),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"_resizeShape",value:function(){if(void 0===this.width){var e=2*this.options.size;this.width=e,this.height=e,this.radius=.5*this.width}}},{key:"_drawShape",value:function(e,t,i,o,n,s,r){this._resizeShape(),this.left=o-this.width/2,this.top=n-this.height/2;var a=this.options.borderWidth,h=this.options.borderWidthSelected||2*this.options.borderWidth,d=(s?h:a)/this.body.view.scale;if(e.lineWidth=Math.min(this.width,d),e.strokeStyle=s?this.options.color.highlight.border:r?this.options.color.hover.border:this.options.color.border,e.fillStyle=s?this.options.color.highlight.background:r?this.options.color.hover.background:this.options.color.background,e[t](o,n,this.options.size),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),d>0&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),void 0!==this.options.label){var l=n+.5*this.height+3;this.labelModule.draw(e,o,l,s,"hanging")}this.updateBoundingBox(o,n)}},{key:"updateBoundingBox",value:function(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+3))}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(74),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,o,n){this._drawShape(e,"circle",2,t,i,o,n)}},{key:"distanceToBorder",value:function(e,t){return this.resize(e),this.options.size}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(68),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=this.labelModule.getTextSize(e,t);this.width=1.5*i.width,this.height=2*i.height,this.width<this.height&&(this.width=this.height),this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,o,n){this.resize(e,o),this.left=t-.5*this.width,this.top=i-.5*this.height;var s=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth,a=(o?r:s)/this.body.view.scale;e.lineWidth=Math.min(this.width,a),e.strokeStyle=o?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.fillStyle=o?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background,e.ellipse(this.left,this.top,this.width,this.height),this.enableShadow(e),e.fill(),this.disableShadow(e),e.save(),a>0&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),this.updateBoundingBox(t,i,e,o),this.labelModule.draw(e,t,i,o)}},{key:"updateBoundingBox",value:function(e,t,i,o){this.resize(i,o),this.left=e-.5*this.width,this.top=t-.5*this.height,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"distanceToBorder",value:function(e,t){this.resize(e);var i=.5*this.width,o=.5*this.height,n=Math.sin(t)*i,s=Math.cos(t)*o;return i*o/Math.sqrt(n*n+s*s)}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(68),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"resize",value:function(e){if(void 0===this.width){var t=Number(this.options.icon.size),i=Number(this.options.icon.size);this.width=t+10,this.height=i+10,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,o,n){if(this.resize(e),this.options.icon.size=this.options.icon.size||50,this.left=t-.5*this.width,this.top=i-.5*this.height,this._icon(e,t,i,o),void 0!==this.options.label){this.labelModule.draw(e,t,i+.5*this.height+5,o)}this.updateBoundingBox(t,i)}},{key:"updateBoundingBox",value:function(e,t){if(this.boundingBox.top=t-.5*this.options.icon.size,this.boundingBox.left=e-.5*this.options.icon.size,this.boundingBox.right=e+.5*this.options.icon.size,this.boundingBox.bottom=t+.5*this.options.icon.size,void 0!==this.options.label&&this.labelModule.size.width>0){this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5)}}},{key:"_icon",value:function(e,t,i,o){var n=Number(this.options.icon.size);void 0!==this.options.icon.code?(e.font=(o?"bold ":"")+n+"px "+this.options.icon.face,e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e),e.fillText(this.options.icon.code,t,i),this.disableShadow(e)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(70),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o));return s.imageObj=n,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"resize",value:function(){this._resizeImage()}},{key:"draw",value:function(e,t,i,o,n){if(this.resize(),this.left=t-this.width/2,this.top=i-this.height/2,!0===this.options.shapeProperties.useBorderWithImage){var s=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth,a=(o?r:s)/this.body.view.scale;e.lineWidth=Math.min(this.width,a),e.beginPath(),e.strokeStyle=o?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,e.fillStyle=o?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),e.fill(),e.save(),a>0&&(this.enableBorderDashes(e),e.stroke(),this.disableBorderDashes(e)),e.restore(),e.closePath()}this._drawImageAtPosition(e),this._drawImageLabel(e,t,i,o||n),this.updateBoundingBox(t,i)}},{key:"updateBoundingBox",value:function(e,t){this.resize(),this.left=e-this.width/2,this.top=t-this.height/2,this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(74),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"resize",value:function(){this._resizeShape()}},{key:"draw",value:function(e,t,i,o,n){this._drawShape(e,"square",2,t,i,o,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(74),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,o,n){this._drawShape(e,"star",4,t,i,o,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(68),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"resize",value:function(e,t){if(void 0===this.width){var i=this.labelModule.getTextSize(e,t);this.width=i.width+10,this.height=i.height+10,this.radius=.5*this.width}}},{key:"draw",value:function(e,t,i,o,n){this.resize(e,o||n),this.left=t-this.width/2,this.top=i-this.height/2,this.enableShadow(e),this.labelModule.draw(e,t,i,o||n),this.disableShadow(e),this.updateBoundingBox(t,i,e,o)}},{key:"updateBoundingBox",value:function(e,t,i,o){this.resize(i,o),this.left=e-this.width/2,this.top=t-this.height/2,this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(74),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,o,n){this._drawShape(e,"triangle",3,t,i,o,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(74),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"resize",value:function(e){this._resizeShape()}},{key:"draw",value:function(e,t,i,o,n){this._drawShape(e,"triangleDown",3,t,i,o,n)}},{key:"distanceToBorder",value:function(e,t){return this._distanceToBorder(e,t)}}]),t}();t.default=a},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=o(i(85)),r=o(i(66)),a=i(1),h=i(9),d=i(11),l=function(){function e(t,i,o){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.images=i,this.groups=o,this.body.functions.createEdge=this.create.bind(this),this.edgesListeners={add:function(e,t){n.add(t.items)},update:function(e,t){n.update(t.items)},remove:function(e,t){n.remove(t.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1},middle:{enabled:!1,scaleFactor:1},from:{enabled:!1,scaleFactor:1}},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal"},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(e,t,i,o){if(t===e)return.5;var n=1/(t-e);return Math.max(0,(o-e)*n)}},selectionWidth:1.5,selfReferenceSize:20,shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},a.extend(this.options,this.defaultOptions),this.bindEventListeners()}return n(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("_forceDisableDynamicCurves",function(t){"dynamic"===t&&(t="continuous");var i=!1;for(var o in e.body.edges)if(e.body.edges.hasOwnProperty(o)){var n=e.body.edges[o],s=e.body.data.edges._data[o];if(void 0!==s){var r=s.smooth;void 0!==r&&!0===r.enabled&&"dynamic"===r.type&&(void 0===t?n.setOptions({smooth:!1}):n.setOptions({smooth:{type:t}}),i=!0)}}!0===i&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){e.reconnectEdges(),e.markAllEdgesAsDirty()}),this.body.emitter.on("refreshEdges",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){a.forEach(e.edgesListeners,function(t,i){e.body.data.edges&&e.body.data.edges.off(i,t)}),delete e.body.functions.createEdge,delete e.edgesListeners.add,delete e.edgesListeners.update,delete e.edgesListeners.remove,delete e.edgesListeners})}},{key:"setOptions",value:function(e){if(void 0!==e){s.default.parseOptions(this.options,e),void 0!==e.color&&this.markAllEdgesAsDirty();var t=!1;if(void 0!==e.smooth)for(var i in this.body.edges)this.body.edges.hasOwnProperty(i)&&(t=this.body.edges[i].updateEdgeType()||t);if(void 0!==e.font){r.default.parseOptions(this.options.font,e);for(var o in this.body.edges)this.body.edges.hasOwnProperty(o)&&this.body.edges[o].updateLabelModule()}void 0===e.hidden&&void 0===e.physics&&!0!==t||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(e){var t=this,i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],o=this.body.data.edges;if(e instanceof h||e instanceof d)this.body.data.edges=e;else if(Array.isArray(e))this.body.data.edges=new h,this.body.data.edges.add(e);else{if(e)throw new TypeError("Array or DataSet expected");this.body.data.edges=new h}if(o&&a.forEach(this.edgesListeners,function(e,t){o.off(t,e)}),this.body.edges={},this.body.data.edges){a.forEach(this.edgesListeners,function(e,i){t.body.data.edges.on(i,e)});var n=this.body.data.edges.getIds();this.add(n,!0)}!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(e){for(var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],i=this.body.edges,o=this.body.data.edges,n=0;n<e.length;n++){var s=e[n],r=i[s];r&&r.disconnect();var a=o.get(s,{showInternalIds:!0});i[s]=this.create(a)}!1===t&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(e){for(var t=this.body.edges,i=this.body.data.edges,o=!1,n=0;n<e.length;n++){var s=e[n],r=i.get(s),a=t[s];void 0!==a?(a.disconnect(),o=a.setOptions(r)||o,a.connect()):(this.body.edges[s]=this.create(r),o=!0)}!0===o?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(e){for(var t=this.body.edges,i=0;i<e.length;i++){var o=e[i],n=t[o];void 0!==n&&(n.cleanup(),n.disconnect(),delete t[o])}this.body.emitter.emit("_dataChanged")}},{key:"refresh",value:function(){var e=this.body.edges;for(var t in e){var i=void 0;e.hasOwnProperty(t)&&(i=e[t]);var o=this.body.data.edges._data[t];void 0!==i&&void 0!==o&&i.setOptions(o)}}},{key:"create",value:function(e){return new s.default(e,this.body,this.options)}},{key:"markAllEdgesAsDirty",value:function(){for(var e in this.body.edges)this.body.edges[e].edgeType.colorDirty=!0}},{key:"reconnectEdges",value:function(){var e,t=this.body.nodes,i=this.body.edges;for(e in t)t.hasOwnProperty(e)&&(t[e].edges=[]);for(e in i)if(i.hasOwnProperty(e)){var o=i[e];o.from=null,o.to=null,o.connect()}}},{key:"getConnectedNodes",value:function(e){var t=[];if(void 0!==this.body.edges[e]){var i=this.body.edges[e];i.fromId&&t.push(i.fromId),i.toId&&t.push(i.toId)}return t}}]),e}();t.default=l},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),r=o(i(66)),a=o(i(86)),h=o(i(90)),d=o(i(91)),l=o(i(92)),c=i(1),u=function(){function e(t,i,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===i)throw"No body provided";this.options=c.bridgeObject(o),this.globalOptions=o,this.body=i,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.colorDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new r.default(this.body,this.options,!0),this.setOptions(t)}return s(e,[{key:"setOptions",value:function(t){if(t){this.colorDirty=!0,e.parseOptions(this.options,t,!0,this.globalOptions),void 0!==t.id&&(this.id=t.id),void 0!==t.from&&(this.fromId=t.from),void 0!==t.to&&(this.toId=t.to),void 0!==t.title&&(this.title=t.title),void 0!==t.value&&(t.value=parseFloat(t.value)),this.updateLabelModule();var i=this.updateEdgeType();return this._setInteractionWidths(),this.connect(),void 0===t.hidden&&void 0===t.physics||(i=!0),i}}},{key:"updateLabelModule",value:function(){this.labelModule.setOptions(this.options,!0),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var e=!1,t=!0,i=this.options.smooth;return void 0!==this.edgeType&&(this.edgeType instanceof h.default&&!0===i.enabled&&"dynamic"===i.type&&(t=!1),this.edgeType instanceof a.default&&!0===i.enabled&&"cubicBezier"===i.type&&(t=!1),this.edgeType instanceof d.default&&!0===i.enabled&&"dynamic"!==i.type&&"cubicBezier"!==i.type&&(t=!1),this.edgeType instanceof l.default&&!1===i.enabled&&(t=!1),!0===t&&(e=this.cleanup())),!0===t?!0===this.options.smooth.enabled?"dynamic"===this.options.smooth.type?(e=!0,this.edgeType=new h.default(this.options,this.body,this.labelModule)):"cubicBezier"===this.options.smooth.type?this.edgeType=new a.default(this.options,this.body,this.labelModule):this.edgeType=new d.default(this.options,this.body,this.labelModule):this.edgeType=new l.default(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),e}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,!0===this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(e,t,i){if(void 0!==this.options.value){var o=this.options.scaling.customScalingFunction(e,t,i,this.options.value),n=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var s=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+o*s}this.options.width=this.options.scaling.min+o*n}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"==typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(e){var t=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,!0===this.options.arrows.from.enabled&&(i.from=this.edgeType.getArrowData(e,"from",t,this.selected,this.hover),!1===this.options.arrowStrikethrough&&(this.edgeType.fromPoint=i.from.core)),!0===this.options.arrows.to.enabled&&(i.to=this.edgeType.getArrowData(e,"to",t,this.selected,this.hover),!1===this.options.arrowStrikethrough&&(this.edgeType.toPoint=i.to.core)),!0===this.options.arrows.middle.enabled&&(i.middle=this.edgeType.getArrowData(e,"middle",t,this.selected,this.hover)),this.edgeType.drawLine(e,this.selected,this.hover,t),this.drawArrows(e,i),this.drawLabel(e,t)}},{key:"drawArrows",value:function(e,t){!0===this.options.arrows.from.enabled&&this.edgeType.drawArrowHead(e,this.selected,this.hover,t.from),!0===this.options.arrows.middle.enabled&&this.edgeType.drawArrowHead(e,this.selected,this.hover,t.middle),!0===this.options.arrows.to.enabled&&this.edgeType.drawArrowHead(e,this.selected,this.hover,t.to)}},{key:"drawLabel",value:function(e,t){if(void 0!==this.options.label){var i=this.from,o=this.to,n=this.from.selected||this.to.selected||this.selected;if(i.id!=o.id){this.labelModule.pointToSelf=!1;var s=this.edgeType.getPoint(.5,t);e.save(),"horizontal"!==this.options.font.align&&(this.labelModule.calculateLabelSize(e,n,s.x,s.y),e.translate(s.x,this.labelModule.size.yLine),this._rotateForLabelAlignment(e)),this.labelModule.draw(e,s.x,s.y,n),e.restore()}else{this.labelModule.pointToSelf=!0;var r,a,h=this.options.selfReferenceSize;i.shape.width>i.shape.height?(r=i.x+.5*i.shape.width,a=i.y-h):(r=i.x+h,a=i.y-.5*i.shape.height),s=this._pointOnCircle(r,a,h,.125),this.labelModule.draw(e,s.x,s.y,n)}}}},{key:"isOverlappingWith",value:function(e){if(this.connected){var t=this.from.x,i=this.from.y,o=this.to.x,n=this.to.y,s=e.left,r=e.top;return 10>this.edgeType.getDistanceToEdge(t,i,o,n,s,r)}return!1}},{key:"_rotateForLabelAlignment",value:function(e){var t=this.from.y-this.to.y,i=this.from.x-this.to.x,o=Math.atan2(t,i);(-1>o&&0>i||o>0&&0>i)&&(o+=Math.PI),e.rotate(o)}},{key:"_pointOnCircle",value:function(e,t,i,o){var n=2*o*Math.PI;return{x:e+i*Math.cos(n),y:t-i*Math.sin(n)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}}],[{key:"parseOptions",value:function(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];if(c.selectiveDeepExtend(["arrowStrikethrough","id","from","hidden","hoverWidth","label","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","to","title","value","width"],e,t,i),c.mergeOptions(e,t,"smooth",i,o),c.mergeOptions(e,t,"shadow",i,o),void 0!==t.dashes&&null!==t.dashes?e.dashes=t.dashes:!0===i&&null===t.dashes&&(e.dashes=Object.create(o.dashes)),void 0!==t.scaling&&null!==t.scaling?(void 0!==t.scaling.min&&(e.scaling.min=t.scaling.min),void 0!==t.scaling.max&&(e.scaling.max=t.scaling.max),c.mergeOptions(e.scaling,t.scaling,"label",i,o.scaling)):!0===i&&null===t.scaling&&(e.scaling=Object.create(o.scaling)),void 0!==t.arrows&&null!==t.arrows)if("string"==typeof t.arrows){var s=t.arrows.toLowerCase();e.arrows.to.enabled=-1!=s.indexOf("to"),e.arrows.middle.enabled=-1!=s.indexOf("middle"),e.arrows.from.enabled=-1!=s.indexOf("from")}else{if("object"!==n(t.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+JSON.stringify(t.arrows));c.mergeOptions(e.arrows,t.arrows,"to",i,o.arrows),c.mergeOptions(e.arrows,t.arrows,"middle",i,o.arrows),c.mergeOptions(e.arrows,t.arrows,"from",i,o.arrows)}else!0===i&&null===t.arrows&&(e.arrows=Object.create(o.arrows));if(void 0!==t.color&&null!==t.color)if(e.color=c.deepExtend({},e.color,!0),c.isString(t.color))e.color.color=t.color,e.color.highlight=t.color,e.color.hover=t.color,e.color.inherit=!1;else{var a=!1;void 0!==t.color.color&&(e.color.color=t.color.color,a=!0),void 0!==t.color.highlight&&(e.color.highlight=t.color.highlight,a=!0),void 0!==t.color.hover&&(e.color.hover=t.color.hover,a=!0),void 0!==t.color.inherit&&(e.color.inherit=t.color.inherit),void 0!==t.color.opacity&&(e.color.opacity=Math.min(1,Math.max(0,t.color.opacity))),void 0===t.color.inherit&&!0===a&&(e.color.inherit=!1)}else!0===i&&null===t.color&&(e.color=c.bridgeObject(o.color));void 0!==t.font&&null!==t.font?r.default.parseOptions(e.font,t):!0===i&&null===t.font&&(e.font=c.bridgeObject(o.font))}}]),e}();t.default=u},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],o=!0,n=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){n=!0,s=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),r=i(87),a=(o=r)&&o.__esModule?o:{default:o},h=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"]),s(t,[{key:"_line",value:function(e,t){var i=t[0],o=t[1];e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===t||void 0===i.x?e.lineTo(this.toPoint.x,this.toPoint.y):e.bezierCurveTo(i.x,i.y,o.x,o.y,this.toPoint.x,this.toPoint.y),this.enableShadow(e),e.stroke(),this.disableShadow(e)}},{key:"_getViaCoordinates",value:function(){var e=this.from.x-this.to.x,t=this.from.y-this.to.y,i=void 0,o=void 0,n=void 0,s=void 0,r=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(t)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(o=this.from.y,s=this.to.y,i=this.from.x-r*e,n=this.to.x+r*e):(o=this.from.y-r*t,s=this.to.y+r*t,i=this.from.x,n=this.to.x),[{x:i,y:o},{x:n,y:s}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(e,t){return this._findBorderPositionBezier(e,t)}},{key:"_getDistanceToEdge",value:function(e,t,i,o,s,r){var a=arguments.length<=6||void 0===arguments[6]?this._getViaCoordinates():arguments[6],h=n(a,2),d=h[0],l=h[1];return this._getDistanceToBezierEdge(e,t,i,o,s,r,d,l)}},{key:"getPoint",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this._getViaCoordinates():arguments[1],i=n(t,2),o=i[0],s=i[1],r=e,a=[];return a[0]=Math.pow(1-r,3),a[1]=3*r*Math.pow(1-r,2),a[2]=3*Math.pow(r,2)*(1-r),a[3]=Math.pow(r,3),{x:a[0]*this.fromPoint.x+a[1]*o.x+a[2]*s.x+a[3]*this.toPoint.x,y:a[0]*this.fromPoint.y+a[1]*o.y+a[2]*s.y+a[3]*this.toPoint.y}}}]),t}();t.default=h},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(88),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"_getDistanceToBezierEdge",value:function(e,t,i,o,n,s,r,a){var h=1e9,d=void 0,l=void 0,c=void 0,u=void 0,p=void 0,f=e,m=t,g=[0,0,0,0];for(l=1;10>l;l++)c=.1*l,g[0]=Math.pow(1-c,3),g[1]=3*c*Math.pow(1-c,2),g[2]=3*Math.pow(c,2)*(1-c),g[3]=Math.pow(c,3),u=g[0]*e+g[1]*r.x+g[2]*a.x+g[3]*i,p=g[0]*t+g[1]*r.y+g[2]*a.y+g[3]*o,l>0&&(d=this._getDistanceToLine(f,m,u,p,n,s),h=h>d?d:h),f=u,m=p;return h}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(89),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"_findBorderPositionBezier",value:function(e,t){var i,o,n,s=arguments.length<=2||void 0===arguments[2]?this._getViaCoordinates():arguments[2],r=0,a=0,h=1,d=this.to,l=!1;for(e.id===this.from.id&&(d=this.from,l=!0);h>=a&&10>r;){var c=.5*(a+h);if(i=this.getPoint(c,s),o=Math.atan2(d.y-i.y,d.x-i.x),n=d.distanceToBorder(t,o)-Math.sqrt(Math.pow(i.x-d.x,2)+Math.pow(i.y-d.y,2)),Math.abs(n)<.2)break;0>n?!1===l?a=c:h=c:!1===l?h=c:a=c,r++}return i.t=c,i}},{key:"_getDistanceToBezierEdge",value:function(e,t,i,o,n,s,r){var a=1e9,h=void 0,d=void 0,l=void 0,c=void 0,u=void 0,p=e,f=t;for(d=1;10>d;d++)l=.1*d,c=Math.pow(1-l,2)*e+2*l*(1-l)*r.x+Math.pow(l,2)*i,u=Math.pow(1-l,2)*t+2*l*(1-l)*r.y+Math.pow(l,2)*o,d>0&&(h=this._getDistanceToLine(p,f,c,u,n,s),a=a>h?h:a),p=c,f=u;return a}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],o=!0,n=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){n=!0,s=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(1),r=function(){function e(t,i,o){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=i,this.labelModule=o,this.options={},this.setOptions(t),this.colorDirty=!0,this.color={},this.selectionWidth=2,this.hoverWidth=1.5,this.fromPoint=this.from,this.toPoint=this.to}return n(e,[{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(e){this.options=e,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(e,t,i,o){e.strokeStyle=this.getColor(e,t,i),e.lineWidth=this.getLineWidth(t,i),!1!==this.options.dashes?this._drawDashedLine(e,o):this._drawLine(e,o)}},{key:"_drawLine",value:function(e,t,i,n){if(this.from!=this.to)this._line(e,t,i,n);else{var s=this._getCircleData(e),r=o(s,3),a=r[0],h=r[1],d=r[2];this._circle(e,a,h,d)}}},{key:"_drawDashedLine",value:function(e,t,i,n){e.lineCap="round";var s=[5,5];if(!0===Array.isArray(this.options.dashes)&&(s=this.options.dashes),void 0!==e.setLineDash){if(e.save(),e.setLineDash(s),e.lineDashOffset=0,this.from!=this.to)this._line(e,t);else{var r=this._getCircleData(e),a=o(r,3),h=a[0],d=a[1],l=a[2];this._circle(e,h,d,l)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)e.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,s);else{var c=this._getCircleData(e),u=o(c,3),p=u[0],f=u[1],m=u[2];this._circle(e,p,f,m)}this.enableShadow(e),e.stroke(),this.disableShadow(e)}}},{key:"findBorderPosition",value:function(e,t,i){return this.from!=this.to?this._findBorderPosition(e,t,i):this._findBorderPositionCircle(e,t,i)}},{key:"findBorderPositions",value:function(e){var t={},i={};if(this.from!=this.to)t=this._findBorderPosition(this.from,e),i=this._findBorderPosition(this.to,e);else{var n=this._getCircleData(e),s=o(n,3),r=s[0],a=s[1];s[2],t=this._findBorderPositionCircle(this.from,e,{x:r,y:a,low:.25,high:.6,direction:-1}),i=this._findBorderPositionCircle(this.from,e,{x:r,y:a,low:.6,high:.8,direction:1})}return{from:t,to:i}}},{key:"_getCircleData",value:function(e){var t=void 0,i=void 0,o=this.from,n=this.options.selfReferenceSize;return void 0!==e&&void 0===o.shape.width&&o.shape.resize(e),o.shape.width>o.shape.height?(t=o.x+.5*o.shape.width,i=o.y-n):(t=o.x+n,i=o.y-.5*o.shape.height),[t,i,n]}},{key:"_pointOnCircle",value:function(e,t,i,o){var n=2*o*Math.PI;return{x:e+i*Math.cos(n),y:t-i*Math.sin(n)}}},{key:"_findBorderPositionCircle",value:function(e,t,i){for(var o=i.x,n=i.y,s=i.low,r=i.high,a=i.direction,h=0,d=this.options.selfReferenceSize,l=void 0,c=void 0,u=void 0,p=.5*(s+r);r>=s&&10>h&&(p=.5*(s+r),l=this._pointOnCircle(o,n,d,p),c=Math.atan2(e.y-l.y,e.x-l.x),u=e.distanceToBorder(t,c)-Math.sqrt(Math.pow(l.x-e.x,2)+Math.pow(l.y-e.y,2)),!(Math.abs(u)<.05));)u>0?a>0?s=p:r=p:a>0?r=p:s=p,h++;return l.t=p,l}},{key:"getLineWidth",value:function(e,t){return!0===e?Math.max(this.selectionWidth,.3/this.body.view.scale):!0===t?Math.max(this.hoverWidth,.3/this.body.view.scale):Math.max(this.options.width,.3/this.body.view.scale)}},{key:"getColor",value:function(e,t,i){var o=this.options.color;if(!1!==o.inherit){if("both"===o.inherit&&this.from.id!==this.to.id){var n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),r=void 0,a=void 0;return r=this.from.options.color.highlight.border,a=this.to.options.color.highlight.border,!1===this.from.selected&&!1===this.to.selected?(r=s.overrideOpacity(this.from.options.color.border,this.options.color.opacity),a=s.overrideOpacity(this.to.options.color.border,this.options.color.opacity)):!0===this.from.selected&&!1===this.to.selected?a=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(r=this.from.options.color.border),n.addColorStop(0,r),n.addColorStop(1,a),n}!0===this.colorDirty&&("to"===o.inherit?(this.color.highlight=this.to.options.color.highlight.border,this.color.hover=this.to.options.color.hover.border,this.color.color=s.overrideOpacity(this.to.options.color.border,o.opacity)):(this.color.highlight=this.from.options.color.highlight.border,this.color.hover=this.from.options.color.hover.border,this.color.color=s.overrideOpacity(this.from.options.color.border,o.opacity)))}else!0===this.colorDirty&&(this.color.highlight=o.highlight,this.color.hover=o.hover,this.color.color=s.overrideOpacity(o.color,o.opacity));return this.colorDirty=!1,!0===t?this.color.highlight:!0===i?this.color.hover:this.color.color}},{key:"_circle",value:function(e,t,i,o){this.enableShadow(e),e.beginPath(),e.arc(t,i,o,0,2*Math.PI,!1),e.stroke(),this.disableShadow(e)}},{key:"getDistanceToEdge",value:function(e,t,i,n,s,r,a){var h=0;if(this.from!=this.to)h=this._getDistanceToEdge(e,t,i,n,s,r,a);else{var d=this._getCircleData(),l=o(d,3),c=l[0],u=l[1],p=l[2],f=c-s,m=u-r;h=Math.abs(Math.sqrt(f*f+m*m)-p)}return this.labelModule.size.left<s&&this.labelModule.size.left+this.labelModule.size.width>s&&this.labelModule.size.top<r&&this.labelModule.size.top+this.labelModule.size.height>r?0:h}},{key:"_getDistanceToLine",value:function(e,t,i,o,n,s){var r=i-e,a=o-t,h=((n-e)*r+(s-t)*a)/(r*r+a*a);h>1?h=1:0>h&&(h=0);var d=e+h*r-n,l=t+h*a-s;return Math.sqrt(d*d+l*l)}},{key:"getArrowData",value:function(e,t,i,n,s){var r=void 0,a=void 0,h=void 0,d=void 0,l=void 0,c=void 0,u=this.getLineWidth(n,s);if("from"===t?(h=this.from,d=this.to,l=.1,c=this.options.arrows.from.scaleFactor):"to"===t?(h=this.to,d=this.from,l=-.1,c=this.options.arrows.to.scaleFactor):(h=this.to,d=this.from,c=this.options.arrows.middle.scaleFactor),h!=d)if("middle"!==t)if(!0===this.options.smooth.enabled){a=this.findBorderPosition(h,e,{via:i});var p=this.getPoint(Math.max(0,Math.min(1,a.t+l)),i);r=Math.atan2(a.y-p.y,a.x-p.x)}else r=Math.atan2(h.y-d.y,h.x-d.x),a=this.findBorderPosition(h,e);else r=Math.atan2(h.y-d.y,h.x-d.x),a=this.getPoint(.5,i);else{var f=this._getCircleData(e),m=o(f,3),g=m[0],v=m[1],y=m[2];"from"===t?r=-2*(a=this.findBorderPosition(this.from,e,{x:g,y:v,low:.25,high:.6,direction:-1})).t*Math.PI+1.5*Math.PI+.1*Math.PI:"to"===t?r=-2*(a=this.findBorderPosition(this.from,e,{x:g,y:v,low:.6,high:1,direction:1})).t*Math.PI+1.5*Math.PI-1.1*Math.PI:(a=this._pointOnCircle(g,v,y,.175),r=3.9269908169872414)}var b=15*c+3*u;return{point:a,core:{x:a.x-.9*b*Math.cos(r),y:a.y-.9*b*Math.sin(r)},angle:r,length:b}}},{key:"drawArrowHead",value:function(e,t,i,o){e.strokeStyle=this.getColor(e,t,i),e.fillStyle=e.strokeStyle,e.lineWidth=this.getLineWidth(t,i),e.arrow(o.point.x,o.point.y,o.angle,o.length),this.enableShadow(e),e.fill(),this.disableShadow(e)}},{key:"enableShadow",value:function(e){!0===this.options.shadow.enabled&&(e.shadowColor=this.options.shadow.color,e.shadowBlur=this.options.shadow.size,e.shadowOffsetX=this.options.shadow.x,e.shadowOffsetY=this.options.shadow.y)}},{key:"disableShadow",value:function(e){!0===this.options.shadow.enabled&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}}]),e}();t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(88),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o));return n._boundFunction=function(){n.positionBezierNode()},n.body.emitter.on("_repositionBezierNodes",n._boundFunction),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"setOptions",value:function(e){var t=!1;this.options.physics!==e.physics&&(t=!0),this.options=e,this.id=this.options.id,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.setupSupportNode(),this.connect(),!0===t&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],void 0===this.from||void 0===this.to||!1===this.options.physics?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this.body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this.body.nodes[this.via.id],this.via=void 0,!0)}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var e="edgeId:"+this.id,t=this.body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this.body.nodes[e]=t,this.via=t,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(e,t){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===t.x?e.lineTo(this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(t.x,t.y,this.toPoint.x,this.toPoint.y),this.enableShadow(e),e.stroke(),this.disableShadow(e)}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.via:arguments[1],i=e;return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*t.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*t.y+Math.pow(i,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(e,t){return this._findBorderPositionBezier(e,t,this.via)}},{key:"_getDistanceToEdge",value:function(e,t,i,o,n,s){return this._getDistanceToBezierEdge(e,t,i,o,n,s,this.via)}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(88),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"_line",value:function(e,t){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===t.x?e.lineTo(this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(t.x,t.y,this.toPoint.x,this.toPoint.y),this.enableShadow(e),e.stroke(),this.disableShadow(e)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var e=void 0,t=void 0,i=this.options.smooth.roundness,o=this.options.smooth.type,n=Math.abs(this.from.x-this.to.x),s=Math.abs(this.from.y-this.to.y);if("discrete"===o||"diagonalCross"===o)Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?(this.from.y>=this.to.y?this.from.x<=this.to.x?(e=this.from.x+i*s,t=this.from.y-i*s):this.from.x>this.to.x&&(e=this.from.x-i*s,t=this.from.y-i*s):this.from.y<this.to.y&&(this.from.x<=this.to.x?(e=this.from.x+i*s,t=this.from.y+i*s):this.from.x>this.to.x&&(e=this.from.x-i*s,t=this.from.y+i*s)),"discrete"===o&&(e=i*s>n?this.from.x:e)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>=this.to.y?this.from.x<=this.to.x?(e=this.from.x+i*n,t=this.from.y-i*n):this.from.x>this.to.x&&(e=this.from.x-i*n,t=this.from.y-i*n):this.from.y<this.to.y&&(this.from.x<=this.to.x?(e=this.from.x+i*n,t=this.from.y+i*n):this.from.x>this.to.x&&(e=this.from.x-i*n,t=this.from.y+i*n)),"discrete"===o&&(t=i*n>s?this.from.y:t));else if("straightCross"===o)Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?(e=this.from.x,t=this.from.y<this.to.y?this.to.y-(1-i)*s:this.to.y+(1-i)*s):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(e=this.from.x<this.to.x?this.to.x-(1-i)*n:this.to.x+(1-i)*n,t=this.from.y);else if("horizontal"===o)e=this.from.x<this.to.x?this.to.x-(1-i)*n:this.to.x+(1-i)*n,t=this.from.y;else if("vertical"===o)e=this.from.x,t=this.from.y<this.to.y?this.to.y-(1-i)*s:this.to.y+(1-i)*s;else if("curvedCW"===o){n=this.to.x-this.from.x,s=this.from.y-this.to.y;var r=Math.sqrt(n*n+s*s),a=Math.PI,h=(Math.atan2(s,n)+(.5*i+.5)*a)%(2*a);e=this.from.x+(.5*i+.5)*r*Math.sin(h),t=this.from.y+(.5*i+.5)*r*Math.cos(h)}else if("curvedCCW"===o){n=this.to.x-this.from.x,s=this.from.y-this.to.y;var d=Math.sqrt(n*n+s*s),l=Math.PI,c=(Math.atan2(s,n)+(.5*-i+.5)*l)%(2*l);e=this.from.x+(.5*i+.5)*d*Math.sin(c),t=this.from.y+(.5*i+.5)*d*Math.cos(c)}else Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?this.from.y>=this.to.y?this.from.x<=this.to.x?(e=this.from.x+i*s,t=this.from.y-i*s,e=this.to.x<e?this.to.x:e):this.from.x>this.to.x&&(e=this.from.x-i*s,t=this.from.y-i*s,e=this.to.x>e?this.to.x:e):this.from.y<this.to.y&&(this.from.x<=this.to.x?(e=this.from.x+i*s,t=this.from.y+i*s,e=this.to.x<e?this.to.x:e):this.from.x>this.to.x&&(e=this.from.x-i*s,t=this.from.y+i*s,e=this.to.x>e?this.to.x:e)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>=this.to.y?this.from.x<=this.to.x?(e=this.from.x+i*n,t=this.from.y-i*n,t=this.to.y>t?this.to.y:t):this.from.x>this.to.x&&(e=this.from.x-i*n,t=this.from.y-i*n,t=this.to.y>t?this.to.y:t):this.from.y<this.to.y&&(this.from.x<=this.to.x?(e=this.from.x+i*n,t=this.from.y+i*n,t=this.to.y<t?this.to.y:t):this.from.x>this.to.x&&(e=this.from.x-i*n,t=this.from.y+i*n,t=this.to.y<t?this.to.y:t)));return{x:e,y:t}}},{key:"_findBorderPosition",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this._findBorderPositionBezier(e,t,i.via)}},{key:"_getDistanceToEdge",value:function(e,t,i,o,n,s){var r=arguments.length<=6||void 0===arguments[6]?this._getViaCoordinates():arguments[6];return this._getDistanceToBezierEdge(e,t,i,o,n,s,r)}},{key:"getPoint",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this._getViaCoordinates():arguments[1],i=e;return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*t.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*t.y+Math.pow(i,2)*this.toPoint.y}}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(89),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"_line",value:function(e){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e),e.stroke(),this.disableShadow(e)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}},{key:"_findBorderPosition",value:function(e,t){var i=this.to,o=this.from;e.id===this.from.id&&(i=this.from,o=this.to);var n=Math.atan2(i.y-o.y,i.x-o.x),s=i.x-o.x,r=i.y-o.y,a=Math.sqrt(s*s+r*r),h=(a-e.distanceToBorder(t,n))/a,d={};return d.x=(1-h)*o.x+h*i.x,d.y=(1-h)*o.y+h*i.y,d}},{key:"_getDistanceToEdge",value:function(e,t,i,o,n,s){return this._getDistanceToLine(e,t,i,o,n,s)}}]),t}();t.default=a},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=o(i(94)),r=o(i(95)),a=o(i(96)),h=o(i(97)),d=o(i(98)),l=o(i(99)),c=o(i(100)),u=o(i(101)),p=i(1),f=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0},p.extend(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return n(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("initPhysics",function(){e.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){e.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){e.stopSimulation(),e.ready=!1}),this.body.emitter.on("disablePhysics",function(){e.physicsEnabled=!1,e.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){e.setOptions(e.options),!0===e.ready&&e.startSimulation()}),this.body.emitter.on("startSimulation",function(){!0===e.ready&&e.startSimulation()}),this.body.emitter.on("stopSimulation",function(){e.stopSimulation()}),this.body.emitter.on("destroy",function(){e.stopSimulation(!1),e.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){e.updatePhysicsData()})}},{key:"setOptions",value:function(e){void 0!==e&&(!1===e?(this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation()):(this.physicsEnabled=!0,p.selectiveNotDeepExtend(["stabilization"],this.options,e),p.mergeOptions(this.options,e,"stabilization"),void 0===e.enabled&&(this.options.enabled=!0),!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation()),this.timestep=this.options.timestep)),this.init()}},{key:"init",value:function(){var e;"forceAtlas2Based"===this.options.solver?(e=this.options.forceAtlas2Based,this.nodesSolver=new c.default(this.body,this.physicsBody,e),this.edgesSolver=new h.default(this.body,this.physicsBody,e),this.gravitySolver=new u.default(this.body,this.physicsBody,e)):"repulsion"===this.options.solver?(e=this.options.repulsion,this.nodesSolver=new r.default(this.body,this.physicsBody,e),this.edgesSolver=new h.default(this.body,this.physicsBody,e),this.gravitySolver=new l.default(this.body,this.physicsBody,e)):"hierarchicalRepulsion"===this.options.solver?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new a.default(this.body,this.physicsBody,e),this.edgesSolver=new d.default(this.body,this.physicsBody,e),this.gravitySolver=new l.default(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new s.default(this.body,this.physicsBody,e),this.edgesSolver=new h.default(this.body,this.physicsBody,e),this.gravitySolver=new l.default(this.body,this.physicsBody,e)),this.modelOptions=e}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=this.simulationStep.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0];this.stabilized=!0,!0===e&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,!0===e&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var e=Date.now();this.physicsTick(),(Date.now()-e<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0),!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?this.stabilizationIterations:arguments[0];(this.stabilizationIterations>1||!0===this.startedStabilization)&&setTimeout(function(){e.body.emitter.emit("stabilized",{iterations:t}),e.startedStabilization=!1,e.stabilizationIterations=0},0)}},{key:"physicsTick",value:function(){if(!1===this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0),!1===this.stabilized){if(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled){this.adaptiveCounter%this.adaptiveInterval==0?(this.timestep=2*this.timestep,this.calculateForces(),this.moveNodes(),this.revert(),this.timestep=.5*this.timestep,this.calculateForces(),this.moveNodes(),this.calculateForces(),this.moveNodes(),!0===this._evaluateStepQuality()?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))):(this.calculateForces(),this.moveNodes()),this.adaptiveCounter+=1}else this.timestep=this.options.timestep,this.calculateForces(),this.moveNodes();!0===this.stabilized&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var e=this.body.nodes,t=this.body.edges;for(var i in e)e.hasOwnProperty(i)&&!0===e[i].options.physics&&this.physicsBody.physicsNodeIndices.push(e[i].id);for(var o in t)t.hasOwnProperty(o)&&!0===t[o].options.physics&&this.physicsBody.physicsEdgeIndices.push(t[o].id);for(var n=0;n<this.physicsBody.physicsNodeIndices.length;n++){var s=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[s]={x:0,y:0},void 0===this.physicsBody.velocities[s]&&(this.physicsBody.velocities[s]={x:0,y:0})}for(var r in this.physicsBody.velocities)void 0===e[r]&&delete this.physicsBody.velocities[r]}},{key:"revert",value:function(){var e=Object.keys(this.previousStates),t=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var o=0;o<e.length;o++){var n=e[o];void 0!==t[n]?!0===t[n].options.physics&&(this.referenceState[n]={positions:{x:t[n].x,y:t[n].y}},i[n].x=this.previousStates[n].vx,i[n].y=this.previousStates[n].vy,t[n].x=this.previousStates[n].x,t[n].y=this.previousStates[n].y):delete this.previousStates[n]}}},{key:"_evaluateStepQuality",value:function(){var e=void 0,t=void 0,i=void 0,o=this.body.nodes,n=this.referenceState;for(var s in this.referenceState)if(this.referenceState.hasOwnProperty(s)&&void 0!==o[s]&&(e=o[s].x-n[s].positions.x,t=o[s].y-n[s].positions.y,i=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),i>.3))return!1;return!0}},{key:"moveNodes",value:function(){for(var e=this.physicsBody.physicsNodeIndices,t=this.options.maxVelocity?this.options.maxVelocity:1e9,i=0,o=0,n=0;n<e.length;n++){var s=e[n],r=this._performStep(s,t);i=Math.max(i,r),o+=r}this.adaptiveTimestepEnabled=o/e.length<5,this.stabilized=i<this.options.minVelocity}},{key:"_performStep",value:function(e,t){var i=this.body.nodes[e],o=this.timestep,n=this.physicsBody.forces,s=this.physicsBody.velocities;if(this.previousStates[e]={x:i.x,y:i.y,vx:s[e].x,vy:s[e].y},!1===i.options.fixed.x){var r=this.modelOptions.damping*s[e].x,a=(n[e].x-r)/i.options.mass;s[e].x+=a*o,s[e].x=Math.abs(s[e].x)>t?s[e].x>0?t:-t:s[e].x,i.x+=s[e].x*o}else n[e].x=0,s[e].x=0;if(!1===i.options.fixed.y){var h=this.modelOptions.damping*s[e].y,d=(n[e].y-h)/i.options.mass;s[e].y+=d*o,s[e].y=Math.abs(s[e].y)>t?s[e].y>0?t:-t:s[e].y,i.y+=s[e].y*o}else n[e].y=0,s[e].y=0;return Math.sqrt(Math.pow(s[e].x,2)+Math.pow(s[e].y,2))}},{key:"calculateForces",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve()}},{key:"_freezeNodes",value:function(){var e=this.body.nodes;for(var t in e)e.hasOwnProperty(t)&&e[t].x&&e[t].y&&(this.freezeCache[t]={x:e[t].options.fixed.x,y:e[t].options.fixed.y},e[t].options.fixed.x=!0,e[t].options.fixed.y=!0)}},{key:"_restoreFrozenNodes",value:function(){var e=this.body.nodes;for(var t in e)e.hasOwnProperty(t)&&void 0!==this.freezeCache[t]&&(e[t].options.fixed.x=this.freezeCache[t].x,e[t].options.fixed.y=this.freezeCache[t].y);this.freezeCache={}}},{key:"stabilize",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?this.options.stabilization.iterations:arguments[0];return"number"!=typeof t&&(console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ",this.options.stabilization.iterations),t=this.options.stabilization.iterations),0===this.physicsBody.physicsNodeIndices.length?void(this.ready=!0):(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=t,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,void setTimeout(function(){return e._stabilizationBatch()},0))}},{key:"_stabilizationBatch",value:function(){!1===this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0);for(var e=0;!1===this.stabilized&&e<this.options.stabilization.updateInterval&&this.stabilizationIterations<this.targetIterations;)this.physicsTick(),e++;!1===this.stabilized&&this.stabilizationIterations<this.targetIterations?(this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations}),setTimeout(this._stabilizationBatch.bind(this),0)):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),!0===this.options.stabilization.fit&&this.body.emitter.emit("fit"),!0===this.options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),!0===this.stabilized?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(e){for(var t=0;t<this.physicsBody.physicsNodeIndices.length;t++){var i=this.body.nodes[this.physicsBody.physicsNodeIndices[t]],o=this.physicsBody.forces[this.physicsBody.physicsNodeIndices[t]],n=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.x,2)),s=Math.min(Math.max(5,n),15),r=3*s,a=p.HSVToHex((180-180*Math.min(1,Math.max(0,.03*n)))/360,1,1);e.lineWidth=s,e.strokeStyle=a,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(i.x+20*o.x,i.y+20*o.y),e.stroke();var h=Math.atan2(o.y,o.x);e.fillStyle=a,e.arrow(i.x+20*o.x+Math.cos(h)*r,i.y+20*o.y+Math.sin(h)*r,h,r),e.fill()}}}]),e}();t.default=f},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),o=function(){function e(t,i,o){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.physicsBody=i,this.barnesHutTree,this.setOptions(o),this.randomSeed=5}return i(e,[{key:"setOptions",value:function(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"seededRandom",value:function(){var e=1e4*Math.sin(this.randomSeed++);return e-Math.floor(e)}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&this.physicsBody.physicsNodeIndices.length>0){var e=void 0,t=this.body.nodes,i=this.physicsBody.physicsNodeIndices,o=i.length,n=this._formBarnesHutTree(t,i);this.barnesHutTree=n;for(var s=0;o>s;s++)e=t[i[s]],e.options.mass>0&&(this._getForceContribution(n.root.children.NW,e),this._getForceContribution(n.root.children.NE,e),this._getForceContribution(n.root.children.SW,e),this._getForceContribution(n.root.children.SE,e))}}},{key:"_getForceContribution",value:function(e,t){if(e.childrenCount>0){var i,o,n;i=e.centerOfMass.x-t.x,o=e.centerOfMass.y-t.y,(n=Math.sqrt(i*i+o*o))*e.calcSize>this.thetaInversed?this._calculateForces(n,i,o,t,e):4===e.childrenCount?(this._getForceContribution(e.children.NW,t),this._getForceContribution(e.children.NE,t),this._getForceContribution(e.children.SW,t),this._getForceContribution(e.children.SE,t)):e.children.data.id!=t.id&&this._calculateForces(n,i,o,t,e)}}},{key:"_calculateForces",value:function(e,t,i,o,n){0===e&&(t=e=.1),this.overlapAvoidanceFactor<1&&(e=Math.max(.1+this.overlapAvoidanceFactor*o.shape.radius,e-o.shape.radius));var s=this.options.gravitationalConstant*n.mass*o.options.mass/Math.pow(e,3),r=t*s,a=i*s;this.physicsBody.forces[o.id].x+=r,this.physicsBody.forces[o.id].y+=a}},{key:"_formBarnesHutTree",value:function(e,t){for(var i=void 0,o=t.length,n=e[t[0]].x,s=e[t[0]].y,r=e[t[0]].x,a=e[t[0]].y,h=1;o>h;h++){var d=e[t[h]].x,l=e[t[h]].y;e[t[h]].options.mass>0&&(n>d&&(n=d),d>r&&(r=d),s>l&&(s=l),l>a&&(a=l))}var c=Math.abs(r-n)-Math.abs(a-s);c>0?(s-=.5*c,a+=.5*c):(n+=.5*c,r-=.5*c);var u=Math.max(1e-5,Math.abs(r-n)),p=.5*u,f=.5*(n+r),m=.5*(s+a),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:f-p,maxX:f+p,minY:m-p,maxY:m+p},size:u,calcSize:1/u,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(var v=0;o>v;v++)i=e[t[v]],i.options.mass>0&&this._placeInTree(g.root,i);return g}},{key:"_updateBranchMass",value:function(e,t){var i=e.mass+t.options.mass,o=1/i;e.centerOfMass.x=e.centerOfMass.x*e.mass+t.x*t.options.mass,e.centerOfMass.x*=o,e.centerOfMass.y=e.centerOfMass.y*e.mass+t.y*t.options.mass,e.centerOfMass.y*=o,e.mass=i;var n=Math.max(Math.max(t.height,t.radius),t.width);e.maxWidth=e.maxWidth<n?n:e.maxWidth}},{key:"_placeInTree",value:function(e,t,i){1==i&&void 0!==i||this._updateBranchMass(e,t),e.children.NW.range.maxX>t.x?e.children.NW.range.maxY>t.y?this._placeInRegion(e,t,"NW"):this._placeInRegion(e,t,"SW"):e.children.NW.range.maxY>t.y?this._placeInRegion(e,t,"NE"):this._placeInRegion(e,t,"SE")}},{key:"_placeInRegion",value:function(e,t,i){switch(e.children[i].childrenCount){case 0:e.children[i].children.data=t,e.children[i].childrenCount=1,this._updateBranchMass(e.children[i],t);break;case 1:e.children[i].children.data.x===t.x&&e.children[i].children.data.y===t.y?(t.x+=this.seededRandom(),t.y+=this.seededRandom()):(this._splitBranch(e.children[i]),this._placeInTree(e.children[i],t));break;case 4:this._placeInTree(e.children[i],t)}}},{key:"_splitBranch",value:function(e){var t=null;1===e.childrenCount&&(t=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),null!=t&&this._placeInTree(e,t)}},{key:"_insertRegion",value:function(e,t){var i=void 0,o=void 0,n=void 0,s=void 0,r=.5*e.size;switch(t){case"NW":i=e.range.minX,o=e.range.minX+r,n=e.range.minY,s=e.range.minY+r;break;case"NE":i=e.range.minX+r,o=e.range.maxX,n=e.range.minY,s=e.range.minY+r;break;case"SW":i=e.range.minX,o=e.range.minX+r,n=e.range.minY+r,s=e.range.maxY;break;case"SE":i=e.range.minX+r,o=e.range.maxX,n=e.range.minY+r,s=e.range.maxY}e.children[t]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:o,minY:n,maxY:s},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}},{key:"_debug",value:function(e,t){void 0!==this.barnesHutTree&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,t))}},{key:"_drawBranch",value:function(e,t,i){void 0===i&&(i="#FF0000"),4===e.childrenCount&&(this._drawBranch(e.children.NW,t),this._drawBranch(e.children.NE,t),this._drawBranch(e.children.SE,t),this._drawBranch(e.children.SW,t)),t.strokeStyle=i,t.beginPath(),t.moveTo(e.range.minX,e.range.minY),t.lineTo(e.range.maxX,e.range.minY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.minY),t.lineTo(e.range.maxX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.maxY),t.lineTo(e.range.minX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.minX,e.range.maxY),t.lineTo(e.range.minX,e.range.minY),t.stroke()}}]),e}();t.default=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),o=function(){function e(t,i,o){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.physicsBody=i,this.setOptions(o)}return i(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,i,o,n,s,r,a,h=this.body.nodes,d=this.physicsBody.physicsNodeIndices,l=this.physicsBody.forces,c=this.options.nodeDistance,u=-2/3/c,p=0;p<d.length-1;p++){r=h[d[p]];for(var f=p+1;f<d.length;f++)a=h[d[f]],e=a.x-r.x,t=a.y-r.y,i=Math.sqrt(e*e+t*t),0===i&&(i=.1*Math.random(),e=i),2*c>i&&(s=.5*c>i?1:u*i+4/3,s/=i,o=e*s,n=t*s,l[r.id].x-=o,l[r.id].y-=n,l[a.id].x+=o,l[a.id].y+=n)}}}]),e}();t.default=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),o=function(){function e(t,i,o){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.physicsBody=i,this.setOptions(o)}return i(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){var e,t,i,o,n,s,r,a,h,d,l=this.body.nodes,c=this.physicsBody.physicsNodeIndices,u=this.physicsBody.forces,p=this.options.nodeDistance;for(h=0;h<c.length-1;h++)for(r=l[c[h]],d=h+1;d<c.length;d++)if(a=l[c[d]],r.level===a.level){e=a.x-r.x,t=a.y-r.y;s=p>(i=Math.sqrt(e*e+t*t))?-Math.pow(.05*i,2)+Math.pow(.05*p,2):0,0===i?i=.01:s/=i,o=e*s,n=t*s,u[r.id].x-=o,u[r.id].y-=n,u[a.id].x+=o,u[a.id].y+=n}}}]),e}();t.default=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),o=function(){function e(t,i,o){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.physicsBody=i,this.setOptions(o)}return i(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e=void 0,t=void 0,i=this.physicsBody.physicsEdgeIndices,o=this.body.edges,n=void 0,s=void 0,r=void 0,a=0;a<i.length;a++)t=o[i[a]],!0===t.connected&&t.toId!==t.fromId&&void 0!==this.body.nodes[t.toId]&&void 0!==this.body.nodes[t.fromId]&&(void 0!==t.edgeType.via?(e=void 0===t.options.length?this.options.springLength:t.options.length,n=t.to,s=t.edgeType.via,r=t.from,this._calculateSpringForce(n,s,.5*e),this._calculateSpringForce(s,r,.5*e)):(e=void 0===t.options.length?1.5*this.options.springLength:t.options.length,this._calculateSpringForce(t.from,t.to,e)))}},{key:"_calculateSpringForce",value:function(e,t,i){var o=e.x-t.x,n=e.y-t.y,s=Math.max(Math.sqrt(o*o+n*n),.01),r=this.options.springConstant*(i-s)/s,a=o*r,h=n*r;void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x+=a,this.physicsBody.forces[e.id].y+=h),void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x-=a,this.physicsBody.forces[t.id].y-=h)}}]),e}();t.default=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),o=function(){function e(t,i,o){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.physicsBody=i,this.setOptions(o)}return i(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e,t,i,o,n,s,r,a=this.body.edges,h=this.physicsBody.physicsEdgeIndices,d=this.physicsBody.physicsNodeIndices,l=this.physicsBody.forces,c=0;c<d.length;c++){var u=d[c];l[u].springFx=0,l[u].springFy=0}for(var p=0;p<h.length;p++)t=a[h[p]],!0===t.connected&&(e=void 0===t.options.length?this.options.springLength:t.options.length,i=t.from.x-t.to.x,o=t.from.y-t.to.y,r=Math.sqrt(i*i+o*o),r=0===r?.01:r,g=this.options.springConstant*(e-r)/r,n=i*g,s=o*g,t.to.level!=t.from.level?(void 0!==l[t.toId]&&(l[t.toId].springFx-=n,l[t.toId].springFy-=s),void 0!==l[t.fromId]&&(l[t.fromId].springFx+=n,l[t.fromId].springFy+=s)):(void 0!==l[t.toId]&&(l[t.toId].x-=.5*n,l[t.toId].y-=.5*s),void 0!==l[t.fromId]&&(l[t.fromId].x+=.5*n,l[t.fromId].y+=.5*s)));for(var f,m,g=1,v=0;v<d.length;v++){var y=d[v];f=Math.min(g,Math.max(-g,l[y].springFx)),m=Math.min(g,Math.max(-g,l[y].springFy)),l[y].x+=f,l[y].y+=m}for(var b=0,w=0,_=0;_<d.length;_++){var x=d[_];b+=l[x].x,w+=l[x].y}for(var k=b/d.length,S=w/d.length,O=0;O<d.length;O++){var C=d[O];l[C].x-=k,l[C].y-=S}}}]),e}();t.default=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),o=function(){function e(t,i,o){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.physicsBody=i,this.setOptions(o)}return i(e,[{key:"setOptions",value:function(e){this.options=e}},{key:"solve",value:function(){for(var e=void 0,t=void 0,i=void 0,o=void 0,n=this.body.nodes,s=this.physicsBody.physicsNodeIndices,r=this.physicsBody.forces,a=0;a<s.length;a++){e=-(o=n[s[a]]).x,t=-o.y,i=Math.sqrt(e*e+t*t),this._calculateForces(i,e,t,r,o)}}},{key:"_calculateForces",value:function(e,t,i,o,n){var s=0===e?0:this.options.centralGravity/e;o[n.id].x=t*s,o[n.id].y=i*s}}]),e}();t.default=o},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(94),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"_calculateForces",value:function(e,t,i,o,n){0===e&&(t=e=.1*Math.random()),this.overlapAvoidanceFactor<1&&(e=Math.max(.1+this.overlapAvoidanceFactor*o.shape.radius,e-o.shape.radius));var s=o.edges.length+1,r=this.options.gravitationalConstant*n.mass*o.options.mass*s/Math.pow(e,2),a=t*r,h=i*r;this.physicsBody.forces[o.id].x+=a,this.physicsBody.forces[o.id].y+=h}}]),t}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(99),r=(o=s)&&o.__esModule?o:{default:o},a=function(e){function t(e,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["default"]),n(t,[{key:"_calculateForces",value:function(e,t,i,o,n){if(e>0){var s=n.edges.length+1,r=this.options.centralGravity*s*n.options.mass;o[n.id].x=t*r,o[n.id].y=i*r}}}]),t}();t.default=a},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),r=o(i(103)),a=o(i(104)),h=i(1),d=function(){function e(t){var i=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},h.extend(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){i.clusteredNodes={},i.clusteredEdges={}})}return s(e,[{key:"setOptions",value:function(e){}},{key:"clusterByHubsize",value:function(e,t){void 0===e?e=this._getHubSize():"object"===(void 0===e?"undefined":n(e))&&(t=this._checkOptions(e),e=this._getHubSize());for(var i=[],o=0;o<this.body.nodeIndices.length;o++){var s=this.body.nodes[this.body.nodeIndices[o]];s.edges.length>=e&&i.push(s.id)}for(var r=0;r<i.length;r++)this.clusterByConnection(i[r],t,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]||arguments[1];if(void 0===e.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);for(var i={},o={},n=0;n<this.body.nodeIndices.length;n++){var s=this.body.nodeIndices[n],a=this.body.nodes[s],h=r.default.cloneOptions(a);if(!0===e.joinCondition(h)){i[s]=this.body.nodes[s];for(var d=0;d<a.edges.length;d++){var l=a.edges[d];void 0===this.clusteredEdges[l.id]&&(o[l.id]=l)}}}this._cluster(i,o,e,t)}},{key:"clusterByEdgeCount",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]||arguments[2];t=this._checkOptions(t);for(var o=[],n={},s=void 0,a=void 0,h=void 0,d=void 0,l=void 0,c=0;c<this.body.nodeIndices.length;c++){var u={},p={};if(void 0===n[d=this.body.nodeIndices[c]]){l=0,h=this.body.nodes[d],a=[];for(var f=0;f<h.edges.length;f++)s=h.edges[f],void 0===this.clusteredEdges[s.id]&&(s.toId!==s.fromId&&l++,a.push(s));if(l===e){for(var m=!0,g=0;g<a.length;g++){s=a[g];var v=this._getConnectedId(s,d);if(void 0===t.joinCondition)p[s.id]=s,u[d]=this.body.nodes[d],u[v]=this.body.nodes[v],n[d]=!0;else{var y=r.default.cloneOptions(this.body.nodes[d]);if(!0!==t.joinCondition(y)){m=!1;break}p[s.id]=s,u[d]=this.body.nodes[d],n[d]=!0}}Object.keys(u).length>0&&Object.keys(p).length>0&&!0===m&&o.push({nodes:u,edges:p})}}}for(var b=0;b<o.length;b++)this._cluster(o[b].nodes,o[b].edges,t,!1);!0===i&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];this.clusterByEdgeCount(1,e,t)}},{key:"clusterBridges",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];this.clusterByEdgeCount(2,e,t)}},{key:"clusterByConnection",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]||arguments[2];if(void 0===e)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[e])throw new Error("The nodeId given to clusterByConnection does not exist!");var o=this.body.nodes[e];void 0===(t=this._checkOptions(t,o)).clusterNodeProperties.x&&(t.clusterNodeProperties.x=o.x),void 0===t.clusterNodeProperties.y&&(t.clusterNodeProperties.y=o.y),void 0===t.clusterNodeProperties.fixed&&(t.clusterNodeProperties.fixed={},t.clusterNodeProperties.fixed.x=o.options.fixed.x,t.clusterNodeProperties.fixed.y=o.options.fixed.y);var n={},s={},a=o.id,h=r.default.cloneOptions(o);n[a]=o;for(var d=0;d<o.edges.length;d++){var l=o.edges[d];if(void 0===this.clusteredEdges[l.id]){var c=this._getConnectedId(l,a);if(void 0===this.clusteredNodes[c])if(c!==a)if(void 0===t.joinCondition)s[l.id]=l,n[c]=this.body.nodes[c];else{var u=r.default.cloneOptions(this.body.nodes[c]);!0===t.joinCondition(h,u)&&(s[l.id]=l,n[c]=this.body.nodes[c])}else s[l.id]=l}}this._cluster(n,s,t,i)}},{key:"_createClusterEdges",value:function(e,t,i,o){for(var n=void 0,s=void 0,a=void 0,d=void 0,l=void 0,c=void 0,u=Object.keys(e),p=[],f=0;f<u.length;f++){a=e[s=u[f]];for(var m=0;m<a.edges.length;m++)n=a.edges[m],void 0===this.clusteredEdges[n.id]&&(n.toId==n.fromId?t[n.id]=n:n.toId==s?(d=i.id,l=n.fromId,c=l):(d=n.toId,l=i.id,c=d),void 0===e[c]&&p.push({edge:n,fromId:l,toId:d}))}for(var g=0;g<p.length;g++){var v=p[g].edge,y=r.default.cloneOptions(v,"edge");h.deepExtend(y,o),y.from=p[g].fromId,y.to=p[g].toId,y.id="clusterEdge:"+h.randomUUID();var b=this.body.functions.createEdge(y);b.clusteringEdgeReplacingId=v.id,this.body.edges[b.id]=b,b.connect(),this._backupEdgeOptions(v),v.setOptions({physics:!1,hidden:!0})}}},{key:"_checkOptions",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return void 0===e.clusterEdgeProperties&&(e.clusterEdgeProperties={}),void 0===e.clusterNodeProperties&&(e.clusterNodeProperties={}),e}},{key:"_cluster",value:function(e,t,i){var o=arguments.length<=3||void 0===arguments[3]||arguments[3];if(!(Object.keys(e).length<2)){for(var n in e)if(e.hasOwnProperty(n)&&void 0!==this.clusteredNodes[n])return;var s=h.deepExtend({},i.clusterNodeProperties);if(void 0!==i.processProperties){var d=[];for(var l in e)if(e.hasOwnProperty(l)){var c=r.default.cloneOptions(e[l]);d.push(c)}var u=[];for(var p in t)if(t.hasOwnProperty(p)&&"clusterEdge:"!==p.substr(0,12)){var f=r.default.cloneOptions(t[p],"edge");u.push(f)}if(!(s=i.processProperties(s,d,u)))throw new Error("The processProperties function does not return properties!")}void 0===s.id&&(s.id="cluster:"+h.randomUUID());var m=s.id;void 0===s.label&&(s.label="cluster");var g=void 0;void 0===s.x&&(g=this._getClusterPosition(e),s.x=g.x),void 0===s.y&&(void 0===g&&(g=this._getClusterPosition(e)),s.y=g.y),s.id=m;var v=this.body.functions.createNode(s,a.default);v.isCluster=!0,v.containedNodes=e,v.containedEdges=t,v.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[s.id]=v,this._createClusterEdges(e,t,s,i.clusterEdgeProperties);for(var y in t)if(t.hasOwnProperty(y)&&void 0!==this.body.edges[y]){var b=this.body.edges[y];this._backupEdgeOptions(b),b.setOptions({physics:!1,hidden:!0})}for(var w in e)e.hasOwnProperty(w)&&(this.clusteredNodes[w]={clusterId:s.id,node:this.body.nodes[w]},this.body.nodes[w].setOptions({hidden:!0,physics:!1}));s.id=void 0,!0===o&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(e){void 0===this.clusteredEdges[e.id]&&(this.clusteredEdges[e.id]={physics:e.options.physics,hidden:e.options.hidden})}},{key:"_restoreEdge",value:function(e){var t=this.clusteredEdges[e.id];void 0!==t&&(e.setOptions({physics:t.physics,hidden:t.hidden}),delete this.clusteredEdges[e.id])}},{key:"isCluster",value:function(e){return void 0!==this.body.nodes[e]?!0===this.body.nodes[e].isCluster:(console.log("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(e){for(var t=Object.keys(e),i=e[t[0]].x,o=e[t[0]].x,n=e[t[0]].y,s=e[t[0]].y,r=void 0,a=1;a<t.length;a++)r=e[t[a]],i=r.x<i?r.x:i,o=r.x>o?r.x:o,n=r.y<n?r.y:n,s=r.y>s?r.y:s;return{x:.5*(i+o),y:.5*(n+s)}}},{key:"openCluster",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]||arguments[2];if(void 0===e)throw new Error("No clusterNodeId supplied to openCluster.");if(void 0===this.body.nodes[e])throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(void 0!==this.body.nodes[e].containedNodes){var o=this.body.nodes[e],n=o.containedNodes,s=o.containedEdges;if(void 0!==t&&void 0!==t.releaseFunction&&"function"==typeof t.releaseFunction){var a={},d={x:o.x,y:o.y};for(var l in n)if(n.hasOwnProperty(l)){var c=this.body.nodes[l];a[l]={x:c.x,y:c.y}}var u=t.releaseFunction(d,a);for(var p in n)if(n.hasOwnProperty(p)){var f=this.body.nodes[p];void 0!==u[p]&&(f.x=void 0===u[p].x?o.x:u[p].x,f.y=void 0===u[p].y?o.y:u[p].y)}}else for(var m in n)if(n.hasOwnProperty(m)){var g=this.body.nodes[m];!1===(g=n[m]).options.fixed.x&&(g.x=o.x),!1===g.options.fixed.y&&(g.y=o.y)}for(var v in n)if(n.hasOwnProperty(v)){var y=this.body.nodes[v];y.vx=o.vx,y.vy=o.vy,y.setOptions({hidden:!1,physics:!0}),delete this.clusteredNodes[v]}for(var b=[],w=0;w<o.edges.length;w++)b.push(o.edges[w]);for(var _=0;_<b.length;_++){var x=b[_],k=this._getConnectedId(x,e);if(void 0!==this.clusteredNodes[k]){var S=this.body.nodes[this.clusteredNodes[k].clusterId],O=this.body.edges[x.clusteringEdgeReplacingId];if(void 0!==O){S.containedEdges[O.id]=O,delete s[O.id];var C=O.fromId,M=O.toId;O.toId==k?M=this.clusteredNodes[k].clusterId:C=this.clusteredNodes[k].clusterId;var D=r.default.cloneOptions(O,"edge");h.deepExtend(D,S.clusterEdgeProperties);var E="clusterEdge:"+h.randomUUID();h.deepExtend(D,{from:C,to:M,hidden:!1,physics:!0,id:E});var T=this.body.functions.createEdge(D);T.clusteringEdgeReplacingId=O.id,this.body.edges[E]=T,this.body.edges[E].connect()}}else{var P=this.body.edges[x.clusteringEdgeReplacingId];void 0!==P&&this._restoreEdge(P)}x.cleanup(),x.disconnect(),delete this.body.edges[x.id]}for(var I in s)s.hasOwnProperty(I)&&this._restoreEdge(s[I]);delete this.body.nodes[e],!0===i&&this.body.emitter.emit("_dataChanged")}else console.log("The node:"+e+" is not a cluster.")}},{key:"getNodesInCluster",value:function(e){var t=[];if(!0===this.isCluster(e)){var i=this.body.nodes[e].containedNodes;for(var o in i)i.hasOwnProperty(o)&&t.push(this.body.nodes[o].id)}return t}},{key:"findNode",value:function(e){for(var t=[],i=0;void 0!==this.clusteredNodes[e]&&100>i;)t.push(this.body.nodes[e].id),e=this.clusteredNodes[e].clusterId,i++;return t.push(this.body.nodes[e].id),t.reverse(),t}},{key:"_getConnectedId",value:function(e,t){return e.toId!=t?e.toId:(e.fromId,e.fromId)}},{key:"_getHubSize",value:function(){for(var e=0,t=0,i=0,o=0,n=0;n<this.body.nodeIndices.length;n++){var s=this.body.nodes[this.body.nodeIndices[n]];s.edges.length>o&&(o=s.edges.length),e+=s.edges.length,t+=Math.pow(s.edges.length,2),i+=1}e/=i;var r=(t/=i)-Math.pow(e,2),a=Math.sqrt(r),h=Math.floor(e+2*a);return h>o&&(h=o),h}}]),e}();t.default=d},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),n=i(1),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"getRange",value:function(e){var t,i=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],o=1e9,n=-1e9,s=1e9,r=-1e9;if(i.length>0)for(var a=0;a<i.length;a++)t=e[i[a]],s>t.shape.boundingBox.left&&(s=t.shape.boundingBox.left),r<t.shape.boundingBox.right&&(r=t.shape.boundingBox.right),o>t.shape.boundingBox.top&&(o=t.shape.boundingBox.top),n<t.shape.boundingBox.bottom&&(n=t.shape.boundingBox.bottom);return 1e9===s&&-1e9===r&&1e9===o&&-1e9===n&&(o=0,n=0,s=0,r=0),{minX:s,maxX:r,minY:o,maxY:n}}},{key:"getRangeCore",value:function(e){var t,i=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],o=1e9,n=-1e9,s=1e9,r=-1e9;if(i.length>0)for(var a=0;a<i.length;a++)t=e[i[a]],s>t.x&&(s=t.x),r<t.x&&(r=t.x),o>t.y&&(o=t.y),n<t.y&&(n=t.y);return 1e9===s&&-1e9===r&&1e9===o&&-1e9===n&&(o=0,n=0,s=0,r=0),{minX:s,maxX:r,minY:o,maxY:n}}},{key:"findCenter",value:function(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}},{key:"cloneOptions",value:function(e,t){var i={};return void 0===t||"node"===t?(n.deepExtend(i,e.options,!0),i.x=e.x,i.y=e.y,i.amountOfConnections=e.edges.length):n.deepExtend(i,e.options,!0),i}}]),e}();t.default=s},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=i(65),s=(o=n)&&o.__esModule?o:{default:o},r=function(e){function t(e,i,o,n,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e,i,o,n,s));return r.isCluster=!0,r.containedNodes={},r.containedEdges={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["default"]),t}();t.default=r},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);var n=i(1),s=function(){function e(t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.canvas=i,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.pixelRatio=void 0,this.allowRedraw=!0,this.dragging=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideNodesOnDrag:!1},n.extend(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return o(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("dragStart",function(){e.dragging=!0}),this.body.emitter.on("dragEnd",function(){return e.dragging=!1}),this.body.emitter.on("_resizeNodes",function(){return e._resizeNodes()}),this.body.emitter.on("_redraw",function(){!1===e.renderingActive&&e._redraw()}),this.body.emitter.on("_blockRedraw",function(){e.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){e.allowRedraw=!0,e.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",this._requestRedraw.bind(this)),this.body.emitter.on("_startRendering",function(){e.renderRequests+=1,e.renderingActive=!0,e._startRendering()}),this.body.emitter.on("_stopRendering",function(){e.renderRequests-=1,e.renderingActive=e.renderRequests>0,e.renderTimer=void 0}),this.body.emitter.on("destroy",function(){e.renderRequests=0,e.allowRedraw=!1,e.renderingActive=!1,!0===e.requiresTimeout?clearTimeout(e.renderTimer):cancelAnimationFrame(e.renderTimer),e.body.emitter.off()})}},{key:"setOptions",value:function(e){if(void 0!==e){n.selectiveDeepExtend(["hideEdgesOnDrag","hideNodesOnDrag"],this.options,e)}}},{key:"_startRendering",value:function(){!0===this.renderingActive&&void 0===this.renderTimer&&(!0===this.requiresTimeout?this.renderTimer=window.setTimeout(this._renderStep.bind(this),this.simulationInterval):this.renderTimer=window.requestAnimationFrame(this._renderStep.bind(this)))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(this.renderTimer=void 0,!0===this.requiresTimeout&&this._startRendering(),this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var e=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&(this.redrawRequested=!0,!0===this.requiresTimeout?window.setTimeout(function(){e._redraw(!1)},0):window.requestAnimationFrame(function(){e._redraw(!1)}))}},{key:"_redraw",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var t=this.canvas.frame.canvas.getContext("2d");0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var i=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(t.clearRect(0,0,i,o),0===this.canvas.frame.clientWidth)return;t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale),t.beginPath(),this.body.emitter.emit("beforeDrawing",t),t.closePath(),!1===e&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&this._drawEdges(t),(!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag)&&this._drawNodes(t,e),t.beginPath(),this.body.emitter.emit("afterDrawing",t),t.closePath(),t.restore(),!0===e&&t.clearRect(0,0,i,o)}}},{key:"_resizeNodes",value:function(){var e=this.canvas.frame.canvas.getContext("2d");void 0===this.pixelRatio&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);var t=this.body.nodes,i=void 0;for(var o in t)t.hasOwnProperty(o)&&(i=t[o],i.resize(e),i.updateBoundingBox(e,i.selected));e.restore()}},{key:"_drawNodes",value:function(e){for(var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],i=this.body.nodes,o=this.body.nodeIndices,n=void 0,s=[],r=this.canvas.DOMtoCanvas({x:-20,y:-20}),a=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+20,y:this.canvas.frame.canvas.clientHeight+20}),h={top:r.y,left:r.x,bottom:a.y,right:a.x},d=0;d<o.length;d++)n=i[o[d]],n.isSelected()?s.push(o[d]):!0===t?n.draw(e):!0===n.isBoundingBoxOverlappingWith(h)?n.draw(e):n.updateBoundingBox(e,n.selected);for(var l=0;l<s.length;l++)n=i[s[l]],n.draw(e)}},{key:"_drawEdges",value:function(e){for(var t=this.body.edges,i=this.body.edgeIndices,o=void 0,n=0;n<i.length;n++)o=t[i[n]],!0===o.connected&&o.draw(e)}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var e=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,-1!=e.indexOf("msie 9.0")?this.requiresTimeout=!0:-1!=e.indexOf("safari")&&e.indexOf("chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}}]),e}();t.default=s},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),n=i(20),s=i(28),r=i(1),a=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.pixelRatio=1,this.resizeTimer=void 0,this.resizeFunction=this._onResize.bind(this),this.cameraState={},this.initialized=!1,this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},r.extend(this.options,this.defaultOptions),this.bindEventListeners()}return o(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.once("resize",function(t){0!==t.width&&(e.body.view.translation.x=.5*t.width),0!==t.height&&(e.body.view.translation.y=.5*t.height)}),this.body.emitter.on("setSize",this.setSize.bind(this)),this.body.emitter.on("destroy",function(){e.hammerFrame.destroy(),e.hammer.destroy(),e._cleanUp()})}},{key:"setOptions",value:function(e){var t=this;if(void 0!==e){r.selectiveDeepExtend(["width","height","autoResize"],this.options,e)}!0===this.options.autoResize&&(this._cleanUp(),this.resizeTimer=setInterval(function(){!0===t.setSize()&&t.body.emitter.emit("_requestRedraw")},1e3),this.resizeFunction=this._onResize.bind(this),r.addEventListener(window,"resize",this.resizeFunction))}},{key:"_cleanUp",value:function(){void 0!==this.resizeTimer&&clearInterval(this.resizeTimer),r.removeEventListener(window,"resize",this.resizeFunction),this.resizeFunction=void 0}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.pixelRatio:arguments[0];!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&this.cameraState.previousWidth>0){var e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,t=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;1!=e&&1!=t?i=.5*this.cameraState.scale*(e+t):1!=e?i=this.cameraState.scale*e:1!=t&&(i=this.cameraState.scale*t),this.body.view.scale=i;var o=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),n=o.x-this.cameraState.position.x,s=o.y-this.cameraState.position.y;this.body.view.translation.x+=n*this.body.view.scale,this.body.view.translation.y+=s*this.body.view.scale}}},{key:"_prepareValue",value:function(e){if("number"==typeof e)return e+"px";if("string"==typeof e){if(-1!==e.indexOf("%")||-1!==e.indexOf("px"))return e;if(-1===e.indexOf("%"))return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=900,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext){var e=this.frame.canvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),this.frame.canvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var e=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new n(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:n.DIRECTION_ALL}),s.onTouch(this.hammer,function(t){e.body.eventListeners.onTouch(t)}),this.hammer.on("tap",function(t){e.body.eventListeners.onTap(t)}),this.hammer.on("doubletap",function(t){e.body.eventListeners.onDoubleTap(t)}),this.hammer.on("press",function(t){e.body.eventListeners.onHold(t)}),this.hammer.on("panstart",function(t){e.body.eventListeners.onDragStart(t)}),this.hammer.on("panmove",function(t){e.body.eventListeners.onDrag(t)}),this.hammer.on("panend",function(t){e.body.eventListeners.onDragEnd(t)}),this.hammer.on("pinch",function(t){e.body.eventListeners.onPinch(t)}),this.frame.canvas.addEventListener("mousewheel",function(t){e.body.eventListeners.onMouseWheel(t)}),this.frame.canvas.addEventListener("DOMMouseScroll",function(t){e.body.eventListeners.onMouseWheel(t)}),this.frame.canvas.addEventListener("mousemove",function(t){e.body.eventListeners.onMouseMove(t)}),this.frame.canvas.addEventListener("contextmenu",function(t){e.body.eventListeners.onContext(t)}),this.hammerFrame=new n(this.frame),s.onRelease(this.hammerFrame,function(t){e.body.eventListeners.onRelease(t)})}},{key:"setSize",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.options.width:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.options.height:arguments[1];e=this._prepareValue(e),t=this._prepareValue(t);var i=!1,o=this.frame.canvas.width,n=this.frame.canvas.height,s=this.frame.canvas.getContext("2d"),r=this.pixelRatio;return this.pixelRatio=(window.devicePixelRatio||1)/(s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1),e!=this.options.width||t!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=t?(this._getCameraState(r),this.frame.style.width=e,this.frame.style.height=t,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=t,i=!0):(this.frame.canvas.width==Math.round(this.frame.canvas.clientWidth*this.pixelRatio)&&this.frame.canvas.height==Math.round(this.frame.canvas.clientHeight*this.pixelRatio)||this._getCameraState(r),this.frame.canvas.width!=Math.round(this.frame.canvas.clientWidth*this.pixelRatio)&&(this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),i=!0),this.frame.canvas.height!=Math.round(this.frame.canvas.clientHeight*this.pixelRatio)&&(this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),i=!0)),!0===i&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(o/this.pixelRatio),oldHeight:Math.round(n/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"_XconvertDOMtoCanvas",value:function(e){return(e-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(e){return e*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(e){return(e-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(e){return e*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}},{key:"DOMtoCanvas",value:function(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}]),e}();t.default=a},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=i(103),r=(o=s)&&o.__esModule?o:{default:o},a=i(1),h=function(){function e(t,i){var o=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.canvas=i,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",this.fit.bind(this)),this.body.emitter.on("animationFinished",function(){o.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",this.releaseNode.bind(this))}return n(e,[{key:"setOptions",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}},{key:"fit",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{nodes:[]}:arguments[0],t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],i=void 0,o=void 0;if(void 0!==e.nodes&&0!==e.nodes.length||(e.nodes=this.body.nodeIndices),!0===t){var n=0;for(var s in this.body.nodes)if(this.body.nodes.hasOwnProperty(s)){!0===this.body.nodes[s].predefinedPosition&&(n+=1)}if(n>.5*this.body.nodeIndices.length)return void this.fit(e,!1);i=r.default.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822,o*=Math.min(this.canvas.frame.canvas.clientWidth/600,this.canvas.frame.canvas.clientHeight/600)}else{this.body.emitter.emit("_resizeNodes"),i=r.default.getRange(this.body.nodes,e.nodes);var a=1.1*Math.abs(i.maxX-i.minX),h=1.1*Math.abs(i.maxY-i.minY),d=this.canvas.frame.canvas.clientWidth/a,l=this.canvas.frame.canvas.clientHeight/h;o=l>=d?d:l}o>1?o=1:0===o&&(o=1);var c={position:r.default.findCenter(i),scale:o,animation:e.animation};this.moveTo(c)}},{key:"focus",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(void 0!==this.body.nodes[e]){var i={x:this.body.nodes[e].x,y:this.body.nodes[e].y};t.position=i,t.lockedOnNode=e,this.moveTo(t)}else console.log("Node: "+e+" cannot be found.")}},{key:"moveTo",value:function(e){return void 0===e?void(e={}):(void 0===e.offset&&(e.offset={x:0,y:0}),void 0===e.offset.x&&(e.offset.x=0),void 0===e.offset.y&&(e.offset.y=0),void 0===e.scale&&(e.scale=this.body.view.scale),void 0===e.position&&(e.position=this.getViewPosition()),void 0===e.animation&&(e.animation={duration:0}),!1===e.animation&&(e.animation={duration:0}),!0===e.animation&&(e.animation={}),void 0===e.animation.duration&&(e.animation.duration=1e3),void 0===e.animation.easingFunction&&(e.animation.easingFunction="easeInOutQuad"),void this.animateView(e))}},{key:"animateView",value:function(e){if(void 0!==e){this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),!0===e.locked&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;var t=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i=t.x-e.position.x,o=t.y-e.position.y;this.targetTranslation={x:this.sourceTranslation.x+i*this.targetScale+e.offset.x,y:this.sourceTranslation.y+o*this.targetScale+e.offset.y},0===e.animation.duration?void 0!=this.lockedOnNodeId?(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=this._transitionRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var e=this.body.nodes[this.lockedOnNodeId].x,t=this.body.nodes[this.lockedOnNodeId].y,i=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),o=i.x-e,n=i.y-t,s=this.body.view.translation,r={x:s.x+o*this.body.view.scale+this.lockedOnNodeOffset.x,y:s.y+n*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=r}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=!0===e?1:this.easingTime;var t=a.easingFunctions[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*t,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*t,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*t},this.easingTime>=1&&(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,void 0!=this.lockedOnNodeId&&(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),e}();t.default=h},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=o(i(109)),r=o(i(110)),a=i(1),h=function(){function e(t,i,o){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.canvas=i,this.selectionHandler=o,this.navigationHandler=new s.default(t,i),this.body.eventListeners.onTap=this.onTap.bind(this),this.body.eventListeners.onTouch=this.onTouch.bind(this),this.body.eventListeners.onDoubleTap=this.onDoubleTap.bind(this),this.body.eventListeners.onHold=this.onHold.bind(this),this.body.eventListeners.onDragStart=this.onDragStart.bind(this),this.body.eventListeners.onDrag=this.onDrag.bind(this),this.body.eventListeners.onDragEnd=this.onDragEnd.bind(this),this.body.eventListeners.onMouseWheel=this.onMouseWheel.bind(this),this.body.eventListeners.onPinch=this.onPinch.bind(this),this.body.eventListeners.onMouseMove=this.onMouseMove.bind(this),this.body.eventListeners.onRelease=this.onRelease.bind(this),this.body.eventListeners.onContext=this.onContext.bind(this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=this.getPointer.bind(this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0},a.extend(this.options,this.defaultOptions),this.bindEventListeners()}return n(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("destroy",function(){clearTimeout(e.popupTimer),delete e.body.functions.getPointer})}},{key:"setOptions",value:function(e){if(void 0!==e){a.selectiveNotDeepExtend(["hideEdgesOnDrag","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),a.mergeOptions(this.options,e,"keyboard"),e.tooltip&&(a.extend(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=a.parseColor(e.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(e){return{x:e.x-a.getAbsoluteLeft(this.canvas.frame.canvas),y:e.y-a.getAbsoluteTop(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(e){(new Date).valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(e){var t=this.getPointer(e.center),i=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(t,e,i),this.selectionHandler._generateClickEvent("click",e,t)}},{key:"onDoubleTap",value:function(e){var t=this.getPointer(e.center);this.selectionHandler._generateClickEvent("doubleClick",e,t)}},{key:"onHold",value:function(e){var t=this.getPointer(e.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(t,e,i),this.selectionHandler._generateClickEvent("click",e,t),this.selectionHandler._generateClickEvent("hold",e,t)}},{key:"onRelease",value:function(e){if((new Date).valueOf()-this.touchTime>10){var t=this.getPointer(e.center);this.selectionHandler._generateClickEvent("release",e,t),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(e){var t=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler._generateClickEvent("oncontext",e,t)}},{key:"checkSelectionChanges",value:function(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=this.selectionHandler._getSelectedEdgeCount(),n=this.selectionHandler._getSelectedNodeCount(),s=this.selectionHandler.getSelection(),r=void 0;r=!0===i?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e);var a=this.selectionHandler._getSelectedEdgeCount(),h=this.selectionHandler._getSelectedNodeCount(),d=this.selectionHandler.getSelection(),l=this._determineIfDifferent(s,d),c=l.nodesChanged,u=l.edgesChanged,p=!1;h-n>0?(this.selectionHandler._generateClickEvent("selectNode",t,e),r=!0,p=!0):!0===c&&h>0?(this.selectionHandler._generateClickEvent("deselectNode",t,e,s),this.selectionHandler._generateClickEvent("selectNode",t,e),p=!0,r=!0):0>h-n&&(this.selectionHandler._generateClickEvent("deselectNode",t,e,s),r=!0),a-o>0&&!1===p?(this.selectionHandler._generateClickEvent("selectEdge",t,e),r=!0):a>0&&!0===u?(this.selectionHandler._generateClickEvent("deselectEdge",t,e,s),this.selectionHandler._generateClickEvent("selectEdge",t,e),r=!0):0>a-o&&(this.selectionHandler._generateClickEvent("deselectEdge",t,e,s),r=!0),!0===r&&this.selectionHandler._generateClickEvent("select",t,e)}},{key:"_determineIfDifferent",value:function(e,t){for(var i=!1,o=!1,n=0;n<e.nodes.length;n++)-1===t.nodes.indexOf(e.nodes[n])&&(i=!0);for(var s=0;s<t.nodes.length;s++)-1===e.nodes.indexOf(e.nodes[s])&&(i=!0);for(var r=0;r<e.edges.length;r++)-1===t.edges.indexOf(e.edges[r])&&(o=!0);for(var a=0;a<t.edges.length;a++)-1===e.edges.indexOf(e.edges[a])&&(o=!0);return{nodesChanged:i,edgesChanged:o}}},{key:"onDragStart",value:function(e){void 0===this.drag.pointer&&this.onTouch(e);var t=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=a.extend({},this.body.view.translation),this.drag.nodeId=void 0,void 0!==t&&!0===this.options.dragNodes){this.drag.nodeId=t.id,!1===t.isSelected()&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(t)),this.selectionHandler._generateClickEvent("dragStart",e,this.drag.pointer);var i=this.selectionHandler.selectionObj.nodes;for(var o in i)if(i.hasOwnProperty(o)){var n=i[o],s={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(s)}}else this.selectionHandler._generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}},{key:"onDrag",value:function(e){var t=this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var i=this.getPointer(e.center),o=this.drag.selection;if(o&&o.length&&!0===this.options.dragNodes)!function(){t.selectionHandler._generateClickEvent("dragging",e,i);var n=i.x-t.drag.pointer.x,s=i.y-t.drag.pointer.y;o.forEach(function(e){var i=e.node;!1===e.xFixed&&(i.x=t.canvas._XconvertDOMtoCanvas(t.canvas._XconvertCanvasToDOM(e.x)+n)),!1===e.yFixed&&(i.y=t.canvas._YconvertDOMtoCanvas(t.canvas._YconvertCanvasToDOM(e.y)+s))}),t.body.emitter.emit("startSimulation")}();else if(!0===this.options.dragView){if(this.selectionHandler._generateClickEvent("dragging",e,i,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(e);var n=i.x-this.drag.pointer.x,s=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+n,y:this.drag.translation.y+s},this.body.emitter.emit("_redraw")}}}},{key:"onDragEnd",value:function(e){this.drag.dragging=!1;var t=this.drag.selection;t&&t.length?(t.forEach(function(e){e.node.options.fixed.x=e.xFixed,e.node.options.fixed.y=e.yFixed}),this.selectionHandler._generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler._generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}},{key:"onPinch",value:function(e){var t=this.getPointer(e.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var i=this.pinch.scale*e.scale;this.zoom(i,t)}},{key:"zoom",value:function(e,t){if(!0===this.options.zoomView){var i=this.body.view.scale;1e-5>e&&(e=1e-5),e>10&&(e=10);var o=void 0;void 0!==this.drag&&!0===this.drag.dragging&&(o=this.canvas.DOMtoCanvas(this.drag.pointer));var n=this.body.view.translation,s=e/i,r=(1-s)*t.x+n.x*s,a=(1-s)*t.y+n.y*s;if(this.body.view.scale=e,this.body.view.translation={x:r,y:a},void 0!=o){var h=this.canvas.canvasToDOM(o);this.drag.pointer.x=h.x,this.drag.pointer.y=h.y}this.body.emitter.emit("_requestRedraw"),e>i?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale})}}},{key:"onMouseWheel",value:function(e){if(!0===this.options.zoomView){var t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),0!==t){var i=this.body.view.scale,o=t/10;0>t&&(o/=1-o),i*=1+o;var n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(i,n)}e.preventDefault()}}},{key:"onMouseMove",value:function(e){var t=this,i=this.getPointer({x:e.clientX,y:e.clientY}),o=!1;if(void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(i),!1===this.popup.hidden&&(o=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&this.canvas.frame.focus(),!1===o&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=setTimeout(function(){return t._checkShowPopup(i)},this.options.tooltipDelay))),!0===this.options.hover){var n=this.selectionHandler.getNodeAt(i);void 0===n&&(n=this.selectionHandler.getEdgeAt(i)),this.selectionHandler.hoverObject(n)}}},{key:"_checkShowPopup",value:function(e){var t=this.canvas._XconvertDOMtoCanvas(e.x),i=this.canvas._YconvertDOMtoCanvas(e.y),o={left:t,top:i,right:t,bottom:i},n=void 0===this.popupObj?void 0:this.popupObj.id,s=!1,a="node";if(void 0===this.popupObj){for(var h=this.body.nodeIndices,d=this.body.nodes,l=void 0,c=[],u=0;u<h.length;u++)l=d[h[u]],!0===l.isOverlappingWith(o)&&void 0!==l.getTitle()&&c.push(h[u]);c.length>0&&(this.popupObj=d[c[c.length-1]],s=!0)}if(void 0===this.popupObj&&!1===s){for(var p=this.body.edgeIndices,f=this.body.edges,m=void 0,g=[],v=0;v<p.length;v++)m=f[p[v]],!0===m.isOverlappingWith(o)&&!0===m.connected&&void 0!==m.getTitle()&&g.push(p[v]);g.length>0&&(this.popupObj=f[g[g.length-1]],a="edge")}void 0!==this.popupObj?this.popupObj.id!==n&&(void 0===this.popup&&(this.popup=new r.default(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(e){var t=this.selectionHandler._pointerToPositionObject(e),i=!1;"node"===this.popup.popupTargetType?void 0!==this.body.nodes[this.popup.popupTargetId]&&!0===(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(t))&&(i=this.selectionHandler.getNodeAt(e).id===this.popup.popupTargetId):void 0===this.selectionHandler.getNodeAt(e)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(t));!1===i&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),e}();t.default=h},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),n=(i(1),i(20)),s=i(28),r=i(23),a=function(){function e(t,i){var o=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.canvas=i,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){o.activated=!0,o.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){o.activated=!1,o.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){void 0!==o.keycharm&&o.keycharm.destroy()}),this.options={}}return o(e,[{key:"setOptions",value:function(e){void 0!==e&&(this.options=e,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():!0===this.iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var e=this;this.cleanNavigation(),this.navigationDOM={};var t=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var o=0;o<t.length;o++){this.navigationDOM[t[o]]=document.createElement("div"),this.navigationDOM[t[o]].className="vis-button vis-"+t[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[t[o]]);var r=new n(this.navigationDOM[t[o]]);"_fit"===i[o]?s.onTouch(r,this._fit.bind(this)):s.onTouch(r,this.bindToRedraw.bind(this,i[o])),this.navigationHammers.push(r)}var a=new n(this.canvas.frame);s.onRelease(a,function(){e._stopMovement()}),this.navigationHammers.push(a),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(e){void 0===this.boundFunctions[e]&&(this.boundFunctions[e]=this[e].bind(this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(e){void 0!==this.boundFunctions[e]&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}},{key:"_fit",value:function(){(new Date).valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var e in this.boundFunctions)this.boundFunctions.hasOwnProperty(e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){this.body.view.scale*=1+this.options.keyboard.speed.zoom,this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale})}},{key:"_zoomOut",value:function(){this.body.view.scale/=1+this.options.keyboard.speed.zoom,this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale})}},{key:"configureKeyboardBindings",value:function(){var e=this;void 0!==this.keycharm&&this.keycharm.destroy(),!0===this.options.keyboard.enabled&&(!0===this.options.keyboard.bindToWindow?this.keycharm=r({container:window,preventDefault:!0}):this.keycharm=r({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(this.keycharm.bind("up",function(){e.bindToRedraw("_moveUp")},"keydown"),this.keycharm.bind("down",function(){e.bindToRedraw("_moveDown")},"keydown"),this.keycharm.bind("left",function(){e.bindToRedraw("_moveLeft")},"keydown"),this.keycharm.bind("right",function(){e.bindToRedraw("_moveRight")},"keydown"),this.keycharm.bind("=",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num+",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num-",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("-",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("[",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("]",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pageup",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pagedown",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("up",function(){e.unbindFromRedraw("_moveUp")},"keyup"),this.keycharm.bind("down",function(){e.unbindFromRedraw("_moveDown")},"keyup"),this.keycharm.bind("left",function(){e.unbindFromRedraw("_moveLeft")},"keyup"),this.keycharm.bind("right",function(){e.unbindFromRedraw("_moveRight")},"keyup"),this.keycharm.bind("=",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num+",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num-",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("-",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("[",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("]",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pageup",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pagedown",function(){e.unbindFromRedraw("_zoomOut")},"keyup")))}}]),e}();t.default=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),o=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.container=t,this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-network-tooltip",this.container.appendChild(this.frame)}return i(e,[{key:"setPosition",value:function(e,t){this.x=parseInt(e),this.y=parseInt(t)}},{key:"setText",value:function(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=e}},{key:"show",value:function(e){if(void 0===e&&(e=!0),!0===e){var t=this.frame.clientHeight,i=this.frame.clientWidth,o=this.frame.parentNode.clientHeight,n=this.frame.parentNode.clientWidth,s=this.y-t;s+t+this.padding>o&&(s=o-t-this.padding),s<this.padding&&(s=this.padding);var r=this.x;r+i+this.padding>n&&(r=n-i-this.padding),r<this.padding&&(r=this.padding),this.frame.style.left=r+"px",this.frame.style.top=s+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.visibility="hidden"}}]),e}();t.default=o},function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=o(i(65)),r=o(i(85)),a=i(1),h=function(){function e(t,i){var o=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.canvas=i,this.selectionObj={nodes:[],edges:[]},this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},a.extend(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){o.updateSelection()})}return n(e,[{key:"setOptions",value:function(e){if(void 0!==e){a.selectiveDeepExtend(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}}},{key:"selectOnPoint",value:function(e){var t=!1;if(!0===this.options.selectable){var i=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),void 0!==i&&(t=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return t}},{key:"selectAdditionalOnPoint",value:function(e){var t=!1;if(!0===this.options.selectable){var i=this.getNodeAt(e)||this.getEdgeAt(e);void 0!==i&&(t=!0,!0===i.isSelected()?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return t}},{key:"_generateClickEvent",value:function(e,t,i,o){var n=void 0;(n=!0===(!(arguments.length<=4||void 0===arguments[4])&&arguments[4])?{nodes:[],edges:[]}:this.getSelection()).pointer={DOM:{x:i.x,y:i.y},canvas:this.canvas.DOMtoCanvas(i)},n.event=t,void 0!==o&&(n.previousSelection=o),this.body.emitter.emit(e,n)}},{key:"selectObject",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.options.selectConnectedEdges:arguments[1];return void 0!==e&&(e instanceof s.default&&!0===t&&this._selectConnectedEdges(e),e.select(),this._addToSelection(e),!0)}},{key:"deselectObject",value:function(e){!0===e.isSelected()&&(e.selected=!1,this._removeFromSelection(e))}},{key:"_getAllNodesOverlappingWith",value:function(e){for(var t=[],i=this.body.nodes,o=0;o<this.body.nodeIndices.length;o++){var n=this.body.nodeIndices[o];i[n].isOverlappingWith(e)&&t.push(n)}return t}},{key:"_pointerToPositionObject",value:function(e){var t=this.canvas.DOMtoCanvas(e);return{left:t.x-1,top:t.y+1,right:t.x+1,bottom:t.y-1}}},{key:"getNodeAt",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1],i=this._pointerToPositionObject(e),o=this._getAllNodesOverlappingWith(i);return o.length>0?!0===t?this.body.nodes[o[o.length-1]]:o[o.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(e,t){for(var i=this.body.edges,o=0;o<this.body.edgeIndices.length;o++){var n=this.body.edgeIndices[o];i[n].isOverlappingWith(e)&&t.push(n)}}},{key:"_getAllEdgesOverlappingWith",value:function(e){var t=[];return this._getEdgesOverlappingWith(e,t),t}},{key:"getEdgeAt",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1],i=this._pointerToPositionObject(e),o=this._getAllEdgesOverlappingWith(i);return o.length>0?!0===t?this.body.edges[o[o.length-1]]:o[o.length-1]:void 0}},{key:"_addToSelection",value:function(e){e instanceof s.default?this.selectionObj.nodes[e.id]=e:this.selectionObj.edges[e.id]=e}},{key:"_addToHover",value:function(e){e instanceof s.default?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}},{key:"_removeFromSelection",value:function(e){e instanceof s.default?(delete this.selectionObj.nodes[e.id],this._unselectConnectedEdges(e)):delete this.selectionObj.edges[e.id]}},{key:"unselectAll",value:function(){for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&this.selectionObj.nodes[e].unselect();for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&this.selectionObj.edges[t].unselect();this.selectionObj={nodes:{},edges:{}}}},{key:"_getSelectedNodeCount",value:function(){var e=0;for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(e+=1);return e}},{key:"_getSelectedNode",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e))return this.selectionObj.nodes[e]}},{key:"_getSelectedEdge",value:function(){for(var e in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(e))return this.selectionObj.edges[e]}},{key:"_getSelectedEdgeCount",value:function(){var e=0;for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&(e+=1);return e}},{key:"_getSelectedObjectCount",value:function(){var e=0;for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(e+=1);for(var i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&(e+=1);return e}},{key:"_selectionIsEmpty",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e))return!1;for(var t in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(t))return!1;return!0}},{key:"_clusterInSelection",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e)&&this.selectionObj.nodes[e].clusterSize>1)return!0;return!1}},{key:"_selectConnectedEdges",value:function(e){for(var t=0;t<e.edges.length;t++){var i=e.edges[t];i.select(),this._addToSelection(i)}}},{key:"_hoverConnectedEdges",value:function(e){for(var t=0;t<e.edges.length;t++){var i=e.edges[t];i.hover=!0,this._addToHover(i)}}},{key:"_unselectConnectedEdges",value:function(e){for(var t=0;t<e.edges.length;t++){var i=e.edges[t];i.unselect(),this._removeFromSelection(i)}}},{key:"blurObject",value:function(e){!0===e.hover&&(e.hover=!1,e instanceof s.default?this.body.emitter.emit("blurNode",{node:e.id}):this.body.emitter.emit("blurEdge",{edge:e.id}))}},{key:"hoverObject",value:function(e){var t=!1;for(var i in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(i)&&(void 0===e||e instanceof s.default&&e.id!=i||e instanceof r.default)&&(this.blurObject(this.hoverObj.nodes[i]),delete this.hoverObj.nodes[i],t=!0);for(var o in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(o)&&(!0===t?(this.hoverObj.edges[o].hover=!1,delete this.hoverObj.edges[o]):void 0===e&&(this.blurObject(this.hoverObj.edges[o]),delete this.hoverObj.edges[o],t=!0));void 0!==e&&(!1===e.hover&&(e.hover=!0,this._addToHover(e),t=!0,e instanceof s.default?this.body.emitter.emit("hoverNode",{node:e.id}):this.body.emitter.emit("hoverEdge",{edge:e.id})),e instanceof s.default&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(e)),!0===t&&this.body.emitter.emit("_requestRedraw")}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodes(),edges:this.getSelectedEdges()}}},{key:"getSelectedNodes",value:function(){var e=[];if(!0===this.options.selectable)for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&e.push(this.selectionObj.nodes[t].id);return e}},{key:"getSelectedEdges",value:function(){var e=[];if(!0===this.options.selectable)for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&e.push(this.selectionObj.edges[t].id);return e}},{key:"setSelection",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=void 0,o=void 0;if(!e||!e.nodes&&!e.edges)throw"Selection must be an object with nodes and/or edges properties";if((t.unselectAll||void 0===t.unselectAll)&&this.unselectAll(),e.nodes)for(i=0;i<e.nodes.length;i++){o=e.nodes[i];var n=this.body.nodes[o];if(!n)throw new RangeError('Node with id "'+o+'" not found');this.selectObject(n,t.highlightEdges)}if(e.edges)for(i=0;i<e.edges.length;i++){o=e.edges[i];var s=this.body.edges[o];if(!s)throw new RangeError('Edge with id "'+o+'" not found');this.selectObject(s)}this.body.emitter.emit("_requestRedraw")}},{key:"selectNodes",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];if(!e||void 0===e.length)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:t})}},{key:"selectEdges",value:function(e){if(!e||void 0===e.length)throw"Selection must be an array with ids";this.setSelection({edges:e})}},{key:"updateSelection",value:function(){for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(this.body.nodes.hasOwnProperty(e)||delete this.selectionObj.nodes[e]);for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&(this.body.edges.hasOwnProperty(t)||delete this.selectionObj.edges[t])}}]),e}();t.default=h},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],o=!0,n=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){n=!0,s=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),a=i(103),h=(o=a)&&o.__esModule?o:{default:o},d=i(1),l=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.initialRandomSeed=Math.round(1e6*Math.random()),this.randomSeed=this.initialRandomSeed,this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},d.extend(this.options,this.defaultOptions),this.bindEventListeners()}return r(e,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("_dataChanged",function(){e.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){e.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){e.setupHierarchicalLayout()})}},{key:"setOptions",value:function(e,t){if(void 0!==e){var i=this.options.hierarchical.enabled;if(d.selectiveDeepExtend(["randomSeed","improvedLayout"],this.options,e),d.mergeOptions(this.options,e,"hierarchical"),void 0!==e.randomSeed&&(this.initialRandomSeed=e.randomSeed),!0===this.options.hierarchical.enabled)return!0===i&&this.body.emitter.emit("refresh",!0),"RL"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?this.options.hierarchical.levelSeparation>0&&(this.options.hierarchical.levelSeparation*=-1):this.options.hierarchical.levelSeparation<0&&(this.options.hierarchical.levelSeparation*=-1),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(t);if(!0===i)return this.body.emitter.emit("refresh"),d.deepExtend(t,this.optionsBackup)}return t}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(e){if(!0===this.options.hierarchical.enabled){void 0===e.physics||!0===e.physics?(e.physics={enabled:void 0===this.optionsBackup.physics.enabled||this.optionsBackup.physics.enabled,solver:"hierarchicalRepulsion"},this.optionsBackup.physics.enabled=void 0===this.optionsBackup.physics.enabled||this.optionsBackup.physics.enabled,this.optionsBackup.physics.solver=this.optionsBackup.physics.solver||"barnesHut"):"object"===s(e.physics)?(this.optionsBackup.physics.enabled=void 0===e.physics.enabled||e.physics.enabled,this.optionsBackup.physics.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):!1!==e.physics&&(this.optionsBackup.physics.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});var t="horizontal";"RL"!==this.options.hierarchical.direction&&"LR"!==this.options.hierarchical.direction||(t="vertical"),void 0===e.edges?(this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1}):void 0===e.edges.smooth?(this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1):"boolean"==typeof e.edges.smooth?(this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:t}):(void 0!==e.edges.smooth.type&&"dynamic"!==e.edges.smooth.type&&(t=e.edges.smooth.type),this.optionsBackup.edges={smooth:void 0===e.edges.smooth.enabled||e.edges.smooth.enabled,type:void 0===e.edges.smooth.type?"dynamic":e.edges.smooth.type,roundness:void 0===e.edges.smooth.roundness?.5:e.edges.smooth.roundness,forceDirection:void 0!==e.edges.smooth.forceDirection&&e.edges.smooth.forceDirection},e.edges.smooth={enabled:void 0===e.edges.smooth.enabled||e.edges.smooth.enabled,type:t,roundness:void 0===e.edges.smooth.roundness?.5:e.edges.smooth.roundness,forceDirection:void 0!==e.edges.smooth.forceDirection&&e.edges.smooth.forceDirection}),this.body.emitter.emit("_forceDisableDynamicCurves",t)}return e}},{key:"seededRandom",value:function(){var e=1e4*Math.sin(this.randomSeed++);return e-Math.floor(e)}},{key:"positionInitially",value:function(e){if(!0!==this.options.hierarchical.enabled){this.randomSeed=this.initialRandomSeed;for(var t=0;t<e.length;t++){var i=e[t],o=1*e.length+10,n=2*Math.PI*this.seededRandom();void 0===i.x&&(i.x=o*Math.cos(n)),void 0===i.y&&(i.y=o*Math.sin(n))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var e=0,t=0;t<this.body.nodeIndices.length;t++){!0===this.body.nodes[this.body.nodeIndices[t]].predefinedPosition&&(e+=1)}if(e<.5*this.body.nodeIndices.length){var i=0;if(this.body.nodeIndices.length>100){for(var o=this.body.nodeIndices.length;this.body.nodeIndices.length>100;){i+=1;var n=this.body.nodeIndices.length;if(i%3==0?this.body.modules.clustering.clusterBridges():this.body.modules.clustering.clusterOutliers(),n==this.body.nodeIndices.length&&i%3!=0||i>10)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*o)})}this.body.modules.kamadaKawai.solve(this.body.nodeIndices,this.body.edgeIndices,!0),this._shiftToCenter();for(var s=0;s<this.body.nodeIndices.length;s++)this.body.nodes[this.body.nodeIndices[s]].x+=70*(.5-this.seededRandom()),this.body.nodes[this.body.nodeIndices[s]].y+=70*(.5-this.seededRandom());this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var e=h.default.getRangeCore(this.body.nodes,this.body.nodeIndices),t=h.default.findCenter(e),i=0;i<this.body.nodeIndices.length;i++)this.body.nodes[this.body.nodeIndices[i]].x-=t.x,this.body.nodes[this.body.nodeIndices[i]].y-=t.y}},{key:"_declusterAll",value:function(){for(var e=!0;!0===e;){e=!1;for(var t=0;t<this.body.nodeIndices.length;t++)!0===this.body.nodes[this.body.nodeIndices[t]].isCluster&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[t],{},!1));!0===e&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&this.body.nodeIndices.length>0){var e=void 0,t=void 0,i=!1,o=!1;this.hierarchicalLevels={},this.lastNodeOnLevel={},this.hierarchicalChildrenReference={},this.hierarchicalParentReference={},this.hierarchicalTrees={},this.treeIndex=-1,this.distributionOrdering={},this.distributionIndex={},this.distributionOrderingPresence={};for(t in this.body.nodes)this.body.nodes.hasOwnProperty(t)&&(e=this.body.nodes[t],void 0===e.options.x&&void 0===e.options.y&&!1,void 0!==e.options.level?(i=!0,this.hierarchicalLevels[t]=e.options.level):o=!0);if(!0===o&&!0===i)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");!0===o&&("hubsize"===this.options.hierarchical.sortMethod?this._determineLevelsByHubsize():"directed"===this.options.hierarchical.sortMethod?this._determineLevelsDirected():"custom"===this.options.hierarchical.sortMethod&&this._determineLevelsCustomCallback());for(var n in this.body.nodes)this.body.nodes.hasOwnProperty(n)&&void 0===this.hierarchicalLevels[n]&&(this.hierarchicalLevels[n]=0);var s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var e=this,t=!1,i={},o=function(t,i){for(var o in e.hierarchicalTrees)if(e.hierarchicalTrees.hasOwnProperty(o)&&e.hierarchicalTrees[o]===t){var n=e.body.nodes[o],s=e._getPositionForHierarchy(n);e._setPositionForHierarchy(n,s+i,void 0,!0)}},s=function(t){var i=1e9,o=-1e9;for(var n in e.hierarchicalTrees)if(e.hierarchicalTrees.hasOwnProperty(n)&&e.hierarchicalTrees[n]===t){var s=e._getPositionForHierarchy(e.body.nodes[n]);i=Math.min(s,i),o=Math.max(s,o)}return{min:i,max:o}},r=function(){for(var t=[],i=0;i<=e.treeIndex;i++)t.push(s(i));return t},a=function t(i,o){if(o[i.id]=!0,e.hierarchicalChildrenReference[i.id]){var n=e.hierarchicalChildrenReference[i.id];if(n.length>0)for(var s=0;s<n.length;s++)t(e.body.nodes[n[s]],o)}},h=function(t){var i=arguments.length<=1||void 0===arguments[1]?1e9:arguments[1],o=1e9,s=1e9,r=1e9,a=-1e9;for(var h in t)if(t.hasOwnProperty(h)){var d=e.body.nodes[h],l=e.hierarchicalLevels[d.id],c=e._getPositionForHierarchy(d),u=e._getSpaceAroundNode(d,t),p=n(u,2),f=p[0],m=p[1];o=Math.min(f,o),s=Math.min(m,s),i>=l&&(r=Math.min(c,r),a=Math.max(c,a))}return[r,a,o,s]},d=function t(i){var o=e.hierarchicalLevels[i];if(e.hierarchicalChildrenReference[i]){var n=e.hierarchicalChildrenReference[i];if(n.length>0)for(var s=0;s<n.length;s++)o=Math.max(o,t(n[s]))}return o},l=function(t,i){var o=e.hierarchicalParentReference[t.id],n=e.hierarchicalParentReference[i.id];if(void 0===o||void 0===n)return!1;for(var s=0;s<o.length;s++)for(var r=0;r<n.length;r++)if(o[s]==n[r])return!0;return!1},c=function(t,i,o){for(var n=0;n<i.length;n++){var s=i[n],r=e.distributionOrdering[s];if(r.length>1)for(var a=0;a<r.length-1;a++)!0===l(r[a],r[a+1])&&e.hierarchicalTrees[r[a].id]===e.hierarchicalTrees[r[a+1].id]&&t(r[a],r[a+1],o)}},u=function(i,o){var s,r,l,c=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],u=e._getPositionForHierarchy(i),p=e._getPositionForHierarchy(o);if(Math.abs(p-u)>e.options.hierarchical.nodeSpacing){var f={};f[i.id]=!0;var m={};m[o.id]=!0,a(i,f),a(o,m);var g=(s=o,r=d(i.id),l=d(s.id),Math.min(r,l)),v=h(f,g),y=n(v,4),b=(y[0],y[1]),w=(y[2],y[3],h(m,g)),_=n(w,4),x=_[0],k=(_[1],_[2]);if((_[3],Math.abs(b-x))>e.options.hierarchical.nodeSpacing){var S=b-x+e.options.hierarchical.nodeSpacing;S<-k+e.options.hierarchical.nodeSpacing&&(S=-k+e.options.hierarchical.nodeSpacing),0>S&&(e._shiftBlock(o.id,S),t=!0,!0===c&&e._centerParent(o))}}},p=function(o,s){for(var r=s.id,d=s.edges,l=e.hierarchicalLevels[s.id],c=e.options.hierarchical.levelSeparation*e.options.hierarchical.levelSeparation,u={},p=[],f=0;f<d.length;f++){var m=d[f];if(m.toId!=m.fromId){var g=m.toId==r?m.from:m.to;u[d[f].id]=g,e.hierarchicalLevels[g.id]<l&&p.push(m)}}var v,y,b,w,_,x,k,S,O=function(t,i){for(var o=0,n=0;n<i.length;n++)if(void 0!==u[i[n].id]){var s=e._getPositionForHierarchy(u[i[n].id])-t;o+=s/Math.sqrt(s*s+c)}return o},C=function(t,i){for(var o=0,n=0;n<i.length;n++)if(void 0!==u[i[n].id]){var s=e._getPositionForHierarchy(u[i[n].id])-t;o-=c*Math.pow(s*s+c,-1.5)}return o},M=function(t,i){for(var o=e._getPositionForHierarchy(s),n={},r=0;t>r;r++){var a=O(o,i),h=C(o,i);if(void 0!==n[o-=Math.max(-40,Math.min(40,Math.round(a/h)))])break;n[o]=r}return o},D=M(o,p);(function(o){var r=e._getPositionForHierarchy(s);if(void 0===i[s.id]){var d={};d[s.id]=!0,a(s,d),i[s.id]=d}var l=h(i[s.id]),c=n(l,4),u=(c[0],c[1],c[2]),p=c[3],f=o-r,m=0;f>0?m=Math.min(f,p-e.options.hierarchical.nodeSpacing):0>f&&(m=-Math.min(-f,u-e.options.hierarchical.nodeSpacing)),0!=m&&(e._shiftBlock(s.id,m),t=!0)})(D),D=M(o,d),v=D,y=e._getPositionForHierarchy(s),b=e._getSpaceAroundNode(s),w=n(b,2),_=w[0],x=w[1],S=y,(k=v-y)>0?S=Math.min(y+(x-e.options.hierarchical.nodeSpacing),v):0>k&&(S=Math.max(y-(_-e.options.hierarchical.nodeSpacing),v)),S!==y&&(e._setPositionForHierarchy(s,S,void 0,!0),t=!0)};!0===this.options.hierarchical.blockShifting&&(function(i){var o=Object.keys(e.distributionOrdering);o=o.reverse();for(var n=0;i>n&&(t=!1,c(u,o,!0),!0===t);n++);}(5),function(){for(var t in e.body.nodes)e.body.nodes.hasOwnProperty(t)&&e._centerParent(e.body.nodes[t])}()),!0===this.options.hierarchical.edgeMinimization&&function(i){var o=Object.keys(e.distributionOrdering);o=o.reverse();for(var n=0;i>n;n++){t=!1;for(var s=0;s<o.length;s++)for(var r=o[s],a=e.distributionOrdering[r],h=0;h<a.length;h++)p(1e3,a[h]);if(!0!==t)break}}(20),!0===this.options.hierarchical.parentCentralization&&function(){var t=Object.keys(e.distributionOrdering);t=t.reverse();for(var i=0;i<t.length;i++)for(var o=t[i],n=e.distributionOrdering[o],s=0;s<n.length;s++)e._centerParent(n[s])}(),function(){for(var t=r(),i=0;i<t.length-1;i++){var n=t[i].max-t[i+1].min;o(i+1,n+e.options.hierarchical.treeSpacing)}}()}},{key:"_getSpaceAroundNode",value:function(e,t){var i=!0;void 0===t&&(i=!1);var o=this.hierarchicalLevels[e.id];if(void 0!==o){var n=this.distributionIndex[e.id],s=this._getPositionForHierarchy(e),r=1e9,a=1e9;if(0!==n){var h=this.distributionOrdering[o][n-1];if(!0===i&&void 0===t[h.id]||!1===i)r=s-this._getPositionForHierarchy(h)}if(n!=this.distributionOrdering[o].length-1){var d=this.distributionOrdering[o][n+1];if(!0===i&&void 0===t[d.id]||!1===i){var l=this._getPositionForHierarchy(d);a=Math.min(a,l-s)}}return[r,a]}return[0,0]}},{key:"_centerParent",value:function(e){if(this.hierarchicalParentReference[e.id])for(var t=this.hierarchicalParentReference[e.id],i=0;i<t.length;i++){var o=t[i],s=this.body.nodes[o];if(this.hierarchicalChildrenReference[o]){var r=1e9,a=-1e9,h=this.hierarchicalChildrenReference[o];if(h.length>0)for(var d=0;d<h.length;d++){var l=this.body.nodes[h[d]];r=Math.min(r,this._getPositionForHierarchy(l)),a=Math.max(a,this._getPositionForHierarchy(l))}var c=this._getPositionForHierarchy(s),u=this._getSpaceAroundNode(s),p=n(u,2),f=p[0],m=p[1],g=.5*(r+a),v=c-g;(0>v&&Math.abs(v)<m-this.options.hierarchical.nodeSpacing||v>0&&Math.abs(v)<f-this.options.hierarchical.nodeSpacing)&&this._setPositionForHierarchy(s,g,void 0,!0)}}}},{key:"_placeNodesByHierarchy",value:function(e){this.positionedNodes={};for(var t in e)if(e.hasOwnProperty(t)){var i=Object.keys(e[t]);i=this._indexArrayToNodes(i),this._sortNodeArray(i);for(var o=0,n=0;n<i.length;n++){var s=i[n];if(void 0===this.positionedNodes[s.id]){var r=this.options.hierarchical.nodeSpacing*o;o>0&&(r=this._getPositionForHierarchy(i[n-1])+this.options.hierarchical.nodeSpacing),this._setPositionForHierarchy(s,r,t),this._validataPositionAndContinue(s,t,r),o++}}}}},{key:"_placeBranchNodes",value:function(e,t){if(void 0!==this.hierarchicalChildrenReference[e]){for(var i=[],o=0;o<this.hierarchicalChildrenReference[e].length;o++)i.push(this.body.nodes[this.hierarchicalChildrenReference[e][o]]);this._sortNodeArray(i);for(var n=0;n<i.length;n++){var s=i[n],r=this.hierarchicalLevels[s.id];if(!(r>t&&void 0===this.positionedNodes[s.id]))return;var a;a=0===n?this._getPositionForHierarchy(this.body.nodes[e]):this._getPositionForHierarchy(i[n-1])+this.options.hierarchical.nodeSpacing,this._setPositionForHierarchy(s,a,r),this._validataPositionAndContinue(s,r,a)}for(var h=1e9,d=-1e9,l=0;l<i.length;l++){var c=i[l].id;h=Math.min(h,this._getPositionForHierarchy(this.body.nodes[c])),d=Math.max(d,this._getPositionForHierarchy(this.body.nodes[c]))}this._setPositionForHierarchy(this.body.nodes[e],.5*(h+d),t)}}},{key:"_validataPositionAndContinue",value:function(e,t,i){if(void 0!==this.lastNodeOnLevel[t]){var o=this._getPositionForHierarchy(this.body.nodes[this.lastNodeOnLevel[t]]);if(i-o<this.options.hierarchical.nodeSpacing){var n=o+this.options.hierarchical.nodeSpacing-i,s=this._findCommonParent(this.lastNodeOnLevel[t],e.id);this._shiftBlock(s.withChild,n)}}this.lastNodeOnLevel[t]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,t)}},{key:"_indexArrayToNodes",value:function(e){for(var t=[],i=0;i<e.length;i++)t.push(this.body.nodes[e[i]]);return t}},{key:"_getDistribution",value:function(){var e={},t=void 0,i=void 0;for(t in this.body.nodes)if(this.body.nodes.hasOwnProperty(t)){i=this.body.nodes[t];var o=void 0===this.hierarchicalLevels[t]?0:this.hierarchicalLevels[t];"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?(i.y=this.options.hierarchical.levelSeparation*o,i.options.fixed.y=!0):(i.x=this.options.hierarchical.levelSeparation*o,i.options.fixed.x=!0),void 0===e[o]&&(e[o]={}),e[o][t]=i}return e}},{key:"_getHubSize",value:function(){var e=0;for(var t in this.body.nodes)if(this.body.nodes.hasOwnProperty(t)){var i=this.body.nodes[t];void 0===this.hierarchicalLevels[t]&&(e=i.edges.length<e?e:i.edges.length)}return e}},{key:"_determineLevelsByHubsize",value:function(){for(var e=this,t=1,i=function(t,i){void 0===e.hierarchicalLevels[i.id]&&(void 0===e.hierarchicalLevels[t.id]&&(e.hierarchicalLevels[t.id]=0),e.hierarchicalLevels[i.id]=e.hierarchicalLevels[t.id]+1)};t>0&&0!==(t=this._getHubSize());)for(var o in this.body.nodes)if(this.body.nodes.hasOwnProperty(o)){this.body.nodes[o].edges.length===t&&this._crawlNetwork(i,o)}}},{key:"_determineLevelsCustomCallback",value:function(){var e=this;this._crawlNetwork(function(t,i,o){void 0===e.hierarchicalLevels[t.id]&&(e.hierarchicalLevels[t.id]=1e5);var n=(h.default.cloneOptions(t,"node"),h.default.cloneOptions(i,"node"),void h.default.cloneOptions(o,"edge"));e.hierarchicalLevels[i.id]=e.hierarchicalLevels[t.id]+n}),this._setMinLevelToZero()}},{key:"_determineLevelsDirected",value:function(){var e=this;this._crawlNetwork(function(t,i,o){void 0===e.hierarchicalLevels[t.id]&&(e.hierarchicalLevels[t.id]=1e4),o.toId==i.id?e.hierarchicalLevels[i.id]=e.hierarchicalLevels[t.id]+1:e.hierarchicalLevels[i.id]=e.hierarchicalLevels[t.id]-1}),this._setMinLevelToZero()}},{key:"_setMinLevelToZero",value:function(){var e=1e9;for(var t in this.body.nodes)this.body.nodes.hasOwnProperty(t)&&void 0!==this.hierarchicalLevels[t]&&(e=Math.min(this.hierarchicalLevels[t],e));for(var i in this.body.nodes)this.body.nodes.hasOwnProperty(i)&&void 0!==this.hierarchicalLevels[i]&&(this.hierarchicalLevels[i]-=e)}},{key:"_generateMap",value:function(){var e=this;this._crawlNetwork(function(t,i){if(e.hierarchicalLevels[i.id]>e.hierarchicalLevels[t.id]){var o=t.id,n=i.id;void 0===e.hierarchicalChildrenReference[o]&&(e.hierarchicalChildrenReference[o]=[]),e.hierarchicalChildrenReference[o].push(n),void 0===e.hierarchicalParentReference[n]&&(e.hierarchicalParentReference[n]=[]),e.hierarchicalParentReference[n].push(o)}})}},{key:"_crawlNetwork",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0],i=arguments[1],o={},n=0,s=function i(n,s){if(void 0===o[n.id]){void 0===e.hierarchicalTrees[n.id]&&(e.hierarchicalTrees[n.id]=s,e.treeIndex=Math.max(s,e.treeIndex)),o[n.id]=!0;for(var r=void 0,a=0;a<n.edges.length;a++)!0===n.edges[a].connected&&(r=n.edges[a].toId===n.id?n.edges[a].from:n.edges[a].to,n.id!==r.id&&(t(n,r,n.edges[a]),i(r,s)))}};if(void 0===i)for(var r=0;r<this.body.nodeIndices.length;r++){var a=this.body.nodes[this.body.nodeIndices[r]];void 0===o[a.id]&&(s(a,n),n+=1)}else{var h=this.body.nodes[i];if(void 0===h)return void console.error("Node not found:",i);s(h)}}},{key:"_shiftBlock",value:function(e,t){if("UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?this.body.nodes[e].x+=t:this.body.nodes[e].y+=t,void 0!==this.hierarchicalChildrenReference[e])for(var i=0;i<this.hierarchicalChildrenReference[e].length;i++)this._shiftBlock(this.hierarchicalChildrenReference[e][i],t)}},{key:"_findCommonParent",value:function(e,t){var i=this,o={};return function e(t,o){if(void 0!==i.hierarchicalParentReference[o])for(var n=0;n<i.hierarchicalParentReference[o].length;n++){var s=i.hierarchicalParentReference[o][n];t[s]=!0,e(t,s)}}(o,e),function e(t,o){if(void 0!==i.hierarchicalParentReference[o])for(var n=0;n<i.hierarchicalParentReference[o].length;n++){var s=i.hierarchicalParentReference[o][n];if(void 0!==t[s])return{foundParent:s,withChild:o};var r=e(t,s);if(null!==r.foundParent)return r}return{foundParent:null,withChild:o}}(o,t)}},{key:"_setPositionForHierarchy",value:function(e,t,i){!0!==(!(arguments.length<=3||void 0===arguments[3])&&arguments[3])&&(void 0===this.distributionOrdering[i]&&(this.distributionOrdering[i]=[],this.distributionOrderingPresence[i]={}),void 0===this.distributionOrderingPresence[i][e.id]&&(this.distributionOrdering[i].push(e),this.distributionIndex[e.id]=this.distributionOrdering[i].length-1),this.distributionOrderingPresence[i][e.id]=!0),"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?e.x=t:e.y=t}},{key:"_getPositionForHierarchy",value:function(e){return"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?e.x:e.y}},{key:"_sortNodeArray",value:function(e){e.length>1&&("UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?e.sort(function(e,t){return e.x-t.x}):e.sort(function(e,t){return e.y-t.y}))}}]),e}();t.default=l},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),n=i(1),s=i(20),r=i(28),a=function(){function e(t,i,o){var s=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.canvas=i,this.selectionHandler=o,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this.manipulationHammers=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},n.extend(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){s._clean()}),this.body.emitter.on("_dataChanged",this._restore.bind(this)),this.body.emitter.on("_resetData",this._restore.bind(this))}return o(e,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(e,t,i){void 0!==t&&(void 0!==t.locale?this.options.locale=t.locale:this.options.locale=i.locale,void 0!==t.locales?this.options.locales=t.locales:this.options.locales=i.locales),void 0!==e&&("boolean"==typeof e?this.options.enabled=e:(this.options.enabled=!0,n.deepExtend(this.options,e)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},!0===this.guiEnabled){this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var e=this.selectionHandler._getSelectedNodeCount(),t=this.selectionHandler._getSelectedEdgeCount(),i=e+t,o=this.options.locales[this.options.locale],n=!1;!1!==this.options.addNode&&(this._createAddNodeButton(o),n=!0),!1!==this.options.addEdge&&(!0===n?this._createSeperator(1):n=!0,this._createAddEdgeButton(o)),1===e&&"function"==typeof this.options.editNode?(!0===n?this._createSeperator(2):n=!0,this._createEditNodeButton(o)):1===t&&0===e&&!1!==this.options.editEdge&&(!0===n?this._createSeperator(3):n=!0,this._createEditEdgeButton(o)),0!==i&&(e>0&&!1!==this.options.deleteNode?(!0===n&&this._createSeperator(4),this._createDeleteButton(o)):0===e&&!1!==this.options.deleteEdge&&(!0===n&&this._createSeperator(4),this._createDeleteButton(o))),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this)),this._temporaryBindEvent("select",this.showManipulatorToolbar.bind(this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addNode",!0===this.guiEnabled){var e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.addDescription||this.options.locales.en.addDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindEvent("click",this._performAddNode.bind(this))}},{key:"editNode",value:function(){var e=this;!0!==this.editMode&&this.enableEditMode(),this._clean();var t=this.selectionHandler._getSelectedNode();if(void 0!==t){if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==t.isCluster){var i=n.deepExtend({},t.options,!1);if(i.x=t.x,i.y=t.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(i,function(t){null!==t&&void 0!==t&&"editNode"===e.inMode&&e.body.data.nodes.getDataSet().update(t),e.showManipulatorToolbar()})}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addEdge",!0===this.guiEnabled){var e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.edgeDescription||this.options.locales.en.edgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindUI("onTouch",this._handleConnect.bind(this)),this._temporaryBindUI("onDragEnd",this._finishConnect.bind(this)),this._temporaryBindUI("onDrag",this._dragControlNode.bind(this)),this._temporaryBindUI("onRelease",this._finishConnect.bind(this)),this._temporaryBindUI("onDragStart",function(){}),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){var e,t,i,o=this;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="editEdge",!0===this.guiEnabled){var n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0!==this.edgeBeingEditedId?(e=o.body.edges[o.edgeBeingEditedId],t=o._getNewTargetNode(e.from.x,e.from.y),i=o._getNewTargetNode(e.to.x,e.to.y),o.temporaryIds.nodes.push(t.id),o.temporaryIds.nodes.push(i.id),o.body.nodes[t.id]=t,o.body.nodeIndices.push(t.id),o.body.nodes[i.id]=i,o.body.nodeIndices.push(i.id),o._temporaryBindUI("onTouch",o._controlNodeTouch.bind(o)),o._temporaryBindUI("onTap",function(){}),o._temporaryBindUI("onHold",function(){}),o._temporaryBindUI("onDragStart",o._controlNodeDragStart.bind(o)),o._temporaryBindUI("onDrag",o._controlNodeDrag.bind(o)),o._temporaryBindUI("onDragEnd",o._controlNodeDragEnd.bind(o)),o._temporaryBindUI("onMouseMove",function(){}),o._temporaryBindEvent("beforeDrawing",function(o){var n=e.edgeType.findBorderPositions(o);!1===t.selected&&(t.x=n.from.x,t.y=n.from.y),!1===i.selected&&(i.x=n.to.x,i.y=n.to.y)}),o.body.emitter.emit("_redraw")):this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var e=this;!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="delete";var t=this.selectionHandler.getSelectedNodes(),i=this.selectionHandler.getSelectedEdges(),o=void 0;if(t.length>0){for(var n=0;n<t.length;n++)if(!0===this.body.nodes[t[n]].isCluster)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(o=this.options.deleteNode)}else i.length>0&&"function"==typeof this.options.deleteEdge&&(o=this.options.deleteEdge);if("function"==typeof o){var s={nodes:t,edges:i};if(2!==o.length)throw new Error("The function for delete does not support two arguments (data, callback)");o(s,function(t){null!==t&&void 0!==t&&"delete"===e.inMode?(e.body.data.edges.getDataSet().remove(t.edges),e.body.data.nodes.getDataSet().remove(t.nodes),e.body.emitter.emit("startSimulation"),e.showManipulatorToolbar()):(e.body.emitter.emit("startSimulation"),e.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(t),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",!0===this.editMode?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",!0===this.editMode?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="vis-close",this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(e,t){var i=n.deepExtend({},this.options.controlNodeStyle);i.id="targetNode"+n.randomUUID(),i.hidden=!1,i.physics=!1,i.x=e,i.y=t;var o=this.body.functions.createNode(i);return o.shape.boundingBox={left:e,right:e,top:t,bottom:t},o}},{key:"_createEditButton",value:function(){this._clean(),this.manipulationDOM={},n.recursiveDOMDelete(this.editModeDiv);var e=this.options.locales[this.options.locale],t=this._createButton("editMode","vis-button vis-edit vis-edit-mode",e.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(t),this._bindHammerToDiv(t,this.toggleEditMode.bind(this))}},{key:"_clean",value:function(){this.inMode=!1,!0===this.guiEnabled&&(n.recursiveDOMDelete(this.editModeDiv),n.recursiveDOMDelete(this.manipulationDiv),this._cleanManipulatorHammers()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",value:function(){if(0!=this.manipulationHammers.length){for(var e=0;e<this.manipulationHammers.length;e++)this.manipulationHammers[e].destroy();this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function(){this._clean(),n.recursiveDOMDelete(this.manipulationDiv),n.recursiveDOMDelete(this.editModeDiv),n.recursiveDOMDelete(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}},{key:"_createAddNodeButton",value:function(e){var t=this._createButton("addNode","vis-button vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.addNodeMode.bind(this))}},{key:"_createAddEdgeButton",value:function(e){var t=this._createButton("addEdge","vis-button vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.addEdgeMode.bind(this))}},{key:"_createEditNodeButton",value:function(e){var t=this._createButton("editNode","vis-button vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.editNode.bind(this))}},{key:"_createEditEdgeButton",value:function(e){var t=this._createButton("editEdge","vis-button vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.editEdgeMode.bind(this))}},{key:"_createDeleteButton",value:function(e){if(this.options.rtl)var t="vis-button vis-delete-rtl";else t="vis-button vis-delete";var i=this._createButton("delete",t,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindHammerToDiv(i,this.deleteSelected.bind(this))}},{key:"_createBackButton",value:function(e){var t=this._createButton("back","vis-button vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(t),this._bindHammerToDiv(t,this.showManipulatorToolbar.bind(this))}},{key:"_createButton",value:function(e,t,i){var o=arguments.length<=3||void 0===arguments[3]?"vis-label":arguments[3];return this.manipulationDOM[e+"Div"]=document.createElement("div"),this.manipulationDOM[e+"Div"].className=t,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=o,this.manipulationDOM[e+"Label"].innerHTML=i,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}},{key:"_createDescription",value:function(e){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",e))}},{key:"_temporaryBindEvent",value:function(e,t){this.temporaryEventFunctions.push({event:e,boundFunction:t}),this.body.emitter.on(e,t)}},{key:"_temporaryBindUI",value:function(e,t){if(void 0===this.body.eventListeners[e])throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+JSON.stringify(Object.keys(this.body.eventListeners)));this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=t}},{key:"_unbindTemporaryUIs",value:function(){for(var e in this.temporaryUIFunctions)this.temporaryUIFunctions.hasOwnProperty(e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var e=0;e<this.temporaryEventFunctions.length;e++){var t=this.temporaryEventFunctions[e].event,i=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(t,i)}this.temporaryEventFunctions=[]}},{key:"_bindHammerToDiv",value:function(e,t){var i=new s(e,{});r.onTouch(i,t),this.manipulationHammers.push(i)}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var e=0;e<this.temporaryIds.edges.length;e++){this.body.edges[this.temporaryIds.edges[e]].disconnect(),delete this.body.edges[this.temporaryIds.edges[e]];var t=this.body.edgeIndices.indexOf(this.temporaryIds.edges[e]);-1!==t&&this.body.edgeIndices.splice(t,1)}for(var i=0;i<this.temporaryIds.nodes.length;i++){delete this.body.nodes[this.temporaryIds.nodes[i]];var o=this.body.nodeIndices.indexOf(this.temporaryIds.nodes[i]);-1!==o&&this.body.nodeIndices.splice(o,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=n.extend({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(e){var t=this.lastTouch,i=this.selectionHandler._pointerToPositionObject(t),o=this.body.nodes[this.temporaryIds.nodes[0]],n=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var r=o.isOverlappingWith(i),a=n.isOverlappingWith(i);!0===r?(this.selectedControlNode=o,s.edgeType.from=o):!0===a&&(this.selectedControlNode=n,s.edgeType.to=n),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(e){this.body.emitter.emit("disablePhysics");var t=this.body.functions.getPointer(e.center),i=this.canvas.DOMtoCanvas(t);if(void 0!==this.selectedControlNode)this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y;else{var o=t.x-this.lastTouch.x,n=t.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+o,y:this.lastTouch.translation.y+n}}this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(e){var t=this.body.functions.getPointer(e.center),i=this.selectionHandler._pointerToPositionObject(t),o=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var n=this.selectionHandler._getAllNodesOverlappingWith(i),s=void 0,r=n.length-1;r>=0;r--)if(n[r]!==this.selectedControlNode.id){s=this.body.nodes[n[r]];break}if(void 0!==s&&void 0!==this.selectedControlNode)if(!0===s.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(s.id,o.to.id):this._performEditEdge(o.from.id,s.id)}else o.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(e){if((new Date).valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=n.extend({},this.body.view.translation);var t=this.lastTouch,i=this.selectionHandler.getNodeAt(t);if(void 0!==i)if(!0===i.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var o=this._getNewTargetNode(i.x,i.y);this.body.nodes[o.id]=o,this.body.nodeIndices.push(o.id);var s=this.body.functions.createEdge({id:"connectionEdge"+n.randomUUID(),from:i.id,to:o.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(o.id),this.temporaryIds.edges.push(s.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(e){var t=this.body.functions.getPointer(e.center);if(void 0!==this.temporaryIds.nodes[0]){var i=this.body.nodes[this.temporaryIds.nodes[0]];i.x=this.canvas._XconvertDOMtoCanvas(t.x),i.y=this.canvas._YconvertDOMtoCanvas(t.y),this.body.emitter.emit("_redraw")}else{var o=t.x-this.lastTouch.x,n=t.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+o,y:this.lastTouch.translation.y+n}}}},{key:"_finishConnect",value:function(e){var t=this.body.functions.getPointer(e.center),i=this.selectionHandler._pointerToPositionObject(t),o=void 0;void 0!==this.temporaryIds.edges[0]&&(o=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var n=this.selectionHandler._getAllNodesOverlappingWith(i),s=void 0,r=n.length-1;r>=0;r--)if(-1===this.temporaryIds.nodes.indexOf(n[r])){s=this.body.nodes[n[r]];break}this._cleanupTemporaryNodesAndEdges(),void 0!==s&&(!0===s.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[o]&&void 0!==this.body.nodes[s.id]&&this._performAddEdge(o,s.id)),this.body.emitter.emit("_redraw")}},{key:"_performAddNode",value:function(e){var t=this,i={id:n.randomUUID(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if("function"==typeof this.options.addNode){if(2!==this.options.addNode.length)throw new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(i,function(e){null!==e&&void 0!==e&&"addNode"===t.inMode&&(t.body.data.nodes.getDataSet().add(e),t.showManipulatorToolbar())})}else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(e,t){var i=this,o={from:e,to:t};if("function"==typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(o,function(e){null!==e&&void 0!==e&&"addEdge"===i.inMode&&(i.body.data.edges.getDataSet().add(e),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().add(o),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(e,t){var i=this,o={id:this.edgeBeingEditedId,from:e,to:t};if("function"==typeof this.options.editEdge){if(2!==this.options.editEdge.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editEdge(o,function(e){null===e||void 0===e||"editEdge"!==i.inMode?(i.body.edges[o.id].updateEdgeType(),i.body.emitter.emit("_redraw")):(i.body.data.edges.getDataSet().update(e),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().update(o),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),e}();t.default=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i="string",o="boolean",n="number",s="object",r={configure:{enabled:{boolean:o},filter:{boolean:o,string:i,array:"array",function:"function"},container:{dom:"dom"},showButton:{boolean:o},__type__:{object:s,boolean:o,string:i,array:"array",function:"function"}},edges:{arrows:{to:{enabled:{boolean:o},scaleFactor:{number:n},__type__:{object:s,boolean:o}},middle:{enabled:{boolean:o},scaleFactor:{number:n},__type__:{object:s,boolean:o}},from:{enabled:{boolean:o},scaleFactor:{number:n},__type__:{object:s,boolean:o}},__type__:{string:["from","to","middle"],object:s}},arrowStrikethrough:{boolean:o},color:{color:{string:i},highlight:{string:i},hover:{string:i},inherit:{string:["from","to","both"],boolean:o},opacity:{number:n},__type__:{object:s,string:i}},dashes:{boolean:o,array:"array"},font:{color:{string:i},size:{number:n},face:{string:i},background:{string:i},strokeWidth:{number:n},strokeColor:{string:i},align:{string:["horizontal","top","middle","bottom"]},__type__:{object:s,string:i}},hidden:{boolean:o},hoverWidth:{function:"function",number:n},label:{string:i,undefined:"undefined"},labelHighlightBold:{boolean:o},length:{number:n,undefined:"undefined"},physics:{boolean:o},scaling:{min:{number:n},max:{number:n},label:{enabled:{boolean:o},min:{number:n},max:{number:n},maxVisible:{number:n},drawThreshold:{number:n},__type__:{object:s,boolean:o}},customScalingFunction:{function:"function"},__type__:{object:s}},selectionWidth:{function:"function",number:n},selfReferenceSize:{number:n},shadow:{enabled:{boolean:o},color:{string:i},size:{number:n},x:{number:n},y:{number:n},__type__:{object:s,boolean:o}},smooth:{enabled:{boolean:o},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:n},forceDirection:{string:["horizontal","vertical","none"],boolean:o},__type__:{object:s,boolean:o}},title:{string:i,undefined:"undefined"},width:{number:n},value:{number:n,undefined:"undefined"},__type__:{object:s}},groups:{useDefaultGroups:{boolean:o},__any__:"get from nodes, will be overwritten below",__type__:{object:s}},interaction:{dragNodes:{boolean:o},dragView:{boolean:o},hideEdgesOnDrag:{boolean:o},hideNodesOnDrag:{boolean:o},hover:{boolean:o},keyboard:{enabled:{boolean:o},speed:{x:{number:n},y:{number:n},zoom:{number:n},__type__:{object:s}},bindToWindow:{boolean:o},__type__:{object:s,boolean:o}},multiselect:{boolean:o},navigationButtons:{boolean:o},selectable:{boolean:o},selectConnectedEdges:{boolean:o},hoverConnectedEdges:{boolean:o},tooltipDelay:{number:n},zoomView:{boolean:o},__type__:{object:s}},layout:{randomSeed:{undefined:"undefined",number:n},improvedLayout:{boolean:o},hierarchical:{enabled:{boolean:o},levelSeparation:{number:n},nodeSpacing:{number:n},treeSpacing:{number:n},blockShifting:{boolean:o},edgeMinimization:{boolean:o},parentCentralization:{boolean:o},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},__type__:{object:s,boolean:o}},__type__:{object:s}},manipulation:{enabled:{boolean:o},initiallyActive:{boolean:o},addNode:{boolean:o,function:"function"},addEdge:{boolean:o,function:"function"},editNode:{function:"function"},editEdge:{boolean:o,function:"function"},deleteNode:{boolean:o,function:"function"},deleteEdge:{boolean:o,function:"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:s,boolean:o}},nodes:{borderWidth:{number:n},borderWidthSelected:{number:n,undefined:"undefined"},brokenImage:{string:i,undefined:"undefined"},color:{border:{string:i},background:{string:i},highlight:{border:{string:i},background:{string:i},__type__:{object:s,string:i}},hover:{border:{string:i},background:{string:i},__type__:{object:s,string:i}},__type__:{object:s,string:i}},fixed:{x:{boolean:o},y:{boolean:o},__type__:{object:s,boolean:o}},font:{align:{string:i},color:{string:i},size:{number:n},face:{string:i},background:{string:i},strokeWidth:{number:n},strokeColor:{string:i},__type__:{object:s,string:i}},group:{string:i,number:n,undefined:"undefined"},hidden:{boolean:o},icon:{face:{string:i},code:{string:i},size:{number:n},color:{string:i},__type__:{object:s}},id:{string:i,number:n},image:{string:i,undefined:"undefined"},label:{string:i,undefined:"undefined"},labelHighlightBold:{boolean:o},level:{number:n,undefined:"undefined"},mass:{number:n},physics:{boolean:o},scaling:{min:{number:n},max:{number:n},label:{enabled:{boolean:o},min:{number:n},max:{number:n},maxVisible:{number:n},drawThreshold:{number:n},__type__:{object:s,boolean:o}},customScalingFunction:{function:"function"},__type__:{object:s}},shadow:{enabled:{boolean:o},color:{string:i},size:{number:n},x:{number:n},y:{number:n},__type__:{object:s,boolean:o}},shape:{string:["ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon"]},shapeProperties:{borderDashes:{boolean:o,array:"array"},borderRadius:{number:n},interpolation:{boolean:o},useImageSize:{boolean:o},useBorderWithImage:{boolean:o},__type__:{object:s}},size:{number:n},title:{string:i,undefined:"undefined"},value:{number:n,undefined:"undefined"},x:{number:n},y:{number:n},__type__:{object:s}},physics:{enabled:{boolean:o},barnesHut:{gravitationalConstant:{number:n},centralGravity:{number:n},springLength:{number:n},springConstant:{number:n},damping:{number:n},avoidOverlap:{number:n},__type__:{object:s}},forceAtlas2Based:{gravitationalConstant:{number:n},centralGravity:{number:n},springLength:{number:n},springConstant:{number:n},damping:{number:n},avoidOverlap:{number:n},__type__:{object:s}},repulsion:{centralGravity:{number:n},springLength:{number:n},springConstant:{number:n},nodeDistance:{number:n},damping:{number:n},__type__:{object:s}},hierarchicalRepulsion:{centralGravity:{number:n},springLength:{number:n},springConstant:{number:n},nodeDistance:{number:n},damping:{number:n},__type__:{object:s}},maxVelocity:{number:n},minVelocity:{number:n},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:o},iterations:{number:n},updateInterval:{number:n},onlyDynamicEdges:{boolean:o},fit:{boolean:o},__type__:{object:s,boolean:o}},timestep:{number:n},adaptiveTimestep:{boolean:o},__type__:{object:s,boolean:o}},autoResize:{boolean:o},clickToUse:{boolean:o},locale:{string:i},locales:{__any__:{any:"any"},__type__:{object:s}},height:{string:i},width:{string:i},__type__:{object:s}};r.groups.__any__=r.nodes,r.manipulation.controlNodeStyle=r.nodes;t.allOptions=r,t.configureOptions={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05]},middle:{enabled:!1,scaleFactor:[1,0,3,.05]},from:{enabled:!1,scaleFactor:[1,0,3,.05]}},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01]},global:{locale:["en","nl"]}}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var o,n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],o=!0,n=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(o=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){n=!0,s=e}finally{try{!o&&a.return&&a.return()}finally{if(n)throw s}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),r=i(116),a=(o=r)&&o.__esModule?o:{default:o},h=function(){function e(t,i,o){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.body=t,this.springLength=i,this.springConstant=o,this.distanceSolver=new a.default}return s(e,[{key:"setOptions",value:function(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}},{key:"solve",value:function(e,t){var i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=this.distanceSolver.getDistances(this.body,e,t);this._createL_matrix(o),this._createK_matrix(o);for(var s=0,r=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),a=1e9,h=0,d=0,l=0,c=0,u=0;a>.01&&r>s;){s+=1;var p=this._getHighestEnergyNode(i),f=n(p,4);for(h=f[0],a=f[1],d=f[2],l=f[3],c=a,u=0;c>1&&5>u;){u+=1,this._moveNode(h,d,l);var m=this._getEnergy(h),g=n(m,3);c=g[0],d=g[1],l=g[2]}}}},{key:"_getHighestEnergyNode",value:function(e){for(var t=this.body.nodeIndices,i=this.body.nodes,o=0,s=t[0],r=0,a=0,h=0;h<t.length;h++){var d=t[h];if(!1===i[d].predefinedPosition||!0===i[d].isCluster&&!0===e||!0===i[d].options.fixed.x||!0===i[d].options.fixed.y){var l=this._getEnergy(d),c=n(l,3),u=c[0],p=c[1],f=c[2];u>o&&(o=u,s=d,r=p,a=f)}}return[s,o,r,a]}},{key:"_getEnergy",value:function(e){for(var t=this.body.nodeIndices,i=this.body.nodes,o=i[e].x,n=i[e].y,s=0,r=0,a=0;a<t.length;a++){var h=t[a];if(h!==e){var d=i[h].x,l=i[h].y,c=1/Math.sqrt(Math.pow(o-d,2)+Math.pow(n-l,2));s+=this.K_matrix[e][h]*(o-d-this.L_matrix[e][h]*(o-d)*c),r+=this.K_matrix[e][h]*(n-l-this.L_matrix[e][h]*(n-l)*c)}}return[Math.sqrt(Math.pow(s,2)+Math.pow(r,2)),s,r]}},{key:"_moveNode",value:function(e,t,i){for(var o=this.body.nodeIndices,n=this.body.nodes,s=0,r=0,a=0,h=n[e].x,d=n[e].y,l=0;l<o.length;l++){var c=o[l];if(c!==e){var u=n[c].x,p=n[c].y,f=1/Math.pow(Math.pow(h-u,2)+Math.pow(d-p,2),1.5);s+=this.K_matrix[e][c]*(1-this.L_matrix[e][c]*Math.pow(d-p,2)*f),r+=this.K_matrix[e][c]*(this.L_matrix[e][c]*(h-u)*(d-p)*f),a+=this.K_matrix[e][c]*(1-this.L_matrix[e][c]*Math.pow(h-u,2)*f)}}var m=(t/s+i/r)/(r/s-a/r),g=-(r*m+t)/s;n[e].x+=g,n[e].y+=m}},{key:"_createL_matrix",value:function(e){var t=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var o=0;o<t.length;o++){this.L_matrix[t[o]]={};for(var n=0;n<t.length;n++)this.L_matrix[t[o]][t[n]]=i*e[t[o]][t[n]]}}},{key:"_createK_matrix",value:function(e){var t=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var o=0;o<t.length;o++){this.K_matrix[t[o]]={};for(var n=0;n<t.length;n++)this.K_matrix[t[o]][t[n]]=i*Math.pow(e[t[o]][t[n]],-2)}}}]),e}();t.default=h},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"getDistances",value:function(e,t,i){for(var o={},n=e.edges,s=0;s<t.length;s++){o[t[s]]={},o[t[s]]={};for(var r=0;r<t.length;r++)o[t[s]][t[r]]=s==r?0:1e9,o[t[s]][t[r]]=s==r?0:1e9}for(var a=0;a<i.length;a++){var h=n[i[a]];!0===h.connected&&void 0!==o[h.fromId]&&void 0!==o[h.toId]&&(o[h.fromId][h.toId]=1,o[h.toId][h.fromId]=1)}for(var d=t.length,l=0;d>l;l++)for(var c=0;d-1>c;c++)for(var u=c+1;d>u;u++)o[t[c]][t[u]]=Math.min(o[t[c]][t[u]],o[t[c]][t[l]]+o[t[l]][t[u]]),o[t[u]][t[c]]=o[t[c]][t[u]];return o}}]),e}();t.default=o},function(e,t){"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.circle=function(e,t,i){this.beginPath(),this.arc(e,t,i,0,2*Math.PI,!1),this.closePath()},CanvasRenderingContext2D.prototype.square=function(e,t,i){this.beginPath(),this.rect(e-i,t-i,2*i,2*i),this.closePath()},CanvasRenderingContext2D.prototype.triangle=function(e,t,i){this.beginPath(),t+=.275*(i*=1.15);var o=2*i,n=o/2,s=Math.sqrt(3)/6*o,r=Math.sqrt(o*o-n*n);this.moveTo(e,t-(r-s)),this.lineTo(e+n,t+s),this.lineTo(e-n,t+s),this.lineTo(e,t-(r-s)),this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(e,t,i){this.beginPath(),t-=.275*(i*=1.15);var o=2*i,n=o/2,s=Math.sqrt(3)/6*o,r=Math.sqrt(o*o-n*n);this.moveTo(e,t+(r-s)),this.lineTo(e+n,t-s),this.lineTo(e-n,t-s),this.lineTo(e,t+(r-s)),this.closePath()},CanvasRenderingContext2D.prototype.star=function(e,t,i){this.beginPath(),t+=.1*(i*=.82);for(var o=0;10>o;o++){var n=o%2==0?1.3*i:.5*i;this.lineTo(e+n*Math.sin(2*o*Math.PI/10),t-n*Math.cos(2*o*Math.PI/10))}this.closePath()},CanvasRenderingContext2D.prototype.diamond=function(e,t,i){this.beginPath(),this.lineTo(e,t+i),this.lineTo(e+i,t),this.lineTo(e,t-i),this.lineTo(e-i,t),this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(e,t,i,o,n){var s=Math.PI/180;0>i-2*n&&(n=i/2),0>o-2*n&&(n=o/2),this.beginPath(),this.moveTo(e+n,t),this.lineTo(e+i-n,t),this.arc(e+i-n,t+n,n,270*s,360*s,!1),this.lineTo(e+i,t+o-n),this.arc(e+i-n,t+o-n,n,0,90*s,!1),this.lineTo(e+n,t+o),this.arc(e+n,t+o-n,n,90*s,180*s,!1),this.lineTo(e,t+n),this.arc(e+n,t+n,n,180*s,270*s,!1),this.closePath()},CanvasRenderingContext2D.prototype.ellipse=function(e,t,i,o){var n=i/2*.5522848,s=o/2*.5522848,r=e+i,a=t+o,h=e+i/2,d=t+o/2;this.beginPath(),this.moveTo(e,d),this.bezierCurveTo(e,d-s,h-n,t,h,t),this.bezierCurveTo(h+n,t,r,d-s,r,d),this.bezierCurveTo(r,d+s,h+n,a,h,a),this.bezierCurveTo(h-n,a,e,d+s,e,d),this.closePath()},CanvasRenderingContext2D.prototype.database=function(e,t,i,o){var n=o*(1/3),s=i/2*.5522848,r=n/2*.5522848,a=e+i,h=t+n,d=e+i/2,l=t+n/2,c=t+(o-n/2),u=t+o;this.beginPath(),this.moveTo(a,l),this.bezierCurveTo(a,l+r,d+s,h,d,h),this.bezierCurveTo(d-s,h,e,l+r,e,l),this.bezierCurveTo(e,l-r,d-s,t,d,t),this.bezierCurveTo(d+s,t,a,l-r,a,l),this.lineTo(a,c),this.bezierCurveTo(a,c+r,d+s,u,d,u),this.bezierCurveTo(d-s,u,e,c+r,e,c),this.lineTo(e,l)},CanvasRenderingContext2D.prototype.arrow=function(e,t,i,o){var n=e-o*Math.cos(i),s=t-o*Math.sin(i),r=e-.9*o*Math.cos(i),a=t-.9*o*Math.sin(i),h=n+o/3*Math.cos(i+.5*Math.PI),d=s+o/3*Math.sin(i+.5*Math.PI),l=n+o/3*Math.cos(i-.5*Math.PI),c=s+o/3*Math.sin(i-.5*Math.PI);this.beginPath(),this.moveTo(e,t),this.lineTo(h,d),this.lineTo(r,a),this.lineTo(l,c),this.closePath()},CanvasRenderingContext2D.prototype.dashedLine=function(e,t,i,o,n){this.beginPath(),this.moveTo(e,t);for(var s=n.length,r=i-e,a=o-t,h=a/r,d=Math.sqrt(r*r+a*a),l=0,c=!0,u=0,p=n[0];d>=.1;)p=n[l++%s],p>d&&(p=d),u=Math.sqrt(p*p/(1+h*h)),u=0>r?-u:u,e+=u,t+=h*u,!0===c?this.lineTo(e,t):this.moveTo(e,t),d-=p,c=!c})},function(e,t){function i(e){return O=e,function(){var e={};if(C=0,M=O.charAt(0),c(),"strict"===D&&(e.strict=!0,c()),"graph"!==D&&"digraph"!==D||(e.type=D,c()),E===k.IDENTIFIER&&(e.id=D,c()),"{"!=D)throw v("Angle bracket { expected");if(c(),u(e),"}"!=D)throw v("Angle bracket } expected");if(c(),""!==D)throw v("End of file expected");return c(),delete e.node,delete e.edge,delete e.graph,e}()}function o(){C++,M=O.charAt(C)}function n(){return O.charAt(C+1)}function s(e){return T.test(e)}function r(e,t){if(e||(e={}),t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function a(e,t,i){for(var o=t.split("."),n=e;o.length;){var s=o.shift();o.length?(n[s]||(n[s]={}),n=n[s]):n[s]=i}}function h(e,t){for(var i,o,n=null,s=[e],a=e;a.parent;)s.push(a.parent),a=a.parent;if(a.nodes)for(i=0,o=a.nodes.length;o>i;i++)if(t.id===a.nodes[i].id){n=a.nodes[i];break}for(n||(n={id:t.id},e.node&&(n.attr=r(n.attr,e.node))),i=s.length-1;i>=0;i--){var h=s[i];h.nodes||(h.nodes=[]),-1===h.nodes.indexOf(n)&&h.nodes.push(n)}t.attr&&(n.attr=r(n.attr,t.attr))}function d(e,t){if(e.edges||(e.edges=[]),e.edges.push(t),e.edge){var i=r({},e.edge);t.attr=r(i,t.attr)}}function l(e,t,i,o,n){var s={from:t,to:i,type:o};return e.edge&&(s.attr=r({},e.edge)),s.attr=r(s.attr||{},n),s}function c(){for(E=k.NULL,D="";" "===M||"\t"===M||"\n"===M||"\r"===M;)o();do{var e=!1;if("#"===M){for(var t=C-1;" "===O.charAt(t)||"\t"===O.charAt(t);)t--;if("\n"===O.charAt(t)||""===O.charAt(t)){for(;""!=M&&"\n"!=M;)o();e=!0}}if("/"===M&&"/"===n()){for(;""!=M&&"\n"!=M;)o();e=!0}if("/"===M&&"*"===n()){for(;""!=M;){if("*"===M&&"/"===n()){o(),o();break}o()}e=!0}for(;" "===M||"\t"===M||"\n"===M||"\r"===M;)o()}while(e);if(""!==M){var i=M+n();if(S[i])return E=k.DELIMITER,D=i,o(),void o();if(S[M])return E=k.DELIMITER,D=M,void o();if(s(M)||"-"===M){for(D+=M,o();s(M);)D+=M,o();return"false"===D?D=!1:"true"===D?D=!0:isNaN(Number(D))||(D=Number(D)),void(E=k.IDENTIFIER)}if('"'===M){for(o();""!=M&&('"'!=M||'"'===M&&'"'===n());)D+=M,'"'===M&&o(),o();if('"'!=M)throw v('End of string " expected');return o(),void(E=k.IDENTIFIER)}for(E=k.UNKNOWN;""!=M;)D+=M,o();throw new SyntaxError('Syntax error in part "'+y(D,30)+'"')}E=k.DELIMITER}function u(e){for(;""!==D&&"}"!=D;)p(e),";"===D&&c()}function p(e){var t,i,o,n,s,r=f(e);if(r)m(e,r);else if(!(t=e,"node"===D?(c(),t.node=g(),"node"):"edge"===D?(c(),t.edge=g(),"edge"):"graph"===D?(c(),t.graph=g(),"graph"):null)){if(E!=k.IDENTIFIER)throw v("Identifier expected");var a=D;if(c(),"="===D){if(c(),E!=k.IDENTIFIER)throw v("Identifier expected");e[a]=D,c()}else i=e,o=a,n={id:o},s=g(),s&&(n.attr=s),h(i,n),m(i,o)}}function f(e){var t=null;if("subgraph"===D&&((t={}).type="subgraph",c(),E===k.IDENTIFIER&&(t.id=D,c())),"{"===D){if(c(),t||(t={}),t.parent=e,t.node=e.node,t.edge=e.edge,t.graph=e.graph,u(t),"}"!=D)throw v("Angle bracket } expected");c(),delete t.node,delete t.edge,delete t.graph,delete t.parent,e.subgraphs||(e.subgraphs=[]),e.subgraphs.push(t)}return t}function m(e,t){for(;"->"===D||"--"===D;){var i,o=D;c();var n=f(e);if(n)i=n;else{if(E!=k.IDENTIFIER)throw v("Identifier or subgraph expected");h(e,{id:i=D}),c()}d(e,l(e,t,i,o,g())),t=i}}function g(){for(var e=null;"["===D;){for(c(),e={};""!==D&&"]"!=D;){if(E!=k.IDENTIFIER)throw v("Attribute name expected");var t=D;if(c(),"="!=D)throw v("Equal sign = expected");if(c(),E!=k.IDENTIFIER)throw v("Attribute value expected");a(e,t,D),c(),","==D&&c()}if("]"!=D)throw v("Bracket ] expected");c()}return e}function v(e){return new SyntaxError(e+', got "'+y(D,30)+'" (char '+C+")")}function y(e,t){return e.length<=t?e:e.substr(0,27)+"..."}function b(e,t,i){for(var o=t.split("."),n=o.pop(),s=e,r=0;r<o.length;r++){var a=o[r];a in s||(s[a]={}),s=s[a]}return s[n]=i,e}function w(e,t){var i={};for(var o in e)if(e.hasOwnProperty(o)){var n=t[o];Array.isArray(n)?n.forEach(function(t){b(i,t,e[o])}):b(i,"string"==typeof n?n:o,e[o])}return i}var _={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},x=Object.create(_);x.color="color.color";var k={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},S={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},O="",C=0,M="",D="",E=k.NULL,T=/[a-zA-Z_0-9.:#]/;t.parseDOT=i,t.DOTToGraph=function(e){var t=i(e),o={nodes:[],edges:[],options:{}};if(t.nodes&&t.nodes.forEach(function(e){var t={id:e.id,label:String(e.label||e.id)};r(t,w(e.attr,_)),t.image&&(t.shape="image"),o.nodes.push(t)}),t.edges){var n=function(e){var t={from:e.from,to:e.to};return r(t,w(e.attr,x)),t.arrows="->"===e.type?"to":void 0,t};t.edges.forEach(function(e){var t,i,s,r,a;t=e.from instanceof Object?e.from.nodes:{id:e.from},i=e.to instanceof Object?e.to.nodes:{id:e.to},e.from instanceof Object&&e.from.edges&&e.from.edges.forEach(function(e){var t=n(e);o.edges.push(t)}),s=t,r=i,a=function(t,i){var s=l(o,t.id,i.id,e.type,e.attr),r=n(s);o.edges.push(r)},Array.isArray(s)?s.forEach(function(e){Array.isArray(r)?r.forEach(function(t){a(e,t)}):a(e,r)}):Array.isArray(r)?r.forEach(function(e){a(s,e)}):a(s,r),e.to instanceof Object&&e.to.edges&&e.to.edges.forEach(function(e){var t=n(e);o.edges.push(t)})})}return t.attr&&(o.options=t.attr),o}},function(e,t){t.parseGephi=function(e,t){var i=[],o=[],n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};void 0!==t&&(void 0!==t.fixed&&(n.nodes.fixed=t.fixed),void 0!==t.parseColor&&(n.nodes.parseColor=t.parseColor),void 0!==t.inheritColor&&(n.edges.inheritColor=t.inheritColor));for(var s=e.edges,r=e.nodes,a=0;a<s.length;a++){var h={},d=s[a];h.id=d.id,h.from=d.source,h.to=d.target,h.attributes=d.attributes,h.label=d.label,h.title=void 0!==d.attributes?d.attributes.title:void 0,"Directed"===d.type&&(h.arrows="to"),d.color&&!1===n.inheritColor&&(h.color=d.color),i.push(h)}for(a=0;a<r.length;a++){var l={},c=r[a];l.id=c.id,l.attributes=c.attributes,l.title=c.title,l.x=c.x,l.y=c.y,l.label=c.label,l.title=void 0!==c.attributes?c.attributes.title:void 0,!0===n.nodes.parseColor?l.color=c.color:l.color=void 0!==c.color?{background:c.color,border:c.color,highlight:{background:c.color,border:c.color},hover:{background:c.color,border:c.color}}:void 0,l.size=c.size,l.fixed=n.nodes.fixed&&void 0!==c.x&&void 0!==c.y,o.push(l)}return{nodes:o,edges:i}}},function(e,t){t.en={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."},t.en_EN=t.en,t.en_US=t.en,t.de={edit:"Editieren",del:"Lösche Auswahl",back:"Zurück",addNode:"Knoten hinzufügen",addEdge:"Kante hinzufügen",editNode:"Knoten editieren",editEdge:"Kante editieren",addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",deleteClusterError:"Cluster können nicht gelöscht werden.",editClusterError:"Cluster können nicht editiert werden."},t.de_DE=t.de,t.es={edit:"Editar",del:"Eliminar selección",back:"Átras",addNode:"Añadir nodo",addEdge:"Añadir arista",editNode:"Editar nodo",editEdge:"Editar arista",addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",createEdgeError:"No se puede conectar una arista a un grupo.",deleteClusterError:"No es posible eliminar grupos.",editClusterError:"No es posible editar grupos."},t.es_ES=t.es,t.nl={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd.",editClusterError:"Clusters kunnen niet worden aangepast."},t.nl_NL=t.nl,t.nl_BE=t.nl}])}),angular.module("timelineApp").config(["$routeProvider",function(e){"use strict";e.when("/screen-timeline",{controller:"TimelineScreenController",templateUrl:"bundles/os2displayadmin/apps/timelineApp/timeline-page.html?"+window.config.version}).when("/channel-timeline",{controller:"TimelineChannelController",templateUrl:"bundles/os2displayadmin/apps/timelineApp/timeline-page.html?"+window.config.version})}]),angular.module("timelineApp").service("timelineAppSetup",["busService",function(e){"use strict";e.$on("menuApp.requestSubMenuItems",function(t,i){e.$emit("menuApp.returnSubMenuItems",[{mainMenuItem:"screen",items:[{title:"Timeline",path:"/#/screen-timeline",classes:"screen-timeline",group:"right",icon:"event-note",weight:4,activeFilter:"/screen-timeline"}]},{mainMenuItem:"channel",items:[{title:"Timeline",path:"/#/channel-timeline",classes:"channel-timeline",group:"right",icon:"event-note",weight:4,activeFilter:"/channel-timeline"}]}])})}]),angular.module("timelineApp").run(["timelineAppSetup",angular.noop]),angular.module("timelineApp").directive("timeline",["busService","$timeout","$location",function(e,t,i){"use strict";return{restrict:"E",templateUrl:"bundles/os2displayadmin/apps/timelineApp/directive/timeline.html?"+window.config.version,scope:{tid:"@",data:"="},link:function(e){var o,n,s,r;e.start=null,e.end=null;var a=function(e){var t=e.getTime(),i=(t=t-(t%864e5-60*e.getTimezoneOffset()*1e3)-(e.getDay()+6)%7*24*60*60*1e3)+6048e5;o.setWindow({start:t,end:i,animation:!1})};function h(){for(var t=[],i=0;i<e.data.items.length;i++){var o=angular.copy(e.data.items[i]);if((!o.start||o.start<e.end.getTime())&&(!o.end||o.end>e.start.getTime()))if(o.start||(o.start=e.start.getTime()),o.end||(o.end=e.end.getTime()),o.schedule_repeat){if(o.schedule_repeat_days)for(var n=new Date(e.start),s=0;n<e.end;){for(var r=0;r<o.schedule_repeat_days.length;r++)if(n.getDay()===o.schedule_repeat_days[r].id){var a=angular.copy(o);if(a.start=new Date(n),a.start.setHours(o.schedule_repeat_from?o.schedule_repeat_from:0),a.start.setMinutes(0),a.start.setSeconds(0),a.start=a.start.getTime(),a.end=new Date(n),a.end.setHours(o.schedule_repeat_to?o.schedule_repeat_to:23),a.end.setMinutes(o.schedule_repeat_to?0:59),a.end.setSeconds(o.schedule_repeat_to?0:59),a.end=a.end.getTime(),a.end<o.start)continue;if(a.start>o.end)continue;a.start<o.start&&(a.start=o.start),a.end>o.end&&(a.end=o.end),a.id=o.id+"_"+s,t.push(a)}n.setDate(n.getDate()+1),s++}}else t.push(o)}return t}function d(t){var i=[];for(var o in t)o=t[o],-1==i.indexOf(o.group)&&i.push(o.group);var n=[];for(var s in e.data.groups)s=e.data.groups[s],-1!==i.indexOf(s.id)&&n.push(s);return n}function l(i){t(function(){e.start=new Date(i.start),e.end=new Date(i.end),n=h(),s=d(n),o.setData({items:n,groups:s})})}var c={locales:{da:{current:"nuværende",time:"tid"}},locale:"da",editable:!1,snap:function(e){return 36e5*Math.round(e/36e5)},min:new Date(2016,0,1),zoomMin:864e5,zoomMax:26784e5,stack:!1,zoomable:!1};e.$watch("data",function(t,r){if(null!==r){var a=document.getElementById("timeline_"+e.data.id);o=new vis.Timeline(a,[],[],c),e.today();var u=o.getWindow();e.start=new Date(u.start),e.end=new Date(u.end),n=h(),s=d(n),o.on("rangechanged",l),o.on("click",function(t){for(var o in n)if((o=n[o]).id==t.item)return void e.$apply(function(){i.path(o.redirect_url)})}),o.setData({items:n,groups:s})}}),e.moveDays=function(e){var t=24*e*60*60*1e3;r=new Date(r.getTime()+t),a(r)},e.today=function(){r=new Date,a(r)},e.zoom=function(e){var t=o.getWindow(),i=t.end-t.start;o.setWindow({start:t.start.valueOf()-i*e,end:t.end.valueOf()+i*e,animation:!1})},e.$on("$destroy",function(){o&&o.off()})}}}]),angular.module("timelineApp").service("timelineService",["busService","$q","$http",function(e,t,i){"use strict";this.fetchData=function(e,o){var n=t.defer();if(!e)return n.resolve([]),n.promise;var s="?ids[]="+e.join("&ids[]=");switch(o){case"Os2Display\\CoreBundle\\Entity\\Channel":i.get("/api/bulk/channel/timeline-channel"+s).then(function(e){var t=[];for(var i in e.data){var o=[],s=e.data[i];for(var r in s.slides){var a=s.slides[r];o.push({id:a.id,content:a.title,className:a.published?null:"is-not-published",group:s.id,subgroup:a.id,start:1e3*a.schedule_from,end:1e3*a.schedule_to,redirect_url:"/slide/"+a.id})}t.push({id:s.id,title:s.title,items:o,groups:[{id:s.id,content:""}]})}n.resolve(t)},function(e){n.reject(e.status)});break;case"Os2Display\\CoreBundle\\Entity\\Screen":i.get("/api/bulk/screen/timeline-screen"+s).then(function(e){var t=[];for(var i in e.data){var o=[],s=[],r=e.data[i];for(var a in r.channel_screen_regions){var h=r.channel_screen_regions[a];if(h.channel){var d=h.channel;o.push({id:h.id+"_"+d.id,content:d.title,group:h.region,subgroup:h.id+"_"+d.id,start:1e3*d.publish_from,end:1e3*d.publish_to,schedule_repeat:d.schedule_repeat,schedule_repeat_days:d.schedule_repeat_days,schedule_repeat_from:d.schedule_repeat_from,schedule_repeat_to:d.schedule_repeat_to,redirect_url:"/channel/"+d.id})}else if(h.shared_channel){d=angular.fromJson(h.shared_channel.content);o.push({id:h.shared_channel.index+"_"+h.id+"_"+d.id,content:d.title+" (delt kanal fra: "+h.shared_channel.index+")",group:h.region,subgroup:h.id+"_"+d.id,start:1e3*d.publish_from,end:1e3*d.publish_to,schedule_repeat:d.schedule_repeat,schedule_repeat_days:d.schedule_repeat_days,schedule_repeat_from:d.schedule_repeat_from,schedule_repeat_to:d.schedule_repeat_to,redirect_url:"/shared-channel/"+h.shared_channel.unique_id+"/"+h.shared_channel.index})}-1===s.indexOf(h.region)&&s.push(h.region)}for(var l=[],c=0;c<s.length;c++)l.push({id:s[c],content:"Region "+s[c]});t.push({id:r.id,title:r.title,items:o,groups:l})}n.resolve(t)},function(e){n.reject(e.status)});break;default:n.reject("Unrecognized searchType")}return n.promise}}]),angular.module("timelineApp").controller("TimelineBaseController",["busService","timelineService","$scope",function(e,t,i){"use strict";i.loading=!1,i.sort={created_at:"desc"},i.showFromUser=localStorage.getItem("overview.timeline.search_filter_default")?localStorage.getItem("overview.timeline.search_filter_default"):"all",i.pager={size:6,page:0},i.hits=0;var o={type:i.searchType,fields:["title"],text:"",sort:{created_at:{order:"desc"}},pager:i.pager,callbacks:{hits:"",error:""}};i.updateSearch=function(){o.text=i.search_text,i.loading=!0;var n=CryptoJS.MD5(JSON.stringify(o)).toString();o.callbacks.hits="searchService.hits-"+n,o.callbacks.error="searchService.error-"+n,e.$once(o.callbacks.hits,function(o,n){i.hits=n.hits;for(var s=[],r=0;r<n.results.length;r++)s.push(n.results[r].id);t.fetchData(s,i.searchType).then(function(e){i.data=e,i.loading=!1},function(t){e.$emit("log.error",{cause:t,msg:"Kunne ikke load skærme fra databasen."}),i.loading=!1})}),e.$once(o.callbacks.error,function(t,i){e.$emit("log.error",{cause:i,msg:"Kunne ikke hente søgeresultater."})}),e.$emit("searchService.request",o)},i.search=function(){i.pager.page=0,i.updateSearch()},i.setUser=function(e){localStorage.setItem("overview.timeline.search_filter_default",e),i.showFromUser!==e&&(i.showFromUser=e,i.setSearchFilters())},i.setSearchFilters=function(){if(delete o.filter,"all"!==i.showFromUser&&(o.filter={bool:{must:[]}}),"all"!==i.showFromUser){var e={};e.term={user:i.currentUser.id},o.filter.bool.must.push(e)}i.search()},i.setSort=function(e,t){void 0!==i.sort[e]&&i.sort[e]===t||(i.sort={},i.sort[e]=t,o.sort={},o.sort[e]={order:t},i.updateSearch())},i.changePage=function(e){i.pager.page=e,i.updateSearch()};var n=e.$on("userService.returnCurrentUser",function(e,t){i.currentUser=t,i.setSearchFilters()});e.$emit("userService.getCurrentUser"),i.$on("$destroy",function(){n()})}]),angular.module("timelineApp").controller("TimelineScreenController",["busService","$scope","$controller",function(e,t,i){"use strict";t.searchType="Os2Display\\CoreBundle\\Entity\\Screen",i("TimelineBaseController",{$scope:t})}]),angular.module("timelineApp").controller("TimelineChannelController",["busService","$scope","$controller",function(e,t,i){"use strict";t.searchType="Os2Display\\CoreBundle\\Entity\\Channel",i("TimelineBaseController",{$scope:t})}]),angular.module("adminApp").config(["$routeProvider","$translateProvider",function(e,t){"use strict";t.useSanitizeValueStrategy("escape").useStaticFilesLoader({prefix:"bundles/os2displayadmin/apps/adminApp/translations/locale-",suffix:".json"}).preferredLanguage("da").fallbackLanguage("da").forceAsyncReload(!0),e.when("/admin",{controller:"AdminDashboardController",templateUrl:"bundles/os2displayadmin/apps/adminApp/dashboard/admin-dashboard.html?"+window.config.version}).when("/user",{controller:"AdminUserController",templateUrl:"bundles/os2displayadmin/apps/adminApp/user/admin-user.html?"+window.config.version}).when("/admin/users",{controller:"AdminUsersController",templateUrl:"bundles/os2displayadmin/apps/adminApp/user/admin-users.html?"+window.config.version}).when("/admin/user/:id",{controller:"AdminUserController",templateUrl:"bundles/os2displayadmin/apps/adminApp/user/admin-user.html?"+window.config.version}).when("/admin/groups",{controller:"AdminGroupsController",templateUrl:"bundles/os2displayadmin/apps/adminApp/group/admin-groups.html?"+window.config.version}).when("/admin/group/:id",{controller:"AdminGroupController",templateUrl:"bundles/os2displayadmin/apps/adminApp/group/admin-group.html?"+window.config.version})}]),angular.module("adminApp").service("adminAppSetup",["busService","userService",function(e,t){"use strict";e.$on("menuApp.requestMainMenuItems",function(i,o){(t.hasRole("ROLE_USER_ADMIN")||t.hasRole("ROLE_GROUP_ADMIN"))&&e.$emit("menuApp.returnMainMenuItems",[{title:"Admin",route:"/#/admin",activeFilter:"/admin",icon:"picture_in_picture",weight:5}])}),e.$on("menuApp.requestSubMenuItems",function(i,o){var n=[];t.hasRole("ROLE_USER_ADMIN")&&t.hasRole("ROLE_GROUP_ADMIN")&&n.push({title:"Oversigt",path:"#/admin",classes:"overview-right",activeFilter:"/admin",group:"left",weight:1}),t.hasRole("ROLE_USER_ADMIN")&&n.push({title:"Brugere",path:"#/admin/users",classes:"admin-users",activeFilter:"/admin/users",group:"left",weight:2}),t.hasRole("ROLE_GROUP_ADMIN")&&n.push({title:"Grupper",path:"#/admin/groups",classes:"overview-right",activeFilter:"/admin/groups",group:"left",weight:3}),e.$emit("menuApp.returnSubMenuItems",[{mainMenuItem:"admin",items:n}])})}]),angular.module("adminApp").run(["adminAppSetup",angular.noop]),angular.module("adminApp").controller("AdminDashboardController",["busService","$scope","$controller","$location","$filter",function(e,t,i,o,n){"use strict";i("BaseController",{$scope:t});var s=n("translate"),r=t.requireRole("ROLE_GROUP_ADMIN"),a=t.requireRole("ROLE_USER_ADMIN");if(!r||!a)return e.$emit("log.error",{timeout:5e3,cause:403,msg:s("common.error.forbidden")}),void(r?o.path("/admin/groups"):a?o.path("/admin/users"):o.path("/"));i("AdminUsersController",{$scope:t}),i("AdminGroupsController",{$scope:t}),t.max=5,t.allLinks=!0}]),angular.module("adminApp").controller("AdminGroupsController",["busService","$scope","$timeout","ModalService","$controller","$filter","$location",function(e,t,i,o,n,s,r){"use strict";n("BaseApiController",{$scope:t});var a=s("translate");if(!t.requireRole("ROLE_GROUP_ADMIN"))return e.$emit("log.error",{timeout:5e3,cause:403,msg:a("common.error.forbidden")}),void r.path("/");function h(e){var i=[];t.baseCanRead(e)&&i.push({url:"#/admin/group/"+e.id,title:a("group.action.view")}),t.baseCanUpdate(e)&&i.push({url:"#/admin/group/"+e.id,title:a("group.action.edit")}),t.baseCanDelete(e)&&i.push({click:t.deleteGroup,entity:e,title:a("group.action.delete")}),t.groups.push({id:e.id,url:"#/admin/group/"+e.id,title:e.displayName,actions:i})}t.groupsLoading=!0,t.groups=null,t.max=null,t.getEntities("group").then(function(e){t.groups=[];for(var i in e)e.hasOwnProperty(i)&&h(e[i])},function(t){e.$emit("log.error",{timeout:5e3,cause:t.code,msg:a("group.messages.groups_not_found")})}).then(function(){t.groupsLoading=!1}),t.createGroup=function(){o.showModal({templateUrl:"bundles/os2displayadmin/apps/adminApp/group/popup-create-group.html",controller:"PopupCreateGroup"}).then(function(e){e.close.then(function(e){e&&h(e)})})},t.deleteGroup=function(e){o.showModal({templateUrl:"bundles/os2displayadmin/apps/adminApp/group/popup-delete-group.html",controller:"PopupDeleteGroup",inputs:{group:e}}).then(function(e){e.close.then(function(e){var o;e&&(o=e,i(function(){t.baseRemoveElementFromList(t.groups,o,"id")}))})})}}]),angular.module("adminApp").controller("AdminGroupController",["busService","$scope","$timeout","ModalService","$routeParams","$location","$controller","$filter","userService",function(e,t,i,o,n,s,r,a,h){"use strict";r("BaseApiController",{$scope:t});var d=a("translate");if(!t.requireRole("ROLE_GROUP_ADMIN"))return e.$emit("log.error",{timeout:5e3,cause:403,msg:d("common.error.forbidden")}),void s.path("/");t.group=null,t.loading=!0,t.users=null;var l=null;function c(e){var i=[];t.baseApiRequest("get","/api/user/"+e.id+"/group/"+t.group.id).then(function(o){if(t.baseCanUpdate(t.group)){for(var n in l)if(-1===o.roles.indexOf(n)){var s=l[n];i.push({title:d("group.action.set_group_role",{roleName:s}),click:t.setRoleToUser,entity:{user:e,roles:[n]}})}i.push({title:d("group.action.remove_user"),click:t.removeUserFromGroup,entity:e})}var r="";for(var a in o.roles)a=o.roles[a],r=r+"("+(l[a]?l[a]:a)+") ";t.users.push({id:e.id,url:"#/admin/user/"+e.id,title:e.displayName,actions:i,text:r})},function(e){console.error(e)})}t.setRoleToUser=function(i){t.baseApiRequest("put","/api/user/"+i.user.id+"/group/"+t.group.id,{roles:i.roles}).then(function(o){e.$emit("log.info",{timeout:2e3,msg:d("group.messages.user_role_set")}),i.user.roles=o.roles,t.baseRemoveElementFromList(t.users,i.user,"id"),c(i.user)},function(t){e.$emit("log.error",{cause:t.code,msg:d("group.messages.user_role_not_set")})})},t.removeUserFromGroup=function(o){t.baseApiRequest("delete","/api/user/"+o.id+"/group/"+t.group.id).then(function(){i(function(){e.$emit("log.info",{timeout:2e3,msg:d("group.messages.user_removed_from_group")}),o.id===h.getCurrentUser().id&&h.updateCurrentUser(),t.baseRemoveElementFromList(t.users,o,"id")})},function(t){e.$emit("log.error",{timeout:5e3,cause:t.code,msg:d("group.messages.user_not_removed_from_group")})})},t.baseApiRequest("get","/api/group/roles").then(function(e){l=e}).then(function(){t.getEntity("group",{id:n.id}).then(function(e){t.group=e,t.users=[];for(var i in t.group.users)c(t.group.users[i]);t.loading=!1},function(t){e.$emit("log.error",{timeout:5e3,cause:t.code,msg:d("group.messages.group_not_found")}),s.path("/admin")})}),t.showAddUserModal=function(){o.showModal({templateUrl:"bundles/os2displayadmin/apps/adminApp/group/popup-add-user.html",controller:"PopupAddUser",inputs:{group:t.group,groupUsers:t.users,addedUserCallback:c}}).then(function(e){e.close.then(function(){})})},t.submitForm=function(i){t.loading||(i.$invalid?e.$emit("log.error",{timeout:5e3,cause:err.code,msg:d("group.messages.form_invalid")}):(t.loading=!0,t.updateEntity("group",t.group).then(function(i){t.group=i,t.loading=!1,e.$emit("log.info",{timeout:3e3,msg:d("group.messages.group_updated")})},function(t){e.$emit("log.error",{cause:t.code,msg:d("group.messages.group_not_updated")})})))}}]),angular.module("adminApp").controller("PopupCreateGroup",["busService","$scope","$timeout","close","$controller","$filter",function(e,t,i,o,n,s){"use strict";n("BaseApiController",{$scope:t});var r=s("translate");t.group={title:""},t.loading=!1,t.errors=[],t.forms={},t.closeModal=function(){o(null)},t.submitForm=function(i){t.loading||(t.errors=[],i.$invalid?t.errors.push(r("group.texts.error_form_invalid")):(t.loading=!0,t.createEntity("group",t.group).then(function(t){e.$emit("log.info",{timeout:5e3,msg:r("group.messages.group_created")}),o(t)},function(e){409===e.code?t.errors.push(r("group.texts.error_group_already_exists")):t.errors.push(r("group.texts.error_could_not_create_group"))}).then(function(){t.loading=!1})))}}]),angular.module("adminApp").controller("PopupDeleteGroup",["busService","$scope","$timeout","close","$controller","group","$filter","userService",function(e,t,i,o,n,s,r,a){"use strict";n("BaseApiController",{$scope:t});var h=r("translate");t.group=s,t.loading=!1,t.errors=[],t.forms={},t.closeModal=function(){o(null)},t.submitForm=function(i){t.loading||(t.errors=[],t.loading=!0,t.deleteEntity("group",t.group).then(function(){e.$emit("log.info",{timeout:5e3,msg:h("group.messages.group_deleted")}),a.updateCurrentUser(),o(t.group)},function(e){t.errors.push(h("group.texts.error_could_not_delete_group"))}).then(function(){t.loading=!1}))}}]),angular.module("adminApp").controller("PopupAddUser",["busService","$scope","$timeout","close","$controller","group","groupUsers","addedUserCallback","$filter","userService",function(e,t,i,o,n,s,r,a,h,d){"use strict";n("BaseApiController",{$scope:t});var l=h("translate");function c(e){r.find(function(t){return t.id===e.id})||t.users.push({id:e.id,title:e.displayName,entity:e,click:t.addUser})}t.loading=!1,t.errors=[],t.forms={},t.users=[],t.addUser=function(e){t.errors=[],t.baseApiRequest("post","/api/user/"+e.id+"/group/"+s.id,{roles:["ROLE_GROUP_ROLE_USER"]}).then(function(i){i.user.id===d.getCurrentUser().id&&d.updateCurrentUser(),a(e),t.baseRemoveElementFromList(t.users,e,"id")},function(e){t.errors.push(l("group.texts.error_adding_user"))})},t.users=[],t.getEntities("user").then(function(e){for(var t in e)c(e[t])},function(t){e.$emit("log.error",{timeout:5e3,cause:t.code,msg:l("group.messages.unable_to_load_users")}),$location.path("/admin")}).then(function(){t.loading=!1}),t.closeModal=function(){o(null)}}]),angular.module("adminApp").controller("AdminUsersController",["busService","$scope","$timeout","ModalService","$controller","$filter","$location",function(e,t,i,o,n,s,r){"use strict";n("BaseApiController",{$scope:t});var a=s("translate");if(!t.requireRole("ROLE_USER_ADMIN"))return e.$emit("log.error",{timeout:5e3,cause:403,msg:a("common.error.forbidden")}),void r.path("/");function h(e){var i=[];t.baseCanRead(e)&&i.push({url:"#/admin/user/"+e.id,title:a("user.action.view")}),t.baseCanUpdate(e)&&i.push({url:"#/admin/user/"+e.id,title:a("user.action.edit")}),t.baseCanDelete(e)&&i.push({click:t.deleteUser,entity:e,title:a("user.action.delete")}),t.users.push({id:e.id,url:"#/admin/user/"+e.id,title:e.displayName,actions:i})}t.usersLoading=!0,t.users=null,t.max=null,t.getEntities("user").then(function(e){t.users=[];for(var i in e)e.hasOwnProperty(i)&&h(e[i])},function(t){e.$emit("log.error",{cause:t.code,msg:a("user.messages.users_not_found")})}).then(function(){t.usersLoading=!1}),t.createUser=function(){o.showModal({templateUrl:"bundles/os2displayadmin/apps/adminApp/user/popup-create-user.html",controller:"PopupCreateUser"}).then(function(e){e.close.then(function(e){e&&h(e)})})},t.deleteUser=function(e){o.showModal({templateUrl:"bundles/os2displayadmin/apps/adminApp/user/popup-delete-user.html",controller:"PopupDeleteUser",inputs:{user:e}}).then(function(e){e.close.then(function(e){var o;e&&(o=e,i(function(){t.baseRemoveElementFromList(t.users,o,"id")}))})})}}]),angular.module("adminApp").controller("AdminUserController",["busService","$scope","$timeout","ModalService","$routeParams","$location","$controller","$filter","userService",function(e,t,i,o,n,s,r,a,h){"use strict";r("BaseApiController",{$scope:t});var d=a("translate");t.user=null,t.userRoles=[],t.userGroups=[],t.loading=!0,t.forms={};var l=function(e,i){var o=[];t.baseCanUpdate(t.user)&&o.push({title:d("user.action.remove_role"),click:t.removeRoleFromUser,entity:e});var n={id:e,title:i,actions:o};t.userRoles.push(n)},c=function(o){t.loading=!0;var n=angular.copy(t.user);n.roles[o.id]=o.title,t.baseApiRequest("put","/api/user/"+t.user.id,n).then(function(e){i(function(){u(e)})},function(t){e.$emit("log.error",{cause:t.code,msg:d("user.messages.could_not_add_role_to_user")})}).then(function(){t.loading=!1})};function u(e){t.user=e,t.userRoles=[],t.userGroups=[];for(var i in t.user.roles)l(i,t.user.roles[i]);for(var o in t.user.groups){o=t.user.groups[o];t.userGroups.push({id:o.id,title:o.displayName,url:"#/admin/group/"+o.id})}}if(n.id){if(!t.requireRole("ROLE_USER_ADMIN"))return e.$emit("log.error",{timeout:5e3,cause:403,msg:d("common.error.forbidden")}),void s.path("/");t.getEntity("user",{id:n.id}).then(function(e){i(function(){u(e)})},function(t){e.$emit("log.error",{timeout:5e3,cause:t.code,msg:d("user.messages.user_not_found")}),s.path("/admin")}).then(function(){t.loading=!1})}else t.loading=!1,u(t.baseCurrentUser);t.removeRoleFromUser=function(o){t.loading=!0;var n=angular.copy(t.user);delete n.roles[o],t.baseApiRequest("put","/api/user/"+t.user.id,n).then(function(e){e.id===h.getCurrentUser().id&&h.updateCurrentUser(),i(function(){u(e)})},function(t){e.$emit("log.error",{cause:t.code,msg:d("user.messages.could_not_remove_role_from_user")})}).then(function(){t.loading=!1})},t.showAddRoleModal=function(){o.showModal({templateUrl:"bundles/os2displayadmin/apps/adminApp/user/popup-add-role-to-user.html",controller:"PopupAddRoleToUser",inputs:{options:{type:"user/roles",list:t.userRoles,heading:d("user.action.search_for_role"),searchPlaceholder:"",clickCallback:c}}}).then(function(e){e.close.then(function(){})})},t.submitForm=function(i){t.loading||(i.$invalid?e.$emit("log.error",{timeout:5e3,cause:err.code,msg:d("common.form.invalid")}):(t.loading=!0,t.updateEntity("user",t.user).then(function(t){t.id===h.getCurrentUser().id&&h.updateCurrentUser(),u(t),e.$emit("log.info",{timeout:3e3,msg:d("user.messages.user_updated")})},function(t){409===t.code?e.$emit("log.error",{cause:t.code,msg:d("user.messages.user_not_updated_conflict")}):e.$emit("log.error",{cause:t.code,msg:d("user.messages.user_not_updated")})}).then(function(){t.loading=!1})))}}]),angular.module("adminApp").controller("PopupCreateUser",["busService","$scope","$timeout","close","$controller","$filter",function(e,t,i,o,n,s){"use strict";n("BaseApiController",{$scope:t});var r=s("translate");t.user={email:""},t.loading=!1,t.errors=[],t.forms={},t.closeModal=function(){o(null)},t.submitForm=function(i){t.loading||(t.errors=[],i.emailInput.$invalid?t.errors.push(r("user.texts.error_email_not_valid")):(t.loading=!0,t.createEntity("user",t.user).then(function(t){e.$emit("log.info",{timeout:5e3,msg:r("user.messages.user_created")}),o(t)},function(e){400===e.code?t.errors.push(r("common.form.invalid")):409===e.code?t.errors.push(r("user.texts.user_not_created_conflict")):t.errors.push(r("user.texts.user_not_created"))}).then(function(){t.loading=!1})))}}]),angular.module("adminApp").controller("PopupDeleteUser",["busService","$scope","$timeout","close","$controller","user","$filter",function(e,t,i,o,n,s,r){"use strict";n("BaseApiController",{$scope:t});var a=r("translate");t.user=s,t.loading=!1,t.closeModal=function(){o(null)},t.submitForm=function(i){t.loading||(t.loading=!0,t.deleteEntity("user",t.user).then(function(){e.$emit("log.info",{timeout:5e3,msg:a("user.messages.user_deleted")}),o(t.user)},function(t){e.$emit("log.error",{cause:t.code,timeout:5e3,msg:a("user.messages.user_not_deleted")})}).then(function(){t.loading=!1}))}}]),angular.module("adminApp").controller("PopupAddRoleToUser",["busService","$scope","$timeout","$controller","close","options","$filter",function(e,t,i,o,n,s,r){"use strict";o("BaseApiController",{$scope:t});var a=r("translate");function h(e){s.list.find(function(t){return t.id===e.id})||t.elements.push({id:e.id,title:e.title,entity:e,click:t.clickCallback})}t.loading=!1,t.clickCallback=s.clickCallback,t.heading=s.heading,t.searchPlaceholder=s.searchPlaceholder,t.elements=[],t.getEntities(s.type).then(function(e){for(var t in e)h({id:t,title:e[t]})},function(t){e.$emit("log.error",{cause:t.code,msg:a("user.messages.roles_not_found")})}).then(function(){t.loading=!1}),t.closeModal=function(){n(null)}}]);